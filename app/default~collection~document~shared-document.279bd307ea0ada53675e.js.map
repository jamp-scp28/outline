{"version":3,"sources":["webpack:///./shared/editor/queries/findAttachmentById.ts","webpack:///./shared/editor/commands/insertFiles.ts","webpack:///./app/utils/urls.ts","webpack:///./shared/editor/components/Frame.tsx","webpack:///./shared/utils/color.ts","webpack:///./shared/editor/components/FileExtension.tsx","webpack:///./shared/editor/components/Image.tsx","webpack:///./shared/editor/embeds/Abstract.tsx","webpack:///./shared/editor/embeds/Airtable.tsx","webpack:///./shared/editor/embeds/Berrycast.tsx","webpack:///./shared/editor/components/useComponentSize.ts","webpack:///./shared/editor/embeds/Bilibili.tsx","webpack:///./shared/editor/embeds/Cawemo.tsx","webpack:///./shared/editor/embeds/ClickUp.tsx","webpack:///./shared/editor/embeds/Codepen.tsx","webpack:///./shared/editor/embeds/DBDiagram.tsx","webpack:///./shared/editor/embeds/Descript.tsx","webpack:///./shared/editor/embeds/Diagrams.tsx","webpack:///./shared/editor/embeds/Figma.tsx","webpack:///./shared/editor/embeds/Framer.tsx","webpack:///./shared/editor/embeds/Gist.tsx","webpack:///./shared/editor/embeds/Gliffy.tsx","webpack:///./shared/editor/embeds/GoogleCalendar.tsx","webpack:///./shared/editor/embeds/GoogleDataStudio.tsx","webpack:///./shared/editor/embeds/GoogleDocs.tsx","webpack:///./shared/editor/embeds/GoogleDrawings.tsx","webpack:///./shared/editor/embeds/GoogleDrive.tsx","webpack:///./shared/editor/embeds/GoogleSheets.tsx","webpack:///./shared/editor/embeds/GoogleSlides.tsx","webpack:///./shared/editor/embeds/InVision.tsx","webpack:///./shared/editor/embeds/JSFiddle.tsx","webpack:///./shared/editor/embeds/Loom.tsx","webpack:///./shared/editor/embeds/Lucidchart.tsx","webpack:///./shared/editor/embeds/Marvel.tsx","webpack:///./shared/editor/embeds/Mindmeister.tsx","webpack:///./shared/editor/embeds/Miro.tsx","webpack:///./shared/editor/embeds/ModeAnalytics.tsx","webpack:///./shared/editor/embeds/Otter.tsx","webpack:///./shared/editor/embeds/Pitch.tsx","webpack:///./shared/editor/embeds/Prezi.tsx","webpack:///./shared/editor/embeds/Scribe.tsx","webpack:///./shared/editor/embeds/Spotify.tsx","webpack:///./shared/editor/embeds/Tldraw.tsx","webpack:///./shared/editor/embeds/Trello.tsx","webpack:///./shared/editor/embeds/Typeform.tsx","webpack:///./shared/editor/embeds/Vimeo.tsx","webpack:///./shared/editor/embeds/Whimsical.tsx","webpack:///./shared/editor/embeds/YouTube.tsx","webpack:///./shared/editor/embeds/index.tsx","webpack:///./shared/utils/parseDocumentSlug.ts","webpack:///./app/components/ClickablePadding.ts","webpack:///./app/components/HoverPreviewDocument.tsx","webpack:///./app/components/HoverPreview.tsx","webpack:///./app/components/Editor.tsx","webpack:///./app/hooks/useDictionary.ts","webpack:///./shared/editor/lib/uploadPlaceholder.tsx","webpack:///./app/components/DocumentMetaWithViews.tsx","webpack:///./app/components/DocumentViews.tsx"],"names":["findAttachmentById","state","id","result","doc","descendants","node","pos","type","name","attrs","nodeSize","insertFiles","view","event","files","options","dictionary","uploadFile","onFileUploadStart","onFileUploadStop","onShowToast","preventDefault","schema","complete","file","uuidv4","isImage","startsWith","isAttachment","tr","setMeta","uploadPlaceholderPlugin","add","replaceExisting","dispatch","$pos","resolve","replaceWith","nodeAfter","nodes","attachment","create","title","size","then","src","newImg","Image","onload","findPlaceholder","from","to","image","remove","selection","setSelection","NodeSelection","onerror","error","href","catch","Sentry","deleteRange","message","fileUploadError","finally","length","console","warn","isHash","outline","URL","window","location","parsed","hostname","pathname","hash","e","decodeURIComponentSafe","text","decodeURIComponent","replace","Frame","observer","loadIframe","mounted","isLoaded","componentDidMount","this","setImmediate","componentWillUnmount","render","props","border","width","height","forwardedRef","icon","canonicalUrl","isSelected","referrerPolicy","withBar","Rounded","$withBar","$border","className","Iframe","ref","sandbox","frameBorder","loading","allowFullScreen","Bar","Title","Open","target","rel","color","React","observable","styled","iframe","div","theme","embedBorder","a","textSecondary","span","secondaryBackground","palette","brand","red","blue","purple","pink","marine","green","yellow","darken","stringToColor","input","inputAsNumber","parseInt","md5","toString","FileExtension","parts","split","extension","pop","undefined","Icon","style","background","$size","slice","fontFamilyMono","alt","rest","cdnPath","Abstract","shareId","matches","ENABLED","RegExp","URL_REGEX","Airtable","Berrycast","normalizedUrl","useComponentSize","useState","current","clientWidth","clientHeight","setSize","useEffect","sizeObserver","ResizeObserver","entries","forEach","observe","disconnect","Vimeo","videoId","Cawemo","ClickUp","Codepen","DBDiagram","Descript","Diagrams","get","documentTitle","embedUrl","searchParams","Figma","Framer","Gist","gistLink","gistScript","iframeHtml","btoa","scrolling","Gliffy","GoogleCalendar","GoogleDataStudio","GoogleDocs","GoogleDrawings","GoogleDrive","GoogleSheets","GoogleSlides","IMAGE_REGEX","InVision","test","maxWidth","maxHeight","shouldRespectMaxDimension","JSFiddle","useTheme","isDark","Loom","Lucidchart","chartId","groups","Marvel","Mindmeister","RealtimeBoard","domain","boardId","titleName","ModeAnalytics","Otter","Pitch","Prezi","url","Scribe","Spotify","err","normalizedPath","includes","allow","Tldraw","Trello","objectId","Typeform","hId","Whimsical","YouTube","matcher","Component","regex","match","Img","embeds","keywords","defaultHidden","component","Bilibili","Miro","parseDocumentSlug","lastIndexOf","ClickablePadding","onClick","grow","Content","Link","Heading","h2","HoverPreviewDocument","children","documents","useStores","slug","prefetchDocument","document","getByUrl","titleWithDefault","DocumentMetaWithViews","isDraft","fallback","key","defaultValue","getSummary","embedsDisabled","readOnly","HoverPreviewInternal","onClose","isVisible","setVisible","timerClose","timerOpen","cardRef","startCloseTimer","stopOpenTimer","setTimeout","stopCloseTimer","clearTimeout","startOpenTimer","addEventListener","removeEventListener","anchorBounds","getBoundingClientRect","left","Math","min","innerWidth","leftOffset","Position","top","bottom","scrollY","aria-hidden","content","Animate","Card","Margin","CardContent","Pointer","offset","fadeAndSlideDown","transparentize","fixed","depths","hoverPreview","menuBorder","HoverPreview","useMobile","isExternalUrl","LazyLoadedEditor","Editor","showToast","useToasts","useDictionary","t","useTranslation","addColumnAfter","addColumnBefore","addRowAfter","addRowBefore","alignCenter","alignLeft","alignRight","bulletList","checkboxList","codeBlock","codeCopied","codeInline","createLink","createLinkError","createNewDoc","deleteColumn","deleteRow","deleteTable","deleteImage","downloadImage","replaceImage","alignImageLeft","alignImageRight","alignImageDefault","em","embedInvalidLink","findOrCreateDoc","h1","h3","heading","hr","imageCaptionPlaceholder","info","infoNotice","link","linkCopied","mark","newLineEmpty","newLineWithSlash","noResults","openLink","goToLink","orderedList","pageBreak","pasteLink","pasteLinkWithTitle","service","placeholder","quote","removeLink","searchOrPasteLink","strikethrough","strong","subheading","table","tip","tipNotice","warning","warningNotice","insertDate","insertTime","insertDateTime","activeLinkEvent","setActiveLinkEvent","handleLinkActive","handleLinkInactive","handleSearchLink","term","isInternalUrl","fetch","time","formatDistanceToNow","Date","parse","updatedAt","addSuffix","subtitle","NotFoundError","searchTitles","results","map","DocumentBreadcrumb","onlyText","toLowerCase","onUploadFile","documentId","onClickLink","isModKey","shiftKey","open","navigateTo","history","push","focusAtEnd","handleDrop","stopPropagation","getDataTransferFiles","some","supportedImageMimeTypes","TextSelection","near","handleDragOver","ErrorBoundary","reloadOnChunkMissing","onHoverLink","onSearchLink","onDrop","onDragOver","uploadPlaceholder","Plugin","init","DecorationSet","empty","apply","set","mapping","action","getMeta","deco","Decoration","class","element","createElement","img","createObjectURL","appendChild","widget","ReactDOM","innerText","status","find","spec","decorations","getState","found","Meta","DocumentMeta","rtl","views","documentViews","useObserver","inDocument","totalViewers","onlyYou","user","isDeleted","fetchPage","popover","usePopoverState","gutter","placement","modal","aria-label","tabIndex","isOpen","visible","DocumentViews","documentPresence","presence","documentPresenceArray","Array","values","presentIds","p","userId","editingIds","filter","isEditing","sortedViews","users","v","items","renderItem","item","isPresent","timeAgo","lastViewedAt","avatarUrl","small"],"mappings":"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","file":"default~collection~document~shared-document.279bd307ea0ada53675e.js","sourcesContent":["import { EditorState } from \"prosemirror-state\";\n\nconst findAttachmentById = function (\n  state: EditorState,\n  id: string\n): [number, number] | null {\n  let result: [number, number] | null = null;\n\n  state.doc.descendants((node, pos) => {\n    if (result) {\n      return false;\n    }\n    if (node.type.name === \"attachment\" && node.attrs.id === id) {\n      result = [pos, pos + node.nodeSize];\n      return false;\n    }\n    return true;\n  });\n\n  return result;\n};\n\nexport default findAttachmentById;\n","import * as Sentry from \"@sentry/react\";\nimport { NodeSelection } from \"prosemirror-state\";\nimport { EditorView } from \"prosemirror-view\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport uploadPlaceholderPlugin, {\n  findPlaceholder,\n} from \"../lib/uploadPlaceholder\";\nimport findAttachmentById from \"../queries/findAttachmentById\";\n\nexport type Options = {\n  dictionary: any;\n  /** Set to true to force images to become attachments */\n  isAttachment?: boolean;\n  /** Set to true to replace any existing image at the users selection */\n  replaceExisting?: boolean;\n  uploadFile?: (file: File) => Promise<string>;\n  onFileUploadStart?: () => void;\n  onFileUploadStop?: () => void;\n  onShowToast: (message: string) => void;\n};\n\nconst insertFiles = function (\n  view: EditorView,\n  event:\n    | Event\n    | React.ChangeEvent<HTMLInputElement>\n    | React.DragEvent<HTMLDivElement>,\n  pos: number,\n  files: File[],\n  options: Options\n): void {\n  const {\n    dictionary,\n    uploadFile,\n    onFileUploadStart,\n    onFileUploadStop,\n    onShowToast,\n  } = options;\n\n  if (!uploadFile) {\n    console.warn(\"uploadFile callback must be defined to handle uploads.\");\n    return;\n  }\n\n  // okay, we have some dropped files and a handler – lets stop this\n  // event going any further up the stack\n  event.preventDefault();\n\n  // let the user know we're starting to process the files\n  if (onFileUploadStart) {\n    onFileUploadStart();\n  }\n\n  const { schema } = view.state;\n\n  // we'll use this to track of how many files have succeeded or failed\n  let complete = 0;\n\n  // the user might have dropped multiple files at once, we need to loop\n  for (const file of files) {\n    const id = `upload-${uuidv4()}`;\n    const isImage = file.type.startsWith(\"image/\") && !options.isAttachment;\n    const { tr } = view.state;\n\n    if (isImage) {\n      // insert a placeholder at this position, or mark an existing file as being\n      // replaced\n      tr.setMeta(uploadPlaceholderPlugin, {\n        add: {\n          id,\n          file,\n          pos,\n          isImage,\n          replaceExisting: options.replaceExisting,\n        },\n      });\n      view.dispatch(tr);\n    } else {\n      const $pos = tr.doc.resolve(pos);\n      view.dispatch(\n        view.state.tr.replaceWith(\n          $pos.pos,\n          $pos.pos + ($pos.nodeAfter?.nodeSize || 0),\n          schema.nodes.attachment.create({\n            id,\n            title: file.name ?? \"Untitled\",\n            size: file.size,\n          })\n        )\n      );\n    }\n\n    // start uploading the file to the server. Using \"then\" syntax\n    // to allow all placeholders to be entered at once with the uploads\n    // happening in the background in parallel.\n    uploadFile(file)\n      .then((src) => {\n        if (isImage) {\n          const newImg = new Image();\n          newImg.onload = () => {\n            const result = findPlaceholder(view.state, id);\n\n            // if the content around the placeholder has been deleted\n            // then forget about inserting this file\n            if (result === null) {\n              return;\n            }\n\n            const [from, to] = result;\n            view.dispatch(\n              view.state.tr\n                .replaceWith(\n                  from,\n                  to || from,\n                  schema.nodes.image.create({ src })\n                )\n                .setMeta(uploadPlaceholderPlugin, { remove: { id } })\n            );\n\n            // If the users selection is still at the file then make sure to select\n            // the entire node once done. Otherwise, if the selection has moved\n            // elsewhere then we don't want to modify it\n            if (view.state.selection.from === from) {\n              view.dispatch(\n                view.state.tr.setSelection(\n                  new NodeSelection(view.state.doc.resolve(from))\n                )\n              );\n            }\n          };\n\n          newImg.onerror = (error) => {\n            throw error;\n          };\n\n          newImg.src = src;\n        } else {\n          const result = findAttachmentById(view.state, id);\n\n          // if the attachment has been deleted then forget about updating it\n          if (result === null) {\n            return;\n          }\n\n          const [from, to] = result;\n          view.dispatch(\n            view.state.tr.replaceWith(\n              from,\n              to || from,\n              schema.nodes.attachment.create({\n                href: src,\n                title: file.name ?? \"Untitled\",\n                size: file.size,\n              })\n            )\n          );\n\n          // If the users selection is still at the file then make sure to select\n          // the entire node once done. Otherwise, if the selection has moved\n          // elsewhere then we don't want to modify it\n          if (view.state.selection.from === from) {\n            view.dispatch(\n              view.state.tr.setSelection(\n                new NodeSelection(view.state.doc.resolve(from))\n              )\n            );\n          }\n        }\n      })\n      .catch((error) => {\n        Sentry.captureException(error);\n\n        // cleanup the placeholder if there is a failure\n        if (isImage) {\n          view.dispatch(\n            view.state.tr.setMeta(uploadPlaceholderPlugin, {\n              remove: { id },\n            })\n          );\n        } else {\n          const result = findAttachmentById(view.state, id);\n\n          // if the attachment has been deleted then forget about updating it\n          if (result === null) {\n            return;\n          }\n\n          const [from, to] = result;\n          view.dispatch(view.state.tr.deleteRange(from, to || from));\n        }\n\n        onShowToast(error.message || dictionary.fileUploadError);\n      })\n      .finally(() => {\n        complete++;\n\n        // once everything is done, let the user know\n        if (complete === files.length && onFileUploadStop) {\n          onFileUploadStop();\n        }\n      });\n  }\n};\n\nexport default insertFiles;\n","export function isHash(href: string) {\n  if (href[0] === \"#\") {\n    return true;\n  }\n\n  try {\n    const outline = new URL(window.location.href);\n    const parsed = new URL(href);\n\n    if (\n      outline.hostname === parsed.hostname &&\n      outline.pathname === parsed.pathname &&\n      !!parsed.hash\n    ) {\n      return true;\n    }\n  } catch (e) {\n    // failed to parse as url\n  }\n\n  return false;\n}\n\nexport function decodeURIComponentSafe(text: string) {\n  return text\n    ? decodeURIComponent(text.replace(/%(?![0-9][0-9a-fA-F]+)/g, \"%25\"))\n    : text;\n}\n","import { observable } from \"mobx\";\nimport { observer } from \"mobx-react\";\nimport { OpenIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport styled from \"styled-components\";\nimport { Optional } from \"utility-types\";\n\ntype Props = Omit<Optional<HTMLIFrameElement>, \"children\"> & {\n  src?: string;\n  border?: boolean;\n  title?: string;\n  icon?: React.ReactNode;\n  canonicalUrl?: string;\n  isSelected?: boolean;\n  width?: string;\n  height?: string;\n  allow?: string;\n};\n\ntype PropsWithRef = Props & {\n  forwardedRef: React.Ref<HTMLIFrameElement>;\n};\n\n@observer\nclass Frame extends React.Component<PropsWithRef> {\n  mounted: boolean;\n\n  @observable\n  isLoaded = false;\n\n  componentDidMount() {\n    this.mounted = true;\n    setImmediate(this.loadIframe);\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  loadIframe = () => {\n    if (!this.mounted) {\n      return;\n    }\n    this.isLoaded = true;\n  };\n\n  render() {\n    const {\n      border,\n      width = \"100%\",\n      height = \"400px\",\n      forwardedRef,\n      icon,\n      title,\n      canonicalUrl,\n      isSelected,\n      referrerPolicy,\n      src,\n    } = this.props;\n    const withBar = !!(icon || canonicalUrl);\n\n    return (\n      <Rounded\n        width={width}\n        height={height}\n        $withBar={withBar}\n        $border={border}\n        className={isSelected ? \"ProseMirror-selectednode\" : \"\"}\n      >\n        {this.isLoaded && (\n          <Iframe\n            ref={forwardedRef}\n            $withBar={withBar}\n            sandbox=\"allow-same-origin allow-scripts allow-popups allow-forms allow-downloads\"\n            width={width}\n            height={height}\n            frameBorder=\"0\"\n            title=\"embed\"\n            loading=\"lazy\"\n            src={src}\n            referrerPolicy={referrerPolicy}\n            allowFullScreen\n          />\n        )}\n        {withBar && (\n          <Bar>\n            {icon} <Title>{title}</Title>\n            {canonicalUrl && (\n              <Open\n                href={canonicalUrl}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                <OpenIcon color=\"currentColor\" size={18} /> Open\n              </Open>\n            )}\n          </Bar>\n        )}\n      </Rounded>\n    );\n  }\n}\n\nconst Iframe = styled.iframe<{ $withBar: boolean }>`\n  border-radius: ${(props) => (props.$withBar ? \"3px 3px 0 0\" : \"3px\")};\n  display: block;\n`;\n\nconst Rounded = styled.div<{\n  width: string;\n  height: string;\n  $withBar: boolean;\n  $border?: boolean;\n}>`\n  border: 1px solid\n    ${(props) => (props.$border ? props.theme.embedBorder : \"transparent\")};\n  border-radius: 6px;\n  overflow: hidden;\n  width: ${(props) => props.width};\n  height: ${(props) => (props.$withBar ? props.height + 28 : props.height)};\n`;\n\nconst Open = styled.a`\n  color: ${(props) => props.theme.textSecondary} !important;\n  font-size: 13px;\n  font-weight: 500;\n  align-items: center;\n  display: flex;\n  position: absolute;\n  right: 0;\n  padding: 0 8px;\n`;\n\nconst Title = styled.span`\n  font-size: 13px;\n  font-weight: 500;\n  padding-left: 4px;\n`;\n\nconst Bar = styled.div`\n  display: flex;\n  align-items: center;\n  border-top: 1px solid ${(props) => props.theme.embedBorder};\n  background: ${(props) => props.theme.secondaryBackground};\n  color: ${(props) => props.theme.textSecondary};\n  padding: 0 8px;\n  border-bottom-left-radius: 6px;\n  border-bottom-right-radius: 6px;\n  user-select: none;\n`;\n\nexport default React.forwardRef<HTMLIFrameElement, Props>((props, ref) => (\n  <Frame {...props} forwardedRef={ref} />\n));\n","import md5 from \"crypto-js/md5\";\nimport { darken } from \"polished\";\nimport theme from \"../styles/theme\";\n\nexport const palette = [\n  theme.brand.red,\n  theme.brand.blue,\n  theme.brand.purple,\n  theme.brand.pink,\n  theme.brand.marine,\n  theme.brand.green,\n  theme.brand.yellow,\n  darken(0.2, theme.brand.red),\n  darken(0.2, theme.brand.blue),\n  darken(0.2, theme.brand.purple),\n  darken(0.2, theme.brand.pink),\n  darken(0.2, theme.brand.marine),\n  darken(0.2, theme.brand.green),\n  darken(0.2, theme.brand.yellow),\n];\n\nexport const validateColorHex = (color: string) => {\n  return /(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(color);\n};\n\nexport const stringToColor = (input: string) => {\n  const inputAsNumber = parseInt(md5(input).toString(), 16);\n  return palette[inputAsNumber % palette.length];\n};\n","import { AttachmentIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport styled from \"styled-components\";\nimport { stringToColor } from \"../../utils/color\";\n\ntype Props = {\n  title: string;\n  size?: number;\n};\n\nexport default function FileExtension(props: Props) {\n  const parts = props.title.split(\".\");\n  const extension = parts.length > 1 ? parts.pop() : undefined;\n\n  return (\n    <Icon\n      style={{ background: stringToColor(extension || \"\") }}\n      $size={props.size || 28}\n    >\n      {extension ? (\n        <span>{extension?.slice(0, 4)}</span>\n      ) : (\n        <AttachmentIcon color=\"currentColor\" />\n      )}\n    </Icon>\n  );\n}\n\nconst Icon = styled.span<{ $size: number }>`\n  font-family: ${(props) => props.theme.fontFamilyMono};\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 10px;\n  text-transform: uppercase;\n  color: white;\n  text-align: center;\n  border-radius: 4px;\n\n  min-width: ${(props) => props.$size}px;\n  height: ${(props) => props.$size}px;\n`;\n","import * as React from \"react\";\nimport { cdnPath } from \"../../utils/urls\";\n\ntype Props = {\n  alt: string;\n  src: string;\n  title?: string;\n  width?: number;\n  height?: number;\n};\n\nexport default function Image({ src, alt, ...rest }: Props) {\n  return <img src={cdnPath(src)} alt={alt} {...rest} />;\n}\n","import * as React from \"react\";\nimport Frame from \"../components/Frame\";\nimport { EmbedProps as Props } from \".\";\n\nexport default class Abstract extends React.Component<Props> {\n  static ENABLED = [\n    new RegExp(\"https?://share.(?:go)?abstract.com/(.*)$\"),\n    new RegExp(\"https?://app.(?:go)?abstract.com/(?:share|embed)/(.*)$\"),\n  ];\n\n  render() {\n    const { matches } = this.props.attrs;\n    const shareId = matches[1];\n    return (\n      <Frame\n        {...this.props}\n        src={`https://app.goabstract.com/embed/${shareId}`}\n        title={`Abstract (${shareId})`}\n      />\n    );\n  }\n}\n","import * as React from \"react\";\nimport Frame from \"../components/Frame\";\nimport { EmbedProps as Props } from \".\";\n\nconst URL_REGEX = new RegExp(\"https://airtable.com/(?:embed/)?(shr.*)$\");\n\nexport default class Airtable extends React.Component<Props> {\n  static ENABLED = [URL_REGEX];\n\n  render() {\n    const { matches } = this.props.attrs;\n    const shareId = matches[1];\n    return (\n      <Frame\n        {...this.props}\n        src={`https://airtable.com/embed/${shareId}`}\n        title={`Airtable (${shareId})`}\n        border\n      />\n    );\n  }\n}\n","import * as React from \"react\";\nimport Frame from \"../components/Frame\";\nimport useComponentSize from \"../components/useComponentSize\";\nimport { EmbedProps as Props } from \".\";\n\nconst URL_REGEX = /^https:\\/\\/(www\\.)?berrycast.com\\/conversations\\/(.*)$/;\n\nexport default function Berrycast(props: Props) {\n  const normalizedUrl = props.attrs.href.replace(/\\/$/, \"\");\n  const ref = React.useRef<HTMLDivElement>(null);\n  const { width } = useComponentSize(ref);\n\n  return (\n    <>\n      <div ref={ref} />\n      <Frame\n        {...props}\n        src={`${normalizedUrl}/video-player`}\n        title=\"Berrycast Embed\"\n        height={`${0.5625 * width}px`}\n        border={false}\n      />\n    </>\n  );\n}\n\nBerrycast.ENABLED = [URL_REGEX];\n","import { useState, useEffect } from \"react\";\n\nexport default function useComponentSize(\n  ref: React.RefObject<HTMLElement>\n): { width: number; height: number } {\n  const [size, setSize] = useState({\n    width: ref.current?.clientWidth || 0,\n    height: ref.current?.clientHeight || 0,\n  });\n\n  useEffect(() => {\n    const sizeObserver = new ResizeObserver((entries) => {\n      entries.forEach(({ target }) => {\n        if (\n          size.width !== target.clientWidth ||\n          size.height !== target.clientHeight\n        ) {\n          setSize({ width: target.clientWidth, height: target.clientHeight });\n        }\n      });\n    });\n\n    if (ref.current) {\n      sizeObserver.observe(ref.current);\n    }\n\n    return () => sizeObserver.disconnect();\n  }, [ref]);\n\n  return size;\n}\n","import * as React from \"react\";\nimport Frame from \"../components/Frame\";\nimport { EmbedProps as Props } from \".\";\n\nconst URL_REGEX = /(?:https?:\\/\\/)?(www\\.bilibili\\.com)\\/video\\/([\\w\\d]+)?(\\?\\S+)?/i;\n\nexport default class Vimeo extends React.Component<Props> {\n  static ENABLED = [URL_REGEX];\n\n  render() {\n    const { matches } = this.props.attrs;\n    const videoId = matches[2];\n    return (\n      <Frame\n        {...this.props}\n        src={`https://player.bilibili.com/player.html?bvid=${videoId}&page=1&high_quality=1`}\n        title={`Bilibili Embed (${videoId})`}\n      />\n    );\n  }\n}\n","import * as React from \"react\";\nimport Frame from \"../components/Frame\";\nimport { EmbedProps as Props } from \".\";\n\nconst URL_REGEX = new RegExp(\"https?://cawemo.com/(?:share|embed)/(.*)$\");\n\nexport default class Cawemo extends React.Component<Props> {\n  static ENABLED = [URL_REGEX];\n\n  render() {\n    const { matches } = this.props.attrs;\n    const shareId = matches[1];\n    return (\n      <Frame\n        {...this.props}\n        src={`https://cawemo.com/embed/${shareId}`}\n        title={\"Cawemo Embed\"}\n        border\n      />\n    );\n  }\n}\n","import * as React from \"react\";\nimport Frame from \"../components/Frame\";\nimport { EmbedProps as Props } from \".\";\n\nconst URL_REGEX = new RegExp(\n  \"^https?://share.clickup.com/[a-z]/[a-z]/(.*)/(.*)$\"\n);\n\nexport default class ClickUp extends React.Component<Props> {\n  static ENABLED = [URL_REGEX];\n\n  render() {\n    return (\n      <Frame\n        {...this.props}\n        src={this.props.attrs.href}\n        title=\"ClickUp Embed\"\n      />\n    );\n  }\n}\n","import * as React from \"react\";\nimport Frame from \"../components/Frame\";\nimport { EmbedProps as Props } from \".\";\n\nconst URL_REGEX = new RegExp(\"^https://codepen.io/(.*?)/(pen|embed)/(.*)$\");\n\nexport default class Codepen extends React.Component<Props> {\n  static ENABLED = [URL_REGEX];\n\n  render() {\n    const normalizedUrl = this.props.attrs.href.replace(/\\/pen\\//, \"/embed/\");\n    return <Frame {...this.props} src={normalizedUrl} title=\"Codepen Embed\" />;\n  }\n}\n","import * as React from \"react\";\nimport Frame from \"../components/Frame\";\nimport { EmbedProps as Props } from \".\";\n\nexport default class DBDiagram extends React.Component<Props> {\n  static ENABLED = [new RegExp(\"https://dbdiagram.io/(embed|d)/(\\\\w+)$\")];\n\n  render() {\n    const { matches } = this.props.attrs;\n    const shareId = matches[2];\n\n    return (\n      <Frame\n        {...this.props}\n        src={`https://dbdiagram.io/embed/${shareId}`}\n        title={`DBDiagram (${shareId})`}\n        width=\"100%\"\n        height=\"400px\"\n      />\n    );\n  }\n}\n","import * as React from \"react\";\nimport Frame from \"../components/Frame\";\nimport { EmbedProps as Props } from \".\";\n\nexport default class Descript extends React.Component<Props> {\n  static ENABLED = [new RegExp(\"https?://share.descript.com/view/(\\\\w+)$\")];\n\n  render() {\n    const { matches } = this.props.attrs;\n    const shareId = matches[1];\n    return (\n      <Frame\n        {...this.props}\n        src={`https://share.descript.com/embed/${shareId}`}\n        title={`Descript (${shareId})`}\n        width=\"400px\"\n      />\n    );\n  }\n}\n","import * as React from \"react\";\nimport Frame from \"../components/Frame\";\nimport Image from \"../components/Image\";\nimport { EmbedProps as Props } from \".\";\n\nconst URL_REGEX = /^https:\\/\\/viewer\\.diagrams\\.net\\/.*(title=\\\\w+)?/;\n\nexport default class Diagrams extends React.Component<Props> {\n  static ENABLED = [URL_REGEX];\n\n  get embedUrl() {\n    return this.props.attrs.matches[0];\n  }\n\n  get title() {\n    let title = \"Diagrams.net\";\n    const url = new URL(this.embedUrl);\n    const documentTitle = url.searchParams.get(\"title\");\n\n    if (documentTitle) {\n      title += ` (${documentTitle})`;\n    }\n\n    return title;\n  }\n\n  render() {\n    return (\n      <Frame\n        {...this.props}\n        src={this.embedUrl}\n        title={this.title}\n        border\n        icon={\n          <Image\n            src=\"/images/diagrams.png\"\n            alt=\"Diagrams.net\"\n            width={16}\n            height={16}\n          />\n        }\n      />\n    );\n  }\n}\n","import * as React from \"react\";\nimport Frame from \"../components/Frame\";\nimport { EmbedProps as Props } from \".\";\n\nconst URL_REGEX = new RegExp(\n  \"https://([w.-]+.)?figma.com/(file|proto)/([0-9a-zA-Z]{22,128})(?:/.*)?$\"\n);\n\nexport default class Figma extends React.Component<Props> {\n  static ENABLED = [URL_REGEX];\n\n  render() {\n    return (\n      <Frame\n        {...this.props}\n        src={`https://www.figma.com/embed?embed_host=outline&url=${this.props.attrs.href}`}\n        title=\"Figma Embed\"\n        border\n      />\n    );\n  }\n}\n","import * as React from \"react\";\nimport Frame from \"../components/Frame\";\nimport { EmbedProps as Props } from \".\";\n\nconst URL_REGEX = new RegExp(\"^https://framer.cloud/(.*)$\");\n\nexport default class Framer extends React.Component<Props> {\n  static ENABLED = [URL_REGEX];\n\n  render() {\n    return (\n      <Frame\n        {...this.props}\n        src={this.props.attrs.href}\n        title=\"Framer Embed\"\n        border\n      />\n    );\n  }\n}\n","import * as React from \"react\";\nimport styled from \"styled-components\";\nimport { EmbedProps as Props } from \".\";\n\nconst URL_REGEX = new RegExp(\n  \"^https://gist.github.com/([a-zA-Z\\\\d](?:[a-zA-Z\\\\d]|-(?=[a-zA-Z\\\\d])){0,38})/(.*)$\"\n);\n\nclass Gist extends React.Component<Props> {\n  static ENABLED = [URL_REGEX];\n\n  get id() {\n    const gistUrl = new URL(this.props.attrs.href);\n    return gistUrl.pathname.split(\"/\")[2];\n  }\n\n  render() {\n    const id = this.id;\n    const gistLink = `https://gist.github.com/${id}.js`;\n    const gistScript = `<script type=\"text/javascript\" src=\"${gistLink}\"></script>`;\n    const styles =\n      \"<style>*{ font-size:12px; } body { margin: 0; } .gist .blob-wrapper.data { max-height:150px; overflow:auto; }</style>\";\n    const iframeHtml = `<html><head><base target=\"_parent\">${styles}</head><body>${gistScript}</body></html>`;\n\n    return (\n      <Iframe\n        src={`data:text/html;base64,${btoa(iframeHtml)}`}\n        className={this.props.isSelected ? \"ProseMirror-selectednode\" : \"\"}\n        frameBorder=\"0\"\n        width=\"100%\"\n        height=\"200px\"\n        scrolling=\"no\"\n        id={`gist-${id}`}\n        title=\"Github Gist\"\n      />\n    );\n  }\n}\n\nconst Iframe = styled.iframe`\n  margin-top: 8px;\n`;\n\nexport default Gist;\n","import * as React from \"react\";\nimport Frame from \"../components/Frame\";\nimport { EmbedProps as Props } from \".\";\n\nfunction Gliffy(props: Props) {\n  return (\n    <Frame {...props} src={props.attrs.href} title=\"Gliffy Embed\" border />\n  );\n}\n\nGliffy.ENABLED = [new RegExp(\"https?://go.gliffy.com/go/share/(.*)$\")];\n\nexport default Gliffy;\n","import * as React from \"react\";\nimport Frame from \"../components/Frame\";\nimport { EmbedProps as Props } from \".\";\n\nconst URL_REGEX = new RegExp(\n  \"^https?://calendar.google.com/calendar/embed\\\\?src=(.*)$\"\n);\n\nexport default class GoogleCalendar extends React.Component<Props> {\n  static ENABLED = [URL_REGEX];\n\n  render() {\n    return (\n      <Frame\n        {...this.props}\n        src={this.props.attrs.href}\n        title=\"Google Calendar\"\n        border\n      />\n    );\n  }\n}\n","import * as React from \"react\";\nimport Frame from \"../components/Frame\";\nimport Image from \"../components/Image\";\nimport { EmbedProps as Props } from \".\";\n\nconst URL_REGEX = new RegExp(\n  \"^https?://datastudio.google.com/(embed|u/0)/reporting/(.*)/page/(.*)(/edit)?$\"\n);\n\nexport default class GoogleDataStudio extends React.Component<Props> {\n  static ENABLED = [URL_REGEX];\n\n  render() {\n    return (\n      <Frame\n        {...this.props}\n        src={this.props.attrs.href.replace(\"u/0\", \"embed\").replace(\"/edit\", \"\")}\n        icon={\n          <Image\n            src=\"/images/google-datastudio.png\"\n            alt=\"Google Data Studio Icon\"\n            width={16}\n            height={16}\n          />\n        }\n        canonicalUrl={this.props.attrs.href}\n        title=\"Google Data Studio\"\n        border\n      />\n    );\n  }\n}\n","import * as React from \"react\";\nimport Frame from \"../components/Frame\";\nimport Image from \"../components/Image\";\nimport { EmbedProps as Props } from \".\";\n\nconst URL_REGEX = new RegExp(\"^https?://docs.google.com/document/(.*)$\");\n\nexport default class GoogleDocs extends React.Component<Props> {\n  static ENABLED = [URL_REGEX];\n\n  render() {\n    return (\n      <Frame\n        {...this.props}\n        src={this.props.attrs.href.replace(\"/edit\", \"/preview\")}\n        icon={\n          <Image\n            src=\"/images/google-docs.png\"\n            alt=\"Google Docs Icon\"\n            width={16}\n            height={16}\n          />\n        }\n        canonicalUrl={this.props.attrs.href}\n        title=\"Google Docs\"\n        border\n      />\n    );\n  }\n}\n","import * as React from \"react\";\nimport Frame from \"../components/Frame\";\nimport Image from \"../components/Image\";\nimport { EmbedProps as Props } from \".\";\n\nconst URL_REGEX = new RegExp(\n  \"^https://docs.google.com/drawings/d/(.*)/(edit|preview)(.*)$\"\n);\n\nexport default class GoogleDrawings extends React.Component<Props> {\n  static ENABLED = [URL_REGEX];\n\n  render() {\n    return (\n      <Frame\n        {...this.props}\n        src={this.props.attrs.href.replace(\"/edit\", \"/preview\")}\n        icon={\n          <Image\n            src=\"/images/google-drawings.png\"\n            alt=\"Google Drawings\"\n            width={16}\n            height={16}\n          />\n        }\n        canonicalUrl={this.props.attrs.href.replace(\"/preview\", \"/edit\")}\n        title=\"Google Drawings\"\n        border\n      />\n    );\n  }\n}\n","import * as React from \"react\";\nimport Frame from \"../components/Frame\";\nimport Image from \"../components/Image\";\nimport { EmbedProps as Props } from \".\";\n\nconst URL_REGEX = new RegExp(\"^https?://drive.google.com/file/d/(.*)$\");\n\nexport default class GoogleDrive extends React.Component<Props> {\n  static ENABLED = [URL_REGEX];\n\n  render() {\n    return (\n      <Frame\n        src={this.props.attrs.href.replace(\"/view\", \"/preview\")}\n        icon={\n          <Image\n            src=\"/images/google-drive.png\"\n            alt=\"Google Drive Icon\"\n            width={16}\n            height={16}\n          />\n        }\n        title=\"Google Drive\"\n        canonicalUrl={this.props.attrs.href}\n        border\n      />\n    );\n  }\n}\n","import * as React from \"react\";\nimport Frame from \"../components/Frame\";\nimport Image from \"../components/Image\";\nimport { EmbedProps as Props } from \".\";\n\nconst URL_REGEX = new RegExp(\"^https?://docs.google.com/spreadsheets/d/(.*)$\");\n\nexport default class GoogleSheets extends React.Component<Props> {\n  static ENABLED = [URL_REGEX];\n\n  render() {\n    return (\n      <Frame\n        {...this.props}\n        src={this.props.attrs.href.replace(\"/edit\", \"/preview\")}\n        icon={\n          <Image\n            src=\"/images/google-sheets.png\"\n            alt=\"Google Sheets Icon\"\n            width={16}\n            height={16}\n          />\n        }\n        canonicalUrl={this.props.attrs.href}\n        title=\"Google Sheets\"\n        border\n      />\n    );\n  }\n}\n","import * as React from \"react\";\nimport Frame from \"../components/Frame\";\nimport Image from \"../components/Image\";\nimport { EmbedProps as Props } from \".\";\n\nconst URL_REGEX = new RegExp(\"^https?://docs.google.com/presentation/d/(.*)$\");\n\nexport default class GoogleSlides extends React.Component<Props> {\n  static ENABLED = [URL_REGEX];\n\n  render() {\n    return (\n      <Frame\n        {...this.props}\n        src={this.props.attrs.href\n          .replace(\"/edit\", \"/preview\")\n          .replace(\"/pub\", \"/embed\")}\n        icon={\n          <Image\n            src=\"/images/google-slides.png\"\n            alt=\"Google Slides Icon\"\n            width={16}\n            height={16}\n          />\n        }\n        canonicalUrl={this.props.attrs.href}\n        title=\"Google Slides\"\n        border\n      />\n    );\n  }\n}\n","import * as React from \"react\";\nimport ImageZoom from \"react-medium-image-zoom\";\nimport Frame from \"../components/Frame\";\nimport { EmbedProps as Props } from \".\";\n\nconst IFRAME_REGEX = /^https:\\/\\/(invis\\.io\\/.*)|(projects\\.invisionapp\\.com\\/share\\/.*)$/;\nconst IMAGE_REGEX = /^https:\\/\\/(opal\\.invisionapp\\.com\\/static-signed\\/live-embed\\/.*)$/;\n\nexport default class InVision extends React.Component<Props> {\n  static ENABLED = [IFRAME_REGEX, IMAGE_REGEX];\n\n  render() {\n    if (IMAGE_REGEX.test(this.props.attrs.href)) {\n      return (\n        <ImageZoom\n          // @ts-expect-error ts-migrate(2769) FIXME: No overload matches this call.\n          className={this.props.isSelected ? \"ProseMirror-selectednode\" : \"\"}\n          image={{\n            src: this.props.attrs.href,\n            alt: \"InVision Embed\",\n            style: {\n              maxWidth: \"100%\",\n              maxHeight: \"75vh\",\n            },\n          }}\n          shouldRespectMaxDimension\n        />\n      );\n    }\n\n    return (\n      <Frame\n        {...this.props}\n        src={this.props.attrs.href}\n        title=\"InVision Embed\"\n      />\n    );\n  }\n}\n","import * as React from \"react\";\nimport { useTheme } from \"styled-components\";\nimport Frame from \"../components/Frame\";\nimport { EmbedProps as Props } from \".\";\n\nfunction JSFiddle(props: Props) {\n  const normalizedUrl = props.attrs.href.replace(/(\\/embedded)?\\/$/, \"\");\n  const theme = useTheme();\n\n  return (\n    <Frame\n      {...props}\n      src={`${normalizedUrl}/embedded/result,js,css,html/${\n        theme.isDark ? \"dark/\" : \"\"\n      }`}\n      title=\"JSFiddle Embed\"\n      referrerPolicy=\"origin\"\n      border\n    />\n  );\n}\n\nJSFiddle.ENABLED = [new RegExp(\"https?://jsfiddle.net/(.*)/(.*)$\")];\n\nexport default JSFiddle;\n","import * as React from \"react\";\nimport Frame from \"../components/Frame\";\nimport { EmbedProps as Props } from \".\";\n\nconst URL_REGEX = /^https:\\/\\/(www\\.)?(use)?loom.com\\/(embed|share)\\/(.*)$/;\n\nexport default class Loom extends React.Component<Props> {\n  static ENABLED = [URL_REGEX];\n\n  render() {\n    const normalizedUrl = this.props.attrs.href.replace(\"share\", \"embed\");\n    return <Frame {...this.props} src={normalizedUrl} title=\"Loom Embed\" />;\n  }\n}\n","import * as React from \"react\";\nimport Frame from \"../components/Frame\";\nimport { EmbedProps as Props } from \".\";\n\nexport default class Lucidchart extends React.Component<Props> {\n  static ENABLED = [\n    /^https?:\\/\\/(www\\.|app\\.)?(lucidchart\\.com|lucid\\.app)\\/documents\\/(embeddedchart|view|edit)\\/(?<chartId>[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})(?:.*)?$/,\n    /^https?:\\/\\/(www\\.|app\\.)?(lucid\\.app|lucidchart\\.com)\\/lucidchart\\/(?<chartId>[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})\\/(embeddedchart|view|edit)(?:.*)?$/,\n  ];\n\n  render() {\n    const { matches } = this.props.attrs;\n    const chartId = matches.groups?.chartId;\n\n    return (\n      <Frame\n        {...this.props}\n        src={`https://lucidchart.com/documents/embeddedchart/${chartId}`}\n        title=\"Lucidchart Embed\"\n      />\n    );\n  }\n}\n","import * as React from \"react\";\nimport Frame from \"../components/Frame\";\nimport { EmbedProps as Props } from \".\";\n\nconst URL_REGEX = new RegExp(\"^https://marvelapp.com/([A-Za-z0-9-]{6})/?$\");\n\nexport default class Marvel extends React.Component<Props> {\n  static ENABLED = [URL_REGEX];\n\n  render() {\n    return (\n      <Frame\n        {...this.props}\n        src={this.props.attrs.href}\n        title=\"Marvel Embed\"\n        border\n      />\n    );\n  }\n}\n","import * as React from \"react\";\nimport Frame from \"../components/Frame\";\nimport { EmbedProps as Props } from \".\";\n\nconst URL_REGEX = new RegExp(\n  \"^https://([w.-]+.)?(mindmeister.com|mm.tt)(/maps/public_map_shell)?/(\\\\d+)(\\\\?t=.*)?(/.*)?$\"\n);\n\nexport default class Mindmeister extends React.Component<Props> {\n  static ENABLED = [URL_REGEX];\n\n  render() {\n    const chartId =\n      this.props.attrs.matches[4] +\n      (this.props.attrs.matches[5] || \"\") +\n      (this.props.attrs.matches[6] || \"\");\n    return (\n      <Frame\n        {...this.props}\n        src={`https://www.mindmeister.com/maps/public_map_shell/${chartId}`}\n        title=\"Mindmeister Embed\"\n        border\n      />\n    );\n  }\n}\n","import * as React from \"react\";\nimport Frame from \"../components/Frame\";\nimport { EmbedProps as Props } from \".\";\n\nconst URL_REGEX = /^https:\\/\\/(realtimeboard|miro).com\\/app\\/board\\/(.*)$/;\n\nexport default class RealtimeBoard extends React.Component<Props> {\n  static ENABLED = [URL_REGEX];\n\n  render() {\n    const { matches } = this.props.attrs;\n    const domain = matches[1];\n    const boardId = matches[2];\n    const titleName = domain === \"realtimeboard\" ? \"RealtimeBoard\" : \"Miro\";\n\n    return (\n      <Frame\n        {...this.props}\n        src={`https://${domain}.com/app/embed/${boardId}`}\n        title={`${titleName} (${boardId})`}\n      />\n    );\n  }\n}\n","import * as React from \"react\";\nimport Frame from \"../components/Frame\";\nimport { EmbedProps as Props } from \".\";\n\nconst URL_REGEX = new RegExp(\n  \"^https://([w.-]+.)?modeanalytics.com/(.*)/reports/(.*)$\"\n);\n\nexport default class ModeAnalytics extends React.Component<Props> {\n  static ENABLED = [URL_REGEX];\n\n  render() {\n    // Allow users to paste embed or standard urls and handle them the same\n    const normalizedUrl = this.props.attrs.href.replace(/\\/embed$/, \"\");\n    return (\n      <Frame\n        {...this.props}\n        src={`${normalizedUrl}/embed`}\n        title=\"Mode Analytics Embed\"\n      />\n    );\n  }\n}\n","import * as React from \"react\";\nimport Frame from \"../components/Frame\";\nimport { EmbedProps as Props } from \".\";\n\nfunction Otter(props: Props) {\n  return (\n    <Frame\n      {...props}\n      src={props.attrs.href}\n      title=\"Otter.ai Embed\"\n      referrerPolicy=\"origin\"\n      border\n    />\n  );\n}\n\nOtter.ENABLED = [new RegExp(\"https?://otter.ai/[su]/(.*)$\")];\n\nexport default Otter;\n","import * as React from \"react\";\nimport Frame from \"../components/Frame\";\nimport { EmbedProps as Props } from \".\";\n\nconst URL_REGEX = new RegExp(\n  \"^https?://app.pitch.com/app/(?:presentation/[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}|public/player)/(.*)$\"\n);\n\nexport default class Pitch extends React.Component<Props> {\n  static ENABLED = [URL_REGEX];\n\n  render() {\n    const shareId = this.props.attrs.matches[1];\n    return (\n      <Frame\n        {...this.props}\n        src={`https://pitch.com/embed/${shareId}`}\n        title=\"Pitch Embed\"\n        height=\"414px\"\n      />\n    );\n  }\n}\n","import * as React from \"react\";\nimport Frame from \"../components/Frame\";\nimport { EmbedProps as Props } from \".\";\n\nconst URL_REGEX = new RegExp(\"^https://prezi.com/view/(.*)$\");\n\nexport default class Prezi extends React.Component<Props> {\n  static ENABLED = [URL_REGEX];\n\n  render() {\n    const url = this.props.attrs.href.replace(/\\/embed$/, \"\");\n    return (\n      <Frame {...this.props} src={`${url}/embed`} title=\"Prezi Embed\" border />\n    );\n  }\n}\n","import * as React from \"react\";\nimport Frame from \"../components/Frame\";\nimport { EmbedProps as Props } from \".\";\n\nexport default function Scribe(props: Props) {\n  const { matches } = props.attrs;\n  const shareId = matches[1];\n\n  return (\n    <Frame\n      {...props}\n      src={`https://scribehow.com/embed/${shareId}`}\n      title=\"Scribe\"\n      border\n    />\n  );\n}\n\nScribe.ENABLED = [/^https?:\\/\\/scribehow\\.com\\/shared\\/(.*)$/];\n","import * as React from \"react\";\nimport Frame from \"../components/Frame\";\n\nconst URL_REGEX = new RegExp(\"https?://open.spotify.com/(.*)$\");\nimport { EmbedProps as Props } from \".\";\n\nexport default class Spotify extends React.Component<Props> {\n  static ENABLED = [URL_REGEX];\n\n  get pathname() {\n    try {\n      const parsed = new URL(this.props.attrs.href);\n      return parsed.pathname;\n    } catch (err) {\n      return \"\";\n    }\n  }\n\n  render() {\n    const normalizedPath = this.pathname.replace(/^\\/embed/, \"/\");\n    let height;\n\n    if (normalizedPath.includes(\"episode\") || normalizedPath.includes(\"show\")) {\n      height = 232;\n    } else if (normalizedPath.includes(\"track\")) {\n      height = 80;\n    } else {\n      height = 380;\n    }\n\n    return (\n      <Frame\n        {...this.props}\n        width=\"100%\"\n        height={`${height}px`}\n        src={`https://open.spotify.com/embed${normalizedPath}`}\n        title=\"Spotify Embed\"\n        allow=\"encrypted-media\"\n      />\n    );\n  }\n}\n","import * as React from \"react\";\nimport Frame from \"../components/Frame\";\nimport { EmbedProps as Props } from \".\";\n\nfunction Tldraw(props: Props) {\n  return (\n    <Frame\n      {...props}\n      src={props.attrs.href}\n      title=\"Tldraw.com Embed\"\n      referrerPolicy=\"origin\"\n      border\n    />\n  );\n}\n\nTldraw.ENABLED = [new RegExp(\"https?://www.tldraw.com/r/(.*)$\")];\n\nexport default Tldraw;\n","import * as React from \"react\";\nimport Frame from \"../components/Frame\";\nimport { EmbedProps as Props } from \".\";\n\nconst URL_REGEX = /^https:\\/\\/trello.com\\/(c|b)\\/([^/]*)(.*)?$/;\n\nexport default class Trello extends React.Component<Props> {\n  static ENABLED = [URL_REGEX];\n\n  render() {\n    const { matches } = this.props.attrs;\n    const objectId = matches[2];\n\n    if (matches[1] === \"c\") {\n      return (\n        <Frame\n          width=\"316px\"\n          height=\"158px\"\n          src={`https://trello.com/embed/card?id=${objectId}`}\n          title={`Trello Card (${objectId})`}\n        />\n      );\n    }\n\n    return (\n      <Frame\n        {...this.props}\n        width=\"248px\"\n        height=\"185px\"\n        src={`https://trello.com/embed/board?id=${objectId}`}\n        title={`Trello Board (${objectId})`}\n      />\n    );\n  }\n}\n","import * as React from \"react\";\nimport Frame from \"../components/Frame\";\nimport { EmbedProps as Props } from \".\";\n\nconst URL_REGEX = new RegExp(\n  \"^https://([A-Za-z0-9](?:[A-Za-z0-9-]{0,61}[A-Za-z0-9])?).typeform.com/to/(.*)$\"\n);\n\nexport default class Typeform extends React.Component<Props> {\n  static ENABLED = [URL_REGEX];\n\n  render() {\n    return (\n      <Frame\n        {...this.props}\n        src={this.props.attrs.href}\n        title=\"Typeform Embed\"\n      />\n    );\n  }\n}\n","import * as React from \"react\";\nimport Frame from \"../components/Frame\";\nimport { EmbedProps as Props } from \".\";\n\nconst URL_REGEX = /(http|https)?:\\/\\/(www\\.)?vimeo.com\\/(?:channels\\/(?:\\w+\\/)?|groups\\/([^/]*)\\/videos\\/|)(\\d+)(?:\\/|\\?)?([\\d\\w]+)?/;\n\nexport default class Vimeo extends React.Component<Props> {\n  static ENABLED = [URL_REGEX];\n\n  render() {\n    const { matches } = this.props.attrs;\n    const videoId = matches[4];\n    const hId = matches[5];\n\n    return (\n      <Frame\n        {...this.props}\n        src={`https://player.vimeo.com/video/${videoId}?byline=0${\n          hId ? `&h=${hId}` : \"\"\n        }`}\n        title={`Vimeo Embed (${videoId})`}\n        height=\"412px\"\n        border={false}\n        referrerPolicy=\"origin\"\n      />\n    );\n  }\n}\n","import * as React from \"react\";\nimport Frame from \"../components/Frame\";\nimport { EmbedProps as Props } from \".\";\n\nconst URL_REGEX = /^https?:\\/\\/whimsical.com\\/[0-9a-zA-Z-_~]*-([a-zA-Z0-9]+)\\/?$/;\n\nexport default class Whimsical extends React.Component<Props> {\n  static ENABLED = [URL_REGEX];\n\n  render() {\n    const { matches } = this.props.attrs;\n    const boardId = matches[1];\n\n    return (\n      <Frame\n        {...this.props}\n        src={`https://whimsical.com/embed/${boardId}`}\n        title=\"Whimsical\"\n      />\n    );\n  }\n}\n","import * as React from \"react\";\nimport Frame from \"../components/Frame\";\nimport { EmbedProps as Props } from \".\";\n\nconst URL_REGEX = /(?:https?:\\/\\/)?(?:www\\.)?youtu\\.?be(?:\\.com)?\\/?.*(?:watch|embed)?(?:.*v=|v\\/|\\/)([a-zA-Z0-9_-]{11})$/i;\n\nexport default class YouTube extends React.Component<Props> {\n  static ENABLED = [URL_REGEX];\n\n  render() {\n    const { matches } = this.props.attrs;\n    const videoId = matches[1];\n    return (\n      <Frame\n        {...this.props}\n        src={`https://www.youtube.com/embed/${videoId}?modestbranding=1`}\n        title={`YouTube (${videoId})`}\n      />\n    );\n  }\n}\n","import * as React from \"react\";\nimport styled from \"styled-components\";\nimport { EmbedDescriptor } from \"@shared/editor/types\";\nimport Image from \"../components/Image\";\nimport Abstract from \"./Abstract\";\nimport Airtable from \"./Airtable\";\nimport Berrycast from \"./Berrycast\";\nimport Bilibili from \"./Bilibili\";\nimport Cawemo from \"./Cawemo\";\nimport ClickUp from \"./ClickUp\";\nimport Codepen from \"./Codepen\";\nimport DBDiagram from \"./DBDiagram\";\nimport Descript from \"./Descript\";\nimport Diagrams from \"./Diagrams\";\nimport Figma from \"./Figma\";\nimport Framer from \"./Framer\";\nimport Gist from \"./Gist\";\nimport Gliffy from \"./Gliffy\";\nimport GoogleCalendar from \"./GoogleCalendar\";\nimport GoogleDataStudio from \"./GoogleDataStudio\";\nimport GoogleDocs from \"./GoogleDocs\";\nimport GoogleDrawings from \"./GoogleDrawings\";\nimport GoogleDrive from \"./GoogleDrive\";\nimport GoogleSheets from \"./GoogleSheets\";\nimport GoogleSlides from \"./GoogleSlides\";\nimport InVision from \"./InVision\";\nimport JSFiddle from \"./JSFiddle\";\nimport Loom from \"./Loom\";\nimport Lucidchart from \"./Lucidchart\";\nimport Marvel from \"./Marvel\";\nimport Mindmeister from \"./Mindmeister\";\nimport Miro from \"./Miro\";\nimport ModeAnalytics from \"./ModeAnalytics\";\nimport Otter from \"./Otter\";\nimport Pitch from \"./Pitch\";\nimport Prezi from \"./Prezi\";\nimport Scribe from \"./Scribe\";\nimport Spotify from \"./Spotify\";\nimport Tldraw from \"./Tldraw\";\nimport Trello from \"./Trello\";\nimport Typeform from \"./Typeform\";\nimport Vimeo from \"./Vimeo\";\nimport Whimsical from \"./Whimsical\";\nimport YouTube from \"./YouTube\";\n\nexport type EmbedProps = {\n  isSelected: boolean;\n  isEditable: boolean;\n  embed: EmbedDescriptor;\n  attrs: {\n    href: string;\n    matches: RegExpMatchArray;\n  };\n};\n\nfunction matcher(Component: React.ComponentType<EmbedProps>) {\n  return (url: string): boolean | [] | RegExpMatchArray => {\n    // @ts-expect-error not aware of static\n    const regexes = Component.ENABLED;\n\n    for (const regex of regexes) {\n      const result = url.match(regex);\n\n      if (result) {\n        return result;\n      }\n    }\n\n    return false;\n  };\n}\n\nconst Img = styled(Image)`\n  margin: 4px;\n  width: 18px;\n  height: 18px;\n`;\n\nconst embeds: EmbedDescriptor[] = [\n  {\n    title: \"Abstract\",\n    keywords: \"design\",\n    defaultHidden: true,\n    icon: () => <Img src=\"/images/abstract.png\" alt=\"Abstract\" />,\n    component: Abstract,\n    matcher: matcher(Abstract),\n  },\n  {\n    title: \"Airtable\",\n    keywords: \"spreadsheet\",\n    icon: () => <Img src=\"/images/airtable.png\" alt=\"Airtable\" />,\n    component: Airtable,\n    matcher: matcher(Airtable),\n  },\n  {\n    title: \"Berrycast\",\n    keywords: \"video\",\n    defaultHidden: true,\n    icon: () => <Img src=\"/images/berrycast.png\" alt=\"Berrycast\" />,\n    component: Berrycast,\n    matcher: matcher(Berrycast),\n  },\n  {\n    title: \"Bilibili\",\n    keywords: \"video\",\n    defaultHidden: true,\n    icon: () => <Img src=\"/images/bilibili.png\" alt=\"Bilibili\" />,\n    component: Bilibili,\n    matcher: matcher(Bilibili),\n  },\n  {\n    title: \"Cawemo\",\n    keywords: \"bpmn process\",\n    defaultHidden: true,\n    icon: () => <Img src=\"/images/cawemo.png\" alt=\"Cawemo\" />,\n    component: Cawemo,\n    matcher: matcher(Cawemo),\n  },\n  {\n    title: \"ClickUp\",\n    keywords: \"project\",\n    icon: () => <Img src=\"/images/clickup.png\" alt=\"ClickUp\" />,\n    component: ClickUp,\n    matcher: matcher(ClickUp),\n  },\n  {\n    title: \"Codepen\",\n    keywords: \"code editor\",\n    icon: () => <Img src=\"/images/codepen.png\" alt=\"Codepen\" />,\n    component: Codepen,\n    matcher: matcher(Codepen),\n  },\n  {\n    title: \"DBDiagram\",\n    keywords: \"diagrams database\",\n    icon: () => <Img src=\"/images/dbdiagram.png\" alt=\"DBDiagram\" />,\n    component: DBDiagram,\n    matcher: matcher(DBDiagram),\n  },\n  {\n    title: \"Descript\",\n    keywords: \"audio\",\n    icon: () => <Img src=\"/images/descript.png\" alt=\"Descript\" />,\n    component: Descript,\n    matcher: matcher(Descript),\n  },\n  {\n    title: \"Figma\",\n    keywords: \"design svg vector\",\n    icon: () => <Img src=\"/images/figma.png\" alt=\"Figma\" />,\n    component: Figma,\n    matcher: matcher(Figma),\n  },\n  {\n    title: \"Framer\",\n    keywords: \"design prototyping\",\n    icon: () => <Img src=\"/images/framer.png\" alt=\"Framer\" />,\n    component: Framer,\n    matcher: matcher(Framer),\n  },\n  {\n    title: \"GitHub Gist\",\n    keywords: \"code\",\n    icon: () => <Img src=\"/images/github-gist.png\" alt=\"GitHub\" />,\n    component: Gist,\n    matcher: matcher(Gist),\n  },\n  {\n    title: \"Gliffy\",\n    keywords: \"diagram\",\n    icon: () => <Img src=\"/images/gliffy.png\" alt=\"Gliffy\" />,\n    component: Gliffy,\n    matcher: matcher(Gliffy),\n  },\n  {\n    title: \"Diagrams.net\",\n    keywords: \"diagrams drawio\",\n    icon: () => <Img src=\"/images/diagrams.png\" alt=\"Diagrams.net\" />,\n    component: Diagrams,\n    matcher: matcher(Diagrams),\n  },\n  {\n    title: \"Google Drawings\",\n    keywords: \"drawings\",\n    icon: () => <Img src=\"/images/google-drawings.png\" alt=\"Google Drawings\" />,\n    component: GoogleDrawings,\n    matcher: matcher(GoogleDrawings),\n  },\n  {\n    title: \"Google Drive\",\n    keywords: \"drive\",\n    icon: () => <Img src=\"/images/google-drive.png\" alt=\"Google Drive\" />,\n    component: GoogleDrive,\n    matcher: matcher(GoogleDrive),\n  },\n  {\n    title: \"Google Docs\",\n    keywords: \"documents word\",\n    icon: () => <Img src=\"/images/google-docs.png\" alt=\"Google Docs\" />,\n    component: GoogleDocs,\n    matcher: matcher(GoogleDocs),\n  },\n  {\n    title: \"Google Sheets\",\n    keywords: \"excel spreadsheet\",\n    icon: () => <Img src=\"/images/google-sheets.png\" alt=\"Google Sheets\" />,\n    component: GoogleSheets,\n    matcher: matcher(GoogleSheets),\n  },\n  {\n    title: \"Google Slides\",\n    keywords: \"presentation slideshow\",\n    icon: () => <Img src=\"/images/google-slides.png\" alt=\"Google Slides\" />,\n    component: GoogleSlides,\n    matcher: matcher(GoogleSlides),\n  },\n  {\n    title: \"Google Calendar\",\n    keywords: \"calendar\",\n    icon: () => <Img src=\"/images/google-calendar.png\" alt=\"Google Calendar\" />,\n    component: GoogleCalendar,\n    matcher: matcher(GoogleCalendar),\n  },\n  {\n    title: \"Google Data Studio\",\n    keywords: \"bi business intelligence\",\n    icon: () => (\n      <Img src=\"/images/google-datastudio.png\" alt=\"Google Data Studio\" />\n    ),\n    component: GoogleDataStudio,\n    matcher: matcher(GoogleDataStudio),\n  },\n  {\n    title: \"InVision\",\n    keywords: \"design prototype\",\n    defaultHidden: true,\n    icon: () => <Img src=\"/images/invision.png\" alt=\"InVision\" />,\n    component: InVision,\n    matcher: matcher(InVision),\n  },\n  {\n    title: \"JSFiddle\",\n    keywords: \"code\",\n    defaultHidden: true,\n    icon: () => <Img src=\"/images/jsfiddle.png\" alt=\"JSFiddle\" />,\n    component: JSFiddle,\n    matcher: matcher(JSFiddle),\n  },\n  {\n    title: \"Loom\",\n    keywords: \"video screencast\",\n    icon: () => <Img src=\"/images/loom.png\" alt=\"Loom\" />,\n    component: Loom,\n    matcher: matcher(Loom),\n  },\n  {\n    title: \"Lucidchart\",\n    keywords: \"chart\",\n    icon: () => <Img src=\"/images/lucidchart.png\" alt=\"Lucidchart\" />,\n    component: Lucidchart,\n    matcher: matcher(Lucidchart),\n  },\n  {\n    title: \"Marvel\",\n    keywords: \"design prototype\",\n    icon: () => <Img src=\"/images/marvel.png\" alt=\"Marvel\" />,\n    component: Marvel,\n    matcher: matcher(Marvel),\n  },\n  {\n    title: \"Mindmeister\",\n    keywords: \"mindmap\",\n    icon: () => <Img src=\"/images/mindmeister.png\" alt=\"Mindmeister\" />,\n    component: Mindmeister,\n    matcher: matcher(Mindmeister),\n  },\n  {\n    title: \"Miro\",\n    keywords: \"whiteboard\",\n    icon: () => <Img src=\"/images/miro.png\" alt=\"Miro\" />,\n    component: Miro,\n    matcher: matcher(Miro),\n  },\n  {\n    title: \"Mode\",\n    keywords: \"analytics\",\n    defaultHidden: true,\n    icon: () => <Img src=\"/images/mode-analytics.png\" alt=\"Mode\" />,\n    component: ModeAnalytics,\n    matcher: matcher(ModeAnalytics),\n  },\n  {\n    title: \"Otter.ai\",\n    keywords: \"audio transcription meeting notes\",\n    defaultHidden: true,\n    icon: () => <Img src=\"/images/otter.png\" alt=\"Otter.ai\" />,\n    component: Otter,\n    matcher: matcher(Otter),\n  },\n  {\n    title: \"Pitch\",\n    keywords: \"presentation\",\n    defaultHidden: true,\n    icon: () => <Img src=\"/images/pitch.png\" alt=\"Pitch\" />,\n    component: Pitch,\n    matcher: matcher(Pitch),\n  },\n  {\n    title: \"Prezi\",\n    keywords: \"presentation\",\n    icon: () => <Img src=\"/images/prezi.png\" alt=\"Prezi\" />,\n    component: Prezi,\n    matcher: matcher(Prezi),\n  },\n  {\n    title: \"Scribe\",\n    keywords: \"screencast\",\n    icon: () => <Img src=\"/images/scribe.png\" alt=\"Scribe\" />,\n    component: Scribe,\n    matcher: matcher(Scribe),\n  },\n  {\n    title: \"Spotify\",\n    keywords: \"music\",\n    icon: () => <Img src=\"/images/spotify.png\" alt=\"Spotify\" />,\n    component: Spotify,\n    matcher: matcher(Spotify),\n  },\n  {\n    title: \"Tldraw\",\n    keywords: \"draw schematics diagrams\",\n    icon: () => <Img src=\"/images/tldraw.png\" alt=\"Tldraw\" />,\n    component: Tldraw,\n    matcher: matcher(Tldraw),\n  },\n  {\n    title: \"Trello\",\n    keywords: \"kanban\",\n    icon: () => <Img src=\"/images/trello.png\" alt=\"Trello\" />,\n    component: Trello,\n    matcher: matcher(Trello),\n  },\n  {\n    title: \"Typeform\",\n    keywords: \"form survey\",\n    icon: () => <Img src=\"/images/typeform.png\" alt=\"Typeform\" />,\n    component: Typeform,\n    matcher: matcher(Typeform),\n  },\n  {\n    title: \"Vimeo\",\n    keywords: \"video\",\n    icon: () => <Img src=\"/images/vimeo.png\" alt=\"Vimeo\" />,\n    component: Vimeo,\n    matcher: matcher(Vimeo),\n  },\n  {\n    title: \"Whimsical\",\n    keywords: \"whiteboard\",\n    icon: () => <Img src=\"/images/whimsical.png\" alt=\"Whimsical\" />,\n    component: Whimsical,\n    matcher: matcher(Whimsical),\n  },\n  {\n    title: \"YouTube\",\n    keywords: \"google video\",\n    icon: () => <Img src=\"/images/youtube.png\" alt=\"YouTube\" />,\n    component: YouTube,\n    matcher: matcher(YouTube),\n  },\n];\n\nexport default embeds;\n","export default function parseDocumentSlug(url: string) {\n  let parsed;\n\n  if (url[0] === \"/\") {\n    parsed = url;\n  } else {\n    try {\n      parsed = new URL(url).pathname;\n    } catch (err) {\n      return;\n    }\n  }\n\n  return parsed.lastIndexOf(\"/doc/\") === 0\n    ? parsed.replace(/^\\/doc\\//, \"\")\n    : null;\n}\n","import styled from \"styled-components\";\n\nconst ClickablePadding = styled.div<{ grow?: boolean }>`\n  min-height: 10em;\n  cursor: ${({ onClick }) => (onClick ? \"text\" : \"default\")};\n  ${({ grow }) => grow && `flex-grow: 100;`};\n`;\n\nexport default ClickablePadding;\n","import { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport parseDocumentSlug from \"@shared/utils/parseDocumentSlug\";\nimport DocumentMetaWithViews from \"~/components/DocumentMetaWithViews\";\nimport Editor from \"~/components/Editor\";\nimport useStores from \"~/hooks/useStores\";\n\ntype Props = {\n  url: string;\n  children: (content: React.ReactNode) => React.ReactNode;\n};\n\nfunction HoverPreviewDocument({ url, children }: Props) {\n  const { documents } = useStores();\n  const slug = parseDocumentSlug(url);\n\n  if (slug) {\n    documents.prefetchDocument(slug);\n  }\n\n  const document = slug ? documents.getByUrl(slug) : undefined;\n  if (!document) {\n    return null;\n  }\n\n  return (\n    <>\n      {children(\n        <Content to={document.url}>\n          <Heading>{document.titleWithDefault}</Heading>\n          <DocumentMetaWithViews\n            isDraft={document.isDraft}\n            document={document}\n          />\n\n          <React.Suspense fallback={<div />}>\n            <Editor\n              key={document.id}\n              defaultValue={document.getSummary()}\n              embedsDisabled\n              readOnly\n            />\n          </React.Suspense>\n        </Content>\n      )}\n    </>\n  );\n}\n\nconst Content = styled(Link)`\n  cursor: pointer;\n`;\n\nconst Heading = styled.h2`\n  margin: 0 0 0.75em;\n  color: ${(props) => props.theme.text};\n`;\n\nexport default observer(HoverPreviewDocument);\n","import { transparentize } from \"polished\";\nimport * as React from \"react\";\nimport { Portal } from \"react-portal\";\nimport styled from \"styled-components\";\nimport { depths } from \"@shared/styles\";\nimport parseDocumentSlug from \"@shared/utils/parseDocumentSlug\";\nimport { isExternalUrl } from \"@shared/utils/urls\";\nimport HoverPreviewDocument from \"~/components/HoverPreviewDocument\";\nimport useMobile from \"~/hooks/useMobile\";\nimport useStores from \"~/hooks/useStores\";\nimport { fadeAndSlideDown } from \"~/styles/animations\";\n\nconst DELAY_OPEN = 300;\nconst DELAY_CLOSE = 300;\n\ntype Props = {\n  node: HTMLAnchorElement;\n  event: MouseEvent;\n  onClose: () => void;\n};\n\nfunction HoverPreviewInternal({ node, onClose }: Props) {\n  const { documents } = useStores();\n  const slug = parseDocumentSlug(node.href);\n  const [isVisible, setVisible] = React.useState(false);\n  const timerClose = React.useRef<ReturnType<typeof setTimeout>>();\n  const timerOpen = React.useRef<ReturnType<typeof setTimeout>>();\n  const cardRef = React.useRef<HTMLDivElement>(null);\n\n  const startCloseTimer = () => {\n    stopOpenTimer();\n    timerClose.current = setTimeout(() => {\n      if (isVisible) {\n        setVisible(false);\n      }\n      onClose();\n    }, DELAY_CLOSE);\n  };\n\n  const stopCloseTimer = () => {\n    if (timerClose.current) {\n      clearTimeout(timerClose.current);\n    }\n  };\n\n  const startOpenTimer = () => {\n    timerOpen.current = setTimeout(() => setVisible(true), DELAY_OPEN);\n  };\n\n  const stopOpenTimer = () => {\n    if (timerOpen.current) {\n      clearTimeout(timerOpen.current);\n    }\n  };\n\n  React.useEffect(() => {\n    if (slug) {\n      documents.prefetchDocument(slug);\n    }\n\n    startOpenTimer();\n\n    if (cardRef.current) {\n      cardRef.current.addEventListener(\"mouseenter\", stopCloseTimer);\n    }\n\n    if (cardRef.current) {\n      cardRef.current.addEventListener(\"mouseleave\", startCloseTimer);\n    }\n\n    node.addEventListener(\"mouseout\", startCloseTimer);\n    node.addEventListener(\"mouseover\", stopCloseTimer);\n    node.addEventListener(\"mouseover\", startOpenTimer);\n    return () => {\n      node.removeEventListener(\"mouseout\", startCloseTimer);\n      node.removeEventListener(\"mouseover\", stopCloseTimer);\n      node.removeEventListener(\"mouseover\", startOpenTimer);\n\n      if (cardRef.current) {\n        cardRef.current.removeEventListener(\"mouseenter\", stopCloseTimer);\n      }\n\n      if (cardRef.current) {\n        cardRef.current.removeEventListener(\"mouseleave\", startCloseTimer);\n      }\n\n      if (timerClose.current) {\n        clearTimeout(timerClose.current);\n      }\n    };\n  }, [node, slug]);\n\n  const anchorBounds = node.getBoundingClientRect();\n  const cardBounds = cardRef.current?.getBoundingClientRect();\n  const left = cardBounds\n    ? Math.min(anchorBounds.left, window.innerWidth - 16 - 350)\n    : anchorBounds.left;\n  const leftOffset = anchorBounds.left - left;\n\n  return (\n    <Portal>\n      <Position\n        top={anchorBounds.bottom + window.scrollY}\n        left={left}\n        aria-hidden\n      >\n        <div ref={cardRef}>\n          <HoverPreviewDocument url={node.href}>\n            {(content: React.ReactNode) =>\n              isVisible ? (\n                <Animate>\n                  <Card>\n                    <Margin />\n                    <CardContent>{content}</CardContent>\n                  </Card>\n                  <Pointer offset={leftOffset + anchorBounds.width / 2} />\n                </Animate>\n              ) : null\n            }\n          </HoverPreviewDocument>\n        </div>\n      </Position>\n    </Portal>\n  );\n}\n\nfunction HoverPreview({ node, ...rest }: Props) {\n  const isMobile = useMobile();\n  if (isMobile) {\n    return null;\n  }\n\n  // previews only work for internal doc links for now\n  if (isExternalUrl(node.href)) {\n    return null;\n  }\n\n  return <HoverPreviewInternal {...rest} node={node} />;\n}\n\nconst Animate = styled.div`\n  animation: ${fadeAndSlideDown} 150ms ease;\n\n  @media print {\n    display: none;\n  }\n`;\n\n// fills the gap between the card and pointer to avoid a dead zone\nconst Margin = styled.div`\n  position: absolute;\n  top: -11px;\n  left: 0;\n  right: 0;\n  height: 11px;\n`;\n\nconst CardContent = styled.div`\n  overflow: hidden;\n  max-height: 20em;\n  user-select: none;\n`;\n\n// &:after — gradient mask for overflow text\nconst Card = styled.div`\n  backdrop-filter: blur(10px);\n  background: ${(props) => props.theme.background};\n  border-radius: 4px;\n  box-shadow: 0 30px 90px -20px rgba(0, 0, 0, 0.3),\n    0 0 1px 1px rgba(0, 0, 0, 0.05);\n  padding: 16px;\n  width: 350px;\n  font-size: 0.9em;\n  position: relative;\n\n  .placeholder,\n  .heading-anchor {\n    display: none;\n  }\n\n  &:after {\n    content: \"\";\n    display: block;\n    position: absolute;\n    pointer-events: none;\n    background: linear-gradient(\n      90deg,\n      ${(props) => transparentize(1, props.theme.background)} 0%,\n      ${(props) => transparentize(1, props.theme.background)} 75%,\n      ${(props) => props.theme.background} 90%\n    );\n    bottom: 0;\n    left: 0;\n    right: 0;\n    height: 1.7em;\n    border-bottom: 16px solid ${(props) => props.theme.background};\n    border-bottom-left-radius: 4px;\n    border-bottom-right-radius: 4px;\n  }\n`;\n\nconst Position = styled.div<{ fixed?: boolean; top?: number; left?: number }>`\n  margin-top: 10px;\n  position: ${({ fixed }) => (fixed ? \"fixed\" : \"absolute\")};\n  z-index: ${depths.hoverPreview};\n  display: flex;\n  max-height: 75%;\n\n  ${({ top }) => (top !== undefined ? `top: ${top}px` : \"\")};\n  ${({ left }) => (left !== undefined ? `left: ${left}px` : \"\")};\n`;\n\nconst Pointer = styled.div<{ offset: number }>`\n  top: -22px;\n  left: ${(props) => props.offset}px;\n  width: 22px;\n  height: 22px;\n  position: absolute;\n  transform: translateX(-50%);\n  pointer-events: none;\n\n  &:before,\n  &:after {\n    content: \"\";\n    display: inline-block;\n    position: absolute;\n    bottom: 0;\n    right: 0;\n  }\n\n  &:before {\n    border: 8px solid transparent;\n    border-bottom-color: ${(props) =>\n      props.theme.menuBorder || \"rgba(0, 0, 0, 0.1)\"};\n    right: -1px;\n  }\n\n  &:after {\n    border: 7px solid transparent;\n    border-bottom-color: ${(props) => props.theme.background};\n  }\n`;\n\nexport default HoverPreview;\n","import { formatDistanceToNow } from \"date-fns\";\nimport { deburr, sortBy } from \"lodash\";\nimport { TextSelection } from \"prosemirror-state\";\nimport * as React from \"react\";\nimport { Optional } from \"utility-types\";\nimport insertFiles from \"@shared/editor/commands/insertFiles\";\nimport embeds from \"@shared/editor/embeds\";\nimport { supportedImageMimeTypes } from \"@shared/utils/files\";\nimport getDataTransferFiles from \"@shared/utils/getDataTransferFiles\";\nimport parseDocumentSlug from \"@shared/utils/parseDocumentSlug\";\nimport { isInternalUrl } from \"@shared/utils/urls\";\nimport Document from \"~/models/Document\";\nimport ClickablePadding from \"~/components/ClickablePadding\";\nimport ErrorBoundary from \"~/components/ErrorBoundary\";\nimport HoverPreview from \"~/components/HoverPreview\";\nimport type { Props as EditorProps, Editor as SharedEditor } from \"~/editor\";\nimport useDictionary from \"~/hooks/useDictionary\";\nimport useStores from \"~/hooks/useStores\";\nimport useToasts from \"~/hooks/useToasts\";\nimport { NotFoundError } from \"~/utils/errors\";\nimport { uploadFile } from \"~/utils/files\";\nimport history from \"~/utils/history\";\nimport { isModKey } from \"~/utils/keyboard\";\nimport { isHash } from \"~/utils/urls\";\nimport DocumentBreadcrumb from \"./DocumentBreadcrumb\";\n\nconst LazyLoadedEditor = React.lazy(\n  () =>\n    import(\n      /* webpackChunkName: \"shared-editor\" */\n      \"~/editor\"\n    )\n);\n\nexport type Props = Optional<\n  EditorProps,\n  | \"placeholder\"\n  | \"defaultValue\"\n  | \"onClickLink\"\n  | \"embeds\"\n  | \"dictionary\"\n  | \"onShowToast\"\n  | \"extensions\"\n> & {\n  shareId?: string | undefined;\n  embedsDisabled?: boolean;\n  grow?: boolean;\n  onSynced?: () => Promise<void>;\n  onPublish?: (event: React.MouseEvent) => any;\n};\n\nfunction Editor(props: Props, ref: React.RefObject<SharedEditor> | null) {\n  const { id, shareId } = props;\n  const { documents } = useStores();\n  const { showToast } = useToasts();\n  const dictionary = useDictionary();\n  const [\n    activeLinkEvent,\n    setActiveLinkEvent,\n  ] = React.useState<MouseEvent | null>(null);\n\n  const handleLinkActive = React.useCallback((event: MouseEvent) => {\n    setActiveLinkEvent(event);\n    return false;\n  }, []);\n\n  const handleLinkInactive = React.useCallback(() => {\n    setActiveLinkEvent(null);\n  }, []);\n\n  const handleSearchLink = React.useCallback(\n    async (term: string) => {\n      if (isInternalUrl(term)) {\n        // search for exact internal document\n        const slug = parseDocumentSlug(term);\n        if (!slug) {\n          return [];\n        }\n\n        try {\n          const document = await documents.fetch(slug);\n          const time = formatDistanceToNow(Date.parse(document.updatedAt), {\n            addSuffix: true,\n          });\n\n          return [\n            {\n              title: document.title,\n              subtitle: `Updated ${time}`,\n              url: document.url,\n            },\n          ];\n        } catch (error) {\n          // NotFoundError could not find document for slug\n          if (!(error instanceof NotFoundError)) {\n            throw error;\n          }\n        }\n      }\n\n      // default search for anything that doesn't look like a URL\n      const results = await documents.searchTitles(term);\n\n      return sortBy(\n        results.map((document: Document) => {\n          return {\n            title: document.title,\n            subtitle: <DocumentBreadcrumb document={document} onlyText />,\n            url: document.url,\n          };\n        }),\n        (document) =>\n          deburr(document.title)\n            .toLowerCase()\n            .startsWith(deburr(term).toLowerCase())\n            ? -1\n            : 1\n      );\n    },\n    [documents]\n  );\n\n  const onUploadFile = React.useCallback(\n    async (file: File) => {\n      const result = await uploadFile(file, {\n        documentId: id,\n      });\n      return result.url;\n    },\n    [id]\n  );\n\n  const onClickLink = React.useCallback(\n    (href: string, event: MouseEvent) => {\n      // on page hash\n      if (isHash(href)) {\n        window.location.href = href;\n        return;\n      }\n\n      if (isInternalUrl(href) && !isModKey(event) && !event.shiftKey) {\n        // relative\n        let navigateTo = href;\n\n        // probably absolute\n        if (href[0] !== \"/\") {\n          try {\n            const url = new URL(href);\n            navigateTo = url.pathname + url.hash;\n          } catch (err) {\n            navigateTo = href;\n          }\n        }\n\n        if (shareId) {\n          navigateTo = `/share/${shareId}${navigateTo}`;\n        }\n\n        history.push(navigateTo);\n      } else if (href) {\n        window.open(href, \"_blank\");\n      }\n    },\n    [shareId]\n  );\n\n  const focusAtEnd = React.useCallback(() => {\n    ref?.current?.focusAtEnd();\n  }, [ref]);\n\n  const handleDrop = React.useCallback(\n    (event: React.DragEvent<HTMLDivElement>) => {\n      event.preventDefault();\n      event.stopPropagation();\n      const files = getDataTransferFiles(event);\n      const view = ref?.current?.view;\n      if (!view) {\n        return;\n      }\n\n      // Insert all files as attachments if any of the files are not images.\n      const isAttachment = files.some(\n        (file) => !supportedImageMimeTypes.includes(file.type)\n      );\n\n      // Find a valid position at the end of the document\n      const pos = TextSelection.near(\n        view.state.doc.resolve(view.state.doc.nodeSize - 2)\n      ).from;\n\n      insertFiles(view, event, pos, files, {\n        uploadFile: onUploadFile,\n        onFileUploadStart: props.onFileUploadStart,\n        onFileUploadStop: props.onFileUploadStop,\n        onShowToast: showToast,\n        dictionary,\n        isAttachment,\n      });\n    },\n    [\n      ref,\n      props.onFileUploadStart,\n      props.onFileUploadStop,\n      dictionary,\n      onUploadFile,\n      showToast,\n    ]\n  );\n\n  // see: https://stackoverflow.com/a/50233827/192065\n  const handleDragOver = React.useCallback(\n    (event: React.DragEvent<HTMLDivElement>) => {\n      event.stopPropagation();\n      event.preventDefault();\n    },\n    []\n  );\n\n  return (\n    <ErrorBoundary reloadOnChunkMissing>\n      <>\n        <LazyLoadedEditor\n          ref={ref}\n          uploadFile={onUploadFile}\n          onShowToast={showToast}\n          embeds={embeds}\n          dictionary={dictionary}\n          {...props}\n          onHoverLink={handleLinkActive}\n          onClickLink={onClickLink}\n          onSearchLink={handleSearchLink}\n          placeholder={props.placeholder || \"\"}\n          defaultValue={props.defaultValue || \"\"}\n        />\n        {props.grow && !props.readOnly && (\n          <ClickablePadding\n            onClick={focusAtEnd}\n            onDrop={handleDrop}\n            onDragOver={handleDragOver}\n            grow\n          />\n        )}\n        {activeLinkEvent && !shareId && (\n          <HoverPreview\n            node={activeLinkEvent.target as HTMLAnchorElement}\n            event={activeLinkEvent}\n            onClose={handleLinkInactive}\n          />\n        )}\n      </>\n    </ErrorBoundary>\n  );\n}\n\nexport default React.forwardRef(Editor);\n","import * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\n\nexport default function useDictionary() {\n  const { t } = useTranslation();\n\n  return React.useMemo(() => {\n    return {\n      addColumnAfter: t(\"Insert column after\"),\n      addColumnBefore: t(\"Insert column before\"),\n      addRowAfter: t(\"Insert row after\"),\n      addRowBefore: t(\"Insert row before\"),\n      alignCenter: t(\"Align center\"),\n      alignLeft: t(\"Align left\"),\n      alignRight: t(\"Align right\"),\n      bulletList: t(\"Bulleted list\"),\n      checkboxList: t(\"Todo list\"),\n      codeBlock: t(\"Code block\"),\n      codeCopied: t(\"Copied to clipboard\"),\n      codeInline: t(\"Code\"),\n      createLink: t(\"Create link\"),\n      createLinkError: t(\"Sorry, an error occurred creating the link\"),\n      createNewDoc: t(\"Create a new doc\"),\n      deleteColumn: t(\"Delete column\"),\n      deleteRow: t(\"Delete row\"),\n      deleteTable: t(\"Delete table\"),\n      deleteImage: t(\"Delete image\"),\n      downloadImage: t(\"Download image\"),\n      replaceImage: t(\"Replace image\"),\n      alignImageLeft: t(\"Float left\"),\n      alignImageRight: t(\"Float right\"),\n      alignImageDefault: t(\"Center large\"),\n      em: t(\"Italic\"),\n      embedInvalidLink: t(\"Sorry, that link won’t work for this embed type\"),\n      file: t(\"File attachment\"),\n      findOrCreateDoc: `${t(\"Find or create a doc\")}…`,\n      h1: t(\"Big heading\"),\n      h2: t(\"Medium heading\"),\n      h3: t(\"Small heading\"),\n      heading: t(\"Heading\"),\n      hr: t(\"Divider\"),\n      image: t(\"Image\"),\n      fileUploadError: t(\"Sorry, an error occurred uploading the file\"),\n      imageCaptionPlaceholder: t(\"Write a caption\"),\n      info: t(\"Info\"),\n      infoNotice: t(\"Info notice\"),\n      link: t(\"Link\"),\n      linkCopied: t(\"Link copied to clipboard\"),\n      mark: t(\"Highlight\"),\n      newLineEmpty: `${t(\"Type '/' to insert\")}…`,\n      newLineWithSlash: `${t(\"Keep typing to filter\")}…`,\n      noResults: t(\"No results\"),\n      openLink: t(\"Open link\"),\n      goToLink: t(\"Go to link\"),\n      orderedList: t(\"Ordered list\"),\n      pageBreak: t(\"Page break\"),\n      pasteLink: `${t(\"Paste a link\")}…`,\n      pasteLinkWithTitle: (service: string) =>\n        t(\"Paste a {{service}} link…\", {\n          service,\n        }),\n      placeholder: t(\"Placeholder\"),\n      quote: t(\"Quote\"),\n      removeLink: t(\"Remove link\"),\n      searchOrPasteLink: `${t(\"Search or paste a link\")}…`,\n      strikethrough: t(\"Strikethrough\"),\n      strong: t(\"Bold\"),\n      subheading: t(\"Subheading\"),\n      table: t(\"Table\"),\n      tip: t(\"Tip\"),\n      tipNotice: t(\"Tip notice\"),\n      warning: t(\"Warning\"),\n      warningNotice: t(\"Warning notice\"),\n      insertDate: t(\"Current date\"),\n      insertTime: t(\"Current time\"),\n      insertDateTime: t(\"Current date and time\"),\n    };\n  }, [t]);\n}\n\nexport type Dictionary = ReturnType<typeof useDictionary>;\n","import { EditorState, Plugin } from \"prosemirror-state\";\nimport { Decoration, DecorationSet } from \"prosemirror-view\";\nimport * as React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport FileExtension from \"../components/FileExtension\";\n\n// based on the example at: https://prosemirror.net/examples/upload/\nconst uploadPlaceholder = new Plugin({\n  state: {\n    init() {\n      return DecorationSet.empty;\n    },\n    apply(tr, set: DecorationSet) {\n      // Adjust decoration positions to changes made by the transaction\n      set = set.map(tr.mapping, tr.doc);\n\n      // See if the transaction adds or removes any placeholders\n      const action = tr.getMeta(this);\n\n      if (action?.add) {\n        if (action.add.replaceExisting) {\n          const $pos = tr.doc.resolve(action.add.pos);\n\n          if ($pos.nodeAfter?.type.name === \"image\") {\n            const deco = Decoration.node(\n              $pos.pos,\n              $pos.pos + $pos.nodeAfter.nodeSize,\n              {\n                class: \"image-replacement-uploading\",\n              },\n              {\n                id: action.add.id,\n              }\n            );\n            set = set.add(tr.doc, [deco]);\n          }\n        } else if (action.add.isImage) {\n          const element = document.createElement(\"div\");\n          element.className = \"image placeholder\";\n\n          const img = document.createElement(\"img\");\n          img.src = URL.createObjectURL(action.add.file);\n\n          element.appendChild(img);\n\n          const deco = Decoration.widget(action.add.pos, element, {\n            id: action.add.id,\n          });\n          set = set.add(tr.doc, [deco]);\n        } else {\n          const element = document.createElement(\"div\");\n          element.className = \"attachment placeholder\";\n\n          const icon = document.createElement(\"div\");\n          icon.className = \"icon\";\n\n          const component = <FileExtension title={action.add.file.name} />;\n          ReactDOM.render(component, icon);\n          element.appendChild(icon);\n\n          const text = document.createElement(\"span\");\n          text.innerText = action.add.file.name;\n          element.appendChild(text);\n\n          const status = document.createElement(\"span\");\n          status.innerText = \"Uploading…\";\n          status.className = \"status\";\n          element.appendChild(status);\n\n          const deco = Decoration.widget(action.add.pos, element, {\n            id: action.add.id,\n          });\n          set = set.add(tr.doc, [deco]);\n        }\n      }\n\n      if (action?.remove) {\n        set = set.remove(\n          set.find(undefined, undefined, (spec) => spec.id === action.remove.id)\n        );\n      }\n      return set;\n    },\n  },\n  props: {\n    decorations(state) {\n      return this.getState(state);\n    },\n  },\n});\n\nexport default uploadPlaceholder;\n\nexport function findPlaceholder(\n  state: EditorState,\n  id: string\n): [number, number] | null {\n  const decos: DecorationSet = uploadPlaceholder.getState(state);\n  const found = decos.find(undefined, undefined, (spec) => spec.id === id);\n  return found.length ? [found[0].from, found[0].to] : null;\n}\n","import { observer, useObserver } from \"mobx-react\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { usePopoverState, PopoverDisclosure } from \"reakit/Popover\";\nimport styled from \"styled-components\";\nimport Document from \"~/models/Document\";\nimport DocumentMeta from \"~/components/DocumentMeta\";\nimport DocumentViews from \"~/components/DocumentViews\";\nimport Popover from \"~/components/Popover\";\nimport useStores from \"~/hooks/useStores\";\n\ntype Props = {\n  document: Document;\n  isDraft: boolean;\n  to?: string;\n  rtl?: boolean;\n};\n\nfunction DocumentMetaWithViews({ to, isDraft, document, ...rest }: Props) {\n  const { views } = useStores();\n  const { t } = useTranslation();\n  const documentViews = useObserver(() => views.inDocument(document.id));\n  const totalViewers = documentViews.length;\n  const onlyYou = totalViewers === 1 && documentViews[0].user.id;\n\n  React.useEffect(() => {\n    if (!document.isDeleted) {\n      views.fetchPage({\n        documentId: document.id,\n      });\n    }\n  }, [views, document.id, document.isDeleted]);\n\n  const popover = usePopoverState({\n    gutter: 8,\n    placement: \"bottom\",\n    modal: true,\n  });\n\n  return (\n    <Meta document={document} to={to} {...rest}>\n      {totalViewers && !isDraft ? (\n        <PopoverDisclosure {...popover}>\n          {(props) => (\n            <>\n              &nbsp;•&nbsp;\n              <a {...props}>\n                {t(\"Viewed by\")}{\" \"}\n                {onlyYou\n                  ? t(\"only you\")\n                  : `${totalViewers} ${\n                      totalViewers === 1 ? t(\"person\") : t(\"people\")\n                    }`}\n              </a>\n            </>\n          )}\n        </PopoverDisclosure>\n      ) : null}\n      <Popover {...popover} width={300} aria-label={t(\"Viewers\")} tabIndex={0}>\n        <DocumentViews document={document} isOpen={popover.visible} />\n      </Popover>\n    </Meta>\n  );\n}\n\nconst Meta = styled(DocumentMeta)<{ rtl?: boolean }>`\n  justify-content: ${(props) => (props.rtl ? \"flex-end\" : \"flex-start\")};\n  margin: -12px 0 2em 0;\n  font-size: 14px;\n  position: relative;\n  z-index: 1;\n\n  a {\n    color: inherit;\n\n    &:hover {\n      text-decoration: underline;\n    }\n  }\n\n  @media print {\n    display: none;\n  }\n`;\n\nexport default observer(DocumentMetaWithViews);\n","import { formatDistanceToNow } from \"date-fns\";\nimport { sortBy } from \"lodash\";\nimport { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport Document from \"~/models/Document\";\nimport User from \"~/models/User\";\nimport Avatar from \"~/components/Avatar\";\nimport ListItem from \"~/components/List/Item\";\nimport PaginatedList from \"~/components/PaginatedList\";\nimport useStores from \"~/hooks/useStores\";\n\ntype Props = {\n  document: Document;\n  isOpen?: boolean;\n};\n\nfunction DocumentViews({ document, isOpen }: Props) {\n  const { t } = useTranslation();\n  const { views, presence } = useStores();\n  const documentPresence = presence.get(document.id);\n  const documentPresenceArray = documentPresence\n    ? Array.from(documentPresence.values())\n    : [];\n  const presentIds = documentPresenceArray.map((p) => p.userId);\n  const editingIds = documentPresenceArray\n    .filter((p) => p.isEditing)\n    .map((p) => p.userId);\n\n  // ensure currently present via websocket are always ordered first\n  const documentViews = views.inDocument(document.id);\n  const sortedViews = sortBy(\n    documentViews,\n    (view) => !presentIds.includes(view.user.id)\n  );\n  const users = React.useMemo(() => sortedViews.map((v) => v.user), [\n    sortedViews,\n  ]);\n\n  return (\n    <>\n      {isOpen && (\n        <PaginatedList\n          aria-label={t(\"Viewers\")}\n          items={users}\n          renderItem={(item: User) => {\n            const view = documentViews.find((v) => v.user.id === item.id);\n            const isPresent = presentIds.includes(item.id);\n            const isEditing = editingIds.includes(item.id);\n            const subtitle = isPresent\n              ? isEditing\n                ? t(\"Currently editing\")\n                : t(\"Currently viewing\")\n              : t(\"Viewed {{ timeAgo }} ago\", {\n                  timeAgo: formatDistanceToNow(\n                    view ? Date.parse(view.lastViewedAt) : new Date()\n                  ),\n                });\n            return (\n              <ListItem\n                key={item.id}\n                title={item.name}\n                subtitle={subtitle}\n                image={<Avatar key={item.id} src={item.avatarUrl} size={32} />}\n                border={false}\n                small\n              />\n            );\n          }}\n        />\n      )}\n    </>\n  );\n}\n\nexport default observer(DocumentViews);\n"],"sourceRoot":""}