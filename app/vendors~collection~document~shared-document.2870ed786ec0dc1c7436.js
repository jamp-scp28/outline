(window.webpackJsonp=window.webpackJsonp||[]).push([["vendors~collection~document~shared-document"],{"2jHN":function(e,t,n){"use strict";n.d(t,"a",(function(){return useUnmountEffect}));var o=n("q1tI");function useUnmountEffect(e){return Object(o.useEffect)((function(){return function(){return e()}}),[])}},"8PNI":function(e,t,n){"use strict";n.d(t,"a",(function(){return AnimatePresence}));var o=n("mrSG"),r=n("q1tI"),i=n("2jHN");var s=n("c8Wq"),a=n("J4/h"),c=0;function getPresenceId(){var e=c;return c++,e}var PresenceChild=function(e){var t=e.children,n=e.initial,o=e.isPresent,i=e.onExitComplete,c=e.custom,l=e.presenceAffectsLayout,p=Object(a.a)(newChildrenMap),d=Object(a.a)(getPresenceId),h=Object(r.useMemo)((function(){return{id:d,initial:n,isPresent:o,custom:c,onExitComplete:function(e){p.set(e,!0);var t=!0;p.forEach((function(e){e||(t=!1)})),t&&(null==i||i())},register:function(e){return p.set(e,!1),function(){return p.delete(e)}}}}),l?void 0:[o]);return Object(r.useMemo)((function(){p.forEach((function(e,t){return p.set(t,!1)}))}),[o]),r.useEffect((function(){!o&&!p.size&&(null==i||i())}),[o]),r.createElement(s.a.Provider,{value:h},t)};function newChildrenMap(){return new Map}var l=n("10wF");function getChildKey(e){return e.key||""}var AnimatePresence=function(e){var t=e.children,n=e.custom,s=e.initial,a=void 0===s||s,c=e.onExitComplete,p=e.exitBeforeEnter,d=e.presenceAffectsLayout,h=void 0===d||d,u=function useForceUpdate(){var e=Object(r.useRef)(!1),t=Object(o.e)(Object(r.useState)(0),2),n=t[0],s=t[1];return Object(i.a)((function(){return e.current=!0})),Object(r.useCallback)((function(){!e.current&&s(n+1)}),[n])}(),f=Object(r.useContext)(l.b);Object(l.c)(f)&&(u=f.forceUpdate);var m=Object(r.useRef)(!0),v=function onlyElements(e){var t=[];return r.Children.forEach(e,(function(e){Object(r.isValidElement)(e)&&t.push(e)})),t}(t),g=Object(r.useRef)(v),y=Object(r.useRef)(new Map).current,S=Object(r.useRef)(new Set).current;if(function updateChildLookup(e,t){e.forEach((function(e){var n=getChildKey(e);t.set(n,e)}))}(v,y),m.current)return m.current=!1,r.createElement(r.Fragment,null,v.map((function(e){return r.createElement(PresenceChild,{key:getChildKey(e),isPresent:!0,initial:!!a&&void 0,presenceAffectsLayout:h},e)})));for(var w=Object(o.h)([],Object(o.e)(v)),b=g.current.map(getChildKey),k=v.map(getChildKey),x=b.length,O=0;O<x;O++){var M=b[O];-1===k.indexOf(M)?S.add(M):S.delete(M)}return p&&S.size&&(w=[]),S.forEach((function(e){if(-1===k.indexOf(e)){var t=y.get(e);if(t){var o=b.indexOf(e);w.splice(o,0,r.createElement(PresenceChild,{key:getChildKey(t),isPresent:!1,onExitComplete:function(){y.delete(e),S.delete(e);var t=g.current.findIndex((function(t){return t.key===e}));g.current.splice(t,1),S.size||(g.current=v,u(),c&&c())},custom:n,presenceAffectsLayout:h},t))}}})),w=w.map((function(e){var t=e.key;return S.has(t)?e:r.createElement(PresenceChild,{key:getChildKey(e),isPresent:!0,presenceAffectsLayout:h},e)})),g.current=w,r.createElement(r.Fragment,null,S.size?w:w.map((function(e){return Object(r.cloneElement)(e)})))}},CsC6:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return canJoin})),n.d(t,"f",(function(){return canSplit})),n.d(t,"g",(function(){return dropPoint})),n.d(t,"h",(function(){return findWrapping})),n.d(t,"i",(function(){return joinPoint})),n.d(t,"j",(function(){return liftTarget})),n.d(t,"k",(function(){return replaceStep}));var o=n("MEpN"),r=Math.pow(2,16);function recoverIndex(e){return 65535&e}var i=function MapResult(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=null),this.pos=e,this.deleted=t,this.recover=n},s=function StepMap(e,t){void 0===t&&(t=!1),this.ranges=e,this.inverted=t};s.prototype.recover=function recover(e){var t=0,n=recoverIndex(e);if(!this.inverted)for(var o=0;o<n;o++)t+=this.ranges[3*o+2]-this.ranges[3*o+1];return this.ranges[3*n]+t+function recoverOffset(e){return(e-(65535&e))/r}(e)},s.prototype.mapResult=function mapResult(e,t){return void 0===t&&(t=1),this._map(e,t,!1)},s.prototype.map=function map(e,t){return void 0===t&&(t=1),this._map(e,t,!0)},s.prototype._map=function _map(e,t,n){for(var o=0,s=this.inverted?2:1,a=this.inverted?1:2,c=0;c<this.ranges.length;c+=3){var l=this.ranges[c]-(this.inverted?o:0);if(l>e)break;var p=this.ranges[c+s],d=this.ranges[c+a],h=l+p;if(e<=h){var u=l+o+((p?e==l?-1:e==h?1:t:t)<0?0:d);if(n)return u;var f=c/3+(e-l)*r;return new i(u,t<0?e!=l:e!=h,f)}o+=d-p}return n?e+o:new i(e+o)},s.prototype.touches=function touches(e,t){for(var n=0,o=recoverIndex(t),r=this.inverted?2:1,i=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var a=this.ranges[s]-(this.inverted?n:0);if(a>e)break;var c=this.ranges[s+r];if(e<=a+c&&s==3*o)return!0;n+=this.ranges[s+i]-c}return!1},s.prototype.forEach=function forEach(e){for(var t=this.inverted?2:1,n=this.inverted?1:2,o=0,r=0;o<this.ranges.length;o+=3){var i=this.ranges[o],s=i-(this.inverted?r:0),a=i+(this.inverted?0:r),c=this.ranges[o+t],l=this.ranges[o+n];e(s,s+c,a,a+l),r+=l-c}},s.prototype.invert=function invert(){return new s(this.ranges,!this.inverted)},s.prototype.toString=function toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},s.offset=function offset(e){return 0==e?s.empty:new s(e<0?[0,-e,0]:[0,0,e])},s.empty=new s([]);var a=function Mapping(e,t,n,o){this.maps=e||[],this.from=n||0,this.to=null==o?this.maps.length:o,this.mirror=t};function TransformError(e){var t=Error.call(this,e);return t.__proto__=TransformError.prototype,t}a.prototype.slice=function slice(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.maps.length),new a(this.maps,this.mirror,e,t)},a.prototype.copy=function copy(){return new a(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},a.prototype.appendMap=function appendMap(e,t){this.to=this.maps.push(e),null!=t&&this.setMirror(this.maps.length-1,t)},a.prototype.appendMapping=function appendMapping(e){for(var t=0,n=this.maps.length;t<e.maps.length;t++){var o=e.getMirror(t);this.appendMap(e.maps[t],null!=o&&o<t?n+o:null)}},a.prototype.getMirror=function getMirror(e){if(this.mirror)for(var t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]},a.prototype.setMirror=function setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)},a.prototype.appendMappingInverted=function appendMappingInverted(e){for(var t=e.maps.length-1,n=this.maps.length+e.maps.length;t>=0;t--){var o=e.getMirror(t);this.appendMap(e.maps[t].invert(),null!=o&&o>t?n-o-1:null)}},a.prototype.invert=function invert(){var e=new a;return e.appendMappingInverted(this),e},a.prototype.map=function map(e,t){if(void 0===t&&(t=1),this.mirror)return this._map(e,t,!0);for(var n=this.from;n<this.to;n++)e=this.maps[n].map(e,t);return e},a.prototype.mapResult=function mapResult(e,t){return void 0===t&&(t=1),this._map(e,t,!1)},a.prototype._map=function _map(e,t,n){for(var o=!1,r=null,s=this.from;s<this.to;s++){var a=this.maps[s],c=r&&r[s];if(null!=c&&a.touches(e,c))e=a.recover(c);else{var l=a.mapResult(e,t);if(null!=l.recover){var p=this.getMirror(s);if(null!=p&&p>s&&p<this.to){if(l.deleted){s=p,e=this.maps[p].recover(l.recover);continue}(r||(r=Object.create(null)))[p]=l.recover}}l.deleted&&(o=!0),e=l.pos}}return n?e:new i(e,o)},TransformError.prototype=Object.create(Error.prototype),TransformError.prototype.constructor=TransformError,TransformError.prototype.name="TransformError";var c=function Transform(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new a},l={before:{configurable:!0},docChanged:{configurable:!0}};function mustOverride(){throw new Error("Override me")}l.before.get=function(){return this.docs.length?this.docs[0]:this.doc},c.prototype.step=function step(e){var t=this.maybeStep(e);if(t.failed)throw new TransformError(t.failed);return this},c.prototype.maybeStep=function maybeStep(e){var t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t},l.docChanged.get=function(){return this.steps.length>0},c.prototype.addStep=function addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t},Object.defineProperties(c.prototype,l);var p=Object.create(null),d=function Step(){};d.prototype.apply=function apply(e){return mustOverride()},d.prototype.getMap=function getMap(){return s.empty},d.prototype.invert=function invert(e){return mustOverride()},d.prototype.map=function map(e){return mustOverride()},d.prototype.merge=function merge(e){return null},d.prototype.toJSON=function toJSON(){return mustOverride()},d.fromJSON=function fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=p[t.stepType];if(!n)throw new RangeError("No step type "+t.stepType+" defined");return n.fromJSON(e,t)},d.jsonID=function jsonID(e,t){if(e in p)throw new RangeError("Duplicate use of step JSON ID "+e);return p[e]=t,t.prototype.jsonID=e,t};var h=function StepResult(e,t){this.doc=e,this.failed=t};h.ok=function ok(e){return new h(e,null)},h.fail=function fail(e){return new h(null,e)},h.fromReplace=function fromReplace(e,t,n,r){try{return h.ok(e.replace(t,n,r))}catch(e){if(e instanceof o.ReplaceError)return h.fail(e.message);throw e}};var u=function(e){function ReplaceStep(t,n,o,r){e.call(this),this.from=t,this.to=n,this.slice=o,this.structure=!!r}return e&&(ReplaceStep.__proto__=e),ReplaceStep.prototype=Object.create(e&&e.prototype),ReplaceStep.prototype.constructor=ReplaceStep,ReplaceStep.prototype.apply=function apply(e){return this.structure&&contentBetween(e,this.from,this.to)?h.fail("Structure replace would overwrite content"):h.fromReplace(e,this.from,this.to,this.slice)},ReplaceStep.prototype.getMap=function getMap(){return new s([this.from,this.to-this.from,this.slice.size])},ReplaceStep.prototype.invert=function invert(e){return new ReplaceStep(this.from,this.from+this.slice.size,e.slice(this.from,this.to))},ReplaceStep.prototype.map=function map(e){var t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted?null:new ReplaceStep(t.pos,Math.max(t.pos,n.pos),this.slice)},ReplaceStep.prototype.merge=function merge(e){if(!(e instanceof ReplaceStep)||e.structure!=this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart){if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;var t=this.slice.size+e.slice.size==0?o.Slice.empty:new o.Slice(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new ReplaceStep(e.from,this.to,t,this.structure)}var n=this.slice.size+e.slice.size==0?o.Slice.empty:new o.Slice(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new ReplaceStep(this.from,this.to+(e.to-e.from),n,this.structure)},ReplaceStep.prototype.toJSON=function toJSON(){var e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e},ReplaceStep.fromJSON=function fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new ReplaceStep(t.from,t.to,o.Slice.fromJSON(e,t.slice),!!t.structure)},ReplaceStep}(d);d.jsonID("replace",u);var f=function(e){function ReplaceAroundStep(t,n,o,r,i,s,a){e.call(this),this.from=t,this.to=n,this.gapFrom=o,this.gapTo=r,this.slice=i,this.insert=s,this.structure=!!a}return e&&(ReplaceAroundStep.__proto__=e),ReplaceAroundStep.prototype=Object.create(e&&e.prototype),ReplaceAroundStep.prototype.constructor=ReplaceAroundStep,ReplaceAroundStep.prototype.apply=function apply(e){if(this.structure&&(contentBetween(e,this.from,this.gapFrom)||contentBetween(e,this.gapTo,this.to)))return h.fail("Structure gap-replace would overwrite content");var t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return h.fail("Gap is not a flat range");var n=this.slice.insertAt(this.insert,t.content);return n?h.fromReplace(e,this.from,this.to,n):h.fail("Content does not fit in gap")},ReplaceAroundStep.prototype.getMap=function getMap(){return new s([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},ReplaceAroundStep.prototype.invert=function invert(e){var t=this.gapTo-this.gapFrom;return new ReplaceAroundStep(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},ReplaceAroundStep.prototype.map=function map(e){var t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),o=e.map(this.gapFrom,-1),r=e.map(this.gapTo,1);return t.deleted&&n.deleted||o<t.pos||r>n.pos?null:new ReplaceAroundStep(t.pos,n.pos,o,r,this.slice,this.insert,this.structure)},ReplaceAroundStep.prototype.toJSON=function toJSON(){var e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e},ReplaceAroundStep.fromJSON=function fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to||"number"!=typeof t.gapFrom||"number"!=typeof t.gapTo||"number"!=typeof t.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ReplaceAroundStep(t.from,t.to,t.gapFrom,t.gapTo,o.Slice.fromJSON(e,t.slice),t.insert,!!t.structure)},ReplaceAroundStep}(d);function contentBetween(e,t,n){for(var o=e.resolve(t),r=n-t,i=o.depth;r>0&&i>0&&o.indexAfter(i)==o.node(i).childCount;)i--,r--;if(r>0)for(var s=o.node(i).maybeChild(o.indexAfter(i));r>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,r--}return!1}function canCut(e,t,n){return(0==t||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function liftTarget(e){for(var t=e.parent.content.cutByIndex(e.startIndex,e.endIndex),n=e.depth;;--n){var o=e.$from.node(n),r=e.$from.index(n),i=e.$to.indexAfter(n);if(n<e.depth&&o.canReplace(r,i,t))return n;if(0==n||o.type.spec.isolating||!canCut(o,r,i))break}}function findWrapping(e,t,n,o){void 0===o&&(o=e);var r=function findWrappingOutside(e,t){var n=e.parent,o=e.startIndex,r=e.endIndex,i=n.contentMatchAt(o).findWrapping(t);if(!i)return null;var s=i.length?i[0]:t;return n.canReplaceWith(o,r,s)?i:null}(e,t),i=r&&function findWrappingInside(e,t){var n=e.parent,o=e.startIndex,r=e.endIndex,i=n.child(o),s=t.contentMatch.findWrapping(i.type);if(!s)return null;for(var a=(s.length?s[s.length-1]:t).contentMatch,c=o;a&&c<r;c++)a=a.matchType(n.child(c).type);if(!a||!a.validEnd)return null;return s}(o,t);return i?r.map(withAttrs).concat({type:t,attrs:n}).concat(i.map(withAttrs)):null}function withAttrs(e){return{type:e,attrs:null}}function canSplit(e,t,n,o){void 0===n&&(n=1);var r=e.resolve(t),i=r.depth-n,s=o&&o[o.length-1]||r.parent;if(i<0||r.parent.type.spec.isolating||!r.parent.canReplace(r.index(),r.parent.childCount)||!s.type.validContent(r.parent.content.cutByIndex(r.index(),r.parent.childCount)))return!1;for(var a=r.depth-1,c=n-2;a>i;a--,c--){var l=r.node(a),p=r.index(a);if(l.type.spec.isolating)return!1;var d=l.content.cutByIndex(p,l.childCount),h=o&&o[c]||l;if(h!=l&&(d=d.replaceChild(0,h.type.create(h.attrs))),!l.canReplace(p+1,l.childCount)||!h.type.validContent(d))return!1}var u=r.indexAfter(i),f=o&&o[0];return r.node(i).canReplaceWith(u,u,f?f.type:r.node(i+1).type)}function canJoin(e,t){var n=e.resolve(t),o=n.index();return joinable(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(o,o+1)}function joinable(e,t){return e&&t&&!e.isLeaf&&e.canAppend(t)}function joinPoint(e,t,n){void 0===n&&(n=-1);for(var o=e.resolve(t),r=o.depth;;r--){var i=void 0,s=void 0,a=o.index(r);if(r==o.depth?(i=o.nodeBefore,s=o.nodeAfter):n>0?(i=o.node(r+1),a++,s=o.node(r).maybeChild(a)):(i=o.node(r).maybeChild(a-1),s=o.node(r+1)),i&&!i.isTextblock&&joinable(i,s)&&o.node(r).canReplace(a,a+1))return t;if(0==r)break;t=n<0?o.before(r):o.after(r)}}function dropPoint(e,t,n){var o=e.resolve(t);if(!n.content.size)return t;for(var r=n.content,i=0;i<n.openStart;i++)r=r.firstChild.content;for(var s=1;s<=(0==n.openStart&&n.size?2:1);s++)for(var a=o.depth;a>=0;a--){var c=a==o.depth?0:o.pos<=(o.start(a+1)+o.end(a+1))/2?-1:1,l=o.index(a)+(c>0?1:0);if(1==s?o.node(a).canReplace(l,l,r):o.node(a).contentMatchAt(l).findWrapping(r.firstChild.type))return 0==c?o.pos:c<0?o.before(a+1):o.after(a+1)}return null}function mapFragment(e,t,n){for(var r=[],i=0;i<e.childCount;i++){var s=e.child(i);s.content.size&&(s=s.copy(mapFragment(s.content,t,s))),s.isInline&&(s=t(s,n,i)),r.push(s)}return o.Fragment.fromArray(r)}d.jsonID("replaceAround",f),c.prototype.lift=function(e,t){for(var n=e.$from,r=e.$to,i=e.depth,s=n.before(i+1),a=r.after(i+1),c=s,l=a,p=o.Fragment.empty,d=0,h=i,u=!1;h>t;h--)u||n.index(h)>0?(u=!0,p=o.Fragment.from(n.node(h).copy(p)),d++):c--;for(var m=o.Fragment.empty,v=0,g=i,y=!1;g>t;g--)y||r.after(g+1)<r.end(g)?(y=!0,m=o.Fragment.from(r.node(g).copy(m)),v++):l++;return this.step(new f(c,l,s,a,new o.Slice(p.append(m),d,v),p.size-d,!0))},c.prototype.wrap=function(e,t){for(var n=o.Fragment.empty,r=t.length-1;r>=0;r--)n=o.Fragment.from(t[r].type.create(t[r].attrs,n));var i=e.start,s=e.end;return this.step(new f(i,s,i,s,new o.Slice(n,0,0),t.length,!0))},c.prototype.setBlockType=function(e,t,n,r){var i=this;if(void 0===t&&(t=e),!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var s=this.steps.length;return this.doc.nodesBetween(e,t,(function(e,t){if(e.isTextblock&&!e.hasMarkup(n,r)&&function canChangeType(e,t,n){var o=e.resolve(t),r=o.index();return o.parent.canReplaceWith(r,r+1,n)}(i.doc,i.mapping.slice(s).map(t),n)){i.clearIncompatible(i.mapping.slice(s).map(t,1),n);var a=i.mapping.slice(s),c=a.map(t,1),l=a.map(t+e.nodeSize,1);return i.step(new f(c,l,c+1,l-1,new o.Slice(o.Fragment.from(n.create(r,null,e.marks)),0,0),1,!0)),!1}})),this},c.prototype.setNodeMarkup=function(e,t,n,r){var i=this.doc.nodeAt(e);if(!i)throw new RangeError("No node at given position");t||(t=i.type);var s=t.create(n,null,r||i.marks);if(i.isLeaf)return this.replaceWith(e,e+i.nodeSize,s);if(!t.validContent(i.content))throw new RangeError("Invalid content for node type "+t.name);return this.step(new f(e,e+i.nodeSize,e+1,e+i.nodeSize-1,new o.Slice(o.Fragment.from(s),0,0),1,!0))},c.prototype.split=function(e,t,n){void 0===t&&(t=1);for(var r=this.doc.resolve(e),i=o.Fragment.empty,s=o.Fragment.empty,a=r.depth,c=r.depth-t,l=t-1;a>c;a--,l--){i=o.Fragment.from(r.node(a).copy(i));var p=n&&n[l];s=o.Fragment.from(p?p.type.create(p.attrs,s):r.node(a).copy(s))}return this.step(new u(e,e,new o.Slice(i.append(s),t,t),!0))},c.prototype.join=function(e,t){void 0===t&&(t=1);var n=new u(e-t,e+t,o.Slice.empty,!0);return this.step(n)};var m=function(e){function AddMarkStep(t,n,o){e.call(this),this.from=t,this.to=n,this.mark=o}return e&&(AddMarkStep.__proto__=e),AddMarkStep.prototype=Object.create(e&&e.prototype),AddMarkStep.prototype.constructor=AddMarkStep,AddMarkStep.prototype.apply=function apply(e){var t=this,n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new o.Slice(mapFragment(n.content,(function(e,n){return n.type.allowsMarkType(t.mark.type)?e.mark(t.mark.addToSet(e.marks)):e}),i),n.openStart,n.openEnd);return h.fromReplace(e,this.from,this.to,s)},AddMarkStep.prototype.invert=function invert(){return new v(this.from,this.to,this.mark)},AddMarkStep.prototype.map=function map(e){var t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new AddMarkStep(t.pos,n.pos,this.mark)},AddMarkStep.prototype.merge=function merge(e){if(e instanceof AddMarkStep&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from)return new AddMarkStep(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark)},AddMarkStep.prototype.toJSON=function toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},AddMarkStep.fromJSON=function fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new AddMarkStep(t.from,t.to,e.markFromJSON(t.mark))},AddMarkStep}(d);d.jsonID("addMark",m);var v=function(e){function RemoveMarkStep(t,n,o){e.call(this),this.from=t,this.to=n,this.mark=o}return e&&(RemoveMarkStep.__proto__=e),RemoveMarkStep.prototype=Object.create(e&&e.prototype),RemoveMarkStep.prototype.constructor=RemoveMarkStep,RemoveMarkStep.prototype.apply=function apply(e){var t=this,n=e.slice(this.from,this.to),r=new o.Slice(mapFragment(n.content,(function(e){return e.mark(t.mark.removeFromSet(e.marks))})),n.openStart,n.openEnd);return h.fromReplace(e,this.from,this.to,r)},RemoveMarkStep.prototype.invert=function invert(){return new m(this.from,this.to,this.mark)},RemoveMarkStep.prototype.map=function map(e){var t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new RemoveMarkStep(t.pos,n.pos,this.mark)},RemoveMarkStep.prototype.merge=function merge(e){if(e instanceof RemoveMarkStep&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from)return new RemoveMarkStep(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark)},RemoveMarkStep.prototype.toJSON=function toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},RemoveMarkStep.fromJSON=function fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new RemoveMarkStep(t.from,t.to,e.markFromJSON(t.mark))},RemoveMarkStep}(d);function replaceStep(e,t,n,r){if(void 0===n&&(n=t),void 0===r&&(r=o.Slice.empty),t==n&&!r.size)return null;var i=e.resolve(t),s=e.resolve(n);return fitsTrivially(i,s,r)?new u(t,n,r):new g(i,s,r).fit()}function fitsTrivially(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}d.jsonID("removeMark",v),c.prototype.addMark=function(e,t,n){var o=this,r=[],i=[],s=null,a=null;return this.doc.nodesBetween(e,t,(function(o,c,l){if(o.isInline){var p=o.marks;if(!n.isInSet(p)&&l.type.allowsMarkType(n.type)){for(var d=Math.max(c,e),h=Math.min(c+o.nodeSize,t),u=n.addToSet(p),f=0;f<p.length;f++)p[f].isInSet(u)||(s&&s.to==d&&s.mark.eq(p[f])?s.to=h:r.push(s=new v(d,h,p[f])));a&&a.to==d?a.to=h:i.push(a=new m(d,h,n))}}})),r.forEach((function(e){return o.step(e)})),i.forEach((function(e){return o.step(e)})),this},c.prototype.removeMark=function(e,t,n){var r=this;void 0===n&&(n=null);var i=[],s=0;return this.doc.nodesBetween(e,t,(function(r,a){if(r.isInline){s++;var c=null;if(n instanceof o.MarkType){var l=n.isInSet(r.marks);l&&(c=[l])}else n?n.isInSet(r.marks)&&(c=[n]):c=r.marks;if(c&&c.length)for(var p=Math.min(a+r.nodeSize,t),d=0;d<c.length;d++){for(var h=c[d],u=void 0,f=0;f<i.length;f++){var m=i[f];m.step==s-1&&h.eq(i[f].style)&&(u=m)}u?(u.to=p,u.step=s):i.push({style:h,from:Math.max(a,e),to:p,step:s})}}})),i.forEach((function(e){return r.step(new v(e.from,e.to,e.style))})),this},c.prototype.clearIncompatible=function(e,t,n){void 0===n&&(n=t.contentMatch);for(var r=this.doc.nodeAt(e),i=[],s=e+1,a=0;a<r.childCount;a++){var c=r.child(a),l=s+c.nodeSize,p=n.matchType(c.type,c.attrs);if(p){n=p;for(var d=0;d<c.marks.length;d++)t.allowsMarkType(c.marks[d].type)||this.step(new v(s,l,c.marks[d]))}else i.push(new u(s,l,o.Slice.empty));s=l}if(!n.validEnd){var h=n.fillBefore(o.Fragment.empty,!0);this.replace(s,s,new o.Slice(h,0,0))}for(var f=i.length-1;f>=0;f--)this.step(i[f]);return this},c.prototype.replace=function(e,t,n){void 0===t&&(t=e),void 0===n&&(n=o.Slice.empty);var r=replaceStep(this.doc,e,t,n);return r&&this.step(r),this},c.prototype.replaceWith=function(e,t,n){return this.replace(e,t,new o.Slice(o.Fragment.from(n),0,0))},c.prototype.delete=function(e,t){return this.replace(e,t,o.Slice.empty)},c.prototype.insert=function(e,t){return this.replaceWith(e,e,t)};var g=function Fitter(e,t,n){this.$to=t,this.$from=e,this.unplaced=n,this.frontier=[];for(var r=0;r<=e.depth;r++){var i=e.node(r);this.frontier.push({type:i.type,match:i.contentMatchAt(e.indexAfter(r))})}this.placed=o.Fragment.empty;for(var s=e.depth;s>0;s--)this.placed=o.Fragment.from(e.node(s).copy(this.placed))},y={depth:{configurable:!0}};function dropFromFragment(e,t,n){return 0==t?e.cutByIndex(n):e.replaceChild(0,e.firstChild.copy(dropFromFragment(e.firstChild.content,t-1,n)))}function addToFragment(e,t,n){return 0==t?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(addToFragment(e.lastChild.content,t-1,n)))}function contentAt(e,t){for(var n=0;n<t;n++)e=e.firstChild.content;return e}function closeNodeStart(e,t,n){if(t<=0)return e;var r=e.content;return t>1&&(r=r.replaceChild(0,closeNodeStart(r.firstChild,t-1,1==r.childCount?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(o.Fragment.empty,!0)))),e.copy(r)}function contentAfterFits(e,t,n,o,r){var i=e.node(t),s=r?e.indexAfter(t):e.index(t);if(s==i.childCount&&!n.compatibleContent(i.type))return null;var a=o.fillBefore(i.content,!0,s);return a&&!function invalidMarks(e,t,n){for(var o=n;o<t.childCount;o++)if(!e.allowsMarks(t.child(o).marks))return!0;return!1}(n,i.content,s)?a:null}function closeFragment(e,t,n,r,i){if(t<n){var s=e.firstChild;e=e.replaceChild(0,s.copy(closeFragment(s.content,t+1,n,r,s)))}if(t>r){var a=i.contentMatchAt(0),c=a.fillBefore(e).append(e);e=c.append(a.matchFragment(c).fillBefore(o.Fragment.empty,!0))}return e}function coveredDepths(e,t){for(var n=[],o=Math.min(e.depth,t.depth);o>=0;o--){var r=e.start(o);if(r<e.pos-(e.depth-o)||t.end(o)>t.pos+(t.depth-o)||e.node(o).type.spec.isolating||t.node(o).type.spec.isolating)break;r==t.start(o)&&n.push(o)}return n}y.depth.get=function(){return this.frontier.length-1},g.prototype.fit=function fit(){for(;this.unplaced.size;){var fit=this.findFittable();fit?this.placeNodes(fit):this.openMore()||this.dropNode()}var e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,n=this.$from,r=e<0?this.$to:n.doc.resolve(e);if(this.close(r)){for(var i=this.placed,s=n.depth,a=r.depth;s&&a&&1==i.childCount;)i=i.firstChild.content,s--,a--;var c=new o.Slice(i,s,a);if(e>-1)return new f(n.pos,e,this.$to.pos,this.$to.end(),c,t);if(c.size||n.pos!=this.$to.pos)return new u(n.pos,r.pos,c)}return null},g.prototype.findFittable=function findFittable(){for(var e=1;e<=2;e++)for(var t=this.unplaced.openStart;t>=0;t--)for(var n=void 0,r=(t?(n=contentAt(this.unplaced.content,t-1).firstChild).content:this.unplaced.content).firstChild,i=this.depth;i>=0;i--){var s=this.frontier[i],a=s.type,c=s.match,l=void 0,p=void 0;if(1==e&&(r?c.matchType(r.type)||(p=c.fillBefore(o.Fragment.from(r),!1)):a.compatibleContent(n.type)))return{sliceDepth:t,frontierDepth:i,parent:n,inject:p};if(2==e&&r&&(l=c.findWrapping(r.type)))return{sliceDepth:t,frontierDepth:i,parent:n,wrap:l};if(n&&c.matchType(n.type))break}},g.prototype.openMore=function openMore(){var e=this.unplaced,t=e.content,n=e.openStart,r=e.openEnd,i=contentAt(t,n);return!(!i.childCount||i.firstChild.isLeaf)&&(this.unplaced=new o.Slice(t,n+1,Math.max(r,i.size+n>=t.size-r?n+1:0)),!0)},g.prototype.dropNode=function dropNode(){var e=this.unplaced,t=e.content,n=e.openStart,r=e.openEnd,i=contentAt(t,n);if(i.childCount<=1&&n>0){var s=t.size-n<=n+i.size;this.unplaced=new o.Slice(dropFromFragment(t,n-1,1),n-1,s?n-1:r)}else this.unplaced=new o.Slice(dropFromFragment(t,n,1),n,r)},g.prototype.placeNodes=function placeNodes(e){for(var t=e.sliceDepth,n=e.frontierDepth,r=e.parent,i=e.inject,s=e.wrap;this.depth>n;)this.closeFrontierNode();if(s)for(var a=0;a<s.length;a++)this.openFrontierNode(s[a]);var c=this.unplaced,l=r?r.content:c.content,p=c.openStart-t,d=0,h=[],u=this.frontier[n],f=u.match,m=u.type;if(i){for(var v=0;v<i.childCount;v++)h.push(i.child(v));f=f.matchFragment(i)}for(var g=l.size+t-(c.content.size-c.openEnd);d<l.childCount;){var y=l.child(d),S=f.matchType(y.type);if(!S)break;(++d>1||0==p||y.content.size)&&(f=S,h.push(closeNodeStart(y.mark(m.allowedMarks(y.marks)),1==d?p:0,d==l.childCount?g:-1)))}var w=d==l.childCount;w||(g=-1),w&&g<0&&r&&r.type==this.frontier[this.depth].type?this.closeFrontierNode():this.frontier[n].match=f;for(var b=0,k=l;b<g;b++){var x=k.lastChild;this.frontier.push({type:x.type,match:x.contentMatchAt(x.childCount)}),k=x.content}this.unplaced=w?0==t?o.Slice.empty:new o.Slice(dropFromFragment(c.content,t-1,1),t-1,g<0?c.openEnd:t-1):new o.Slice(dropFromFragment(c.content,t,d),c.openStart,c.openEnd),this.placed=addToFragment(this.placed,n,o.Fragment.from(h))},g.prototype.mustMoveInline=function mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;var e,t=this.frontier[this.depth];if(!t.type.isTextblock||!contentAfterFits(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;for(var n=this.$to.depth,o=this.$to.after(n);n>1&&o==this.$to.end(--n);)++o;return o},g.prototype.findCloseLevel=function findCloseLevel(e){e:for(var t=Math.min(this.depth,e.depth);t>=0;t--){var n=this.frontier[t],o=n.match,r=contentAfterFits(e,t,n.type,o,!1);if(r){for(var i=t-1;i>=0;i--){var s=this.frontier[i],a=s.match,c=contentAfterFits(e,i,s.type,a,!0);if(!c||c.childCount)continue e}return{depth:t,fit:r}}}},g.prototype.close=function close(e){var close=this.findCloseLevel(e);if(!close)return!1;for(;this.depth>close.depth;)this.closeFrontierNode();close.fit.childCount&&(this.placed=addToFragment(this.placed,close.depth,close.fit));for(var t=close.depth+1;t<=e.depth;t++){var n=e.node(t),o=n.type.contentMatch.fillBefore(n.content,!0,e.index(t));this.openFrontierNode(n.type,n.attrs,o)}return!0},g.prototype.openFrontierNode=function openFrontierNode(e,t,n){var r=this.frontier[this.depth];r.match=r.match.matchType(e),this.placed=addToFragment(this.placed,this.depth,o.Fragment.from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})},g.prototype.closeFrontierNode=function closeFrontierNode(){var e=this.frontier.pop().match.fillBefore(o.Fragment.empty,!0);e.childCount&&(this.placed=addToFragment(this.placed,this.frontier.length,e))},Object.defineProperties(g.prototype,y),c.prototype.replaceRange=function(e,t,n){if(!n.size)return this.deleteRange(e,t);var r=this.doc.resolve(e),i=this.doc.resolve(t);if(fitsTrivially(r,i,n))return this.step(new u(e,t,n));var s=coveredDepths(r,this.doc.resolve(t));0==s[s.length-1]&&s.pop();var a=-(r.depth+1);s.unshift(a);for(var c=r.depth,l=r.pos-1;c>0;c--,l--){var p=r.node(c).type.spec;if(p.defining||p.isolating)break;s.indexOf(c)>-1?a=c:r.before(c)==l&&s.splice(1,0,-c)}for(var d=s.indexOf(a),h=[],f=n.openStart,m=n.content,v=0;;v++){var g=m.firstChild;if(h.push(g),v==n.openStart)break;m=g.content}f>0&&h[f-1].type.spec.defining&&r.node(d).type!=h[f-1].type?f-=1:f>=2&&h[f-1].isTextblock&&h[f-2].type.spec.defining&&r.node(d).type!=h[f-2].type&&(f-=2);for(var y=n.openStart;y>=0;y--){var S=(y+f+1)%(n.openStart+1),w=h[S];if(w)for(var b=0;b<s.length;b++){var k=s[(b+d)%s.length],x=!0;k<0&&(x=!1,k=-k);var O=r.node(k-1),M=r.index(k-1);if(O.canReplaceWith(M,M,w.type,w.marks))return this.replace(r.before(k),x?i.after(k):t,new o.Slice(closeFragment(n.content,0,n.openStart,S),S,n.openEnd))}}for(var C=this.steps.length,D=s.length-1;D>=0&&(this.replace(e,t,n),!(this.steps.length>C));D--){var N=s[D];D<0||(e=r.before(N),t=i.after(N))}return this},c.prototype.replaceRangeWith=function(e,t,n){if(!n.isInline&&e==t&&this.doc.resolve(e).parent.content.size){var r=function insertPoint(e,t,n){var o=e.resolve(t);if(o.parent.canReplaceWith(o.index(),o.index(),n))return t;if(0==o.parentOffset)for(var r=o.depth-1;r>=0;r--){var i=o.index(r);if(o.node(r).canReplaceWith(i,i,n))return o.before(r+1);if(i>0)return null}if(o.parentOffset==o.parent.content.size)for(var s=o.depth-1;s>=0;s--){var a=o.indexAfter(s);if(o.node(s).canReplaceWith(a,a,n))return o.after(s+1);if(a<o.node(s).childCount)return null}}(this.doc,e,n.type);null!=r&&(e=t=r)}return this.replaceRange(e,t,new o.Slice(o.Fragment.from(n),0,0))},c.prototype.deleteRange=function(e,t){for(var n=this.doc.resolve(e),o=this.doc.resolve(t),r=coveredDepths(n,o),i=0;i<r.length;i++){var s=r[i],a=i==r.length-1;if(a&&0==s||n.node(s).type.contentMatch.validEnd)return this.delete(n.start(s),o.end(s));if(s>0&&(a||n.node(s-1).canReplace(n.index(s-1),o.indexAfter(s-1))))return this.delete(n.before(s),o.after(s))}for(var c=1;c<=n.depth&&c<=o.depth;c++)if(e-n.start(c)==n.depth-c&&t>n.end(c)&&o.end(c)-t!=o.depth-c)return this.delete(n.before(c),t);return this.delete(e,t)}},ENF9:function(e,t,n){"use strict";var o,r=n("2oRo"),i=n("4syw"),s=n("8YOa"),a=n("bWFh"),c=n("rKzb"),l=n("hh1v"),p=n("afO8").enforce,d=n("f5p1"),h=!r.ActiveXObject&&"ActiveXObject"in r,u=Object.isExtensible,wrapper=function(e){return function WeakMap(){return e(this,arguments.length?arguments[0]:void 0)}},f=e.exports=a("WeakMap",wrapper,c);if(d&&h){o=c.getConstructor(wrapper,"WeakMap",!0),s.REQUIRED=!0;var m=f.prototype,v=m.delete,g=m.has,y=m.get,S=m.set;i(m,{delete:function(e){if(l(e)&&!u(e)){var t=p(this);return t.frozen||(t.frozen=new o),v.call(this,e)||t.frozen.delete(e)}return v.call(this,e)},has:function has(e){if(l(e)&&!u(e)){var t=p(this);return t.frozen||(t.frozen=new o),g.call(this,e)||t.frozen.has(e)}return g.call(this,e)},get:function get(e){if(l(e)&&!u(e)){var t=p(this);return t.frozen||(t.frozen=new o),g.call(this,e)?y.call(this,e):t.frozen.get(e)}return y.call(this,e)},set:function set(e,t){if(l(e)&&!u(e)){var n=p(this);n.frozen||(n.frozen=new o),g.call(this,e)?S.call(this,e,t):n.frozen.set(e,t)}else S.call(this,e,t);return this}})}},Ib8C:function(e,t,n){(function(t){var o;e.exports=(o=o||function(e,o){var r;if("undefined"!=typeof window&&window.crypto&&(r=window.crypto),"undefined"!=typeof self&&self.crypto&&(r=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(r=globalThis.crypto),!r&&"undefined"!=typeof window&&window.msCrypto&&(r=window.msCrypto),!r&&void 0!==t&&t.crypto&&(r=t.crypto),!r)try{r=n(2)}catch(e){}var cryptoSecureRandomInt=function(){if(r){if("function"==typeof r.getRandomValues)try{return r.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof r.randomBytes)try{return r.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")},i=Object.create||function(){function F(){}return function(e){var t;return F.prototype=e,t=new F,F.prototype=null,t}}(),s={},a=s.lib={},c=a.Base={extend:function(e){var t=i(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},l=a.WordArray=c.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=t!=o?t:4*e.length},toString:function(e){return(e||d).stringify(this)},concat:function(e){var t=this.words,n=e.words,o=this.sigBytes,r=e.sigBytes;if(this.clamp(),o%4)for(var i=0;i<r;i++){var s=n[i>>>2]>>>24-i%4*8&255;t[o+i>>>2]|=s<<24-(o+i)%4*8}else for(var a=0;a<r;a+=4)t[o+a>>>2]=n[a>>>2];return this.sigBytes+=r,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=c.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(cryptoSecureRandomInt());return new l.init(t,e)}}),p=s.enc={},d=p.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,o=[],r=0;r<n;r++){var i=t[r>>>2]>>>24-r%4*8&255;o.push((i>>>4).toString(16)),o.push((15&i).toString(16))}return o.join("")},parse:function(e){for(var t=e.length,n=[],o=0;o<t;o+=2)n[o>>>3]|=parseInt(e.substr(o,2),16)<<24-o%8*4;return new l.init(n,t/2)}},h=p.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,o=[],r=0;r<n;r++){var i=t[r>>>2]>>>24-r%4*8&255;o.push(String.fromCharCode(i))}return o.join("")},parse:function(e){for(var t=e.length,n=[],o=0;o<t;o++)n[o>>>2]|=(255&e.charCodeAt(o))<<24-o%4*8;return new l.init(n,t)}},u=p.Utf8={stringify:function(e){try{return decodeURIComponent(escape(h.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return h.parse(unescape(encodeURIComponent(e)))}},f=a.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=u.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n,o=this._data,r=o.words,i=o.sigBytes,s=this.blockSize,a=i/(4*s),c=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*s,p=e.min(4*c,i);if(c){for(var d=0;d<c;d+=s)this._doProcessBlock(r,d);n=r.splice(0,c),o.sigBytes-=p}return new l.init(n,p)},clone:function(){var e=c.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),m=(a.Hasher=f.extend({cfg:c.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new m.HMAC.init(e,n).finalize(t)}}}),s.algo={});return s}(Math),o)}).call(this,n("yLpj"))},MEpN:function(e,t,n){"use strict";function OrderedMap(e){this.content=e}n.r(t),n.d(t,"ContentMatch",(function(){return b})),n.d(t,"DOMParser",(function(){return R})),n.d(t,"DOMSerializer",(function(){return B})),n.d(t,"Fragment",(function(){return r})),n.d(t,"Mark",(function(){return a})),n.d(t,"MarkType",(function(){return T})),n.d(t,"Node",(function(){return y})),n.d(t,"NodeRange",(function(){return m})),n.d(t,"NodeType",(function(){return M})),n.d(t,"ReplaceError",(function(){return ReplaceError})),n.d(t,"ResolvedPos",(function(){return p})),n.d(t,"Schema",(function(){return E})),n.d(t,"Slice",(function(){return c})),OrderedMap.prototype={constructor:OrderedMap,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return-1==t?void 0:this.content[t+1]},update:function(e,t,n){var o=n&&n!=e?this.remove(n):this,r=o.find(e),i=o.content.slice();return-1==r?i.push(n||e,t):(i[r+1]=t,n&&(i[r]=n)),new OrderedMap(i)},remove:function(e){var t=this.find(e);if(-1==t)return this;var n=this.content.slice();return n.splice(t,2),new OrderedMap(n)},addToStart:function(e,t){return new OrderedMap([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new OrderedMap(n)},addBefore:function(e,t,n){var o=this.remove(t),r=o.content.slice(),i=o.find(e);return r.splice(-1==i?r.length:i,0,t,n),new OrderedMap(r)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return(e=OrderedMap.from(e)).size?new OrderedMap(e.content.concat(this.subtract(e).content)):this},append:function(e){return(e=OrderedMap.from(e)).size?new OrderedMap(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=OrderedMap.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},get size(){return this.content.length>>1}},OrderedMap.from=function(e){if(e instanceof OrderedMap)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new OrderedMap(t)};var o=OrderedMap;function findDiffStart(e,t,n){for(var o=0;;o++){if(o==e.childCount||o==t.childCount)return e.childCount==t.childCount?null:n;var r=e.child(o),i=t.child(o);if(r!=i){if(!r.sameMarkup(i))return n;if(r.isText&&r.text!=i.text){for(var s=0;r.text[s]==i.text[s];s++)n++;return n}if(r.content.size||i.content.size){var a=findDiffStart(r.content,i.content,n+1);if(null!=a)return a}n+=r.nodeSize}else n+=r.nodeSize}}function findDiffEnd(e,t,n,o){for(var r=e.childCount,i=t.childCount;;){if(0==r||0==i)return r==i?null:{a:n,b:o};var s=e.child(--r),a=t.child(--i),c=s.nodeSize;if(s!=a){if(!s.sameMarkup(a))return{a:n,b:o};if(s.isText&&s.text!=a.text){for(var l=0,p=Math.min(s.text.length,a.text.length);l<p&&s.text[s.text.length-l-1]==a.text[a.text.length-l-1];)l++,n--,o--;return{a:n,b:o}}if(s.content.size||a.content.size){var d=findDiffEnd(s.content,a.content,n-1,o-1);if(d)return d}n-=c,o-=c}else n-=c,o-=c}}var r=function Fragment(e,t){if(this.content=e,this.size=t||0,null==t)for(var n=0;n<e.length;n++)this.size+=e[n].nodeSize},i={firstChild:{configurable:!0},lastChild:{configurable:!0},childCount:{configurable:!0}};r.prototype.nodesBetween=function nodesBetween(e,t,n,o,r){void 0===o&&(o=0);for(var i=0,s=0;s<t;i++){var a=this.content[i],c=s+a.nodeSize;if(c>e&&!1!==n(a,o+s,r,i)&&a.content.size){var l=s+1;a.nodesBetween(Math.max(0,e-l),Math.min(a.content.size,t-l),n,o+l)}s=c}},r.prototype.descendants=function descendants(e){this.nodesBetween(0,this.size,e)},r.prototype.textBetween=function textBetween(e,t,n,o){var r="",i=!0;return this.nodesBetween(e,t,(function(s,a){s.isText?(r+=s.text.slice(Math.max(e,a)-a,t-a),i=!n):s.isLeaf&&o?(r+="function"==typeof o?o(s):o,i=!n):!i&&s.isBlock&&(r+=n,i=!0)}),0),r},r.prototype.append=function append(e){if(!e.size)return this;if(!this.size)return e;var t=this.lastChild,n=e.firstChild,o=this.content.slice(),i=0;for(t.isText&&t.sameMarkup(n)&&(o[o.length-1]=t.withText(t.text+n.text),i=1);i<e.content.length;i++)o.push(e.content[i]);return new r(o,this.size+e.size)},r.prototype.cut=function cut(e,t){if(null==t&&(t=this.size),0==e&&t==this.size)return this;var n=[],o=0;if(t>e)for(var i=0,s=0;s<t;i++){var a=this.content[i],c=s+a.nodeSize;c>e&&((s<e||c>t)&&(a=a.isText?a.cut(Math.max(0,e-s),Math.min(a.text.length,t-s)):a.cut(Math.max(0,e-s-1),Math.min(a.content.size,t-s-1))),n.push(a),o+=a.nodeSize),s=c}return new r(n,o)},r.prototype.cutByIndex=function cutByIndex(e,t){return e==t?r.empty:0==e&&t==this.content.length?this:new r(this.content.slice(e,t))},r.prototype.replaceChild=function replaceChild(e,t){var n=this.content[e];if(n==t)return this;var o=this.content.slice(),i=this.size+t.nodeSize-n.nodeSize;return o[e]=t,new r(o,i)},r.prototype.addToStart=function addToStart(e){return new r([e].concat(this.content),this.size+e.nodeSize)},r.prototype.addToEnd=function addToEnd(e){return new r(this.content.concat(e),this.size+e.nodeSize)},r.prototype.eq=function eq(e){if(this.content.length!=e.content.length)return!1;for(var t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0},i.firstChild.get=function(){return this.content.length?this.content[0]:null},i.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null},i.childCount.get=function(){return this.content.length},r.prototype.child=function child(e){var t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t},r.prototype.maybeChild=function maybeChild(e){return this.content[e]},r.prototype.forEach=function forEach(e){for(var t=0,n=0;t<this.content.length;t++){var o=this.content[t];e(o,n,t),n+=o.nodeSize}},r.prototype.findDiffStart=function findDiffStart$1(e,t){return void 0===t&&(t=0),findDiffStart(this,e,t)},r.prototype.findDiffEnd=function findDiffEnd$1(e,t,n){return void 0===t&&(t=this.size),void 0===n&&(n=e.size),findDiffEnd(this,e,t,n)},r.prototype.findIndex=function findIndex(e,t){if(void 0===t&&(t=-1),0==e)return retIndex(0,e);if(e==this.size)return retIndex(this.content.length,e);if(e>this.size||e<0)throw new RangeError("Position "+e+" outside of fragment ("+this+")");for(var n=0,o=0;;n++){var r=o+this.child(n).nodeSize;if(r>=e)return r==e||t>0?retIndex(n+1,r):retIndex(n,o);o=r}},r.prototype.toString=function toString(){return"<"+this.toStringInner()+">"},r.prototype.toStringInner=function toStringInner(){return this.content.join(", ")},r.prototype.toJSON=function toJSON(){return this.content.length?this.content.map((function(e){return e.toJSON()})):null},r.fromJSON=function fromJSON(e,t){if(!t)return r.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new r(t.map(e.nodeFromJSON))},r.fromArray=function fromArray(e){if(!e.length)return r.empty;for(var t,n=0,o=0;o<e.length;o++){var i=e[o];n+=i.nodeSize,o&&i.isText&&e[o-1].sameMarkup(i)?(t||(t=e.slice(0,o)),t[t.length-1]=i.withText(t[t.length-1].text+i.text)):t&&t.push(i)}return new r(t||e,n)},r.from=function from(e){if(!e)return r.empty;if(e instanceof r)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new r([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))},Object.defineProperties(r.prototype,i);var s={index:0,offset:0};function retIndex(e,t){return s.index=e,s.offset=t,s}function compareDeep(e,t){if(e===t)return!0;if(!e||"object"!=typeof e||!t||"object"!=typeof t)return!1;var n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(var o=0;o<e.length;o++)if(!compareDeep(e[o],t[o]))return!1}else{for(var r in e)if(!(r in t)||!compareDeep(e[r],t[r]))return!1;for(var i in t)if(!(i in e))return!1}return!0}r.empty=new r([],0);var a=function Mark(e,t){this.type=e,this.attrs=t};function ReplaceError(e){var t=Error.call(this,e);return t.__proto__=ReplaceError.prototype,t}a.prototype.addToSet=function addToSet(e){for(var t,n=!1,o=0;o<e.length;o++){var r=e[o];if(this.eq(r))return e;if(this.type.excludes(r.type))t||(t=e.slice(0,o));else{if(r.type.excludes(this.type))return e;!n&&r.type.rank>this.type.rank&&(t||(t=e.slice(0,o)),t.push(this),n=!0),t&&t.push(r)}}return t||(t=e.slice()),n||t.push(this),t},a.prototype.removeFromSet=function removeFromSet(e){for(var t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e},a.prototype.isInSet=function isInSet(e){for(var t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1},a.prototype.eq=function eq(e){return this==e||this.type==e.type&&compareDeep(this.attrs,e.attrs)},a.prototype.toJSON=function toJSON(){var e={type:this.type.name};for(var t in this.attrs){e.attrs=this.attrs;break}return e},a.fromJSON=function fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");var n=e.marks[t.type];if(!n)throw new RangeError("There is no mark type "+t.type+" in this schema");return n.create(t.attrs)},a.sameSet=function sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0},a.setFrom=function setFrom(e){if(!e||0==e.length)return a.none;if(e instanceof a)return[e];var t=e.slice();return t.sort((function(e,t){return e.type.rank-t.type.rank})),t},a.none=[],ReplaceError.prototype=Object.create(Error.prototype),ReplaceError.prototype.constructor=ReplaceError,ReplaceError.prototype.name="ReplaceError";var c=function Slice(e,t,n){this.content=e,this.openStart=t,this.openEnd=n},l={size:{configurable:!0}};function removeRange(e,t,n){var o=e.findIndex(t),r=o.index,i=o.offset,s=e.maybeChild(r),a=e.findIndex(n),c=a.index,l=a.offset;if(i==t||s.isText){if(l!=n&&!e.child(c).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(r!=c)throw new RangeError("Removing non-flat range");return e.replaceChild(r,s.copy(removeRange(s.content,t-i-1,n-i-1)))}function insertInto(e,t,n,o){var r=e.findIndex(t),i=r.index,s=r.offset,a=e.maybeChild(i);if(s==t||a.isText)return o&&!o.canReplace(i,i,n)?null:e.cut(0,t).append(n).append(e.cut(t));var c=insertInto(a.content,t-s-1,n);return c&&e.replaceChild(i,a.copy(c))}function replace(e,t,n){if(n.openStart>e.depth)throw new ReplaceError("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new ReplaceError("Inconsistent open depths");return replaceOuter(e,t,n,0)}function replaceOuter(e,t,n,o){var i=e.index(o),s=e.node(o);if(i==t.index(o)&&o<e.depth-n.openStart){var a=replaceOuter(e,t,n,o+1);return s.copy(s.content.replaceChild(i,a))}if(n.content.size){if(n.openStart||n.openEnd||e.depth!=o||t.depth!=o){var c=function prepareSliceForReplace(e,t){for(var n=t.depth-e.openStart,o=t.node(n).copy(e.content),i=n-1;i>=0;i--)o=t.node(i).copy(r.from(o));return{start:o.resolveNoCache(e.openStart+n),end:o.resolveNoCache(o.content.size-e.openEnd-n)}}(n,e);return index_es_close(s,replaceThreeWay(e,c.start,c.end,t,o))}var l=e.parent,p=l.content;return index_es_close(l,p.cut(0,e.parentOffset).append(n.content).append(p.cut(t.parentOffset)))}return index_es_close(s,replaceTwoWay(e,t,o))}function checkJoin(e,t){if(!t.type.compatibleContent(e.type))throw new ReplaceError("Cannot join "+t.type.name+" onto "+e.type.name)}function joinable(e,t,n){var o=e.node(n);return checkJoin(o,t.node(n)),o}function addNode(e,t){var n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function addRange(e,t,n,o){var r=(t||e).node(n),i=0,s=t?t.index(n):r.childCount;e&&(i=e.index(n),e.depth>n?i++:e.textOffset&&(addNode(e.nodeAfter,o),i++));for(var a=i;a<s;a++)addNode(r.child(a),o);t&&t.depth==n&&t.textOffset&&addNode(t.nodeBefore,o)}function index_es_close(e,t){if(!e.type.validContent(t))throw new ReplaceError("Invalid content for node "+e.type.name);return e.copy(t)}function replaceThreeWay(e,t,n,o,i){var s=e.depth>i&&joinable(e,t,i+1),a=o.depth>i&&joinable(n,o,i+1),c=[];return addRange(null,e,i,c),s&&a&&t.index(i)==n.index(i)?(checkJoin(s,a),addNode(index_es_close(s,replaceThreeWay(e,t,n,o,i+1)),c)):(s&&addNode(index_es_close(s,replaceTwoWay(e,t,i+1)),c),addRange(t,n,i,c),a&&addNode(index_es_close(a,replaceTwoWay(n,o,i+1)),c)),addRange(o,null,i,c),new r(c)}function replaceTwoWay(e,t,n){var o=[];(addRange(null,e,n,o),e.depth>n)&&addNode(index_es_close(joinable(e,t,n+1),replaceTwoWay(e,t,n+1)),o);return addRange(t,null,n,o),new r(o)}l.size.get=function(){return this.content.size-this.openStart-this.openEnd},c.prototype.insertAt=function insertAt(e,t){var n=insertInto(this.content,e+this.openStart,t,null);return n&&new c(n,this.openStart,this.openEnd)},c.prototype.removeBetween=function removeBetween(e,t){return new c(removeRange(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)},c.prototype.eq=function eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd},c.prototype.toString=function toString(){return this.content+"("+this.openStart+","+this.openEnd+")"},c.prototype.toJSON=function toJSON(){if(!this.content.size)return null;var e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e},c.fromJSON=function fromJSON(e,t){if(!t)return c.empty;var n=t.openStart||0,o=t.openEnd||0;if("number"!=typeof n||"number"!=typeof o)throw new RangeError("Invalid input for Slice.fromJSON");return new c(r.fromJSON(e,t.content),n,o)},c.maxOpen=function maxOpen(e,t){void 0===t&&(t=!0);for(var n=0,o=0,r=e.firstChild;r&&!r.isLeaf&&(t||!r.type.spec.isolating);r=r.firstChild)n++;for(var i=e.lastChild;i&&!i.isLeaf&&(t||!i.type.spec.isolating);i=i.lastChild)o++;return new c(e,n,o)},Object.defineProperties(c.prototype,l),c.empty=new c(r.empty,0,0);var p=function ResolvedPos(e,t,n){this.pos=e,this.path=t,this.depth=t.length/3-1,this.parentOffset=n},d={parent:{configurable:!0},doc:{configurable:!0},textOffset:{configurable:!0},nodeAfter:{configurable:!0},nodeBefore:{configurable:!0}};p.prototype.resolveDepth=function resolveDepth(e){return null==e?this.depth:e<0?this.depth+e:e},d.parent.get=function(){return this.node(this.depth)},d.doc.get=function(){return this.node(0)},p.prototype.node=function node(e){return this.path[3*this.resolveDepth(e)]},p.prototype.index=function index(e){return this.path[3*this.resolveDepth(e)+1]},p.prototype.indexAfter=function indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)},p.prototype.start=function start(e){return 0==(e=this.resolveDepth(e))?0:this.path[3*e-1]+1},p.prototype.end=function end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size},p.prototype.before=function before(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]},p.prototype.after=function after(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize},d.textOffset.get=function(){return this.pos-this.path[this.path.length-1]},d.nodeAfter.get=function(){var e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;var n=this.pos-this.path[this.path.length-1],o=e.child(t);return n?e.child(t).cut(n):o},d.nodeBefore.get=function(){var e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):0==e?null:this.parent.child(e-1)},p.prototype.posAtIndex=function posAtIndex(e,t){t=this.resolveDepth(t);for(var n=this.path[3*t],o=0==t?0:this.path[3*t-1]+1,r=0;r<e;r++)o+=n.child(r).nodeSize;return o},p.prototype.marks=function marks(){var e=this.parent,t=this.index();if(0==e.content.size)return a.none;if(this.textOffset)return e.child(t).marks;var n=e.maybeChild(t-1),o=e.maybeChild(t);if(!n){var r=n;n=o,o=r}for(var marks=n.marks,i=0;i<marks.length;i++)!1!==marks[i].type.spec.inclusive||o&&marks[i].isInSet(o.marks)||(marks=marks[i--].removeFromSet(marks));return marks},p.prototype.marksAcross=function marksAcross(e){var t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;for(var n=t.marks,o=e.parent.maybeChild(e.index()),r=0;r<n.length;r++)!1!==n[r].type.spec.inclusive||o&&n[r].isInSet(o.marks)||(n=n[r--].removeFromSet(n));return n},p.prototype.sharedDepth=function sharedDepth(e){for(var t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0},p.prototype.blockRange=function blockRange(e,t){if(void 0===e&&(e=this),e.pos<this.pos)return e.blockRange(this);for(var n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!t||t(this.node(n))))return new m(this,e,n)},p.prototype.sameParent=function sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset},p.prototype.max=function max(e){return e.pos>this.pos?e:this},p.prototype.min=function min(e){return e.pos<this.pos?e:this},p.prototype.toString=function toString(){for(var e="",t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset},p.resolve=function resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");for(var n=[],o=0,r=t,i=e;;){var s=i.content.findIndex(r),a=s.index,c=s.offset,l=r-c;if(n.push(i,a,o+c),!l)break;if((i=i.child(a)).isText)break;r=l-1,o+=c+1}return new p(t,n,r)},p.resolveCached=function resolveCached(e,t){for(var n=0;n<h.length;n++){var o=h[n];if(o.pos==t&&o.doc==e)return o}var r=h[u]=p.resolve(e,t);return u=(u+1)%f,r},Object.defineProperties(p.prototype,d);var h=[],u=0,f=12,m=function NodeRange(e,t,n){this.$from=e,this.$to=t,this.depth=n},v={start:{configurable:!0},end:{configurable:!0},parent:{configurable:!0},startIndex:{configurable:!0},endIndex:{configurable:!0}};v.start.get=function(){return this.$from.before(this.depth+1)},v.end.get=function(){return this.$to.after(this.depth+1)},v.parent.get=function(){return this.$from.node(this.depth)},v.startIndex.get=function(){return this.$from.index(this.depth)},v.endIndex.get=function(){return this.$to.indexAfter(this.depth)},Object.defineProperties(m.prototype,v);var g=Object.create(null),y=function Node(e,t,n,o){this.type=e,this.attrs=t,this.content=n||r.empty,this.marks=o||a.none},S={nodeSize:{configurable:!0},childCount:{configurable:!0},textContent:{configurable:!0},firstChild:{configurable:!0},lastChild:{configurable:!0},isBlock:{configurable:!0},isTextblock:{configurable:!0},inlineContent:{configurable:!0},isInline:{configurable:!0},isText:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};S.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size},S.childCount.get=function(){return this.content.childCount},y.prototype.child=function child(e){return this.content.child(e)},y.prototype.maybeChild=function maybeChild(e){return this.content.maybeChild(e)},y.prototype.forEach=function forEach(e){this.content.forEach(e)},y.prototype.nodesBetween=function nodesBetween(e,t,n,o){void 0===o&&(o=0),this.content.nodesBetween(e,t,n,o,this)},y.prototype.descendants=function descendants(e){this.nodesBetween(0,this.content.size,e)},S.textContent.get=function(){return this.textBetween(0,this.content.size,"")},y.prototype.textBetween=function textBetween(e,t,n,o){return this.content.textBetween(e,t,n,o)},S.firstChild.get=function(){return this.content.firstChild},S.lastChild.get=function(){return this.content.lastChild},y.prototype.eq=function eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)},y.prototype.sameMarkup=function sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)},y.prototype.hasMarkup=function hasMarkup(e,t,n){return this.type==e&&compareDeep(this.attrs,t||e.defaultAttrs||g)&&a.sameSet(this.marks,n||a.none)},y.prototype.copy=function copy(e){return void 0===e&&(e=null),e==this.content?this:new this.constructor(this.type,this.attrs,e,this.marks)},y.prototype.mark=function mark(e){return e==this.marks?this:new this.constructor(this.type,this.attrs,this.content,e)},y.prototype.cut=function cut(e,t){return 0==e&&t==this.content.size?this:this.copy(this.content.cut(e,t))},y.prototype.slice=function slice(e,t,n){if(void 0===t&&(t=this.content.size),void 0===n&&(n=!1),e==t)return c.empty;var o=this.resolve(e),r=this.resolve(t),i=n?0:o.sharedDepth(t),s=o.start(i),a=o.node(i).content.cut(o.pos-s,r.pos-s);return new c(a,o.depth-i,r.depth-i)},y.prototype.replace=function replace$1(e,t,n){return replace(this.resolve(e),this.resolve(t),n)},y.prototype.nodeAt=function nodeAt(e){for(var t=this;;){var n=t.content.findIndex(e),o=n.index,r=n.offset;if(!(t=t.maybeChild(o)))return null;if(r==e||t.isText)return t;e-=r+1}},y.prototype.childAfter=function childAfter(e){var t=this.content.findIndex(e),n=t.index,o=t.offset;return{node:this.content.maybeChild(n),index:n,offset:o}},y.prototype.childBefore=function childBefore(e){if(0==e)return{node:null,index:0,offset:0};var t=this.content.findIndex(e),n=t.index,o=t.offset;if(o<e)return{node:this.content.child(n),index:n,offset:o};var r=this.content.child(n-1);return{node:r,index:n-1,offset:o-r.nodeSize}},y.prototype.resolve=function resolve(e){return p.resolveCached(this,e)},y.prototype.resolveNoCache=function resolveNoCache(e){return p.resolve(this,e)},y.prototype.rangeHasMark=function rangeHasMark(e,t,n){var o=!1;return t>e&&this.nodesBetween(e,t,(function(e){return n.isInSet(e.marks)&&(o=!0),!o})),o},S.isBlock.get=function(){return this.type.isBlock},S.isTextblock.get=function(){return this.type.isTextblock},S.inlineContent.get=function(){return this.type.inlineContent},S.isInline.get=function(){return this.type.isInline},S.isText.get=function(){return this.type.isText},S.isLeaf.get=function(){return this.type.isLeaf},S.isAtom.get=function(){return this.type.isAtom},y.prototype.toString=function toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),wrapMarks(this.marks,e)},y.prototype.contentMatchAt=function contentMatchAt(e){var t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t},y.prototype.canReplace=function canReplace(e,t,n,o,i){void 0===n&&(n=r.empty),void 0===o&&(o=0),void 0===i&&(i=n.childCount);var s=this.contentMatchAt(e).matchFragment(n,o,i),a=s&&s.matchFragment(this.content,t);if(!a||!a.validEnd)return!1;for(var c=o;c<i;c++)if(!this.type.allowsMarks(n.child(c).marks))return!1;return!0},y.prototype.canReplaceWith=function canReplaceWith(e,t,n,o){if(o&&!this.type.allowsMarks(o))return!1;var r=this.contentMatchAt(e).matchType(n),i=r&&r.matchFragment(this.content,t);return!!i&&i.validEnd},y.prototype.canAppend=function canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)},y.prototype.check=function check(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));for(var e=a.none,t=0;t<this.marks.length;t++)e=this.marks[t].addToSet(e);if(!a.sameSet(e,this.marks))throw new RangeError("Invalid collection of marks for node "+this.type.name+": "+this.marks.map((function(e){return e.type.name})));this.content.forEach((function(e){return e.check()}))},y.prototype.toJSON=function toJSON(){var e={type:this.type.name};for(var t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map((function(e){return e.toJSON()}))),e},y.fromJSON=function fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");var n=null;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if("text"==t.type){if("string"!=typeof t.text)throw new RangeError("Invalid text node in JSON");return e.text(t.text,n)}var o=r.fromJSON(e,t.content);return e.nodeType(t.type).create(t.attrs,o,n)},Object.defineProperties(y.prototype,S);var w=function(e){function TextNode(t,n,o,r){if(e.call(this,t,n,null,r),!o)throw new RangeError("Empty text nodes are not allowed");this.text=o}e&&(TextNode.__proto__=e),TextNode.prototype=Object.create(e&&e.prototype),TextNode.prototype.constructor=TextNode;var t={textContent:{configurable:!0},nodeSize:{configurable:!0}};return TextNode.prototype.toString=function toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):wrapMarks(this.marks,JSON.stringify(this.text))},t.textContent.get=function(){return this.text},TextNode.prototype.textBetween=function textBetween(e,t){return this.text.slice(e,t)},t.nodeSize.get=function(){return this.text.length},TextNode.prototype.mark=function mark(e){return e==this.marks?this:new TextNode(this.type,this.attrs,this.text,e)},TextNode.prototype.withText=function withText(e){return e==this.text?this:new TextNode(this.type,this.attrs,e,this.marks)},TextNode.prototype.cut=function cut(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.text.length),0==e&&t==this.text.length?this:this.withText(this.text.slice(e,t))},TextNode.prototype.eq=function eq(e){return this.sameMarkup(e)&&this.text==e.text},TextNode.prototype.toJSON=function toJSON(){var t=e.prototype.toJSON.call(this);return t.text=this.text,t},Object.defineProperties(TextNode.prototype,t),TextNode}(y);function wrapMarks(e,t){for(var n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}var b=function ContentMatch(e){this.validEnd=e,this.next=[],this.wrapCache=[]},k={inlineContent:{configurable:!0},defaultType:{configurable:!0},edgeCount:{configurable:!0}};b.parse=function parse(e,t){var n=new x(e,t);if(null==n.next)return b.empty;var o=parseExpr(n);n.next&&n.err("Unexpected trailing text");var r=function dfa(e){var t=Object.create(null);return explore(nullFrom(e,0));function explore(n){var o=[];n.forEach((function(t){e[t].forEach((function(t){var n=t.term,r=t.to;if(n){var i=o.indexOf(n),s=i>-1&&o[i+1];nullFrom(e,r).forEach((function(e){s||o.push(n,s=[]),-1==s.indexOf(e)&&s.push(e)}))}}))}));for(var r=t[n.join(",")]=new b(n.indexOf(e.length-1)>-1),i=0;i<o.length;i+=2){var s=o[i+1].sort(cmp);r.next.push(o[i],t[s.join(",")]||explore(s))}return r}}(function nfa(e){var t=[[]];return connect(compile(e,0),node()),t;function node(){return t.push([])-1}function edge(e,n,o){var r={term:o,to:n};return t[e].push(r),r}function connect(e,t){e.forEach((function(e){return e.to=t}))}function compile(e,t){if("choice"==e.type)return e.exprs.reduce((function(e,n){return e.concat(compile(n,t))}),[]);if("seq"==e.type)for(var n=0;;n++){var o=compile(e.exprs[n],t);if(n==e.exprs.length-1)return o;connect(o,t=node())}else{if("star"==e.type){var r=node();return edge(t,r),connect(compile(e.expr,r),r),[edge(r)]}if("plus"==e.type){var i=node();return connect(compile(e.expr,t),i),connect(compile(e.expr,i),i),[edge(i)]}if("opt"==e.type)return[edge(t)].concat(compile(e.expr,t));if("range"==e.type){for(var s=t,a=0;a<e.min;a++){var c=node();connect(compile(e.expr,s),c),s=c}if(-1==e.max)connect(compile(e.expr,s),s);else for(var l=e.min;l<e.max;l++){var p=node();edge(s,p),connect(compile(e.expr,s),p),s=p}return[edge(s)]}if("name"==e.type)return[edge(t,null,e.value)]}}}(o));return function checkForDeadEnds(e,t){for(var n=0,o=[e];n<o.length;n++){for(var r=o[n],i=!r.validEnd,s=[],a=0;a<r.next.length;a+=2){var c=r.next[a],l=r.next[a+1];s.push(c.name),!i||c.isText||c.hasRequiredAttrs()||(i=!1),-1==o.indexOf(l)&&o.push(l)}i&&t.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(r,n),r},b.prototype.matchType=function matchType(e){for(var t=0;t<this.next.length;t+=2)if(this.next[t]==e)return this.next[t+1];return null},b.prototype.matchFragment=function matchFragment(e,t,n){void 0===t&&(t=0),void 0===n&&(n=e.childCount);for(var o=this,r=t;o&&r<n;r++)o=o.matchType(e.child(r).type);return o},k.inlineContent.get=function(){var e=this.next[0];return!!e&&e.isInline},k.defaultType.get=function(){for(var e=0;e<this.next.length;e+=2){var t=this.next[e];if(!t.isText&&!t.hasRequiredAttrs())return t}},b.prototype.compatible=function compatible(e){for(var t=0;t<this.next.length;t+=2)for(var n=0;n<e.next.length;n+=2)if(this.next[t]==e.next[n])return!0;return!1},b.prototype.fillBefore=function fillBefore(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=0);var o=[this];return function search(i,s){var a=i.matchFragment(e,n);if(a&&(!t||a.validEnd))return r.from(s.map((function(e){return e.createAndFill()})));for(var c=0;c<i.next.length;c+=2){var l=i.next[c],p=i.next[c+1];if(!l.isText&&!l.hasRequiredAttrs()&&-1==o.indexOf(p)){o.push(p);var d=search(p,s.concat(l));if(d)return d}}}(this,[])},b.prototype.findWrapping=function findWrapping(e){for(var t=0;t<this.wrapCache.length;t+=2)if(this.wrapCache[t]==e)return this.wrapCache[t+1];var n=this.computeWrapping(e);return this.wrapCache.push(e,n),n},b.prototype.computeWrapping=function computeWrapping(e){for(var t=Object.create(null),n=[{match:this,type:null,via:null}];n.length;){var o=n.shift(),r=o.match;if(r.matchType(e)){for(var i=[],s=o;s.type;s=s.via)i.push(s.type);return i.reverse()}for(var a=0;a<r.next.length;a+=2){var c=r.next[a];c.isLeaf||c.hasRequiredAttrs()||c.name in t||o.type&&!r.next[a+1].validEnd||(n.push({match:c.contentMatch,type:c,via:o}),t[c.name]=!0)}}},k.edgeCount.get=function(){return this.next.length>>1},b.prototype.edge=function edge(e){var t=e<<1;if(t>=this.next.length)throw new RangeError("There's no "+e+"th edge in this content match");return{type:this.next[t],next:this.next[t+1]}},b.prototype.toString=function toString(){var e=[];return function scan(t){e.push(t);for(var n=1;n<t.next.length;n+=2)-1==e.indexOf(t.next[n])&&scan(t.next[n])}(this),e.map((function(t,n){for(var o=n+(t.validEnd?"*":" ")+" ",r=0;r<t.next.length;r+=2)o+=(r?", ":"")+t.next[r].name+"->"+e.indexOf(t.next[r+1]);return o})).join("\n")},Object.defineProperties(b.prototype,k),b.empty=new b(!0);var x=function TokenStream(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()},O={next:{configurable:!0}};function parseExpr(e){var t=[];do{t.push(parseExprSeq(e))}while(e.eat("|"));return 1==t.length?t[0]:{type:"choice",exprs:t}}function parseExprSeq(e){var t=[];do{t.push(parseExprSubscript(e))}while(e.next&&")"!=e.next&&"|"!=e.next);return 1==t.length?t[0]:{type:"seq",exprs:t}}function parseExprSubscript(e){for(var t=function parseExprAtom(e){if(e.eat("(")){var t=parseExpr(e);return e.eat(")")||e.err("Missing closing paren"),t}if(!/\W/.test(e.next)){var n=function resolveName(e,t){var n=e.nodeTypes,o=n[t];if(o)return[o];var r=[];for(var i in n){var s=n[i];s.groups.indexOf(t)>-1&&r.push(s)}0==r.length&&e.err("No node type or group '"+t+"' found");return r}(e,e.next).map((function(t){return null==e.inline?e.inline=t.isInline:e.inline!=t.isInline&&e.err("Mixing inline and block content"),{type:"name",value:t}}));return e.pos++,1==n.length?n[0]:{type:"choice",exprs:n}}e.err("Unexpected token '"+e.next+"'")}(e);;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else{if(!e.eat("{"))break;t=parseExprRange(e,t)}return t}function parseNum(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");var t=Number(e.next);return e.pos++,t}function parseExprRange(e,t){var n=parseNum(e),o=n;return e.eat(",")&&(o="}"!=e.next?parseNum(e):-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:o,expr:t}}function cmp(e,t){return t-e}function nullFrom(e,t){var n=[];return function scan(t){var o=e[t];if(1==o.length&&!o[0].term)return scan(o[0].to);n.push(t);for(var r=0;r<o.length;r++){var i=o[r],s=i.term,a=i.to;s||-1!=n.indexOf(a)||scan(a)}}(t),n.sort(cmp)}function defaultAttrs(e){var t=Object.create(null);for(var n in e){var o=e[n];if(!o.hasDefault)return null;t[n]=o.default}return t}function computeAttrs(e,t){var n=Object.create(null);for(var o in e){var r=t&&t[o];if(void 0===r){var i=e[o];if(!i.hasDefault)throw new RangeError("No value supplied for attribute "+o);r=i.default}n[o]=r}return n}function initAttrs(e){var t=Object.create(null);if(e)for(var n in e)t[n]=new D(e[n]);return t}O.next.get=function(){return this.tokens[this.pos]},x.prototype.eat=function eat(e){return this.next==e&&(this.pos++||!0)},x.prototype.err=function err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")},Object.defineProperties(x.prototype,O);var M=function NodeType(e,t,n){this.name=e,this.schema=t,this.spec=n,this.groups=n.group?n.group.split(" "):[],this.attrs=initAttrs(n.attrs),this.defaultAttrs=defaultAttrs(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==e),this.isText="text"==e},C={isInline:{configurable:!0},isTextblock:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0},whitespace:{configurable:!0}};C.isInline.get=function(){return!this.isBlock},C.isTextblock.get=function(){return this.isBlock&&this.inlineContent},C.isLeaf.get=function(){return this.contentMatch==b.empty},C.isAtom.get=function(){return this.isLeaf||this.spec.atom},C.whitespace.get=function(){return this.spec.whitespace||(this.spec.code?"pre":"normal")},M.prototype.hasRequiredAttrs=function hasRequiredAttrs(){for(var e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1},M.prototype.compatibleContent=function compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)},M.prototype.computeAttrs=function computeAttrs$1(e){return!e&&this.defaultAttrs?this.defaultAttrs:computeAttrs(this.attrs,e)},M.prototype.create=function create(e,t,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new y(this,this.computeAttrs(e),r.from(t),a.setFrom(n))},M.prototype.createChecked=function createChecked(e,t,n){if(t=r.from(t),!this.validContent(t))throw new RangeError("Invalid content for node "+this.name);return new y(this,this.computeAttrs(e),t,a.setFrom(n))},M.prototype.createAndFill=function createAndFill(e,t,n){if(e=this.computeAttrs(e),(t=r.from(t)).size){var o=this.contentMatch.fillBefore(t);if(!o)return null;t=o.append(t)}var i=this.contentMatch.matchFragment(t).fillBefore(r.empty,!0);return i?new y(this,e,t.append(i),a.setFrom(n)):null},M.prototype.validContent=function validContent(e){var t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(var n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0},M.prototype.allowsMarkType=function allowsMarkType(e){return null==this.markSet||this.markSet.indexOf(e)>-1},M.prototype.allowsMarks=function allowsMarks(e){if(null==this.markSet)return!0;for(var t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0},M.prototype.allowedMarks=function allowedMarks(e){if(null==this.markSet)return e;for(var t,n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?t&&t.push(e[n]):t||(t=e.slice(0,n));return t?t.length?t:a.empty:e},M.compile=function compile(e,t){var n=Object.create(null);e.forEach((function(e,o){return n[e]=new M(e,t,o)}));var o=t.spec.topNode||"doc";if(!n[o])throw new RangeError("Schema is missing its top node type ('"+o+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(var r in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n},Object.defineProperties(M.prototype,C);var D=function Attribute(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default},N={isRequired:{configurable:!0}};N.isRequired.get=function(){return!this.hasDefault},Object.defineProperties(D.prototype,N);var T=function MarkType(e,t,n,o){this.name=e,this.schema=n,this.spec=o,this.attrs=initAttrs(o.attrs),this.rank=t,this.excluded=null;var r=defaultAttrs(this.attrs);this.instance=r&&new a(this,r)};T.prototype.create=function create(e){return!e&&this.instance?this.instance:new a(this,computeAttrs(this.attrs,e))},T.compile=function compile(e,t){var n=Object.create(null),o=0;return e.forEach((function(e,r){return n[e]=new T(e,o++,t,r)})),n},T.prototype.removeFromSet=function removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e},T.prototype.isInSet=function isInSet(e){for(var t=0;t<e.length;t++)if(e[t].type==this)return e[t]},T.prototype.excludes=function excludes(e){return this.excluded.indexOf(e)>-1};var E=function Schema(e){for(var t in this.spec={},e)this.spec[t]=e[t];this.spec.nodes=o.from(e.nodes),this.spec.marks=o.from(e.marks),this.nodes=M.compile(this.spec.nodes,this),this.marks=T.compile(this.spec.marks,this);var n=Object.create(null);for(var r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");var i=this.nodes[r],s=i.spec.content||"",a=i.spec.marks;i.contentMatch=n[s]||(n[s]=b.parse(s,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.markSet="_"==a?null:a?gatherMarks(this,a.split(" ")):""!=a&&i.inlineContent?null:[]}for(var c in this.marks){var l=this.marks[c],p=l.spec.excludes;l.excluded=null==p?[l]:""==p?[]:gatherMarks(this,p.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached=Object.create(null),this.cached.wrappings=Object.create(null)};function gatherMarks(e,t){for(var n=[],o=0;o<t.length;o++){var r=t[o],i=e.marks[r],s=i;if(i)n.push(i);else for(var a in e.marks){var c=e.marks[a];("_"==r||c.spec.group&&c.spec.group.split(" ").indexOf(r)>-1)&&n.push(s=c)}if(!s)throw new SyntaxError("Unknown mark type: '"+t[o]+"'")}return n}E.prototype.node=function node(e,t,n,o){if("string"==typeof e)e=this.nodeType(e);else{if(!(e instanceof M))throw new RangeError("Invalid node type: "+e);if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}return e.createChecked(t,n,o)},E.prototype.text=function text(e,t){var n=this.nodes.text;return new w(n,n.defaultAttrs,e,a.setFrom(t))},E.prototype.mark=function mark(e,t){return"string"==typeof e&&(e=this.marks[e]),e.create(t)},E.prototype.nodeFromJSON=function nodeFromJSON(e){return y.fromJSON(this,e)},E.prototype.markFromJSON=function markFromJSON(e){return a.fromJSON(this,e)},E.prototype.nodeType=function nodeType(e){var t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t};var R=function DOMParser(e,t){var n=this;this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach((function(e){e.tag?n.tags.push(e):e.style&&n.styles.push(e)})),this.normalizeLists=!this.tags.some((function(t){if(!/^(ul|ol)\b/.test(t.tag)||!t.node)return!1;var n=e.nodes[t.node];return n.contentMatch.matchType(n)}))};R.prototype.parse=function parse(e,t){void 0===t&&(t={});var n=new z(this,t,!1);return n.addAll(e,null,t.from,t.to),n.finish()},R.prototype.parseSlice=function parseSlice(e,t){void 0===t&&(t={});var n=new z(this,t,!0);return n.addAll(e,null,t.from,t.to),c.maxOpen(n.finish())},R.prototype.matchTag=function matchTag(e,t,n){for(var o=n?this.tags.indexOf(n)+1:0;o<this.tags.length;o++){var r=this.tags[o];if(matches(e,r.tag)&&(void 0===r.namespace||e.namespaceURI==r.namespace)&&(!r.context||t.matchesContext(r.context))){if(r.getAttrs){var i=r.getAttrs(e);if(!1===i)continue;r.attrs=i}return r}}},R.prototype.matchStyle=function matchStyle(e,t,n,o){for(var r=o?this.styles.indexOf(o)+1:0;r<this.styles.length;r++){var i=this.styles[r];if(!(0!=i.style.indexOf(e)||i.context&&!n.matchesContext(i.context)||i.style.length>e.length&&(61!=i.style.charCodeAt(e.length)||i.style.slice(e.length+1)!=t))){if(i.getAttrs){var s=i.getAttrs(t);if(!1===s)continue;i.attrs=s}return i}}},R.schemaRules=function schemaRules(e){var t=[];function insert(e){for(var n=null==e.priority?50:e.priority,o=0;o<t.length;o++){var r=t[o];if((null==r.priority?50:r.priority)<n)break}t.splice(o,0,e)}var loop=function(t){var n=e.marks[t].spec.parseDOM;n&&n.forEach((function(e){insert(e=copy(e)),e.mark=t}))};for(var n in e.marks)loop(n);var o;for(var r in e.nodes)o=void 0,(o=e.nodes[r].spec.parseDOM)&&o.forEach((function(e){insert(e=copy(e)),e.node=r}));return t},R.fromSchema=function fromSchema(e){return e.cached.domParser||(e.cached.domParser=new R(e,R.schemaRules(e)))};var A={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},I={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},_={ol:!0,ul:!0};function wsOptionsFor(e,t,n){return null!=t?(t?1:0)|("full"===t?2:0):e&&"pre"==e.whitespace?3:-5&n}var P=function NodeContext(e,t,n,o,r,i,s){this.type=e,this.attrs=t,this.solid=r,this.match=i||(4&s?null:e.contentMatch),this.options=s,this.content=[],this.marks=n,this.activeMarks=a.none,this.pendingMarks=o,this.stashMarks=[]};P.prototype.findWrapping=function findWrapping(e){if(!this.match){if(!this.type)return[];var t=this.type.contentMatch.fillBefore(r.from(e));if(!t){var n,o=this.type.contentMatch;return(n=o.findWrapping(e.type))?(this.match=o,n):null}this.match=this.type.contentMatch.matchFragment(t)}return this.match.findWrapping(e.type)},P.prototype.finish=function finish(e){if(!(1&this.options)){var t,n=this.content[this.content.length-1];n&&n.isText&&(t=/[ \t\r\n\u000c]+$/.exec(n.text))&&(n.text.length==t[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-t[0].length)))}var o=r.from(this.content);return!e&&this.match&&(o=o.append(this.match.fillBefore(r.empty,!0))),this.type?this.type.create(this.attrs,o,this.marks):o},P.prototype.popFromStashMark=function popFromStashMark(e){for(var t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]},P.prototype.applyPending=function applyPending(e){for(var t=0,n=this.pendingMarks;t<n.length;t++){var o=n[t];(this.type?this.type.allowsMarkType(o.type):markMayApply(o.type,e))&&!o.isInSet(this.activeMarks)&&(this.activeMarks=o.addToSet(this.activeMarks),this.pendingMarks=o.removeFromSet(this.pendingMarks))}},P.prototype.inlineContext=function inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!A.hasOwnProperty(e.parentNode.nodeName.toLowerCase())};var z=function ParseContext(e,t,n){this.parser=e,this.options=t,this.isOpen=n;var o,r=t.topNode,i=wsOptionsFor(null,t.preserveWhitespace,0)|(n?4:0);o=r?new P(r.type,r.attrs,a.none,a.none,!0,t.topMatch||r.type.contentMatch,i):new P(n?null:e.schema.topNodeType,null,a.none,a.none,!0,null,i),this.nodes=[o],this.open=0,this.find=t.findPositions,this.needsBlock=!1},V={top:{configurable:!0},currentPos:{configurable:!0}};function matches(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function copy(e){var t={};for(var n in e)t[n]=e[n];return t}function markMayApply(e,t){var n=t.schema.nodes,loop=function(o){var r=n[o];if(r.allowsMarkType(e)){var i=[],scan=function(e){i.push(e);for(var n=0;n<e.edgeCount;n++){var o=e.edge(n),r=o.type,s=o.next;if(r==t)return!0;if(i.indexOf(s)<0&&scan(s))return!0}};return scan(r.contentMatch)?{v:!0}:void 0}};for(var o in n){var r=loop(o);if(r)return r.v}}V.top.get=function(){return this.nodes[this.open]},z.prototype.addDOM=function addDOM(e){if(3==e.nodeType)this.addTextNode(e);else if(1==e.nodeType){var t=e.getAttribute("style"),n=t?this.readStyles(function parseStyles(e){var t,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,o=[];for(;t=n.exec(e);)o.push(t[1],t[2].trim());return o}(t)):null,o=this.top;if(null!=n)for(var r=0;r<n.length;r++)this.addPendingMark(n[r]);if(this.addElement(e),null!=n)for(var i=0;i<n.length;i++)this.removePendingMark(n[i],o)}},z.prototype.addTextNode=function addTextNode(e){var t=e.nodeValue,n=this.top;if(2&n.options||n.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(1&n.options)t=2&n.options?t.replace(/\r\n?/g,"\n"):t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){var o=n.content[n.content.length-1],r=e.previousSibling;(!o||r&&"BR"==r.nodeName||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)},z.prototype.addElement=function addElement(e,t){var n,o=e.nodeName.toLowerCase();_.hasOwnProperty(o)&&this.parser.normalizeLists&&function normalizeList(e){for(var t=e.firstChild,n=null;t;t=t.nextSibling){var o=1==t.nodeType?t.nodeName.toLowerCase():null;o&&_.hasOwnProperty(o)&&n?(n.appendChild(t),t=n):"li"==o?n=t:o&&(n=null)}}(e);var r=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(n=this.parser.matchTag(e,this,t));if(r?r.ignore:I.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e);else if(!r||r.skip||r.closeParent){r&&r.closeParent?this.open=Math.max(0,this.open-1):r&&r.skip.nodeType&&(e=r.skip);var i,s=this.top,a=this.needsBlock;if(A.hasOwnProperty(o))i=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild)return void this.leafFallback(e);this.addAll(e),i&&this.sync(s),this.needsBlock=a}else this.addElementByRule(e,r,!1===r.consuming?n:null)},z.prototype.leafFallback=function leafFallback(e){"BR"==e.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode("\n"))},z.prototype.ignoreFallback=function ignoreFallback(e){"BR"!=e.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"))},z.prototype.readStyles=function readStyles(e){var t=a.none;e:for(var n=0;n<e.length;n+=2)for(var o=null;;){var r=this.parser.matchStyle(e[n],e[n+1],this,o);if(!r)continue e;if(r.ignore)return null;if(t=this.parser.schema.marks[r.mark].create(r.attrs).addToSet(t),!1!==r.consuming)break;o=r}return t},z.prototype.addElementByRule=function addElementByRule(e,t,n){var o,r,i,s=this;t.node?(r=this.parser.schema.nodes[t.node]).isLeaf?this.insertNode(r.create(t.attrs))||this.leafFallback(e):o=this.enter(r,t.attrs,t.preserveWhitespace):(i=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(i));var a=this.top;if(r&&r.isLeaf)this.findInside(e);else if(n)this.addElement(e,n);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach((function(e){return s.insertNode(e)}));else{var c=t.contentElement;"string"==typeof c?c=e.querySelector(c):"function"==typeof c&&(c=c(e)),c||(c=e),this.findAround(e,c,!0),this.addAll(c,o)}o&&(this.sync(a),this.open--),i&&this.removePendingMark(i,a)},z.prototype.addAll=function addAll(e,t,n,o){for(var r=n||0,i=n?e.childNodes[n]:e.firstChild,s=null==o?null:e.childNodes[o];i!=s;i=i.nextSibling,++r)this.findAtPoint(e,r),this.addDOM(i),t&&A.hasOwnProperty(i.nodeName.toLowerCase())&&this.sync(t);this.findAtPoint(e,r)},z.prototype.findPlace=function findPlace(e){for(var t,n,o=this.open;o>=0;o--){var r=this.nodes[o],i=r.findWrapping(e);if(i&&(!t||t.length>i.length)&&(t=i,n=r,!i.length))break;if(r.solid)break}if(!t)return!1;this.sync(n);for(var s=0;s<t.length;s++)this.enterInner(t[s],null,!1);return!0},z.prototype.insertNode=function insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){var t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();var n=this.top;n.applyPending(e.type),n.match&&(n.match=n.match.matchType(e.type));for(var o=n.activeMarks,r=0;r<e.marks.length;r++)n.type&&!n.type.allowsMarkType(e.marks[r].type)||(o=e.marks[r].addToSet(o));return n.content.push(e.mark(o)),!0}return!1},z.prototype.enter=function enter(e,t,n){var o=this.findPlace(e.create(t));return o&&this.enterInner(e,t,!0,n),o},z.prototype.enterInner=function enterInner(e,t,n,o){this.closeExtra();var r=this.top;r.applyPending(e),r.match=r.match&&r.match.matchType(e,t);var i=wsOptionsFor(e,o,r.options);4&r.options&&0==r.content.length&&(i|=4),this.nodes.push(new P(e,t,r.activeMarks,r.pendingMarks,n,null,i)),this.open++},z.prototype.closeExtra=function closeExtra(e){var t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}},z.prototype.finish=function finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)},z.prototype.sync=function sync(e){for(var t=this.open;t>=0;t--)if(this.nodes[t]==e)return void(this.open=t)},V.currentPos.get=function(){this.closeExtra();for(var e=0,t=this.open;t>=0;t--){for(var n=this.nodes[t].content,o=n.length-1;o>=0;o--)e+=n[o].nodeSize;t&&e++}return e},z.prototype.findAtPoint=function findAtPoint(e,t){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)},z.prototype.findInside=function findInside(e){if(this.find)for(var t=0;t<this.find.length;t++)null==this.find[t].pos&&1==e.nodeType&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)},z.prototype.findAround=function findAround(e,t,n){if(e!=t&&this.find)for(var o=0;o<this.find.length;o++){if(null==this.find[o].pos&&1==e.nodeType&&e.contains(this.find[o].node))t.compareDocumentPosition(this.find[o].node)&(n?2:4)&&(this.find[o].pos=this.currentPos)}},z.prototype.findInText=function findInText(e){if(this.find)for(var t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))},z.prototype.matchesContext=function matchesContext(e){var t=this;if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);var n=e.split("/"),o=this.options.context,r=!(this.isOpen||o&&o.parent.type!=this.nodes[0].type),i=-(o?o.depth+1:0)+(r?0:1),match=function(e,s){for(;e>=0;e--){var a=n[e];if(""==a){if(e==n.length-1||0==e)continue;for(;s>=i;s--)if(match(e-1,s))return!0;return!1}var c=s>0||0==s&&r?t.nodes[s].type:o&&s>=i?o.node(s-i).type:null;if(!c||c.name!=a&&-1==c.groups.indexOf(a))return!1;s--}return!0};return match(n.length-1,this.open)},z.prototype.textblockFromContext=function textblockFromContext(){var e=this.options.context;if(e)for(var t=e.depth;t>=0;t--){var n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(var o in this.parser.schema.nodes){var r=this.parser.schema.nodes[o];if(r.isTextblock&&r.defaultAttrs)return r}},z.prototype.addPendingMark=function addPendingMark(e){var t=function findSameMarkInSet(e,t){for(var n=0;n<t.length;n++)if(e.eq(t[n]))return t[n]}(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)},z.prototype.removePendingMark=function removePendingMark(e,t){for(var n=this.open;n>=0;n--){var o=this.nodes[n];if(o.pendingMarks.lastIndexOf(e)>-1)o.pendingMarks=e.removeFromSet(o.pendingMarks);else{o.activeMarks=e.removeFromSet(o.activeMarks);var r=o.popFromStashMark(e);r&&o.type&&o.type.allowsMarkType(r.type)&&(o.activeMarks=r.addToSet(o.activeMarks))}if(o==t)break}},Object.defineProperties(z.prototype,V);var B=function DOMSerializer(e,t){this.nodes=e||{},this.marks=t||{}};function gatherToDOM(e){var t={};for(var n in e){var o=e[n].spec.toDOM;o&&(t[n]=o)}return t}function doc(e){return e.document||window.document}B.prototype.serializeFragment=function serializeFragment(e,t,n){var o=this;void 0===t&&(t={}),n||(n=doc(t).createDocumentFragment());var r=n,i=null;return e.forEach((function(e){if(i||e.marks.length){i||(i=[]);for(var n=0,s=0;n<i.length&&s<e.marks.length;){var a=e.marks[s];if(o.marks[a.type.name]){if(!a.eq(i[n])||!1===a.type.spec.spanning)break;n+=2,s++}else s++}for(;n<i.length;)r=i.pop(),i.pop();for(;s<e.marks.length;){var c=e.marks[s++],l=o.serializeMark(c,e.isInline,t);l&&(i.push(c,r),r.appendChild(l.dom),r=l.contentDOM||l.dom)}}r.appendChild(o.serializeNodeInner(e,t))})),n},B.prototype.serializeNodeInner=function serializeNodeInner(e,t){void 0===t&&(t={});var n=B.renderSpec(doc(t),this.nodes[e.type.name](e)),o=n.dom,r=n.contentDOM;if(r){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");t.onContent?t.onContent(e,r,t):this.serializeFragment(e.content,t,r)}return o},B.prototype.serializeNode=function serializeNode(e,t){void 0===t&&(t={});for(var n=this.serializeNodeInner(e,t),o=e.marks.length-1;o>=0;o--){var r=this.serializeMark(e.marks[o],e.isInline,t);r&&((r.contentDOM||r.dom).appendChild(n),n=r.dom)}return n},B.prototype.serializeMark=function serializeMark(e,t,n){void 0===n&&(n={});var o=this.marks[e.type.name];return o&&B.renderSpec(doc(n),o(e,t))},B.renderSpec=function renderSpec(e,t,n){if(void 0===n&&(n=null),"string"==typeof t)return{dom:e.createTextNode(t)};if(null!=t.nodeType)return{dom:t};if(t.dom&&null!=t.dom.nodeType)return t;var o=t[0],r=o.indexOf(" ");r>0&&(n=o.slice(0,r),o=o.slice(r+1));var i=null,s=n?e.createElementNS(n,o):e.createElement(o),a=t[1],c=1;if(a&&"object"==typeof a&&null==a.nodeType&&!Array.isArray(a))for(var l in c=2,a)if(null!=a[l]){var p=l.indexOf(" ");p>0?s.setAttributeNS(l.slice(0,p),l.slice(p+1),a[l]):s.setAttribute(l,a[l])}for(var d=c;d<t.length;d++){var h=t[d];if(0===h){if(d<t.length-1||d>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:s,contentDOM:s}}var u=B.renderSpec(e,h,n),f=u.dom,m=u.contentDOM;if(s.appendChild(f),m){if(i)throw new RangeError("Multiple content holes");i=m}}return{dom:s,contentDOM:i}},B.fromSchema=function fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new B(this.nodesFromSchema(e),this.marksFromSchema(e)))},B.nodesFromSchema=function nodesFromSchema(e){var t=gatherToDOM(e.nodes);return t.text||(t.text=function(e){return e.text}),t},B.marksFromSchema=function marksFromSchema(e){return gatherToDOM(e.marks)}},Oqqw:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={errors:{controlled:"A component is changing a react-medium-image-zoom component from a controlled component to an uncontrolled one. ImageZoom elements should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled image zoom element for the lifetime of the component.",uncontrolled:"A component is changing a react-medium-image-zoom component from an uncontrolled component to a controlled one. ImageZoom elements should not switch from uncontrolled to controlled (or vice versa). Decide between using a controlled or uncontrolled image zoom element for the lifetime of the component."},styles:{image:{cursor:"zoom-in"},zoomImage:{cursor:"zoom-out",position:"absolute",transition:"transform 300ms",transform:"translate3d(0, 0, 0) scale(1)",transformOrigin:"center center",willChange:"transform, top, left"},zoomContainer:{position:"fixed",top:0,right:0,bottom:0,left:0,zIndex:999},overlay:{position:"absolute",top:0,right:0,bottom:0,left:0,backgroundColor:"#fff",opacity:0,transition:"opacity 300ms"}},transitionDuration:300};t.default=o},"Qw+Q":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),i=n("q1tI"),s=_interopRequireDefault(i),a=n("17x9"),c=_interopRequireDefault(n("Oqqw")),l=n("pwIv"),p=n("tyOK"),d=_interopRequireDefault(n("fh9h")),h=_interopRequireDefault(n("U1VJ"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var u=function isControlled(e){return null!=e},f=function(e){function ImageZoom(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ImageZoom);var t=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(ImageZoom.__proto__||Object.getPrototypeOf(ImageZoom)).call(this,e));return t.state={isDisabled:!1,isZoomed:!1,wasZoomed:!1,src:e.image.src,prevSrc:e.image.src,isClosing:!1},t._handleKeyDown=t._handleKeyDown.bind(t),t._handleLoad=t._handleLoad.bind(t),t._handleLoadError=t._handleLoadError.bind(t),t._handleUnzoom=t._handleUnzoom.bind(t),t._handleZoom=t._handleZoom.bind(t),t}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(ImageZoom,e),r(ImageZoom,[{key:"componentDidUpdate",value:function componentDidUpdate(e,t){if(!u(e.isZoomed)&&u(this.props.isZoomed))throw new Error(c.default.errors.uncontrolled);if(u(e.isZoomed)&&!u(this.props.isZoomed))throw new Error(c.default.errors.controlled);var n=u(e.isZoomed)?e.isZoomed:t.isZoomed,o=u(this.props.isZoomed)?this.props.isZoomed:this.state.isZoomed;n!==o&&!o&&this.portalInstance&&this.portalInstance.unzoom({force:!0})}},{key:"render",value:function render(){var e=this,t=this.props,n=t.defaultStyles,r=t.image,a=t.isZoomed,c=t.shouldRespectMaxDimension,l=t.zoomImage,p=t.zoomMargin,f=this.state,m=f.isDisabled,v=f.isZoomed,g=f.src,y=f.isClosing,S=o({},!m&&{tabIndex:0},r,{src:g,style:this._getImageStyle()},!m&&{onMouseDown:this._preventFocus,onClick:this._handleZoom,onKeyDown:this._handleKeyDown}),w=u(a)?a:v;return s.default.createElement(i.Fragment,null,s.default.createElement("img",o({},S,{key:"image",ref:function ref(t){e.image=t},onLoad:this._handleLoad,onError:this._handleLoadError})),this.image&&(w||y)?s.default.createElement(d.default,{key:"portal",ref:function ref(t){e.portalInstance=t},controlledEventFn:this._getControlledEventFn(),allowAccessibilityClose:this._allowTabNavigation()},s.default.createElement(h.default,{defaultStyles:n,image:this.image,shouldRespectMaxDimension:c,zoomImage:l,zoomMargin:Number(p),onUnzoom:this._handleUnzoom})):null)}},{key:"_checkShouldDisableComponent",value:function _checkShouldDisableComponent(){var e=this.props,t=e.shouldRespectMaxDimension,n=e.zoomImage,o=t&&!n&&(0,l.isMaxDimension)(this.image);this.setState({isDisabled:o})}},{key:"_getImageStyle",value:function _getImageStyle(){var e=this.props,t=e.defaultStyles,n=e.image,r=e.isZoomed,i=this.state,s=i.isDisabled,a=i.isZoomed,l=i.isClosing,p=a||r||l;return o({},c.default.styles.image,p&&{visibility:"hidden"},t.image,n.style,s&&{cursor:"inherit"})}},{key:"_handleLoad",value:function _handleLoad(e){this._checkShouldDisableComponent(),(this.props.image.onLoad||Function.prototype)(e)}},{key:"_handleLoadError",value:function _handleLoadError(e){this.setState({isDisabled:!0}),(this.props.image.onError||Function.prototype)(e)}},{key:"_handleKeyDown",value:function _handleKeyDown(e){(0,p.isEnterOrSpaceBarKey)(e)&&(e.preventDefault(),this._handleZoom(e))}},{key:"_preventFocus",value:function _preventFocus(e){e.preventDefault()}},{key:"_handleZoom",value:function _handleZoom(e){!u(this.props.isZoomed)&&this.props.shouldHandleZoom(e)?this.setState({isZoomed:!0},this.props.onZoom):this.props.onZoom()}},{key:"_handleUnzoom",value:function _handleUnzoom(e,t){var n=this;return function(){var r=o({isZoomed:!1,isClosing:!1},n.props.shouldReplaceImage&&{src:e});n.setState(r,n.props.onUnzoom),t&&n._allowTabNavigation()&&n.image.focus()}}},{key:"_getControlledEventFn",value:function _getControlledEventFn(){return u(this.props.isZoomed)?this.props.onUnzoom:null}},{key:"_allowTabNavigation",value:function _allowTabNavigation(){return this.image&&-1!==this.image.tabIndex}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(e,t){var n=t.wasZoomed&&!e.isZoomed||t.isClosing;return{src:e.image.src!==t.prevSrc?e.image.src:t.src,isClosing:n,wasZoomed:e.isZoomed,prevSrc:e.image.src}}},{key:"defaultProps",get:function get(){return{shouldReplaceImage:!0,shouldRespectMaxDimension:!1,zoomMargin:40,defaultStyles:{zoomContainer:{},overlay:{},image:{},zoomImage:{}},shouldHandleZoom:function shouldHandleZoom(){return!0},onZoom:function onZoom(){},onUnzoom:function onUnzoom(){}}}}]),ImageZoom}(i.Component);t.default=f,f.propTypes={image:(0,a.shape)({src:a.string.isRequired,alt:a.string,className:a.string,style:a.object}).isRequired,zoomImage:(0,a.shape)({src:a.string,alt:a.string,className:a.string,style:a.object}),defaultStyles:a.object,isZoomed:a.bool,shouldHandleZoom:a.func,shouldReplaceImage:a.bool,shouldRespectMaxDimension:a.bool,onZoom:a.func,onUnzoom:a.func}},U1VJ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),i=n("q1tI"),s=_interopRequireDefault(i),a=n("17x9"),c=_interopRequireDefault(n("Oqqw")),l=n("pwIv"),p=_interopRequireDefault(n("qhw/"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function Zoom(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Zoom);var t=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(Zoom.__proto__||Object.getPrototypeOf(Zoom)).call(this,e));return t.state={hasLoaded:!1,isZoomed:!0,src:e.image.currentSrc||e.image.src,tmpSrc:null},t.unzoom=t.unzoom.bind(t),t._handleImageLoad=t._handleImageLoad.bind(t),t}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Zoom,e),r(Zoom,[{key:"componentDidMount",value:function componentDidMount(){var e=this.props.zoomImage,t=e.src,n=e.srcSet;this.setState({hasLoaded:!0}),(t||n)&&(0,l.fetchImage)(this.props.zoomImage,this._handleImageLoad)}},{key:"componentDidUpdate",value:function componentDidUpdate(e,t){var n=this;!t.tmpSrc&&this.state.tmpSrc&&setTimeout((function(){n.setState({src:n.state.tmpSrc,tmpSrc:null})}),100)}},{key:"render",value:function render(){var e=this.props,t=e.defaultStyles,n=e.zoomImage,r=this.state,i=r.tmpSrc,a=r.isZoomed,c=r.src,l=this._getZoomImageStyle();return s.default.createElement("div",{style:this._getZoomContainerStyle()},s.default.createElement(p.default,{isVisible:a,defaultStyles:t}),s.default.createElement("img",o({},n,{src:c,style:l})),s.default.createElement(h,o({},n,{src:i,style:l})))}},{key:"unzoom",value:function unzoom(e){var t=this.props.onUnzoom(this.state.src,e);this.setState({isZoomed:!1},(function(){return setTimeout(t,c.default.transitionDuration)}))}},{key:"_handleImageLoad",value:function _handleImageLoad(e){this.state.isZoomed&&this.setState({tmpSrc:e.currentSrc||e.src})}},{key:"_getZoomContainerStyle",value:function _getZoomContainerStyle(){return o({},c.default.styles.zoomContainer,this.props.defaultStyles.zoomContainer)}},{key:"_getZoomImageStyle",value:function _getZoomImageStyle(){var e=this.props,t=e.image,n=e.shouldRespectMaxDimension,r=e.src,i=e.zoomMargin,s=t.getBoundingClientRect(),a=s.top,p=s.left,d=t.width,h=t.height,u=t.naturalWidth,f=t.naturalHeight,m={top:a,left:p,width:d,height:h};if(!this.state.hasLoaded||!this.state.isZoomed)return o({},c.default.styles.zoomImage,this.props.defaultStyles.zoomImage,this.props.style,m);var v=document.body.clientWidth/2,g=window.innerHeight/2,y={transform:"translate3d("+(v-(s.left+d/2))+"px, "+(g-(s.top+h/2))+"px, 0) scale("+(n&&!r?(0,l.getMaxDimensionScale)({width:d,height:h,naturalWidth:u,naturalHeight:f,zoomMargin:i}):(0,l.getScale)({width:d,height:h,zoomMargin:i}))+")"};return o({},c.default.styles.zoomImage,this.props.defaultStyles.zoomImage,this.props.style,m,y)}}],[{key:"defaultProps",get:function get(){return{zoomImage:{}}}}]),Zoom}(i.Component);t.default=d,d.propTypes={defaultStyles:a.object.isRequired,image:a.object.isRequired,shouldRespectMaxDimension:a.bool,zoomImage:(0,a.shape)({src:a.string,alt:a.string,className:a.string,style:a.object}).isRequired,zoomMargin:a.number.isRequired,onUnzoom:a.func.isRequired};var h=function TmpImg(e){var t=e.src,n=e.style,r=function _objectWithoutProperties(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}(e,["src","style"]);return t?s.default.createElement("img",o({},r,{src:t,style:f(n)})):null},u={position:"fixed",visibility:"hidden"},f=function getTmpStyle(e){return o({},e,u)}},"UxO+":function(e,t,n){"use strict";n.r(t),n.d(t,"AllSelection",(function(){return u})),n.d(t,"EditorState",(function(){return S})),n.d(t,"NodeSelection",(function(){return d})),n.d(t,"Plugin",(function(){return k})),n.d(t,"PluginKey",(function(){return O})),n.d(t,"Selection",(function(){return s})),n.d(t,"SelectionRange",(function(){return c})),n.d(t,"TextSelection",(function(){return l})),n.d(t,"Transaction",(function(){return m}));var o=n("MEpN"),r=n("CsC6"),i=Object.create(null),s=function Selection(e,t,n){this.ranges=n||[new c(e.min(t),e.max(t))],this.$anchor=e,this.$head=t},a={anchor:{configurable:!0},head:{configurable:!0},from:{configurable:!0},to:{configurable:!0},$from:{configurable:!0},$to:{configurable:!0},empty:{configurable:!0}};a.anchor.get=function(){return this.$anchor.pos},a.head.get=function(){return this.$head.pos},a.from.get=function(){return this.$from.pos},a.to.get=function(){return this.$to.pos},a.$from.get=function(){return this.ranges[0].$from},a.$to.get=function(){return this.ranges[0].$to},a.empty.get=function(){for(var e=this.ranges,t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0},s.prototype.content=function content(){return this.$from.node(0).slice(this.from,this.to,!0)},s.prototype.replace=function replace(e,t){void 0===t&&(t=o.Slice.empty);for(var n=t.content.lastChild,r=null,i=0;i<t.openEnd;i++)r=n,n=n.lastChild;for(var s=e.steps.length,a=this.ranges,c=0;c<a.length;c++){var l=a[c],p=l.$from,d=l.$to,h=e.mapping.slice(s);e.replaceRange(h.map(p.pos),h.map(d.pos),c?o.Slice.empty:t),0==c&&selectionToInsertionEnd(e,s,(n?n.isInline:r&&r.isTextblock)?-1:1)}},s.prototype.replaceWith=function replaceWith(e,t){for(var n=e.steps.length,o=this.ranges,r=0;r<o.length;r++){var i=o[r],s=i.$from,a=i.$to,c=e.mapping.slice(n),l=c.map(s.pos),p=c.map(a.pos);r?e.deleteRange(l,p):(e.replaceRangeWith(l,p,t),selectionToInsertionEnd(e,n,t.isInline?-1:1))}},s.findFrom=function findFrom(e,t,n){var o=e.parent.inlineContent?new l(e):findSelectionIn(e.node(0),e.parent,e.pos,e.index(),t,n);if(o)return o;for(var r=e.depth-1;r>=0;r--){var i=t<0?findSelectionIn(e.node(0),e.node(r),e.before(r+1),e.index(r),t,n):findSelectionIn(e.node(0),e.node(r),e.after(r+1),e.index(r)+1,t,n);if(i)return i}},s.near=function near(e,t){return void 0===t&&(t=1),this.findFrom(e,t)||this.findFrom(e,-t)||new u(e.node(0))},s.atStart=function atStart(e){return findSelectionIn(e,e,0,0,1)||new u(e)},s.atEnd=function atEnd(e){return findSelectionIn(e,e,e.content.size,e.childCount,-1)||new u(e)},s.fromJSON=function fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");var n=i[t.type];if(!n)throw new RangeError("No selection type "+t.type+" defined");return n.fromJSON(e,t)},s.jsonID=function jsonID(e,t){if(e in i)throw new RangeError("Duplicate use of selection JSON ID "+e);return i[e]=t,t.prototype.jsonID=e,t},s.prototype.getBookmark=function getBookmark(){return l.between(this.$anchor,this.$head).getBookmark()},Object.defineProperties(s.prototype,a),s.prototype.visible=!0;var c=function SelectionRange(e,t){this.$from=e,this.$to=t},l=function(e){function TextSelection(t,n){void 0===n&&(n=t),e.call(this,t,n)}e&&(TextSelection.__proto__=e),TextSelection.prototype=Object.create(e&&e.prototype),TextSelection.prototype.constructor=TextSelection;var t={$cursor:{configurable:!0}};return t.$cursor.get=function(){return this.$anchor.pos==this.$head.pos?this.$head:null},TextSelection.prototype.map=function map(t,n){var o=t.resolve(n.map(this.head));if(!o.parent.inlineContent)return e.near(o);var r=t.resolve(n.map(this.anchor));return new TextSelection(r.parent.inlineContent?r:o,o)},TextSelection.prototype.replace=function replace(t,n){if(void 0===n&&(n=o.Slice.empty),e.prototype.replace.call(this,t,n),n==o.Slice.empty){var r=this.$from.marksAcross(this.$to);r&&t.ensureMarks(r)}},TextSelection.prototype.eq=function eq(e){return e instanceof TextSelection&&e.anchor==this.anchor&&e.head==this.head},TextSelection.prototype.getBookmark=function getBookmark(){return new p(this.anchor,this.head)},TextSelection.prototype.toJSON=function toJSON(){return{type:"text",anchor:this.anchor,head:this.head}},TextSelection.fromJSON=function fromJSON(e,t){if("number"!=typeof t.anchor||"number"!=typeof t.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new TextSelection(e.resolve(t.anchor),e.resolve(t.head))},TextSelection.create=function create(e,t,n){void 0===n&&(n=t);var o=e.resolve(t);return new this(o,n==t?o:e.resolve(n))},TextSelection.between=function between(t,n,o){var r=t.pos-n.pos;if(o&&!r||(o=r>=0?1:-1),!n.parent.inlineContent){var i=e.findFrom(n,o,!0)||e.findFrom(n,-o,!0);if(!i)return e.near(n,o);n=i.$head}return t.parent.inlineContent||(0==r||(t=(e.findFrom(t,-o,!0)||e.findFrom(t,o,!0)).$anchor).pos<n.pos!=r<0)&&(t=n),new TextSelection(t,n)},Object.defineProperties(TextSelection.prototype,t),TextSelection}(s);s.jsonID("text",l);var p=function TextBookmark(e,t){this.anchor=e,this.head=t};p.prototype.map=function map(e){return new p(e.map(this.anchor),e.map(this.head))},p.prototype.resolve=function resolve(e){return l.between(e.resolve(this.anchor),e.resolve(this.head))};var d=function(e){function NodeSelection(t){var n=t.nodeAfter,o=t.node(0).resolve(t.pos+n.nodeSize);e.call(this,t,o),this.node=n}return e&&(NodeSelection.__proto__=e),NodeSelection.prototype=Object.create(e&&e.prototype),NodeSelection.prototype.constructor=NodeSelection,NodeSelection.prototype.map=function map(t,n){var o=n.mapResult(this.anchor),r=o.deleted,i=o.pos,s=t.resolve(i);return r?e.near(s):new NodeSelection(s)},NodeSelection.prototype.content=function content(){return new o.Slice(o.Fragment.from(this.node),0,0)},NodeSelection.prototype.eq=function eq(e){return e instanceof NodeSelection&&e.anchor==this.anchor},NodeSelection.prototype.toJSON=function toJSON(){return{type:"node",anchor:this.anchor}},NodeSelection.prototype.getBookmark=function getBookmark(){return new h(this.anchor)},NodeSelection.fromJSON=function fromJSON(e,t){if("number"!=typeof t.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new NodeSelection(e.resolve(t.anchor))},NodeSelection.create=function create(e,t){return new this(e.resolve(t))},NodeSelection.isSelectable=function isSelectable(e){return!e.isText&&!1!==e.type.spec.selectable},NodeSelection}(s);d.prototype.visible=!1,s.jsonID("node",d);var h=function NodeBookmark(e){this.anchor=e};h.prototype.map=function map(e){var t=e.mapResult(this.anchor),n=t.deleted,o=t.pos;return n?new p(o,o):new h(o)},h.prototype.resolve=function resolve(e){var t=e.resolve(this.anchor),n=t.nodeAfter;return n&&d.isSelectable(n)?new d(t):s.near(t)};var u=function(e){function AllSelection(t){e.call(this,t.resolve(0),t.resolve(t.content.size))}return e&&(AllSelection.__proto__=e),AllSelection.prototype=Object.create(e&&e.prototype),AllSelection.prototype.constructor=AllSelection,AllSelection.prototype.replace=function replace(t,n){if(void 0===n&&(n=o.Slice.empty),n==o.Slice.empty){t.delete(0,t.doc.content.size);var r=e.atStart(t.doc);r.eq(t.selection)||t.setSelection(r)}else e.prototype.replace.call(this,t,n)},AllSelection.prototype.toJSON=function toJSON(){return{type:"all"}},AllSelection.fromJSON=function fromJSON(e){return new AllSelection(e)},AllSelection.prototype.map=function map(e){return new AllSelection(e)},AllSelection.prototype.eq=function eq(e){return e instanceof AllSelection},AllSelection.prototype.getBookmark=function getBookmark(){return f},AllSelection}(s);s.jsonID("all",u);var f={map:function map(){return this},resolve:function resolve(e){return new u(e)}};function findSelectionIn(e,t,n,o,r,i){if(t.inlineContent)return l.create(e,n);for(var s=o-(r>0?0:1);r>0?s<t.childCount:s>=0;s+=r){var a=t.child(s);if(a.isAtom){if(!i&&d.isSelectable(a))return d.create(e,n-(r<0?a.nodeSize:0))}else{var c=findSelectionIn(e,a,n+r,r<0?a.childCount:0,r,i);if(c)return c}n+=a.nodeSize*r}}function selectionToInsertionEnd(e,t,n){var o=e.steps.length-1;if(!(o<t)){var i,a=e.steps[o];if(a instanceof r.c||a instanceof r.b)e.mapping.maps[o].forEach((function(e,t,n,o){null==i&&(i=o)})),e.setSelection(s.near(e.doc.resolve(i),n))}}var m=function(e){function Transaction(t){e.call(this,t.doc),this.time=Date.now(),this.curSelection=t.selection,this.curSelectionFor=0,this.storedMarks=t.storedMarks,this.updated=0,this.meta=Object.create(null)}e&&(Transaction.__proto__=e),Transaction.prototype=Object.create(e&&e.prototype),Transaction.prototype.constructor=Transaction;var t={selection:{configurable:!0},selectionSet:{configurable:!0},storedMarksSet:{configurable:!0},isGeneric:{configurable:!0},scrolledIntoView:{configurable:!0}};return t.selection.get=function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection},Transaction.prototype.setSelection=function setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this},t.selectionSet.get=function(){return(1&this.updated)>0},Transaction.prototype.setStoredMarks=function setStoredMarks(e){return this.storedMarks=e,this.updated|=2,this},Transaction.prototype.ensureMarks=function ensureMarks(e){return o.Mark.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this},Transaction.prototype.addStoredMark=function addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))},Transaction.prototype.removeStoredMark=function removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))},t.storedMarksSet.get=function(){return(2&this.updated)>0},Transaction.prototype.addStep=function addStep(t,n){e.prototype.addStep.call(this,t,n),this.updated=-3&this.updated,this.storedMarks=null},Transaction.prototype.setTime=function setTime(e){return this.time=e,this},Transaction.prototype.replaceSelection=function replaceSelection(e){return this.selection.replace(this,e),this},Transaction.prototype.replaceSelectionWith=function replaceSelectionWith(e,t){var n=this.selection;return!1!==t&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||o.Mark.none))),n.replaceWith(this,e),this},Transaction.prototype.deleteSelection=function deleteSelection(){return this.selection.replace(this),this},Transaction.prototype.insertText=function insertText(e,t,n){void 0===n&&(n=t);var o=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(o.text(e),!0):this.deleteSelection();if(!e)return this.deleteRange(t,n);var r=this.storedMarks;if(!r){var i=this.doc.resolve(t);r=n==t?i.marks():i.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(t,n,o.text(e,r)),this.selection.empty||this.setSelection(s.near(this.selection.$to)),this},Transaction.prototype.setMeta=function setMeta(e,t){return this.meta["string"==typeof e?e:e.key]=t,this},Transaction.prototype.getMeta=function getMeta(e){return this.meta["string"==typeof e?e:e.key]},t.isGeneric.get=function(){for(var e in this.meta)return!1;return!0},Transaction.prototype.scrollIntoView=function scrollIntoView(){return this.updated|=4,this},t.scrolledIntoView.get=function(){return(4&this.updated)>0},Object.defineProperties(Transaction.prototype,t),Transaction}(r.d);function bind(e,t){return t&&e?e.bind(t):e}var v=function FieldDesc(e,t,n){this.name=e,this.init=bind(t.init,n),this.apply=bind(t.apply,n)},g=[new v("doc",{init:function init(e){return e.doc||e.schema.topNodeType.createAndFill()},apply:function apply(e){return e.doc}}),new v("selection",{init:function init(e,t){return e.selection||s.atStart(t.doc)},apply:function apply(e){return e.selection}}),new v("storedMarks",{init:function init(e){return e.storedMarks||null},apply:function apply(e,t,n,o){return o.selection.$cursor?e.storedMarks:null}}),new v("scrollToSelection",{init:function init(){return 0},apply:function apply(e,t){return e.scrolledIntoView?t+1:t}})],y=function Configuration(e,t){var n=this;this.schema=e,this.fields=g.concat(),this.plugins=[],this.pluginsByKey=Object.create(null),t&&t.forEach((function(e){if(n.pluginsByKey[e.key])throw new RangeError("Adding different instances of a keyed plugin ("+e.key+")");n.plugins.push(e),n.pluginsByKey[e.key]=e,e.spec.state&&n.fields.push(new v(e.key,e.spec.state,e))}))},S=function EditorState(e){this.config=e},w={schema:{configurable:!0},plugins:{configurable:!0},tr:{configurable:!0}};w.schema.get=function(){return this.config.schema},w.plugins.get=function(){return this.config.plugins},S.prototype.apply=function apply(e){return this.applyTransaction(e).state},S.prototype.filterTransaction=function filterTransaction(e,t){void 0===t&&(t=-1);for(var n=0;n<this.config.plugins.length;n++)if(n!=t){var o=this.config.plugins[n];if(o.spec.filterTransaction&&!o.spec.filterTransaction.call(o,e,this))return!1}return!0},S.prototype.applyTransaction=function applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};for(var t=[e],n=this.applyInner(e),o=null;;){for(var r=!1,i=0;i<this.config.plugins.length;i++){var s=this.config.plugins[i];if(s.spec.appendTransaction){var a=o?o[i].n:0,c=o?o[i].state:this,l=a<t.length&&s.spec.appendTransaction.call(s,a?t.slice(a):t,c,n);if(l&&n.filterTransaction(l,i)){if(l.setMeta("appendedTransaction",e),!o){o=[];for(var p=0;p<this.config.plugins.length;p++)o.push(p<i?{state:n,n:t.length}:{state:this,n:0})}t.push(l),n=n.applyInner(l),r=!0}o&&(o[i]={state:n,n:t.length})}}if(!r)return{state:n,transactions:t}}},S.prototype.applyInner=function applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var t=new S(this.config),n=this.config.fields,o=0;o<n.length;o++){var r=n[o];t[r.name]=r.apply(e,this[r.name],this,t)}for(var i=0;i<b.length;i++)b[i](this,e,t);return t},w.tr.get=function(){return new m(this)},S.create=function create(e){for(var t=new y(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new S(t),o=0;o<t.fields.length;o++)n[t.fields[o].name]=t.fields[o].init(e,n);return n},S.prototype.reconfigure=function reconfigure(e){for(var t=new y(this.schema,e.plugins),n=t.fields,o=new S(t),r=0;r<n.length;r++){var i=n[r].name;o[i]=this.hasOwnProperty(i)?this[i]:n[r].init(e,o)}return o},S.prototype.toJSON=function toJSON(e){var t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map((function(e){return e.toJSON()}))),e&&"object"==typeof e)for(var n in e){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var o=e[n],r=o.spec.state;r&&r.toJSON&&(t[n]=r.toJSON.call(o,this[o.key]))}return t},S.fromJSON=function fromJSON(e,t,n){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");var r=new y(e.schema,e.plugins),i=new S(r);return r.fields.forEach((function(r){if("doc"==r.name)i.doc=o.Node.fromJSON(e.schema,t.doc);else if("selection"==r.name)i.selection=s.fromJSON(i.doc,t.selection);else if("storedMarks"==r.name)t.storedMarks&&(i.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(n)for(var a in n){var c=n[a],l=c.spec.state;if(c.key==r.name&&l&&l.fromJSON&&Object.prototype.hasOwnProperty.call(t,a))return void(i[r.name]=l.fromJSON.call(c,e,t[a],i))}i[r.name]=r.init(e,i)}})),i},S.addApplyListener=function addApplyListener(e){b.push(e)},S.removeApplyListener=function removeApplyListener(e){var t=b.indexOf(e);t>-1&&b.splice(t,1)},Object.defineProperties(S.prototype,w);var b=[];function bindProps(e,t,n){for(var o in e){var r=e[o];r instanceof Function?r=r.bind(t):"handleDOMEvents"==o&&(r=bindProps(r,t,{})),n[o]=r}return n}var k=function Plugin(e){this.props={},e.props&&bindProps(e.props,this,this.props),this.spec=e,this.key=e.key?e.key.key:createKey("plugin")};k.prototype.getState=function getState(e){return e[this.key]};var x=Object.create(null);function createKey(e){return e in x?e+"$"+ ++x[e]:(x[e]=0,e+"$")}var O=function PluginKey(e){void 0===e&&(e="key"),this.key=createKey(e)};O.prototype.get=function get(e){return e.config.pluginsByKey[this.key]},O.prototype.getState=function getState(e){return e[this.key]}},V2qZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return ee})),n.d(t,"b",(function(){return re})),n.d(t,"c",(function(){return ae}));var o=n("UxO+"),r=n("MEpN"),i=n("CsC6"),s={};if("undefined"!=typeof navigator&&"undefined"!=typeof document){var a=/Edge\/(\d+)/.exec(navigator.userAgent),c=/MSIE \d/.test(navigator.userAgent),l=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),p=s.ie=!!(c||l||a);s.ie_version=c?document.documentMode||6:l?+l[1]:a?+a[1]:null,s.gecko=!p&&/gecko\/(\d+)/i.test(navigator.userAgent),s.gecko_version=s.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var d=!p&&/Chrome\/(\d+)/.exec(navigator.userAgent);s.chrome=!!d,s.chrome_version=d&&+d[1],s.safari=!p&&/Apple Computer/.test(navigator.vendor),s.ios=s.safari&&(/Mobile\/\w+/.test(navigator.userAgent)||navigator.maxTouchPoints>2),s.mac=s.ios||/Mac/.test(navigator.platform),s.android=/Android \d/.test(navigator.userAgent),s.webkit="webkitFontSmoothing"in document.documentElement.style,s.webkit_version=s.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]}var domIndex=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t},parentNode=function(e){var t=e.assignedSlot||e.parentNode;return t&&11==t.nodeType?t.host:t},h=null,textRange=function(e,t,n){var o=h||(h=document.createRange());return o.setEnd(e,null==n?e.nodeValue.length:n),o.setStart(e,t||0),o},isEquivalentPosition=function(e,t,n,o){return n&&(scanFor(e,t,n,o,-1)||scanFor(e,t,n,o,1))},u=/^(img|br|input|textarea|hr)$/i;function scanFor(e,t,n,o,r){for(;;){if(e==n&&t==o)return!0;if(t==(r<0?0:nodeSize(e))){var i=e.parentNode;if(1!=i.nodeType||hasBlockDesc(e)||u.test(e.nodeName)||"false"==e.contentEditable)return!1;t=domIndex(e)+(r<0?0:1),e=i}else{if(1!=e.nodeType)return!1;if("false"==(e=e.childNodes[t+(r<0?-1:0)]).contentEditable)return!1;t=r<0?nodeSize(e):0}}}function nodeSize(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function hasBlockDesc(e){for(var t,n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}var selectionCollapsed=function(e){var t=e.isCollapsed;return t&&s.chrome&&e.rangeCount&&!e.getRangeAt(0).collapsed&&(t=!1),t};function keyEvent(e,t){var n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function windowRect(e){return{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function getSide(e,t){return"number"==typeof e?e:e[t]}function clientRect(e){var t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,o=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*o}}function scrollRectIntoView(e,t,n){for(var o=e.someProp("scrollThreshold")||0,r=e.someProp("scrollMargin")||5,i=e.dom.ownerDocument,s=n||e.dom;s;s=parentNode(s))if(1==s.nodeType){var a=s==i.body||1!=s.nodeType,c=a?windowRect(i):clientRect(s),l=0,p=0;if(t.top<c.top+getSide(o,"top")?p=-(c.top-t.top+getSide(r,"top")):t.bottom>c.bottom-getSide(o,"bottom")&&(p=t.bottom-c.bottom+getSide(r,"bottom")),t.left<c.left+getSide(o,"left")?l=-(c.left-t.left+getSide(r,"left")):t.right>c.right-getSide(o,"right")&&(l=t.right-c.right+getSide(r,"right")),l||p)if(a)i.defaultView.scrollBy(l,p);else{var d=s.scrollLeft,h=s.scrollTop;p&&(s.scrollTop+=p),l&&(s.scrollLeft+=l);var u=s.scrollLeft-d,f=s.scrollTop-h;t={left:t.left-u,top:t.top-f,right:t.right-u,bottom:t.bottom-f}}if(a)break}}function scrollStack(e){for(var t=[],n=e.ownerDocument;e&&(t.push({dom:e,top:e.scrollTop,left:e.scrollLeft}),e!=n);e=parentNode(e));return t}function restoreScrollStack(e,t){for(var n=0;n<e.length;n++){var o=e[n],r=o.dom,i=o.top,s=o.left;r.scrollTop!=i+t&&(r.scrollTop=i+t),r.scrollLeft!=s&&(r.scrollLeft=s)}}var f=null;function findOffsetInNode(e,t){for(var n,o,r=2e8,i=0,s=t.top,a=t.top,c=e.firstChild,l=0;c;c=c.nextSibling,l++){var p=void 0;if(1==c.nodeType)p=c.getClientRects();else{if(3!=c.nodeType)continue;p=textRange(c).getClientRects()}for(var d=0;d<p.length;d++){var h=p[d];if(h.top<=s&&h.bottom>=a){s=Math.max(h.bottom,s),a=Math.min(h.top,a);var u=h.left>t.left?h.left-t.left:h.right<t.left?t.left-h.right:0;if(u<r){n=c,r=u,o=u&&3==n.nodeType?{left:h.right<t.left?h.right:h.left,top:t.top}:t,1==c.nodeType&&u&&(i=l+(t.left>=(h.left+h.right)/2?1:0));continue}}!n&&(t.left>=h.right&&t.top>=h.top||t.left>=h.left&&t.top>=h.bottom)&&(i=l+1)}}return n&&3==n.nodeType?function findOffsetInText(e,t){for(var n=e.nodeValue.length,o=document.createRange(),r=0;r<n;r++){o.setEnd(e,r+1),o.setStart(e,r);var i=singleRect(o,1);if(i.top!=i.bottom&&inRect(t,i))return{node:e,offset:r+(t.left>=(i.left+i.right)/2?1:0)}}return{node:e,offset:0}}(n,o):!n||r&&1==n.nodeType?{node:e,offset:i}:findOffsetInNode(n,o)}function inRect(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function elementFromPoint(e,t,n){var o=e.childNodes.length;if(o&&n.top<n.bottom)for(var r=Math.max(0,Math.min(o-1,Math.floor(o*(t.top-n.top)/(n.bottom-n.top))-2)),i=r;;){var s=e.childNodes[i];if(1==s.nodeType)for(var a=s.getClientRects(),c=0;c<a.length;c++){var l=a[c];if(inRect(t,l))return elementFromPoint(s,t,l)}if((i=(i+1)%o)==r)break}return e}function posAtCoords(e,t){var n,o,r,i,a=e.dom.ownerDocument;if(a.caretPositionFromPoint)try{var c=a.caretPositionFromPoint(t.left,t.top);c&&(r=(n=c).offsetNode,i=n.offset)}catch(e){}if(!r&&a.caretRangeFromPoint){var l=a.caretRangeFromPoint(t.left,t.top);l&&(r=(o=l).startContainer,i=o.startOffset)}var p,d=(e.root.elementFromPoint?e.root:a).elementFromPoint(t.left,t.top+1);if(!d||!e.dom.contains(1!=d.nodeType?d.parentNode:d)){var h=e.dom.getBoundingClientRect();if(!inRect(t,h))return null;if(!(d=elementFromPoint(e.dom,t,h)))return null}if(s.safari)for(var u=d;r&&u;u=parentNode(u))u.draggable&&(r=i=null);if(d=function targetKludge(e,t){var n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}(d,t),r){if(s.gecko&&1==r.nodeType&&(i=Math.min(i,r.childNodes.length))<r.childNodes.length){var f,m=r.childNodes[i];"IMG"==m.nodeName&&(f=m.getBoundingClientRect()).right<=t.left&&f.bottom>t.top&&i++}r==e.dom&&i==r.childNodes.length-1&&1==r.lastChild.nodeType&&t.top>r.lastChild.getBoundingClientRect().bottom?p=e.state.doc.content.size:0!=i&&1==r.nodeType&&"BR"==r.childNodes[i-1].nodeName||(p=function posFromCaret(e,t,n,o){for(var r=-1,i=t;i!=e.dom;){var s=e.docView.nearestDesc(i,!0);if(!s)return null;if(s.node.isBlock&&s.parent){var a=s.dom.getBoundingClientRect();if(a.left>o.left||a.top>o.top)r=s.posBefore;else{if(!(a.right<o.left||a.bottom<o.top))break;r=s.posAfter}}i=s.dom.parentNode}return r>-1?r:e.docView.posFromDOM(t,n)}(e,r,i,t))}null==p&&(p=function posFromElement(e,t,n){var o=findOffsetInNode(t,n),r=o.node,i=o.offset,s=-1;if(1==r.nodeType&&!r.firstChild){var a=r.getBoundingClientRect();s=a.left!=a.right&&n.left>(a.left+a.right)/2?1:-1}return e.docView.posFromDOM(r,i,s)}(e,d,t));var v=e.docView.nearestDesc(d,!0);return{pos:p,inside:v?v.posAtStart-v.border:-1}}function singleRect(e,t){var n=e.getClientRects();return n.length?n[t<0?0:n.length-1]:e.getBoundingClientRect()}var m=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function coordsAtPos(e,t,n){var o=e.docView.domFromPos(t,n<0?-1:1),r=o.node,i=o.offset,a=s.webkit||s.gecko;if(3==r.nodeType){if(!a||!m.test(r.nodeValue)&&(n<0?i:i!=r.nodeValue.length)){var c=i,l=i,p=n<0?1:-1;return n<0&&!i?(l++,p=-1):n>=0&&i==r.nodeValue.length?(c--,p=1):n<0?c--:l++,flattenV(singleRect(textRange(r,c,l),p),p<0)}var d=singleRect(textRange(r,i,i),n);if(s.gecko&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){var h=singleRect(textRange(r,i-1,i-1),-1);if(h.top==d.top){var u=singleRect(textRange(r,i,i+1),-1);if(u.top!=d.top)return flattenV(u,u.left<h.left)}}return d}if(!e.state.doc.resolve(t).parent.inlineContent){if(i&&(n<0||i==nodeSize(r))){var f=r.childNodes[i-1];if(1==f.nodeType)return flattenH(f.getBoundingClientRect(),!1)}if(i<nodeSize(r)){var v=r.childNodes[i];if(1==v.nodeType)return flattenH(v.getBoundingClientRect(),!0)}return flattenH(r.getBoundingClientRect(),n>=0)}if(i&&(n<0||i==nodeSize(r))){var g=r.childNodes[i-1],y=3==g.nodeType?textRange(g,nodeSize(g)-(a?0:1)):1!=g.nodeType||"BR"==g.nodeName&&g.nextSibling?null:g;if(y)return flattenV(singleRect(y,1),!1)}if(i<nodeSize(r)){for(var S=r.childNodes[i];S.pmViewDesc&&S.pmViewDesc.ignoreForCoords;)S=S.nextSibling;var w=S?3==S.nodeType?textRange(S,0,a?0:1):1==S.nodeType?S:null:null;if(w)return flattenV(singleRect(w,-1),!0)}return flattenV(singleRect(3==r.nodeType?textRange(r):r,-n),n>=0)}function flattenV(e,t){if(0==e.width)return e;var n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function flattenH(e,t){if(0==e.height)return e;var n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function withFlushedState(e,t,n){var o=e.state,r=e.root.activeElement;o!=t&&e.updateState(t),r!=e.dom&&e.focus();try{return n()}finally{o!=t&&e.updateState(o),r!=e.dom&&r&&r.focus()}}var v=/[\u0590-\u08ac]/;var g=null,y=null,S=!1;function endOfTextblock(e,t,n){return g==t&&y==n?S:(g=t,y=n,S="up"==n||"down"==n?function endOfTextblockVertical(e,t,n){var o=t.selection,r="up"==n?o.$from:o.$to;return withFlushedState(e,t,(function(){for(var t=e.docView.domFromPos(r.pos,"up"==n?-1:1).node;;){var o=e.docView.nearestDesc(t,!0);if(!o)break;if(o.node.isBlock){t=o.dom;break}t=o.dom.parentNode}for(var i=coordsAtPos(e,r.pos,1),s=t.firstChild;s;s=s.nextSibling){var a=void 0;if(1==s.nodeType)a=s.getClientRects();else{if(3!=s.nodeType)continue;a=textRange(s,0,s.nodeValue.length).getClientRects()}for(var c=0;c<a.length;c++){var l=a[c];if(l.bottom>l.top+1&&("up"==n?i.top-l.top>2*(l.bottom-i.top):l.bottom-i.bottom>2*(i.bottom-l.top)))return!1}}return!0}))}(e,t,n):function endOfTextblockHorizontal(e,t,n){var o=t.selection.$head;if(!o.parent.isTextblock)return!1;var r=o.parentOffset,i=!r,s=r==o.parent.content.size,a=e.root.getSelection();return v.test(o.parent.textContent)&&a.modify?withFlushedState(e,t,(function(){var t=a.getRangeAt(0),r=a.focusNode,i=a.focusOffset,s=a.caretBidiLevel;a.modify("move",n,"character");var c=!(o.depth?e.docView.domAfterPos(o.before()):e.dom).contains(1==a.focusNode.nodeType?a.focusNode:a.focusNode.parentNode)||r==a.focusNode&&i==a.focusOffset;return a.removeAllRanges(),a.addRange(t),null!=s&&(a.caretBidiLevel=s),c})):"left"==n||"backward"==n?i:s}(e,t,n))}var w=function ViewDesc(e,t,n,o){this.parent=e,this.children=t,this.dom=n,n.pmViewDesc=this,this.contentDOM=o,this.dirty=0},b={size:{configurable:!0},border:{configurable:!0},posBefore:{configurable:!0},posAtStart:{configurable:!0},posAfter:{configurable:!0},posAtEnd:{configurable:!0},contentLost:{configurable:!0},domAtom:{configurable:!0},ignoreForCoords:{configurable:!0}};w.prototype.matchesWidget=function matchesWidget(){return!1},w.prototype.matchesMark=function matchesMark(){return!1},w.prototype.matchesNode=function matchesNode(){return!1},w.prototype.matchesHack=function matchesHack(e){return!1},w.prototype.parseRule=function parseRule(){return null},w.prototype.stopEvent=function stopEvent(){return!1},b.size.get=function(){for(var e=0,t=0;t<this.children.length;t++)e+=this.children[t].size;return e},b.border.get=function(){return 0},w.prototype.destroy=function destroy(){this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(var e=0;e<this.children.length;e++)this.children[e].destroy()},w.prototype.posBeforeChild=function posBeforeChild(e){for(var t=0,n=this.posAtStart;t<this.children.length;t++){var o=this.children[t];if(o==e)return n;n+=o.size}},b.posBefore.get=function(){return this.parent.posBeforeChild(this)},b.posAtStart.get=function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0},b.posAfter.get=function(){return this.posBefore+this.size},b.posAtEnd.get=function(){return this.posAtStart+this.size-2*this.border},w.prototype.localPosFromDOM=function localPosFromDOM(e,t,n){if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(n<0){var o,r;if(e==this.contentDOM)o=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&(!(r=o.pmViewDesc)||r.parent!=this);)o=o.previousSibling;return o?this.posBeforeChild(r)+r.size:this.posAtStart}var i,s;if(e==this.contentDOM)i=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.nextSibling}for(;i&&(!(s=i.pmViewDesc)||s.parent!=this);)i=i.nextSibling;return i?this.posBeforeChild(s):this.posAtEnd}var a;if(e==this.dom&&this.contentDOM)a=t>domIndex(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))a=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(var c=e;;c=c.parentNode){if(c==this.dom){a=!1;break}if(c.parentNode.firstChild!=c)break}if(null==a&&t==e.childNodes.length)for(var l=e;;l=l.parentNode){if(l==this.dom){a=!0;break}if(l.parentNode.lastChild!=l)break}}return(null==a?n>0:a)?this.posAtEnd:this.posAtStart},w.prototype.nearestDesc=function nearestDesc(e,t){for(var n=!0,o=e;o;o=o.parentNode){var r=this.getDesc(o);if(r&&(!t||r.node)){if(!n||!r.nodeDOM||(1==r.nodeDOM.nodeType?r.nodeDOM.contains(1==e.nodeType?e:e.parentNode):r.nodeDOM==e))return r;n=!1}}},w.prototype.getDesc=function getDesc(e){for(var t=e.pmViewDesc,n=t;n;n=n.parent)if(n==this)return t},w.prototype.posFromDOM=function posFromDOM(e,t,n){for(var o=e;o;o=o.parentNode){var r=this.getDesc(o);if(r)return r.localPosFromDOM(e,t,n)}return-1},w.prototype.descAt=function descAt(e){for(var t=0,n=0;t<this.children.length;t++){var o=this.children[t],r=n+o.size;if(n==e&&r!=n){for(;!o.border&&o.children.length;)o=o.children[0];return o}if(e<r)return o.descAt(e-n-o.border);n=r}},w.prototype.domFromPos=function domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0};for(var n=0,o=0,r=0;n<this.children.length;n++){var i=this.children[n],s=r+i.size;if(s>e||i instanceof N){o=e-r;break}r=s}if(o)return this.children[n].domFromPos(o-this.children[n].border,t);for(var a=void 0;n&&!(a=this.children[n-1]).size&&a instanceof x&&a.widget.type.side>=0;n--);if(t<=0){for(var c,l=!0;(c=n?this.children[n-1]:null)&&c.dom.parentNode!=this.contentDOM;n--,l=!1);return c&&t&&l&&!c.border&&!c.domAtom?c.domFromPos(c.size,t):{node:this.contentDOM,offset:c?domIndex(c.dom)+1:0}}for(var p,d=!0;(p=n<this.children.length?this.children[n]:null)&&p.dom.parentNode!=this.contentDOM;n++,d=!1);return p&&d&&!p.border&&!p.domAtom?p.domFromPos(0,t):{node:this.contentDOM,offset:p?domIndex(p.dom):this.contentDOM.childNodes.length}},w.prototype.parseRange=function parseRange(e,t,n){if(void 0===n&&(n=0),0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var o=-1,r=-1,i=n,s=0;;s++){var a=this.children[s],c=i+a.size;if(-1==o&&e<=c){var l=i+a.border;if(e>=l&&t<=c-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(e,t,l);e=i;for(var p=s;p>0;p--){var d=this.children[p-1];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(1)){o=domIndex(d.dom)+1;break}e-=d.size}-1==o&&(o=0)}if(o>-1&&(c>t||s==this.children.length-1)){t=c;for(var h=s+1;h<this.children.length;h++){var u=this.children[h];if(u.size&&u.dom.parentNode==this.contentDOM&&!u.emptyChildAt(-1)){r=domIndex(u.dom);break}t+=u.size}-1==r&&(r=this.contentDOM.childNodes.length);break}i=c}return{node:this.contentDOM,from:e,to:t,fromOffset:o,toOffset:r}},w.prototype.emptyChildAt=function emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;var t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)},w.prototype.domAfterPos=function domAfterPos(e){var t=this.domFromPos(e,0),n=t.node,o=t.offset;if(1!=n.nodeType||o==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[o]},w.prototype.setSelection=function setSelection(e,t,n,o){for(var r=Math.min(e,t),i=Math.max(e,t),a=0,c=0;a<this.children.length;a++){var l=this.children[a],p=c+l.size;if(r>c&&i<p)return l.setSelection(e-c-l.border,t-c-l.border,n,o);c=p}var d=this.domFromPos(e,e?-1:1),h=t==e?d:this.domFromPos(t,t?-1:1),u=n.getSelection(),f=!1;if((s.gecko||s.safari)&&e==t){var m=d.node,v=d.offset;if(3==m.nodeType){if((f=v&&"\n"==m.nodeValue[v-1])&&v==m.nodeValue.length)for(var g=m,y=void 0;g;g=g.parentNode){if(y=g.nextSibling){"BR"==y.nodeName&&(d=h={node:y.parentNode,offset:domIndex(y)+1});break}var S=g.pmViewDesc;if(S&&S.node&&S.node.isBlock)break}}else{var w=m.childNodes[v-1];f=w&&("BR"==w.nodeName||"false"==w.contentEditable)}}if(s.gecko&&u.focusNode&&u.focusNode!=h.node&&1==u.focusNode.nodeType){var b=u.focusNode.childNodes[u.focusOffset];b&&"false"==b.contentEditable&&(o=!0)}if(o||f&&s.safari||!isEquivalentPosition(d.node,d.offset,u.anchorNode,u.anchorOffset)||!isEquivalentPosition(h.node,h.offset,u.focusNode,u.focusOffset)){var k=!1;if((u.extend||e==t)&&!f){u.collapse(d.node,d.offset);try{e!=t&&u.extend(h.node,h.offset),k=!0}catch(e){if(!(e instanceof DOMException))throw e}}if(!k){if(e>t){var x=d;d=h,h=x}var O=document.createRange();O.setEnd(h.node,h.offset),O.setStart(d.node,d.offset),u.removeAllRanges(),u.addRange(O)}}},w.prototype.ignoreMutation=function ignoreMutation(e){return!this.contentDOM&&"selection"!=e.type},b.contentLost.get=function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)},w.prototype.markDirty=function markDirty(e,t){for(var n=0,o=0;o<this.children.length;o++){var r=this.children[o],i=n+r.size;if(n==i?e<=i&&t>=n:e<i&&t>n){var s=n+r.border,a=i-r.border;if(e>=s&&t<=a)return this.dirty=e==n||t==i?2:1,void(e!=s||t!=a||!r.contentLost&&r.dom.parentNode==this.contentDOM?r.markDirty(e-s,t-s):r.dirty=3);r.dirty=r.dom!=r.contentDOM||r.dom.parentNode!=this.contentDOM||r.children.length?3:2}n=i}this.dirty=2},w.prototype.markParentsDirty=function markParentsDirty(){for(var e=1,t=this.parent;t;t=t.parent,e++){var n=1==e?2:1;t.dirty<n&&(t.dirty=n)}},b.domAtom.get=function(){return!1},b.ignoreForCoords.get=function(){return!1},Object.defineProperties(w.prototype,b);var k=[],x=function(e){function WidgetViewDesc(t,n,o,r){var i,s=n.type.toDOM;if("function"==typeof s&&(s=s(o,(function(){return i?i.parent?i.parent.posBeforeChild(i):void 0:r}))),!n.type.spec.raw){if(1!=s.nodeType){var a=document.createElement("span");a.appendChild(s),s=a}s.contentEditable=!1,s.classList.add("ProseMirror-widget")}e.call(this,t,k,s,null),this.widget=n,i=this}e&&(WidgetViewDesc.__proto__=e),WidgetViewDesc.prototype=Object.create(e&&e.prototype),WidgetViewDesc.prototype.constructor=WidgetViewDesc;var t={domAtom:{configurable:!0}};return WidgetViewDesc.prototype.matchesWidget=function matchesWidget(e){return 0==this.dirty&&e.type.eq(this.widget.type)},WidgetViewDesc.prototype.parseRule=function parseRule(){return{ignore:!0}},WidgetViewDesc.prototype.stopEvent=function stopEvent(e){var t=this.widget.spec.stopEvent;return!!t&&t(e)},WidgetViewDesc.prototype.ignoreMutation=function ignoreMutation(e){return"selection"!=e.type||this.widget.spec.ignoreSelection},WidgetViewDesc.prototype.destroy=function destroy(){this.widget.type.destroy(this.dom),e.prototype.destroy.call(this)},t.domAtom.get=function(){return!0},Object.defineProperties(WidgetViewDesc.prototype,t),WidgetViewDesc}(w),O=function(e){function CompositionViewDesc(t,n,o,r){e.call(this,t,k,n,null),this.textDOM=o,this.text=r}e&&(CompositionViewDesc.__proto__=e),CompositionViewDesc.prototype=Object.create(e&&e.prototype),CompositionViewDesc.prototype.constructor=CompositionViewDesc;var t={size:{configurable:!0}};return t.size.get=function(){return this.text.length},CompositionViewDesc.prototype.localPosFromDOM=function localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t},CompositionViewDesc.prototype.domFromPos=function domFromPos(e){return{node:this.textDOM,offset:e}},CompositionViewDesc.prototype.ignoreMutation=function ignoreMutation(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue},Object.defineProperties(CompositionViewDesc.prototype,t),CompositionViewDesc}(w),M=function(e){function MarkViewDesc(t,n,o,r){e.call(this,t,[],o,r),this.mark=n}return e&&(MarkViewDesc.__proto__=e),MarkViewDesc.prototype=Object.create(e&&e.prototype),MarkViewDesc.prototype.constructor=MarkViewDesc,MarkViewDesc.create=function create(e,t,n,o){var i=o.nodeViews[t.type.name],s=i&&i(t,o,n);return s&&s.dom||(s=r.DOMSerializer.renderSpec(document,t.type.spec.toDOM(t,n))),new MarkViewDesc(e,t,s.dom,s.contentDOM||s.dom)},MarkViewDesc.prototype.parseRule=function parseRule(){return 3&this.dirty||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}},MarkViewDesc.prototype.matchesMark=function matchesMark(e){return 3!=this.dirty&&this.mark.eq(e)},MarkViewDesc.prototype.markDirty=function markDirty(t,n){if(e.prototype.markDirty.call(this,t,n),0!=this.dirty){for(var o=this.parent;!o.node;)o=o.parent;o.dirty<this.dirty&&(o.dirty=this.dirty),this.dirty=0}},MarkViewDesc.prototype.slice=function slice(e,t,n){var o=MarkViewDesc.create(this.parent,this.mark,!0,n),r=this.children,i=this.size;t<i&&(r=replaceNodes(r,t,i,n)),e>0&&(r=replaceNodes(r,0,e,n));for(var s=0;s<r.length;s++)r[s].parent=o;return o.children=r,o},MarkViewDesc}(w),C=function(e){function NodeViewDesc(t,n,o,r,i,s,a,c,l){e.call(this,t,n.isLeaf?k:[],i,s),this.nodeDOM=a,this.node=n,this.outerDeco=o,this.innerDeco=r,s&&this.updateChildren(c,l)}e&&(NodeViewDesc.__proto__=e),NodeViewDesc.prototype=Object.create(e&&e.prototype),NodeViewDesc.prototype.constructor=NodeViewDesc;var t={size:{configurable:!0},border:{configurable:!0},domAtom:{configurable:!0}};return NodeViewDesc.create=function create(e,t,n,o,i,s){var a,c,l=i.nodeViews[t.type.name],p=l&&l(t,i,(function(){return c?c.parent?c.parent.posBeforeChild(c):void 0:s}),n,o),d=p&&p.dom,h=p&&p.contentDOM;if(t.isText)if(d){if(3!=d.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else d=document.createTextNode(t.text);else d||(d=(a=r.DOMSerializer.renderSpec(document,t.type.spec.toDOM(t))).dom,h=a.contentDOM);h||t.isText||"BR"==d.nodeName||(d.hasAttribute("contenteditable")||(d.contentEditable=!1),t.type.spec.draggable&&(d.draggable=!0));var u=d;return d=applyOuterDeco(d,n,t),p?c=new T(e,t,n,o,d,h,u,p,i,s+1):t.isText?new D(e,t,n,o,d,u,i):new NodeViewDesc(e,t,n,o,d,h,u,i,s+1)},NodeViewDesc.prototype.parseRule=function parseRule(){var e=this;if(this.node.type.spec.reparseInView)return null;var t={node:this.node.type.name,attrs:this.node.attrs};return"pre"==this.node.type.whitespace&&(t.preserveWhitespace="full"),this.contentDOM&&!this.contentLost?t.contentElement=this.contentDOM:t.getContent=function(){return e.contentDOM?r.Fragment.empty:e.node.content},t},NodeViewDesc.prototype.matchesNode=function matchesNode(e,t,n){return 0==this.dirty&&e.eq(this.node)&&sameOuterDeco(t,this.outerDeco)&&n.eq(this.innerDeco)},t.size.get=function(){return this.node.nodeSize},t.border.get=function(){return this.node.isLeaf?0:1},NodeViewDesc.prototype.updateChildren=function updateChildren(e,t){var n=this,o=this.node.inlineContent,i=t,a=e.composing&&this.localCompositionInfo(e,t),c=a&&a.pos>-1?a:null,l=a&&a.pos<0,p=new R(this,c&&c.node);!function iterDeco(e,t,n,o){var r=t.locals(e),i=0;if(0==r.length){for(var s=0;s<e.childCount;s++){var a=e.child(s);o(a,r,t.forChild(i,a),s),i+=a.nodeSize}return}for(var c=0,l=[],p=null,d=0;;){if(c<r.length&&r[c].to==i){for(var h=r[c++],u=void 0;c<r.length&&r[c].to==i;)(u||(u=[h])).push(r[c++]);if(u){u.sort(compareSide);for(var f=0;f<u.length;f++)n(u[f],d,!!p)}else n(h,d,!!p)}var m=void 0,v=void 0;if(p)v=-1,m=p,p=null;else{if(!(d<e.childCount))break;v=d,m=e.child(d++)}for(var g=0;g<l.length;g++)l[g].to<=i&&l.splice(g--,1);for(;c<r.length&&r[c].from<=i&&r[c].to>i;)l.push(r[c++]);var y=i+m.nodeSize;if(m.isText){var S=y;c<r.length&&r[c].from<S&&(S=r[c].from);for(var w=0;w<l.length;w++)l[w].to<S&&(S=l[w].to);S<y&&(p=m.cut(S-i),m=m.cut(0,S-i),y=S,v=-1)}o(m,l.length?m.isInline&&!m.isLeaf?l.filter((function(e){return!e.inline})):l.slice():k,t.forChild(i,m),v),i=y}}(this.node,this.innerDeco,(function(t,s,a){t.spec.marks?p.syncToMarks(t.spec.marks,o,e):t.type.side>=0&&!a&&p.syncToMarks(s==n.node.childCount?r.Mark.none:n.node.child(s).marks,o,e),p.placeWidget(t,e,i)}),(function(t,n,r,s){var c;p.syncToMarks(t.marks,o,e),p.findNodeMatch(t,n,r,s)||l&&e.state.selection.from>i&&e.state.selection.to<i+t.nodeSize&&(c=p.findIndexWithChild(a.node))>-1&&p.updateNodeAt(t,n,r,c,e)||p.updateNextNode(t,n,r,e,s)||p.addNode(t,n,r,e,i),i+=t.nodeSize})),p.syncToMarks(k,o,e),this.node.isTextblock&&p.addTextblockHacks(),p.destroyRest(),(p.changed||2==this.dirty)&&(c&&this.protectLocalComposition(e,c),renderDescs(this.contentDOM,this.children,e),s.ios&&function iosHacks(e){if("UL"==e.nodeName||"OL"==e.nodeName){var t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}(this.dom))},NodeViewDesc.prototype.localCompositionInfo=function localCompositionInfo(e,t){var n=e.state.selection,r=n.from,i=n.to;if(!(!(e.state.selection instanceof o.TextSelection)||r<t||i>t+this.node.content.size)){var s=e.root.getSelection(),a=function nearbyTextNode(e,t){for(;;){if(3==e.nodeType)return e;if(1==e.nodeType&&t>0){if(e.childNodes.length>t&&3==e.childNodes[t].nodeType)return e.childNodes[t];t=nodeSize(e=e.childNodes[t-1])}else{if(!(1==e.nodeType&&t<e.childNodes.length))return null;e=e.childNodes[t],t=0}}}(s.focusNode,s.focusOffset);if(a&&this.dom.contains(a.parentNode)){if(this.node.inlineContent){var c=a.nodeValue,l=function findTextInFragment(e,t,n,o){for(var r=0,i=0;r<e.childCount&&i<=o;){var s=e.child(r++),a=i;if(i+=s.nodeSize,s.isText){for(var c=s.text;r<e.childCount;){var l=e.child(r++);if(i+=l.nodeSize,!l.isText)break;c+=l.text}if(i>=n&&a<o){var p=c.lastIndexOf(t,o-a-1);if(p>=0&&p+t.length+a>=n)return a+p}}}return-1}(this.node.content,c,r-t,i-t);return l<0?null:{node:a,pos:l,text:c}}return{node:a,pos:-1}}}},NodeViewDesc.prototype.protectLocalComposition=function protectLocalComposition(e,t){var n=t.node,o=t.pos,r=t.text;if(!this.getDesc(n)){for(var i=n;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=null)}var s=new O(this,i,n,r);e.compositionNodes.push(s),this.children=replaceNodes(this.children,o,o+r.length,e,s)}},NodeViewDesc.prototype.update=function update(e,t,n,o){return!(3==this.dirty||!e.sameMarkup(this.node))&&(this.updateInner(e,t,n,o),!0)},NodeViewDesc.prototype.updateInner=function updateInner(e,t,n,o){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(o,this.posAtStart),this.dirty=0},NodeViewDesc.prototype.updateOuterDeco=function updateOuterDeco(e){if(!sameOuterDeco(e,this.outerDeco)){var t=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=patchOuterDeco(this.dom,this.nodeDOM,computeOuterDeco(this.outerDeco,this.node,t),computeOuterDeco(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=null,this.dom.pmViewDesc=this),this.outerDeco=e}},NodeViewDesc.prototype.selectNode=function selectNode(){this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)},NodeViewDesc.prototype.deselectNode=function deselectNode(){this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable")},t.domAtom.get=function(){return this.node.isAtom},Object.defineProperties(NodeViewDesc.prototype,t),NodeViewDesc}(w);function docViewDesc(e,t,n,o,r){return applyOuterDeco(o,t,e),new C(null,e,t,n,o,o,o,r,0)}var D=function(e){function TextViewDesc(t,n,o,r,i,s,a){e.call(this,t,n,o,r,i,null,s,a)}e&&(TextViewDesc.__proto__=e),TextViewDesc.prototype=Object.create(e&&e.prototype),TextViewDesc.prototype.constructor=TextViewDesc;var t={domAtom:{configurable:!0}};return TextViewDesc.prototype.parseRule=function parseRule(){for(var e=this.nodeDOM.parentNode;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}},TextViewDesc.prototype.update=function update(e,t,n,o){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!e.sameMarkup(this.node))&&(this.updateOuterDeco(t),0==this.dirty&&e.text==this.node.text||e.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=e.text,o.trackWrites==this.nodeDOM&&(o.trackWrites=null)),this.node=e,this.dirty=0,!0)},TextViewDesc.prototype.inParent=function inParent(){for(var e=this.parent.contentDOM,t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1},TextViewDesc.prototype.domFromPos=function domFromPos(e){return{node:this.nodeDOM,offset:e}},TextViewDesc.prototype.localPosFromDOM=function localPosFromDOM(t,n,o){return t==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):e.prototype.localPosFromDOM.call(this,t,n,o)},TextViewDesc.prototype.ignoreMutation=function ignoreMutation(e){return"characterData"!=e.type&&"selection"!=e.type},TextViewDesc.prototype.slice=function slice(e,t,n){var o=this.node.cut(e,t),r=document.createTextNode(o.text);return new TextViewDesc(this.parent,o,this.outerDeco,this.innerDeco,r,r,n)},TextViewDesc.prototype.markDirty=function markDirty(t,n){e.prototype.markDirty.call(this,t,n),this.dom==this.nodeDOM||0!=t&&n!=this.nodeDOM.nodeValue.length||(this.dirty=3)},t.domAtom.get=function(){return!1},Object.defineProperties(TextViewDesc.prototype,t),TextViewDesc}(C),N=function(e){function TrailingHackViewDesc(){e.apply(this,arguments)}e&&(TrailingHackViewDesc.__proto__=e),TrailingHackViewDesc.prototype=Object.create(e&&e.prototype),TrailingHackViewDesc.prototype.constructor=TrailingHackViewDesc;var t={domAtom:{configurable:!0},ignoreForCoords:{configurable:!0}};return TrailingHackViewDesc.prototype.parseRule=function parseRule(){return{ignore:!0}},TrailingHackViewDesc.prototype.matchesHack=function matchesHack(e){return 0==this.dirty&&this.dom.nodeName==e},t.domAtom.get=function(){return!0},t.ignoreForCoords.get=function(){return"IMG"==this.dom.nodeName},Object.defineProperties(TrailingHackViewDesc.prototype,t),TrailingHackViewDesc}(w),T=function(e){function CustomNodeViewDesc(t,n,o,r,i,s,a,c,l,p){e.call(this,t,n,o,r,i,s,a,l,p),this.spec=c}return e&&(CustomNodeViewDesc.__proto__=e),CustomNodeViewDesc.prototype=Object.create(e&&e.prototype),CustomNodeViewDesc.prototype.constructor=CustomNodeViewDesc,CustomNodeViewDesc.prototype.update=function update(t,n,o,r){if(3==this.dirty)return!1;if(this.spec.update){var i=this.spec.update(t,n,o);return i&&this.updateInner(t,n,o,r),i}return!(!this.contentDOM&&!t.isLeaf)&&e.prototype.update.call(this,t,n,o,r)},CustomNodeViewDesc.prototype.selectNode=function selectNode(){this.spec.selectNode?this.spec.selectNode():e.prototype.selectNode.call(this)},CustomNodeViewDesc.prototype.deselectNode=function deselectNode(){this.spec.deselectNode?this.spec.deselectNode():e.prototype.deselectNode.call(this)},CustomNodeViewDesc.prototype.setSelection=function setSelection(t,n,o,r){this.spec.setSelection?this.spec.setSelection(t,n,o):e.prototype.setSelection.call(this,t,n,o,r)},CustomNodeViewDesc.prototype.destroy=function destroy(){this.spec.destroy&&this.spec.destroy(),e.prototype.destroy.call(this)},CustomNodeViewDesc.prototype.stopEvent=function stopEvent(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)},CustomNodeViewDesc.prototype.ignoreMutation=function ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):e.prototype.ignoreMutation.call(this,t)},CustomNodeViewDesc}(C);function renderDescs(e,t,n){for(var o=e.firstChild,r=!1,i=0;i<t.length;i++){var s=t[i],a=s.dom;if(a.parentNode==e){for(;a!=o;)o=rm(o),r=!0;o=o.nextSibling}else r=!0,e.insertBefore(a,o);if(s instanceof M){var c=o?o.previousSibling:e.lastChild;renderDescs(s.contentDOM,s.children,n),o=c?c.nextSibling:e.firstChild}}for(;o;)o=rm(o),r=!0;r&&n.trackWrites==e&&(n.trackWrites=null)}function OuterDecoLevel(e){e&&(this.nodeName=e)}OuterDecoLevel.prototype=Object.create(null);var E=[new OuterDecoLevel];function computeOuterDeco(e,t,n){if(0==e.length)return E;for(var o=n?E[0]:new OuterDecoLevel,r=[o],i=0;i<e.length;i++){var s=e[i].type.attrs;if(s)for(var a in s.nodeName&&r.push(o=new OuterDecoLevel(s.nodeName)),s){var c=s[a];null!=c&&(n&&1==r.length&&r.push(o=new OuterDecoLevel(t.isInline?"span":"div")),"class"==a?o.class=(o.class?o.class+" ":"")+c:"style"==a?o.style=(o.style?o.style+";":"")+c:"nodeName"!=a&&(o[a]=c))}}return r}function patchOuterDeco(e,t,n,o){if(n==E&&o==E)return t;for(var r=t,i=0;i<o.length;i++){var s=o[i],a=n[i];if(i){var c=void 0;a&&a.nodeName==s.nodeName&&r!=e&&(c=r.parentNode)&&c.tagName.toLowerCase()==s.nodeName||((c=document.createElement(s.nodeName)).pmIsDeco=!0,c.appendChild(r),a=E[0]),r=c}patchAttributes(r,a||E[0],s)}return r}function patchAttributes(e,t,n){for(var o in t)"class"==o||"style"==o||"nodeName"==o||o in n||e.removeAttribute(o);for(var r in n)"class"!=r&&"style"!=r&&"nodeName"!=r&&n[r]!=t[r]&&e.setAttribute(r,n[r]);if(t.class!=n.class){for(var i=t.class?t.class.split(" ").filter(Boolean):k,s=n.class?n.class.split(" ").filter(Boolean):k,a=0;a<i.length;a++)-1==s.indexOf(i[a])&&e.classList.remove(i[a]);for(var c=0;c<s.length;c++)-1==i.indexOf(s[c])&&e.classList.add(s[c]);0==e.classList.length&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style)for(var l,p=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;l=p.exec(t.style);)e.style.removeProperty(l[1]);n.style&&(e.style.cssText+=n.style)}}function applyOuterDeco(e,t,n){return patchOuterDeco(e,e,E,computeOuterDeco(t,n,1!=e.nodeType))}function sameOuterDeco(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function rm(e){var t=e.nextSibling;return e.parentNode.removeChild(e),t}var R=function ViewTreeUpdater(e,t){this.top=e,this.lock=t,this.index=0,this.stack=[],this.changed=!1,this.preMatch=function preMatch(e,t){var n=t,o=n.children.length,r=e.childCount,i=new Map,s=[];e:for(;r>0;){for(var a=void 0;;)if(o){var c=n.children[o-1];if(!(c instanceof M)){a=c,o--;break}n=c,o=c.children.length}else{if(n==t)break e;o=n.parent.children.indexOf(n),n=n.parent}var l=a.node;if(l){if(l!=e.child(r-1))break;--r,i.set(a,r),s.push(a)}}return{index:r,matched:i,matches:s.reverse()}}(e.node.content,e)};function compareSide(e,t){return e.type.side-t.type.side}function replaceNodes(e,t,n,o,r){for(var i=[],s=0,a=0;s<e.length;s++){var c=e[s],l=a,p=a+=c.size;l>=n||p<=t?i.push(c):(l<t&&i.push(c.slice(0,t-l,o)),r&&(i.push(r),r=null),p>n&&i.push(c.slice(n-l,c.size,o)))}return i}function selectionFromDOM(e,t){var n=e.root.getSelection(),r=e.state.doc;if(!n.focusNode)return null;var i=e.docView.nearestDesc(n.focusNode),s=i&&0==i.size,a=e.docView.posFromDOM(n.focusNode,n.focusOffset);if(a<0)return null;var c,l,p=r.resolve(a);if(selectionCollapsed(n)){for(c=p;i&&!i.node;)i=i.parent;if(i&&i.node.isAtom&&o.NodeSelection.isSelectable(i.node)&&i.parent&&(!i.node.isInline||!function isOnEdge(e,t,n){for(var o=0==t,r=t==nodeSize(e);o||r;){if(e==n)return!0;var i=domIndex(e);if(!(e=e.parentNode))return!1;o=o&&0==i,r=r&&i==nodeSize(e)}}(n.focusNode,n.focusOffset,i.dom))){var d=i.posBefore;l=new o.NodeSelection(a==d?p:r.resolve(d))}}else{var h=e.docView.posFromDOM(n.anchorNode,n.anchorOffset);if(h<0)return null;c=r.resolve(h)}l||(l=selectionBetween(e,c,p,"pointer"==t||e.state.selection.head<p.pos&&!s?1:-1));return l}function editorOwnsSelection(e){return e.editable?e.hasFocus():hasSelection(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function selectionToDOM(e,t){var n=e.state.selection;if(syncNodeSelection(e,n),editorOwnsSelection(e)){if(!t&&e.mouseDown&&e.mouseDown.allowDefault&&s.chrome){var r=e.root.getSelection(),i=e.domObserver.currentSelection;if(r.anchorNode&&isEquivalentPosition(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset))return e.mouseDown.delayedSelectionSync=!0,void e.domObserver.setCurSelection()}if(e.domObserver.disconnectSelection(),e.cursorWrapper)!function selectCursorWrapper(e){var t=e.root.getSelection(),n=document.createRange(),o=e.cursorWrapper.dom,r="IMG"==o.nodeName;r?n.setEnd(o.parentNode,domIndex(o)+1):n.setEnd(o,0);n.collapse(!1),t.removeAllRanges(),t.addRange(n),!r&&!e.state.selection.visible&&s.ie&&s.ie_version<=11&&(o.disabled=!0,o.disabled=!1)}(e);else{var a,c,l=n.anchor,p=n.head;!A||n instanceof o.TextSelection||(n.$from.parent.inlineContent||(a=temporarilyEditableNear(e,n.from)),n.empty||n.$from.parent.inlineContent||(c=temporarilyEditableNear(e,n.to))),e.docView.setSelection(l,p,e.root,t),A&&(a&&resetEditable(a),c&&resetEditable(c)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function removeClassOnSelectionChange(e){var t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.hideSelectionGuard);var n=e.root.getSelection(),o=n.anchorNode,r=n.anchorOffset;t.addEventListener("selectionchange",e.hideSelectionGuard=function(){n.anchorNode==o&&n.anchorOffset==r||(t.removeEventListener("selectionchange",e.hideSelectionGuard),setTimeout((function(){editorOwnsSelection(e)&&!e.state.selection.visible||e.dom.classList.remove("ProseMirror-hideselection")}),20))})}(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}R.prototype.destroyBetween=function destroyBetween(e,t){if(e!=t){for(var n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}},R.prototype.destroyRest=function destroyRest(){this.destroyBetween(this.index,this.top.children.length)},R.prototype.syncToMarks=function syncToMarks(e,t,n){for(var o=0,r=this.stack.length>>1,i=Math.min(r,e.length);o<i&&(o==r-1?this.top:this.stack[o+1<<1]).matchesMark(e[o])&&!1!==e[o].type.spec.spanning;)o++;for(;o<r;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),r--;for(;r<e.length;){this.stack.push(this.top,this.index+1);for(var s=-1,a=this.index;a<Math.min(this.index+3,this.top.children.length);a++)if(this.top.children[a].matchesMark(e[r])){s=a;break}if(s>-1)s>this.index&&(this.changed=!0,this.destroyBetween(this.index,s)),this.top=this.top.children[this.index];else{var c=M.create(this.top,e[r],t,n);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,r++}},R.prototype.findNodeMatch=function findNodeMatch(e,t,n,o){var r,i=-1;if(o>=this.preMatch.index&&(r=this.preMatch.matches[o-this.preMatch.index]).parent==this.top&&r.matchesNode(e,t,n))i=this.top.children.indexOf(r,this.index);else for(var s=this.index,a=Math.min(this.top.children.length,s+5);s<a;s++){var c=this.top.children[s];if(c.matchesNode(e,t,n)&&!this.preMatch.matched.has(c)){i=s;break}}return!(i<0)&&(this.destroyBetween(this.index,i),this.index++,!0)},R.prototype.updateNodeAt=function updateNodeAt(e,t,n,o,r){return!!this.top.children[o].update(e,t,n,r)&&(this.destroyBetween(this.index,o),this.index=o+1,!0)},R.prototype.findIndexWithChild=function findIndexWithChild(e){for(;;){var t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){var n=e.pmViewDesc;if(n)for(var o=this.index;o<this.top.children.length;o++)if(this.top.children[o]==n)return o;return-1}e=t}},R.prototype.updateNextNode=function updateNextNode(e,t,n,o,r){for(var i=this.index;i<this.top.children.length;i++){var s=this.top.children[i];if(s instanceof C){var a=this.preMatch.matched.get(s);if(null!=a&&a!=r)return!1;var c=s.dom;if(!(this.lock&&(c==this.lock||1==c.nodeType&&c.contains(this.lock.parentNode))&&!(e.isText&&s.node&&s.node.isText&&s.nodeDOM.nodeValue==e.text&&3!=s.dirty&&sameOuterDeco(t,s.outerDeco)))&&s.update(e,t,n,o))return this.destroyBetween(this.index,i),s.dom!=c&&(this.changed=!0),this.index++,!0;break}}return!1},R.prototype.addNode=function addNode(e,t,n,o,r){this.top.children.splice(this.index++,0,C.create(this.top,e,t,n,o,r)),this.changed=!0},R.prototype.placeWidget=function placeWidget(e,t,n){var o=this.index<this.top.children.length?this.top.children[this.index]:null;if(!o||!o.matchesWidget(e)||e!=o.widget&&o.widget.type.toDOM.parentNode){var r=new x(this.top,e,t,n);this.top.children.splice(this.index++,0,r),this.changed=!0}else this.index++},R.prototype.addTextblockHacks=function addTextblockHacks(){for(var e=this.top.children[this.index-1];e instanceof M;)e=e.children[e.children.length-1];e&&e instanceof D&&!/\n$/.test(e.node.text)||((s.safari||s.chrome)&&e&&"false"==e.dom.contentEditable&&this.addHackNode("IMG"),this.addHackNode("BR"))},R.prototype.addHackNode=function addHackNode(e){if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack(e))this.index++;else{var t=document.createElement(e);"IMG"==e&&(t.className="ProseMirror-separator"),"BR"==e&&(t.className="ProseMirror-trailingBreak"),this.top.children.splice(this.index++,0,new N(this.top,k,t,null)),this.changed=!0}};var A=s.safari||s.chrome&&s.chrome_version<63;function temporarilyEditableNear(e,t){var n=e.docView.domFromPos(t,0),o=n.node,r=n.offset,i=r<o.childNodes.length?o.childNodes[r]:null,a=r?o.childNodes[r-1]:null;if(s.safari&&i&&"false"==i.contentEditable)return setEditable(i);if(!(i&&"false"!=i.contentEditable||a&&"false"!=a.contentEditable)){if(i)return setEditable(i);if(a)return setEditable(a)}}function setEditable(e){return e.contentEditable="true",s.safari&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function resetEditable(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function syncNodeSelection(e,t){if(t instanceof o.NodeSelection){var n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(clearNodeSelection(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else clearNodeSelection(e)}function clearNodeSelection(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=null)}function selectionBetween(e,t,n,r){return e.someProp("createSelectionBetween",(function(o){return o(e,t,n)}))||o.TextSelection.between(t,n,r)}function hasSelection(e){var t=e.root.getSelection();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(e){return!1}}function moveSelectionBlock(e,t){var n=e.selection,r=n.$anchor,i=n.$head,s=t>0?r.max(i):r.min(i),a=s.parent.inlineContent?s.depth?e.doc.resolve(t>0?s.after():s.before()):null:s;return a&&o.Selection.findFrom(a,t)}function apply(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function selectHorizontally(e,t,n){var r=e.state.selection;if(!(r instanceof o.TextSelection)){if(r instanceof o.NodeSelection&&r.node.isInline)return apply(e,new o.TextSelection(t>0?r.$to:r.$from));var i=moveSelectionBlock(e.state,t);return!!i&&apply(e,i)}if(!r.empty||n.indexOf("s")>-1)return!1;if(e.endOfTextblock(t>0?"right":"left")){var a=moveSelectionBlock(e.state,t);return!!(a&&a instanceof o.NodeSelection)&&apply(e,a)}if(!(s.mac&&n.indexOf("m")>-1)){var c,l=r.$head,p=l.textOffset?null:t<0?l.nodeBefore:l.nodeAfter;if(!p||p.isText)return!1;var d=t<0?l.pos-p.nodeSize:l.pos;return!!(p.isAtom||(c=e.docView.descAt(d))&&!c.contentDOM)&&(o.NodeSelection.isSelectable(p)?apply(e,new o.NodeSelection(t<0?e.state.doc.resolve(l.pos-p.nodeSize):l)):!!s.webkit&&apply(e,new o.TextSelection(e.state.doc.resolve(t<0?d:d+p.nodeSize))))}}function nodeLen(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function isIgnorable(e){var t=e.pmViewDesc;return t&&0==t.size&&(e.nextSibling||"BR"!=e.nodeName)}function skipIgnoredNodesLeft(e){var t=e.root.getSelection(),n=t.focusNode,o=t.focusOffset;if(n){var r,i,a=!1;for(s.gecko&&1==n.nodeType&&o<nodeLen(n)&&isIgnorable(n.childNodes[o])&&(a=!0);;)if(o>0){if(1!=n.nodeType)break;var c=n.childNodes[o-1];if(isIgnorable(c))r=n,i=--o;else{if(3!=c.nodeType)break;o=(n=c).nodeValue.length}}else{if(isBlockNode(n))break;for(var l=n.previousSibling;l&&isIgnorable(l);)r=n.parentNode,i=domIndex(l),l=l.previousSibling;if(l)o=nodeLen(n=l);else{if((n=n.parentNode)==e.dom)break;o=0}}a?setSelFocus(e,t,n,o):r&&setSelFocus(e,t,r,i)}}function skipIgnoredNodesRight(e){var t=e.root.getSelection(),n=t.focusNode,o=t.focusOffset;if(n){for(var r,i,s=nodeLen(n);;)if(o<s){if(1!=n.nodeType)break;if(!isIgnorable(n.childNodes[o]))break;r=n,i=++o}else{if(isBlockNode(n))break;for(var a=n.nextSibling;a&&isIgnorable(a);)r=a.parentNode,i=domIndex(a)+1,a=a.nextSibling;if(a)o=0,s=nodeLen(n=a);else{if((n=n.parentNode)==e.dom)break;o=s=0}}r&&setSelFocus(e,t,r,i)}}function isBlockNode(e){var t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function setSelFocus(e,t,n,o){if(selectionCollapsed(t)){var r=document.createRange();r.setEnd(n,o),r.setStart(n,o),t.removeAllRanges(),t.addRange(r)}else t.extend&&t.extend(n,o);e.domObserver.setCurSelection();var i=e.state;setTimeout((function(){e.state==i&&selectionToDOM(e)}),50)}function selectVertically(e,t,n){var r=e.state.selection;if(r instanceof o.TextSelection&&!r.empty||n.indexOf("s")>-1)return!1;if(s.mac&&n.indexOf("m")>-1)return!1;var i=r.$from,a=r.$to;if(!i.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){var c=moveSelectionBlock(e.state,t);if(c&&c instanceof o.NodeSelection)return apply(e,c)}if(!i.parent.inlineContent){var l=t<0?i:a,p=r instanceof o.AllSelection?o.Selection.near(l,t):o.Selection.findFrom(l,t);return!!p&&apply(e,p)}return!1}function stopNativeHorizontalDelete(e,t){if(!(e.state.selection instanceof o.TextSelection))return!0;var n=e.state.selection,r=n.$head,i=n.$anchor,s=n.empty;if(!r.sameParent(i))return!0;if(!s)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;var a=!r.textOffset&&(t<0?r.nodeBefore:r.nodeAfter);if(a&&!a.isText){var c=e.state.tr;return t<0?c.delete(r.pos-a.nodeSize,r.pos):c.delete(r.pos,r.pos+a.nodeSize),e.dispatch(c),!0}return!1}function switchEditable(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function captureKeyDown(e,t){var n=t.keyCode,o=function getMods(e){var t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}(t);return 8==n||s.mac&&72==n&&"c"==o?stopNativeHorizontalDelete(e,-1)||skipIgnoredNodesLeft(e):46==n||s.mac&&68==n&&"c"==o?stopNativeHorizontalDelete(e,1)||skipIgnoredNodesRight(e):13==n||27==n||(37==n?selectHorizontally(e,-1,o)||skipIgnoredNodesLeft(e):39==n?selectHorizontally(e,1,o)||skipIgnoredNodesRight(e):38==n?selectVertically(e,-1,o)||skipIgnoredNodesLeft(e):40==n?function safariDownArrowBug(e){if(s.safari&&!(e.state.selection.$head.parentOffset>0)){var t=e.root.getSelection(),n=t.focusNode,o=t.focusOffset;if(n&&1==n.nodeType&&0==o&&n.firstChild&&"false"==n.firstChild.contentEditable){var r=n.firstChild;switchEditable(e,r,!0),setTimeout((function(){return switchEditable(e,r,!1)}),20)}}}(e)||selectVertically(e,1,o)||skipIgnoredNodesRight(e):o==(s.mac?"m":"c")&&(66==n||73==n||89==n||90==n))}function ruleFromNode(e){var t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(s.safari&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){var n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}if(e.parentNode.lastChild==e||s.safari&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if("IMG"==e.nodeName&&e.getAttribute("mark-placeholder"))return{ignore:!0}}function readDOMChange(e,t,n,i,a){if(t<0){var c=e.lastSelectionTime>Date.now()-50?e.lastSelectionOrigin:null,l=selectionFromDOM(e,c);if(l&&!e.state.selection.eq(l)){var p=e.state.tr.setSelection(l);"pointer"==c?p.setMeta("pointer",!0):"key"==c&&p.scrollIntoView(),e.dispatch(p)}}else{var d=e.state.doc.resolve(t),h=d.sharedDepth(n);t=d.before(h+1),n=e.state.doc.resolve(n).after(h+1);var u=e.state.selection,f=function parseBetween(e,t,n){var o=e.docView.parseRange(t,n),i=o.node,a=o.fromOffset,c=o.toOffset,l=o.from,p=o.to,d=e.root.getSelection(),h=null,u=d.anchorNode;if(u&&e.dom.contains(1==u.nodeType?u:u.parentNode)&&(h=[{node:u,offset:d.anchorOffset}],selectionCollapsed(d)||h.push({node:d.focusNode,offset:d.focusOffset})),s.chrome&&8===e.lastKeyCode)for(var f=c;f>a;f--){var m=i.childNodes[f-1],v=m.pmViewDesc;if("BR"==m.nodeName&&!v){c=f;break}if(!v||v.size)break}var g=e.state.doc,y=e.someProp("domParser")||r.DOMParser.fromSchema(e.state.schema),S=g.resolve(l),w=null,b=y.parse(i,{topNode:S.parent,topMatch:S.parent.contentMatchAt(S.index()),topOpen:!0,from:a,to:c,preserveWhitespace:"pre"!=S.parent.type.whitespace||"full",editableContent:!0,findPositions:h,ruleFromNode:ruleFromNode,context:S});if(h&&null!=h[0].pos){var k=h[0].pos,x=h[1]&&h[1].pos;null==x&&(x=k),w={anchor:k+l,head:x+l}}return{doc:b,sel:w,from:l,to:p}}(e,t,n);if(s.chrome&&e.cursorWrapper&&f.sel&&f.sel.anchor==e.cursorWrapper.deco.from){var m=e.cursorWrapper.deco.type.toDOM.nextSibling,v=m&&m.nodeValue?m.nodeValue.length:1;f.sel={anchor:f.sel.anchor+v,head:f.sel.anchor+v}}var g,y,S=e.state.doc,w=S.slice(f.from,f.to);8===e.lastKeyCode&&Date.now()-100<e.lastKeyCodeTime?(g=e.state.selection.to,y="end"):(g=e.state.selection.from,y="start"),e.lastKeyCode=null;var b=function findDiff(e,t,n,o,r){var i=e.findDiffStart(t,n);if(null==i)return null;var s=e.findDiffEnd(t,n+e.size,n+t.size),a=s.a,c=s.b;if("end"==r){o-=a+Math.max(0,i-Math.min(a,c))-i}if(a<i&&e.size<t.size){c=(i-=o<=i&&o>=a?i-o:0)+(c-a),a=i}else if(c<i){a=(i-=o<=i&&o>=c?i-o:0)+(a-c),c=i}return{start:i,endA:a,endB:c}}(w.content,f.doc.content,f.from,g,y);if(!b){if(!(i&&u instanceof o.TextSelection&&!u.empty&&u.$head.sameParent(u.$anchor))||e.composing||f.sel&&f.sel.anchor!=f.sel.head){if((s.ios&&e.lastIOSEnter>Date.now()-225||s.android)&&a.some((function(e){return"DIV"==e.nodeName||"P"==e.nodeName}))&&e.someProp("handleKeyDown",(function(t){return t(e,keyEvent(13,"Enter"))})))return void(e.lastIOSEnter=0);if(f.sel){var k=resolveSelection(e,e.state.doc,f.sel);k&&!k.eq(e.state.selection)&&e.dispatch(e.state.tr.setSelection(k))}return}b={start:u.from,endA:u.to,endB:u.to}}e.domChangeCount++,e.state.selection.from<e.state.selection.to&&b.start==b.endB&&e.state.selection instanceof o.TextSelection&&(b.start>e.state.selection.from&&b.start<=e.state.selection.from+2?b.start=e.state.selection.from:b.endA<e.state.selection.to&&b.endA>=e.state.selection.to-2&&(b.endB+=e.state.selection.to-b.endA,b.endA=e.state.selection.to)),s.ie&&s.ie_version<=11&&b.endB==b.start+1&&b.endA==b.start&&b.start>f.from&&" "==f.doc.textBetween(b.start-f.from-1,b.start-f.from+1)&&(b.start--,b.endA--,b.endB--);var x,O=f.doc.resolveNoCache(b.start-f.from),M=f.doc.resolveNoCache(b.endB-f.from),C=O.sameParent(M)&&O.parent.inlineContent;if((s.ios&&e.lastIOSEnter>Date.now()-225&&(!C||a.some((function(e){return"DIV"==e.nodeName||"P"==e.nodeName})))||!C&&O.pos<f.doc.content.size&&(x=o.Selection.findFrom(f.doc.resolve(O.pos+1),1,!0))&&x.head==M.pos)&&e.someProp("handleKeyDown",(function(t){return t(e,keyEvent(13,"Enter"))})))e.lastIOSEnter=0;else if(e.state.selection.anchor>b.start&&function looksLikeJoin(e,t,n,o,r){if(!o.parent.isTextblock||n-t<=r.pos-o.pos||skipClosingAndOpening(o,!0,!1)<r.pos)return!1;var i=e.resolve(t);if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;var s=e.resolve(skipClosingAndOpening(i,!0,!0));if(!s.parent.isTextblock||s.pos>n||skipClosingAndOpening(s,!0,!1)<n)return!1;return o.parent.content.cut(o.parentOffset).eq(s.parent.content)}(S,b.start,b.endA,O,M)&&e.someProp("handleKeyDown",(function(t){return t(e,keyEvent(8,"Backspace"))})))s.android&&s.chrome&&e.domObserver.suppressSelectionUpdates();else{s.chrome&&s.android&&b.toB==b.from&&(e.lastAndroidDelete=Date.now()),s.android&&!C&&O.start()!=M.start()&&0==M.parentOffset&&O.depth==M.depth&&f.sel&&f.sel.anchor==f.sel.head&&f.sel.head==b.endA&&(b.endB-=2,M=f.doc.resolveNoCache(b.endB-f.from),setTimeout((function(){e.someProp("handleKeyDown",(function(t){return t(e,keyEvent(13,"Enter"))}))}),20));var D,N,T,E,R=b.start,A=b.endA;if(C)if(O.pos==M.pos)s.ie&&s.ie_version<=11&&0==O.parentOffset&&(e.domObserver.suppressSelectionUpdates(),setTimeout((function(){return selectionToDOM(e)}),20)),D=e.state.tr.delete(R,A),N=S.resolve(b.start).marksAcross(S.resolve(b.endA));else if(b.endA==b.endB&&(E=S.resolve(b.start))&&(T=function isMarkChange(e,t){for(var n,o,i,s=e.firstChild.marks,a=t.firstChild.marks,c=s,l=a,p=0;p<a.length;p++)c=a[p].removeFromSet(c);for(var d=0;d<s.length;d++)l=s[d].removeFromSet(l);if(1==c.length&&0==l.length)o=c[0],n="add",i=function(e){return e.mark(o.addToSet(e.marks))};else{if(0!=c.length||1!=l.length)return null;o=l[0],n="remove",i=function(e){return e.mark(o.removeFromSet(e.marks))}}for(var h=[],u=0;u<t.childCount;u++)h.push(i(t.child(u)));if(r.Fragment.from(h).eq(e))return{mark:o,type:n}}(O.parent.content.cut(O.parentOffset,M.parentOffset),E.parent.content.cut(E.parentOffset,b.endA-E.start()))))D=e.state.tr,"add"==T.type?D.addMark(R,A,T.mark):D.removeMark(R,A,T.mark);else if(O.parent.child(O.index()).isText&&O.index()==M.index()-(M.textOffset?0:1)){var I=O.parent.textBetween(O.parentOffset,M.parentOffset);if(e.someProp("handleTextInput",(function(t){return t(e,R,A,I)})))return;D=e.state.tr.insertText(I,R,A)}if(D||(D=e.state.tr.replace(R,A,f.doc.slice(b.start-f.from,b.endB-f.from))),f.sel){var _=resolveSelection(e,D.doc,f.sel);_&&!(s.chrome&&s.android&&e.composing&&_.empty&&(b.start!=b.endB||e.lastAndroidDelete<Date.now()-100)&&(_.head==R||_.head==D.mapping.map(A)-1)||s.ie&&_.empty&&_.head==R)&&D.setSelection(_)}N&&D.ensureMarks(N),e.dispatch(D.scrollIntoView())}}}function resolveSelection(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:selectionBetween(e,t.resolve(n.anchor),t.resolve(n.head))}function skipClosingAndOpening(e,t,n){for(var o=e.depth,r=t?e.end():e.pos;o>0&&(t||e.indexAfter(o)==e.node(o).childCount);)o--,r++,t=!1;if(n)for(var i=e.node(o).maybeChild(e.indexAfter(o));i&&!i.isLeaf;)i=i.firstChild,r++;return r}function serializeForClipboard(e,t){for(var n=[],o=t.content,i=t.openStart,s=t.openEnd;i>1&&s>1&&1==o.childCount&&1==o.firstChild.childCount;){i--,s--;var a=o.firstChild;n.push(a.type.name,a.attrs!=a.type.defaultAttrs?a.attrs:null),o=a.content}var c=e.someProp("clipboardSerializer")||r.DOMSerializer.fromSchema(e.state.schema),l=detachedDoc(),p=l.createElement("div");p.appendChild(c.serializeFragment(o,{document:l}));for(var d,h=p.firstChild;h&&1==h.nodeType&&(d=_[h.nodeName.toLowerCase()]);){for(var u=d.length-1;u>=0;u--){for(var f=l.createElement(d[u]);p.firstChild;)f.appendChild(p.firstChild);p.appendChild(f),"tbody"!=d[u]&&(i++,s++)}h=p.firstChild}return h&&1==h.nodeType&&h.setAttribute("data-pm-slice",i+" "+s+" "+JSON.stringify(n)),{dom:p,text:e.someProp("clipboardTextSerializer",(function(e){return e(t)}))||t.content.textBetween(0,t.content.size,"\n\n")}}function parseFromClipboard(e,t,n,o,i){var a,c,l=i.parent.type.spec.code;if(!n&&!t)return null;var p=t&&(o||l||!n);if(p){if(e.someProp("transformPastedText",(function(e){t=e(t,l||o)})),l)return t?new r.Slice(r.Fragment.from(e.state.schema.text(t.replace(/\r\n?/g,"\n"))),0,0):r.Slice.empty;var d=e.someProp("clipboardTextParser",(function(e){return e(t,i,o)}));if(d)c=d;else{var h=i.marks(),u=e.state.schema,f=r.DOMSerializer.fromSchema(u);a=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach((function(e){var t=a.appendChild(document.createElement("p"));e&&t.appendChild(f.serializeNode(u.text(e,h)))}))}}else e.someProp("transformPastedHTML",(function(e){n=e(n)})),a=function readHTML(e){var t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));var n,o=detachedDoc().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(e);(n=r&&_[r[1].toLowerCase()])&&(e=n.map((function(e){return"<"+e+">"})).join("")+e+n.map((function(e){return"</"+e+">"})).reverse().join(""));if(o.innerHTML=e,n)for(var i=0;i<n.length;i++)o=o.querySelector(n[i])||o;return o}(n),s.webkit&&function restoreReplacedSpaces(e){for(var t=e.querySelectorAll(s.chrome?"span:not([class]):not([style])":"span.Apple-converted-space"),n=0;n<t.length;n++){var o=t[n];1==o.childNodes.length&&""==o.textContent&&o.parentNode&&o.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),o)}}(a);var m=a&&a.querySelector("[data-pm-slice]"),v=m&&/^(\d+) (\d+) (.*)/.exec(m.getAttribute("data-pm-slice"));if(!c){var g=e.someProp("clipboardParser")||e.someProp("domParser")||r.DOMParser.fromSchema(e.state.schema);c=g.parseSlice(a,{preserveWhitespace:!(!p&&!v),context:i,ruleFromNode:function ruleFromNode(e){if("BR"==e.nodeName&&!e.nextSibling&&e.parentNode&&!I.test(e.parentNode.nodeName))return{ignore:!0}}})}if(v)c=function addContext(e,t){if(!e.size)return e;var n,o=e.content.firstChild.type.schema;try{n=JSON.parse(t)}catch(t){return e}for(var i=e.content,s=e.openStart,a=e.openEnd,c=n.length-2;c>=0;c-=2){var l=o.nodes[n[c]];if(!l||l.hasRequiredAttrs())break;i=r.Fragment.from(l.create(n[c+1],i)),s++,a++}return new r.Slice(i,s,a)}(closeSlice(c,+v[1],+v[2]),v[3]);else if((c=r.Slice.maxOpen(function normalizeSiblings(e,t){if(e.childCount<2)return e;for(var loop=function(n){var o=t.node(n).contentMatchAt(t.index(n)),i=void 0,s=[];if(e.forEach((function(e){if(s){var t,n=o.findWrapping(e.type);if(!n)return s=null;if(t=s.length&&i.length&&addToSibling(n,i,e,s[s.length-1],0))s[s.length-1]=t;else{s.length&&(s[s.length-1]=closeRight(s[s.length-1],i.length));var r=withWrappers(e,n);s.push(r),o=o.matchType(r.type,r.attrs),i=n}}})),s)return{v:r.Fragment.from(s)}},n=t.depth;n>=0;n--){var o=loop(n);if(o)return o.v}return e}(c.content,i),!0)).openStart||c.openEnd){for(var y=0,S=0,w=c.content.firstChild;y<c.openStart&&!w.type.spec.isolating;y++,w=w.firstChild);for(var b=c.content.lastChild;S<c.openEnd&&!b.type.spec.isolating;S++,b=b.lastChild);c=closeSlice(c,y,S)}return e.someProp("transformPasted",(function(e){c=e(c)})),c}var I=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function withWrappers(e,t,n){void 0===n&&(n=0);for(var o=t.length-1;o>=n;o--)e=t[o].create(null,r.Fragment.from(e));return e}function addToSibling(e,t,n,o,i){if(i<e.length&&i<t.length&&e[i]==t[i]){var s=addToSibling(e,t,n,o.lastChild,i+1);if(s)return o.copy(o.content.replaceChild(o.childCount-1,s));if(o.contentMatchAt(o.childCount).matchType(i==e.length-1?n.type:e[i+1]))return o.copy(o.content.append(r.Fragment.from(withWrappers(n,e,i+1))))}}function closeRight(e,t){if(0==t)return e;var n=e.content.replaceChild(e.childCount-1,closeRight(e.lastChild,t-1)),o=e.contentMatchAt(e.childCount).fillBefore(r.Fragment.empty,!0);return e.copy(n.append(o))}function closeRange(e,t,n,o,i,s){var a=t<0?e.firstChild:e.lastChild,c=a.content;return i<o-1&&(c=closeRange(c,t,n,o,i+1,s)),i>=n&&(c=t<0?a.contentMatchAt(0).fillBefore(c,e.childCount>1||s<=i).append(c):c.append(a.contentMatchAt(a.childCount).fillBefore(r.Fragment.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,a.copy(c))}function closeSlice(e,t,n){return t<e.openStart&&(e=new r.Slice(closeRange(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new r.Slice(closeRange(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}var _={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},P=null;function detachedDoc(){return P||(P=document.implementation.createHTMLDocument("title"))}var z={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},V=s.ie&&s.ie_version<=11,B=function SelectionState(){this.anchorNode=this.anchorOffset=this.focusNode=this.focusOffset=null};B.prototype.set=function set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset},B.prototype.eq=function eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset};var j=function DOMObserver(e,t){var n=this;this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=window.MutationObserver&&new window.MutationObserver((function(e){for(var t=0;t<e.length;t++)n.queue.push(e[t]);s.ie&&s.ie_version<=11&&e.some((function(e){return"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length}))?n.flushSoon():n.flush()})),this.currentSelection=new B,V&&(this.onCharData=function(e){n.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),n.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.suppressingSelectionUpdates=!1};j.prototype.flushSoon=function flushSoon(){var e=this;this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((function(){e.flushingSoon=-1,e.flush()}),20))},j.prototype.forceFlush=function forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())},j.prototype.start=function start(){this.observer&&this.observer.observe(this.view.dom,z),V&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()},j.prototype.stop=function stop(){var e=this;if(this.observer){var t=this.observer.takeRecords();if(t.length){for(var n=0;n<t.length;n++)this.queue.push(t[n]);window.setTimeout((function(){return e.flush()}),20)}this.observer.disconnect()}V&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()},j.prototype.connectSelection=function connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)},j.prototype.disconnectSelection=function disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)},j.prototype.suppressSelectionUpdates=function suppressSelectionUpdates(){var e=this;this.suppressingSelectionUpdates=!0,setTimeout((function(){return e.suppressingSelectionUpdates=!1}),50)},j.prototype.onSelectionChange=function onSelectionChange(){if(function hasFocusAndSelection(e){return(!e.editable||e.root.activeElement==e.dom)&&hasSelection(e)}(this.view)){if(this.suppressingSelectionUpdates)return selectionToDOM(this.view);if(s.ie&&s.ie_version<=11&&!this.view.state.selection.empty){var e=this.view.root.getSelection();if(e.focusNode&&isEquivalentPosition(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}},j.prototype.setCurSelection=function setCurSelection(){this.currentSelection.set(this.view.root.getSelection())},j.prototype.ignoreSelectionChange=function ignoreSelectionChange(e){if(0==e.rangeCount)return!0;var t=e.getRangeAt(0).commonAncestorContainer,n=this.view.docView.nearestDesc(t);return n&&n.ignoreMutation({type:"selection",target:3==t.nodeType?t.parentNode:t})?(this.setCurSelection(),!0):void 0},j.prototype.flush=function flush(){if(this.view.docView&&!(this.flushingSoon>-1)){var e=this.observer?this.observer.takeRecords():[];this.queue.length&&(e=this.queue.concat(e),this.queue.length=0);var t=this.view.root.getSelection(),n=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(t)&&hasSelection(this.view)&&!this.ignoreSelectionChange(t),o=-1,r=-1,i=!1,a=[];if(this.view.editable)for(var c=0;c<e.length;c++){var l=this.registerMutation(e[c],a);l&&(o=o<0?l.from:Math.min(l.from,o),r=r<0?l.to:Math.max(l.to,r),l.typeOver&&(i=!0))}if(s.gecko&&a.length>1){var p=a.filter((function(e){return"BR"==e.nodeName}));if(2==p.length){var d=p[0],h=p[1];d.parentNode&&d.parentNode.parentNode==h.parentNode?h.remove():d.remove()}}(o>-1||n)&&(o>-1&&(this.view.docView.markDirty(o,r),function checkCSS(e){if(L)return;L=!0,"normal"==getComputedStyle(e.dom).whiteSpace&&console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package.")}(this.view)),this.handleDOMChange(o,r,i,a),this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(t)||selectionToDOM(this.view),this.currentSelection.set(t))}},j.prototype.registerMutation=function registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;var n=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(n==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(e))return null;if("childList"==e.type){for(var o=0;o<e.addedNodes.length;o++)t.push(e.addedNodes[o]);if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};var r=e.previousSibling,i=e.nextSibling;if(s.ie&&s.ie_version<=11&&e.addedNodes.length)for(var a=0;a<e.addedNodes.length;a++){var c=e.addedNodes[a],l=c.previousSibling,p=c.nextSibling;(!l||Array.prototype.indexOf.call(e.addedNodes,l)<0)&&(r=l),(!p||Array.prototype.indexOf.call(e.addedNodes,p)<0)&&(i=p)}var d=r&&r.parentNode==e.target?domIndex(r)+1:0,h=n.localPosFromDOM(e.target,d,-1),u=i&&i.parentNode==e.target?domIndex(i):e.target.childNodes.length;return{from:h,to:n.localPosFromDOM(e.target,u,1)}}return"attributes"==e.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}};var L=!1;var q={},W={};function setSelectionOrigin(e,t){e.lastSelectionOrigin=t,e.lastSelectionTime=Date.now()}function ensureListeners(e){e.someProp("handleDOMEvents",(function(t){for(var n in t)e.eventHandlers[n]||e.dom.addEventListener(n,e.eventHandlers[n]=function(t){return runCustomHandler(e,t)})}))}function runCustomHandler(e,t){return e.someProp("handleDOMEvents",(function(n){var o=n[t.type];return!!o&&(o(e,t)||t.defaultPrevented)}))}function eventCoords(e){return{left:e.clientX,top:e.clientY}}function runHandlerOnContext(e,t,n,o,r){if(-1==o)return!1;for(var i=e.state.doc.resolve(o),loop=function(o){if(e.someProp(t,(function(t){return o>i.depth?t(e,n,i.nodeAfter,i.before(o),r,!0):t(e,n,i.node(o),i.before(o),r,!1)})))return{v:!0}},s=i.depth+1;s>0;s--){var a=loop(s);if(a)return a.v}return!1}function updateSelection(e,t,n){e.focused||e.focus();var o=e.state.tr.setSelection(t);"pointer"==n&&o.setMeta("pointer",!0),e.dispatch(o)}function handleSingleClick(e,t,n,r,i){return runHandlerOnContext(e,"handleClickOn",t,n,r)||e.someProp("handleClick",(function(n){return n(e,t,r)}))||(i?function selectClickedNode(e,t){if(-1==t)return!1;var n,r,i=e.state.selection;i instanceof o.NodeSelection&&(n=i.node);for(var s=e.state.doc.resolve(t),a=s.depth+1;a>0;a--){var c=a>s.depth?s.nodeAfter:s.node(a);if(o.NodeSelection.isSelectable(c)){r=n&&i.$from.depth>0&&a>=i.$from.depth&&s.before(i.$from.depth+1)==i.$from.pos?s.before(i.$from.depth):s.before(a);break}}return null!=r&&(updateSelection(e,o.NodeSelection.create(e.state.doc,r),"pointer"),!0)}(e,n):function selectClickedLeaf(e,t){if(-1==t)return!1;var n=e.state.doc.resolve(t),r=n.nodeAfter;return!!(r&&r.isAtom&&o.NodeSelection.isSelectable(r))&&(updateSelection(e,new o.NodeSelection(n),"pointer"),!0)}(e,n))}function handleDoubleClick(e,t,n,o){return runHandlerOnContext(e,"handleDoubleClickOn",t,n,o)||e.someProp("handleDoubleClick",(function(n){return n(e,t,o)}))}function handleTripleClick(e,t,n,r){return runHandlerOnContext(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",(function(n){return n(e,t,r)}))||function defaultTripleClick(e,t,n){if(0!=n.button)return!1;var r=e.state.doc;if(-1==t)return!!r.inlineContent&&(updateSelection(e,o.TextSelection.create(r,0,r.content.size),"pointer"),!0);for(var i=r.resolve(t),s=i.depth+1;s>0;s--){var a=s>i.depth?i.nodeAfter:i.node(s),c=i.before(s);if(a.inlineContent)updateSelection(e,o.TextSelection.create(r,c+1,c+1+a.content.size),"pointer");else{if(!o.NodeSelection.isSelectable(a))continue;updateSelection(e,o.NodeSelection.create(r,c),"pointer")}return!0}}(e,n,r)}function forceDOMFlush(e){return endComposition(e)}W.keydown=function(e,t){if(e.shiftKey=16==t.keyCode||t.shiftKey,!inOrNearComposition(e,t)&&(e.lastKeyCode=t.keyCode,e.lastKeyCodeTime=Date.now(),!s.android||!s.chrome||13!=t.keyCode))if(229!=t.keyCode&&e.domObserver.forceFlush(),!s.ios||13!=t.keyCode||t.ctrlKey||t.altKey||t.metaKey)e.someProp("handleKeyDown",(function(n){return n(e,t)}))||captureKeyDown(e,t)?t.preventDefault():setSelectionOrigin(e,"key");else{var n=Date.now();e.lastIOSEnter=n,e.lastIOSEnterFallbackTimeout=setTimeout((function(){e.lastIOSEnter==n&&(e.someProp("handleKeyDown",(function(t){return t(e,keyEvent(13,"Enter"))})),e.lastIOSEnter=0)}),200)}},W.keyup=function(e,t){16==t.keyCode&&(e.shiftKey=!1)},W.keypress=function(e,t){if(!(inOrNearComposition(e,t)||!t.charCode||t.ctrlKey&&!t.altKey||s.mac&&t.metaKey))if(e.someProp("handleKeyPress",(function(n){return n(e,t)})))t.preventDefault();else{var n=e.state.selection;if(!(n instanceof o.TextSelection&&n.$from.sameParent(n.$to))){var r=String.fromCharCode(t.charCode);e.someProp("handleTextInput",(function(t){return t(e,n.$from.pos,n.$to.pos,r)}))||e.dispatch(e.state.tr.insertText(r).scrollIntoView()),t.preventDefault()}}};var J=s.mac?"metaKey":"ctrlKey";q.mousedown=function(e,t){e.shiftKey=t.shiftKey;var n=forceDOMFlush(e),o=Date.now(),r="singleClick";o-e.lastClick.time<500&&function isNear(e,t){var n=t.x-e.clientX,o=t.y-e.clientY;return n*n+o*o<100}(t,e.lastClick)&&!t[J]&&("singleClick"==e.lastClick.type?r="doubleClick":"doubleClick"==e.lastClick.type&&(r="tripleClick")),e.lastClick={time:o,x:t.clientX,y:t.clientY,type:r};var i=e.posAtCoords(eventCoords(t));i&&("singleClick"==r?(e.mouseDown&&e.mouseDown.done(),e.mouseDown=new $(e,i,t,n)):("doubleClick"==r?handleDoubleClick:handleTripleClick)(e,i.pos,i.inside,t)?t.preventDefault():setSelectionOrigin(e,"pointer"))};var $=function MouseDown(e,t,n,r){var i,a,c=this;if(this.view=e,this.startDoc=e.state.doc,this.pos=t,this.event=n,this.flushed=r,this.selectNode=n[J],this.allowDefault=n.shiftKey,this.delayedSelectionSync=!1,t.inside>-1)i=e.state.doc.nodeAt(t.inside),a=t.inside;else{var l=e.state.doc.resolve(t.pos);i=l.parent,a=l.depth?l.before():0}this.mightDrag=null;var p=r?null:n.target,d=p?e.docView.nearestDesc(p,!0):null;this.target=d?d.dom:null;var h=e.state.selection;(0==n.button&&i.type.spec.draggable&&!1!==i.type.spec.selectable||h instanceof o.NodeSelection&&h.from<=a&&h.to>a)&&(this.mightDrag={node:i,pos:a,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&s.gecko&&!this.target.hasAttribute("contentEditable")}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((function(){c.view.mouseDown==c&&c.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),setSelectionOrigin(e,"pointer")};function inOrNearComposition(e,t){return!!e.composing||!!(s.safari&&Math.abs(t.timeStamp-e.compositionEndedAt)<500)&&(e.compositionEndedAt=-2e8,!0)}$.prototype.done=function done(){var e=this;this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout((function(){return selectionToDOM(e.view)})),this.view.mouseDown=null},$.prototype.up=function up(e){if(this.done(),this.view.dom.contains(3==e.target.nodeType?e.target.parentNode:e.target)){var t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(eventCoords(e))),this.allowDefault||!t?setSelectionOrigin(this.view,"pointer"):handleSingleClick(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():0==e.button&&(this.flushed||s.safari&&this.mightDrag&&!this.mightDrag.node.isAtom||s.chrome&&!(this.view.state.selection instanceof o.TextSelection)&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(updateSelection(this.view,o.Selection.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):setSelectionOrigin(this.view,"pointer")}},$.prototype.move=function move(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0),setSelectionOrigin(this.view,"pointer"),0==e.buttons&&this.done()},q.touchdown=function(e){forceDOMFlush(e),setSelectionOrigin(e,"pointer")},q.contextmenu=function(e){return forceDOMFlush(e)};var H=s.android?5e3:-1;function scheduleComposeEnd(e,t){clearTimeout(e.composingTimeout),t>-1&&(e.composingTimeout=setTimeout((function(){return endComposition(e)}),t))}function clearComposition(e){for(e.composing&&(e.composing=!1,e.compositionEndedAt=function timestampFromCustomEvent(){var e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}());e.compositionNodes.length>0;)e.compositionNodes.pop().markParentsDirty()}function endComposition(e,t){if(!(s.android&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),clearComposition(e),t||e.docView.dirty){var n=selectionFromDOM(e);return n&&!n.eq(e.state.selection)?e.dispatch(e.state.tr.setSelection(n)):e.updateState(e.state),!0}return!1}}W.compositionstart=W.compositionupdate=function(e){if(!e.composing){e.domObserver.flush();var t=e.state,n=t.selection.$from;if(t.selection.empty&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some((function(e){return!1===e.type.spec.inclusive}))))e.markCursor=e.state.storedMarks||n.marks(),endComposition(e,!0),e.markCursor=null;else if(endComposition(e),s.gecko&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length)for(var o=e.root.getSelection(),r=o.focusNode,i=o.focusOffset;r&&1==r.nodeType&&0!=i;){var a=i<0?r.lastChild:r.childNodes[i-1];if(!a)break;if(3==a.nodeType){o.collapse(a,a.nodeValue.length);break}r=a,i=-1}e.composing=!0}scheduleComposeEnd(e,H)},W.compositionend=function(e,t){e.composing&&(e.composing=!1,e.compositionEndedAt=t.timeStamp,scheduleComposeEnd(e,20))};var K=s.ie&&s.ie_version<15||s.ios&&s.webkit_version<604;function doPaste(e,t,n,o){var i=parseFromClipboard(e,t,n,e.shiftKey,e.state.selection.$from);if(e.someProp("handlePaste",(function(t){return t(e,o,i||r.Slice.empty)})))return!0;if(!i)return!1;var s=function sliceSingleNode(e){return 0==e.openStart&&0==e.openEnd&&1==e.content.childCount?e.content.firstChild:null}(i),a=s?e.state.tr.replaceSelectionWith(s,e.shiftKey):e.state.tr.replaceSelection(i);return e.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}q.copy=W.cut=function(e,t){var n=e.state.selection,o="cut"==t.type;if(!n.empty){var r=K?null:t.clipboardData,i=serializeForClipboard(e,n.content()),s=i.dom,a=i.text;r?(t.preventDefault(),r.clearData(),r.setData("text/html",s.innerHTML),r.setData("text/plain",a)):function captureCopy(e,t){if(e.dom.parentNode){var n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";var o=getSelection(),r=document.createRange();r.selectNodeContents(t),e.dom.blur(),o.removeAllRanges(),o.addRange(r),setTimeout((function(){n.parentNode&&n.parentNode.removeChild(n),e.focus()}),50)}}(e,s),o&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},W.paste=function(e,t){if(!e.composing||s.android){var n=K?null:t.clipboardData;n&&doPaste(e,n.getData("text/plain"),n.getData("text/html"),t)?t.preventDefault():function capturePaste(e,t){if(e.dom.parentNode){var n=e.shiftKey||e.state.selection.$from.parent.type.spec.code,o=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(o.contentEditable="true"),o.style.cssText="position: fixed; left: -10000px; top: 10px",o.focus(),setTimeout((function(){e.focus(),o.parentNode&&o.parentNode.removeChild(o),n?doPaste(e,o.value,null,t):doPaste(e,o.textContent,o.innerHTML,t)}),50)}}(e,t)}};var Z=function Dragging(e,t){this.slice=e,this.move=t},U=s.mac?"altKey":"ctrlKey";for(var G in q.dragstart=function(e,t){var n=e.mouseDown;if(n&&n.done(),t.dataTransfer){var r=e.state.selection,i=r.empty?null:e.posAtCoords(eventCoords(t));if(i&&i.pos>=r.from&&i.pos<=(r instanceof o.NodeSelection?r.to-1:r.to));else if(n&&n.mightDrag)e.dispatch(e.state.tr.setSelection(o.NodeSelection.create(e.state.doc,n.mightDrag.pos)));else if(t.target&&1==t.target.nodeType){var s=e.docView.nearestDesc(t.target,!0);s&&s.node.type.spec.draggable&&s!=e.docView&&e.dispatch(e.state.tr.setSelection(o.NodeSelection.create(e.state.doc,s.posBefore)))}var a=e.state.selection.content(),c=serializeForClipboard(e,a),l=c.dom,p=c.text;t.dataTransfer.clearData(),t.dataTransfer.setData(K?"Text":"text/html",l.innerHTML),t.dataTransfer.effectAllowed="copyMove",K||t.dataTransfer.setData("text/plain",p),e.dragging=new Z(a,!t[U])}},q.dragend=function(e){var t=e.dragging;window.setTimeout((function(){e.dragging==t&&(e.dragging=null)}),50)},W.dragover=W.dragenter=function(e,t){return t.preventDefault()},W.drop=function(e,t){var n=e.dragging;if(e.dragging=null,t.dataTransfer){var s=e.posAtCoords(eventCoords(t));if(s){var a=e.state.doc.resolve(s.pos);if(a){var c=n&&n.slice;c?e.someProp("transformPasted",(function(e){c=e(c)})):c=parseFromClipboard(e,t.dataTransfer.getData(K?"Text":"text/plain"),K?null:t.dataTransfer.getData("text/html"),!1,a);var l=n&&!t[U];if(e.someProp("handleDrop",(function(n){return n(e,t,c||r.Slice.empty,l)})))t.preventDefault();else if(c){t.preventDefault();var p=c?Object(i.g)(e.state.doc,a.pos,c):a.pos;null==p&&(p=a.pos);var d=e.state.tr;l&&d.deleteSelection();var h=d.mapping.map(p),u=0==c.openStart&&0==c.openEnd&&1==c.content.childCount,f=d.doc;if(u?d.replaceRangeWith(h,h,c.content.firstChild):d.replaceRange(h,h,c),!d.doc.eq(f)){var m=d.doc.resolve(h);if(u&&o.NodeSelection.isSelectable(c.content.firstChild)&&m.nodeAfter&&m.nodeAfter.sameMarkup(c.content.firstChild))d.setSelection(new o.NodeSelection(m));else{var v=d.mapping.map(p);d.mapping.maps[d.mapping.maps.length-1].forEach((function(e,t,n,o){return v=o})),d.setSelection(selectionBetween(e,m,d.doc.resolve(v)))}e.focus(),e.dispatch(d.setMeta("uiEvent","drop"))}}}}}},q.focus=function(e){e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout((function(){e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.root.getSelection())&&selectionToDOM(e)}),20))},q.blur=function(e,t){e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),t.relatedTarget&&e.dom.contains(t.relatedTarget)&&e.domObserver.currentSelection.set({}),e.focused=!1)},q.beforeinput=function(e,t){if(s.chrome&&s.android&&"deleteContentBackward"==t.inputType){e.domObserver.flushSoon();var n=e.domChangeCount;setTimeout((function(){if(e.domChangeCount==n&&(e.dom.blur(),e.focus(),!e.someProp("handleKeyDown",(function(t){return t(e,keyEvent(8,"Backspace"))})))){var t=e.state.selection.$cursor;t&&t.pos>0&&e.dispatch(e.state.tr.delete(t.pos-1,t.pos).scrollIntoView())}}),50)}},W)q[G]=W[G];function compareObjs(e,t){if(e==t)return!0;for(var n in e)if(e[n]!==t[n])return!1;for(var o in t)if(!(o in e))return!1;return!0}var Y=function WidgetType(e,t){this.spec=t||oe,this.side=this.spec.side||0,this.toDOM=e};Y.prototype.map=function map(e,t,n,o){var r=e.mapResult(t.from+o,this.side<0?-1:1),i=r.pos;return r.deleted?null:new ee(i-n,i-n,this)},Y.prototype.valid=function valid(){return!0},Y.prototype.eq=function eq(e){return this==e||e instanceof Y&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&compareObjs(this.spec,e.spec))},Y.prototype.destroy=function destroy(e){this.spec.destroy&&this.spec.destroy(e)};var X=function InlineType(e,t){this.spec=t||oe,this.attrs=e};X.prototype.map=function map(e,t,n,o){var r=e.map(t.from+o,this.spec.inclusiveStart?-1:1)-n,i=e.map(t.to+o,this.spec.inclusiveEnd?1:-1)-n;return r>=i?null:new ee(r,i,this)},X.prototype.valid=function valid(e,t){return t.from<t.to},X.prototype.eq=function eq(e){return this==e||e instanceof X&&compareObjs(this.attrs,e.attrs)&&compareObjs(this.spec,e.spec)},X.is=function is(e){return e.type instanceof X};var Q=function NodeType(e,t){this.spec=t||oe,this.attrs=e};Q.prototype.map=function map(e,t,n,o){var r=e.mapResult(t.from+o,1);if(r.deleted)return null;var i=e.mapResult(t.to+o,-1);return i.deleted||i.pos<=r.pos?null:new ee(r.pos-n,i.pos-n,this)},Q.prototype.valid=function valid(e,t){var n,o=e.content.findIndex(t.from),r=o.index,i=o.offset;return i==t.from&&!(n=e.child(r)).isText&&i+n.nodeSize==t.to},Q.prototype.eq=function eq(e){return this==e||e instanceof Q&&compareObjs(this.attrs,e.attrs)&&compareObjs(this.spec,e.spec)};var ee=function Decoration(e,t,n){this.from=e,this.to=t,this.type=n},te={spec:{configurable:!0},inline:{configurable:!0}};ee.prototype.copy=function copy(e,t){return new ee(e,t,this.type)},ee.prototype.eq=function eq(e,t){return void 0===t&&(t=0),this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to},ee.prototype.map=function map(e,t,n){return this.type.map(e,this,t,n)},ee.widget=function widget(e,t,n){return new ee(e,e,new Y(t,n))},ee.inline=function inline(e,t,n,o){return new ee(e,t,new X(n,o))},ee.node=function node(e,t,n,o){return new ee(e,t,new Q(n,o))},te.spec.get=function(){return this.type.spec},te.inline.get=function(){return this.type instanceof X},Object.defineProperties(ee.prototype,te);var ne=[],oe={},re=function DecorationSet(e,t){this.local=e&&e.length?e:ne,this.children=t&&t.length?t:ne};re.create=function create(e,t){return t.length?buildTree(t,e,0,oe):ie},re.prototype.find=function find(e,t,n){var o=[];return this.findInner(null==e?0:e,null==t?1e9:t,o,0,n),o},re.prototype.findInner=function findInner(e,t,n,o,r){for(var i=0;i<this.local.length;i++){var s=this.local[i];s.from<=t&&s.to>=e&&(!r||r(s.spec))&&n.push(s.copy(s.from+o,s.to+o))}for(var a=0;a<this.children.length;a+=3)if(this.children[a]<t&&this.children[a+1]>e){var c=this.children[a]+1;this.children[a+2].findInner(e-c,t-c,n,o+c,r)}},re.prototype.map=function map(e,t,n){return this==ie||0==e.maps.length?this:this.mapInner(e,t,0,0,n||oe)},re.prototype.mapInner=function mapInner(e,t,n,o,r){for(var i,s=0;s<this.local.length;s++){var a=this.local[s].map(e,n,o);a&&a.type.valid(t,a)?(i||(i=[])).push(a):r.onRemove&&r.onRemove(this.local[s].spec)}return this.children.length?function mapChildren(e,t,n,o,r,i,s){for(var a=e.slice(),shift=function(e,t,n,o){for(var s=0;s<a.length;s+=3){var c=a[s+1],l=void 0;-1==c||e>c+i||(t>=a[s]+i?a[s+1]=-1:n>=r&&(l=o-n-(t-e))&&(a[s]+=l,a[s+1]+=l))}},c=0;c<n.maps.length;c++)n.maps[c].forEach(shift);for(var l=!1,p=0;p<a.length;p+=3)if(-1==a[p+1]){var d=n.map(e[p]+i),h=d-r;if(h<0||h>=o.content.size){l=!0;continue}var u=n.map(e[p+1]+i,-1)-r,f=o.content.findIndex(h),m=f.index,v=f.offset,g=o.maybeChild(m);if(g&&v==h&&v+g.nodeSize==u){var y=a[p+2].mapInner(n,g,d+1,e[p]+i+1,s);y!=ie?(a[p]=h,a[p+1]=u,a[p+2]=y):(a[p+1]=-2,l=!0)}else l=!0}if(l){var S=buildTree(function mapAndGatherRemainingDecorations(e,t,n,o,r,i,s){function gather(e,t){for(var i=0;i<e.local.length;i++){var a=e.local[i].map(o,r,t);a?n.push(a):s.onRemove&&s.onRemove(e.local[i].spec)}for(var c=0;c<e.children.length;c+=3)gather(e.children[c+2],e.children[c]+t+1)}for(var a=0;a<e.length;a+=3)-1==e[a+1]&&gather(e[a+2],t[a]+i+1);return n}(a,e,t||[],n,r,i,s),o,0,s);t=S.local;for(var w=0;w<a.length;w+=3)a[w+1]<0&&(a.splice(w,3),w-=3);for(var b=0,k=0;b<S.children.length;b+=3){for(var x=S.children[b];k<a.length&&a[k]<x;)k+=3;a.splice(k,0,S.children[b],S.children[b+1],S.children[b+2])}}return new re(t&&t.sort(byPos),a)}(this.children,i,e,t,n,o,r):i?new re(i.sort(byPos)):ie},re.prototype.add=function add(e,t){return t.length?this==ie?re.create(e,t):this.addInner(e,t,0):this},re.prototype.addInner=function addInner(e,t,n){var o,r=this,i=0;e.forEach((function(e,s){var a,c=s+n;if(a=takeSpansForNode(t,e,c)){for(o||(o=r.children.slice());i<o.length&&o[i]<s;)i+=3;o[i]==s?o[i+2]=o[i+2].addInner(e,a,c+1):o.splice(i,0,s,s+e.nodeSize,buildTree(a,e,c+1,oe)),i+=3}}));for(var s=moveSpans(i?withoutNulls(t):t,-n),a=0;a<s.length;a++)s[a].type.valid(e,s[a])||s.splice(a--,1);return new re(s.length?this.local.concat(s).sort(byPos):this.local,o||this.children)},re.prototype.remove=function remove(e){return 0==e.length||this==ie?this:this.removeInner(e,0)},re.prototype.removeInner=function removeInner(e,t){for(var n=this.children,o=this.local,r=0;r<n.length;r+=3){for(var i=void 0,s=n[r]+t,a=n[r+1]+t,c=0,l=void 0;c<e.length;c++)(l=e[c])&&l.from>s&&l.to<a&&(e[c]=null,(i||(i=[])).push(l));if(i){n==this.children&&(n=this.children.slice());var p=n[r+2].removeInner(i,s+1);p!=ie?n[r+2]=p:(n.splice(r,3),r-=3)}}if(o.length)for(var d=0,h=void 0;d<e.length;d++)if(h=e[d])for(var u=0;u<o.length;u++)o[u].eq(h,t)&&(o==this.local&&(o=this.local.slice()),o.splice(u--,1));return n==this.children&&o==this.local?this:o.length||n.length?new re(o,n):ie},re.prototype.forChild=function forChild(e,t){if(this==ie)return this;if(t.isLeaf)return re.empty;for(var n,o,r=0;r<this.children.length;r+=3)if(this.children[r]>=e){this.children[r]==e&&(n=this.children[r+2]);break}for(var i=e+1,s=i+t.content.size,a=0;a<this.local.length;a++){var c=this.local[a];if(c.from<s&&c.to>i&&c.type instanceof X){var l=Math.max(i,c.from)-i,p=Math.min(s,c.to)-i;l<p&&(o||(o=[])).push(c.copy(l,p))}}if(o){var d=new re(o.sort(byPos));return n?new se([d,n]):d}return n||ie},re.prototype.eq=function eq(e){if(this==e)return!0;if(!(e instanceof re)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(var t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(var n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0},re.prototype.locals=function locals(e){return removeOverlap(this.localsInner(e))},re.prototype.localsInner=function localsInner(e){if(this==ie)return ne;if(e.inlineContent||!this.local.some(X.is))return this.local;for(var t=[],n=0;n<this.local.length;n++)this.local[n].type instanceof X||t.push(this.local[n]);return t};var ie=new re;re.empty=ie,re.removeOverlap=removeOverlap;var se=function DecorationGroup(e){this.members=e};function moveSpans(e,t){if(!t||!e.length)return e;for(var n=[],o=0;o<e.length;o++){var r=e[o];n.push(new ee(r.from+t,r.to+t,r.type))}return n}function takeSpansForNode(e,t,n){if(t.isLeaf)return null;for(var o=n+t.nodeSize,r=null,i=0,s=void 0;i<e.length;i++)(s=e[i])&&s.from>n&&s.to<o&&((r||(r=[])).push(s),e[i]=null);return r}function withoutNulls(e){for(var t=[],n=0;n<e.length;n++)null!=e[n]&&t.push(e[n]);return t}function buildTree(e,t,n,o){var r=[],i=!1;t.forEach((function(t,s){var a=takeSpansForNode(e,t,s+n);if(a){i=!0;var c=buildTree(a,t,n+s+1,o);c!=ie&&r.push(s,s+t.nodeSize,c)}}));for(var s=moveSpans(i?withoutNulls(e):e,-n).sort(byPos),a=0;a<s.length;a++)s[a].type.valid(t,s[a])||(o.onRemove&&o.onRemove(s[a].spec),s.splice(a--,1));return s.length||r.length?new re(s,r):ie}function byPos(e,t){return e.from-t.from||e.to-t.to}function removeOverlap(e){for(var t=e,n=0;n<t.length-1;n++){var o=t[n];if(o.from!=o.to)for(var r=n+1;r<t.length;r++){var i=t[r];if(i.from!=o.from){i.from<o.to&&(t==e&&(t=e.slice()),t[n]=o.copy(o.from,i.from),insertAhead(t,r,o.copy(i.from,o.to)));break}i.to!=o.to&&(t==e&&(t=e.slice()),t[r]=i.copy(i.from,o.to),insertAhead(t,r+1,i.copy(o.to,i.to)))}}return t}function insertAhead(e,t,n){for(;t<e.length&&byPos(n,e[t])>0;)t++;e.splice(t,0,n)}function viewDecorations(e){var t=[];return e.someProp("decorations",(function(n){var o=n(e.state);o&&o!=ie&&t.push(o)})),e.cursorWrapper&&t.push(re.create(e.state.doc,[e.cursorWrapper.deco])),se.from(t)}se.prototype.map=function map(e,t){var n=this.members.map((function(n){return n.map(e,t,oe)}));return se.from(n)},se.prototype.forChild=function forChild(e,t){if(t.isLeaf)return re.empty;for(var n=[],o=0;o<this.members.length;o++){var r=this.members[o].forChild(e,t);r!=ie&&(r instanceof se?n=n.concat(r.members):n.push(r))}return se.from(n)},se.prototype.eq=function eq(e){if(!(e instanceof se)||e.members.length!=this.members.length)return!1;for(var t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0},se.prototype.locals=function locals(e){for(var t,n=!0,o=0;o<this.members.length;o++){var locals=this.members[o].localsInner(e);if(locals.length)if(t){n&&(t=t.slice(),n=!1);for(var r=0;r<locals.length;r++)t.push(locals[r])}else t=locals}return t?removeOverlap(n?t:t.sort(byPos)):ne},se.from=function from(e){switch(e.length){case 0:return ie;case 1:return e[0];default:return new se(e)}};var ae=function EditorView(e,t){this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(checkStateComponent),this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.trackWrites=null,this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):e.apply?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=getEditable(this),this.markCursor=null,this.cursorWrapper=null,updateCursorWrapper(this),this.nodeViews=buildNodeViews(this),this.docView=docViewDesc(this.state.doc,computeDocDeco(this),viewDecorations(this),this.dom,this),this.lastSelectedViewDesc=null,this.dragging=null,function initInput(e){e.shiftKey=!1,e.mouseDown=null,e.lastKeyCode=null,e.lastKeyCodeTime=0,e.lastClick={time:0,x:0,y:0,type:""},e.lastSelectionOrigin=null,e.lastSelectionTime=0,e.lastIOSEnter=0,e.lastIOSEnterFallbackTimeout=null,e.lastAndroidDelete=0,e.composing=!1,e.composingTimeout=null,e.compositionNodes=[],e.compositionEndedAt=-2e8,e.domObserver=new j(e,(function(t,n,o,r){return readDOMChange(e,t,n,o,r)})),e.domObserver.start(),e.domChangeCount=0,e.eventHandlers=Object.create(null);var loop=function(t){var n=q[t];e.dom.addEventListener(t,e.eventHandlers[t]=function(t){!function eventBelongsToView(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(var n=t.target;n!=e.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}(e,t)||runCustomHandler(e,t)||!e.editable&&t.type in W||n(e,t)})};for(var t in q)loop(t);s.safari&&e.dom.addEventListener("input",(function(){return null})),ensureListeners(e)}(this),this.prevDirectPlugins=[],this.pluginViews=[],this.updatePluginViews()},ce={props:{configurable:!0},root:{configurable:!0},isDestroyed:{configurable:!0}};function computeDocDeco(e){var t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),t.translate="no",e.someProp("attributes",(function(n){if("function"==typeof n&&(n=n(e.state)),n)for(var o in n)"class"==o&&(t.class+=" "+n[o]),"style"==o?t.style=(t.style?t.style+";":"")+n[o]:t[o]||"contenteditable"==o||"nodeName"==o||(t[o]=String(n[o]))})),[ee.node(0,e.state.doc.content.size,t)]}function updateCursorWrapper(e){if(e.markCursor){var t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),e.cursorWrapper={dom:t,deco:ee.widget(e.state.selection.head,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function getEditable(e){return!e.someProp("editable",(function(t){return!1===t(e.state)}))}function buildNodeViews(e){var t={};return e.someProp("nodeViews",(function(e){for(var n in e)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=e[n])})),t}function checkStateComponent(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}ce.props.get=function(){if(this._props.state!=this.state){var e=this._props;for(var t in this._props={},e)this._props[t]=e[t];this._props.state=this.state}return this._props},ae.prototype.update=function update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&ensureListeners(this),this._props=e,e.plugins&&(e.plugins.forEach(checkStateComponent),this.directPlugins=e.plugins),this.updateStateInner(e.state,!0)},ae.prototype.setProps=function setProps(e){var t={};for(var n in this._props)t[n]=this._props[n];for(var o in t.state=this.state,e)t[o]=e[o];this.update(t)},ae.prototype.updateState=function updateState(e){this.updateStateInner(e,this.state.plugins!=e.plugins)},ae.prototype.updateStateInner=function updateStateInner(e,t){var n=this,r=this.state,i=!1,a=!1;if(e.storedMarks&&this.composing&&(clearComposition(this),a=!0),this.state=e,t){var c=buildNodeViews(this);(function changedNodeViews(e,t){var n=0,o=0;for(var r in e){if(e[r]!=t[r])return!0;n++}for(var i in t)o++;return n!=o})(c,this.nodeViews)&&(this.nodeViews=c,i=!0),ensureListeners(this)}this.editable=getEditable(this),updateCursorWrapper(this);var l=viewDecorations(this),p=computeDocDeco(this),d=t?"reset":e.scrollToSelection>r.scrollToSelection?"to selection":"preserve",h=i||!this.docView.matchesNode(e.doc,p,l);!h&&e.selection.eq(r.selection)||(a=!0);var u="preserve"==d&&a&&null==this.dom.style.overflowAnchor&&function storeScrollPos(e){for(var t,n,o=e.dom.getBoundingClientRect(),r=Math.max(0,o.top),i=(o.left+o.right)/2,s=r+1;s<Math.min(innerHeight,o.bottom);s+=5){var a=e.root.elementFromPoint(i,s);if(a!=e.dom&&e.dom.contains(a)){var c=a.getBoundingClientRect();if(c.top>=r-20){t=a,n=c.top;break}}}return{refDOM:t,refTop:n,stack:scrollStack(e.dom)}}(this);if(a){this.domObserver.stop();var f=h&&(s.ie||s.chrome)&&!this.composing&&!r.selection.empty&&!e.selection.empty&&function selectionContextChanged(e,t){var n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}(r.selection,e.selection);if(h){var m=s.chrome?this.trackWrites=this.root.getSelection().focusNode:null;!i&&this.docView.update(e.doc,p,l,this)||(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=docViewDesc(e.doc,p,l,this.dom,this)),m&&!this.trackWrites&&(f=!0)}f||!(this.mouseDown&&this.domObserver.currentSelection.eq(this.root.getSelection())&&function anchorInRightPlace(e){var t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.root.getSelection();return isEquivalentPosition(t.node,t.offset,n.anchorNode,n.anchorOffset)}(this))?selectionToDOM(this,f):(syncNodeSelection(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(r),"reset"==d)this.dom.scrollTop=0;else if("to selection"==d){var v=this.root.getSelection().focusNode;this.someProp("handleScrollToSelection",(function(e){return e(n)}))||(e.selection instanceof o.NodeSelection?scrollRectIntoView(this,this.docView.domAfterPos(e.selection.from).getBoundingClientRect(),v):scrollRectIntoView(this,this.coordsAtPos(e.selection.head,1),v))}else u&&function resetScrollPos(e){var t=e.refDOM,n=e.refTop,o=e.stack,r=t?t.getBoundingClientRect().top:0;restoreScrollStack(o,0==r?0:r-n)}(u)},ae.prototype.destroyPluginViews=function destroyPluginViews(){for(var e;e=this.pluginViews.pop();)e.destroy&&e.destroy()},ae.prototype.updatePluginViews=function updatePluginViews(e){if(e&&e.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(var t=0;t<this.pluginViews.length;t++){var n=this.pluginViews[t];n.update&&n.update(this,e)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(var o=0;o<this.directPlugins.length;o++){var r=this.directPlugins[o];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(var i=0;i<this.state.plugins.length;i++){var s=this.state.plugins[i];s.spec.view&&this.pluginViews.push(s.spec.view(this))}}},ae.prototype.someProp=function someProp(e,t){var n,o=this._props&&this._props[e];if(null!=o&&(n=t?t(o):o))return n;for(var r=0;r<this.directPlugins.length;r++){var i=this.directPlugins[r].props[e];if(null!=i&&(n=t?t(i):i))return n}var s=this.state.plugins;if(s)for(var a=0;a<s.length;a++){var c=s[a].props[e];if(null!=c&&(n=t?t(c):c))return n}},ae.prototype.hasFocus=function hasFocus(){return this.root.activeElement==this.dom},ae.prototype.focus=function focus(){this.domObserver.stop(),this.editable&&function focusPreventScroll(e){if(e.setActive)return e.setActive();if(f)return e.focus(f);var t=scrollStack(e);e.focus(null==f?{get preventScroll(){return f={preventScroll:!0},!0}}:void 0),f||(f=!1,restoreScrollStack(t,0))}(this.dom),selectionToDOM(this),this.domObserver.start()},ce.root.get=function(){var e=this._root;if(null==e)for(var t=this.dom.parentNode;t;t=t.parentNode)if(9==t.nodeType||11==t.nodeType&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=function(){return document.getSelection()}),this._root=t;return e||document},ae.prototype.posAtCoords=function posAtCoords$1(e){return posAtCoords(this,e)},ae.prototype.coordsAtPos=function coordsAtPos$1(e,t){return void 0===t&&(t=1),coordsAtPos(this,e,t)},ae.prototype.domAtPos=function domAtPos(e,t){return void 0===t&&(t=0),this.docView.domFromPos(e,t)},ae.prototype.nodeDOM=function nodeDOM(e){var t=this.docView.descAt(e);return t?t.nodeDOM:null},ae.prototype.posAtDOM=function posAtDOM(e,t,n){void 0===n&&(n=-1);var o=this.docView.posFromDOM(e,t,n);if(null==o)throw new RangeError("DOM position not inside the editor");return o},ae.prototype.endOfTextblock=function endOfTextblock$1(e,t){return endOfTextblock(this,t||this.state,e)},ae.prototype.destroy=function destroy(){this.docView&&(!function destroyInput(e){for(var t in e.domObserver.stop(),e.eventHandlers)e.dom.removeEventListener(t,e.eventHandlers[t]);clearTimeout(e.composingTimeout),clearTimeout(e.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],viewDecorations(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)},ce.isDestroyed.get=function(){return null==this.docView},ae.prototype.dispatchEvent=function dispatchEvent$1(e){return function dispatchEvent(e,t){runCustomHandler(e,t)||!q[t.type]||!e.editable&&t.type in W||q[t.type](e,t)}(this,e)},ae.prototype.dispatch=function dispatch(e){var t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))},Object.defineProperties(ae.prototype,ce)},"XXr+":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n("Qw+Q"));t.default=o.default},cfiF:function(e,t,n){"use strict";var o=n("I+eb"),r=n("xDBR"),i=n("Cg3G");o({target:"WeakMap",proto:!0,real:!0,forced:r},{deleteAll:function deleteAll(){return i.apply(this,arguments)}})},cv67:function(e,t,n){var o;e.exports=(o=n("Ib8C"),function(e){var t=o,n=t.lib,r=n.WordArray,i=n.Hasher,s=t.algo,a=[];!function(){for(var t=0;t<64;t++)a[t]=4294967296*e.abs(e.sin(t+1))|0}();var c=s.MD5=i.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var o=t+n,r=e[o];e[o]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}var i=this._hash.words,s=e[t+0],c=e[t+1],l=e[t+2],p=e[t+3],d=e[t+4],h=e[t+5],u=e[t+6],f=e[t+7],m=e[t+8],v=e[t+9],g=e[t+10],y=e[t+11],S=e[t+12],w=e[t+13],b=e[t+14],k=e[t+15],x=i[0],O=i[1],M=i[2],C=i[3];x=FF(x,O,M,C,s,7,a[0]),C=FF(C,x,O,M,c,12,a[1]),M=FF(M,C,x,O,l,17,a[2]),O=FF(O,M,C,x,p,22,a[3]),x=FF(x,O,M,C,d,7,a[4]),C=FF(C,x,O,M,h,12,a[5]),M=FF(M,C,x,O,u,17,a[6]),O=FF(O,M,C,x,f,22,a[7]),x=FF(x,O,M,C,m,7,a[8]),C=FF(C,x,O,M,v,12,a[9]),M=FF(M,C,x,O,g,17,a[10]),O=FF(O,M,C,x,y,22,a[11]),x=FF(x,O,M,C,S,7,a[12]),C=FF(C,x,O,M,w,12,a[13]),M=FF(M,C,x,O,b,17,a[14]),x=GG(x,O=FF(O,M,C,x,k,22,a[15]),M,C,c,5,a[16]),C=GG(C,x,O,M,u,9,a[17]),M=GG(M,C,x,O,y,14,a[18]),O=GG(O,M,C,x,s,20,a[19]),x=GG(x,O,M,C,h,5,a[20]),C=GG(C,x,O,M,g,9,a[21]),M=GG(M,C,x,O,k,14,a[22]),O=GG(O,M,C,x,d,20,a[23]),x=GG(x,O,M,C,v,5,a[24]),C=GG(C,x,O,M,b,9,a[25]),M=GG(M,C,x,O,p,14,a[26]),O=GG(O,M,C,x,m,20,a[27]),x=GG(x,O,M,C,w,5,a[28]),C=GG(C,x,O,M,l,9,a[29]),M=GG(M,C,x,O,f,14,a[30]),x=HH(x,O=GG(O,M,C,x,S,20,a[31]),M,C,h,4,a[32]),C=HH(C,x,O,M,m,11,a[33]),M=HH(M,C,x,O,y,16,a[34]),O=HH(O,M,C,x,b,23,a[35]),x=HH(x,O,M,C,c,4,a[36]),C=HH(C,x,O,M,d,11,a[37]),M=HH(M,C,x,O,f,16,a[38]),O=HH(O,M,C,x,g,23,a[39]),x=HH(x,O,M,C,w,4,a[40]),C=HH(C,x,O,M,s,11,a[41]),M=HH(M,C,x,O,p,16,a[42]),O=HH(O,M,C,x,u,23,a[43]),x=HH(x,O,M,C,v,4,a[44]),C=HH(C,x,O,M,S,11,a[45]),M=HH(M,C,x,O,k,16,a[46]),x=II(x,O=HH(O,M,C,x,l,23,a[47]),M,C,s,6,a[48]),C=II(C,x,O,M,f,10,a[49]),M=II(M,C,x,O,b,15,a[50]),O=II(O,M,C,x,h,21,a[51]),x=II(x,O,M,C,S,6,a[52]),C=II(C,x,O,M,p,10,a[53]),M=II(M,C,x,O,g,15,a[54]),O=II(O,M,C,x,c,21,a[55]),x=II(x,O,M,C,m,6,a[56]),C=II(C,x,O,M,k,10,a[57]),M=II(M,C,x,O,u,15,a[58]),O=II(O,M,C,x,w,21,a[59]),x=II(x,O,M,C,d,6,a[60]),C=II(C,x,O,M,y,10,a[61]),M=II(M,C,x,O,l,15,a[62]),O=II(O,M,C,x,v,21,a[63]),i[0]=i[0]+x|0,i[1]=i[1]+O|0,i[2]=i[2]+M|0,i[3]=i[3]+C|0},_doFinalize:function(){var t=this._data,n=t.words,o=8*this._nDataBytes,r=8*t.sigBytes;n[r>>>5]|=128<<24-r%32;var i=e.floor(o/4294967296),s=o;n[15+(r+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),n[14+(r+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),t.sigBytes=4*(n.length+1),this._process();for(var a=this._hash,c=a.words,l=0;l<4;l++){var p=c[l];c[l]=16711935&(p<<8|p>>>24)|4278255360&(p<<24|p>>>8)}return a},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});function FF(e,t,n,o,r,i,s){var a=e+(t&n|~t&o)+r+s;return(a<<i|a>>>32-i)+t}function GG(e,t,n,o,r,i,s){var a=e+(t&o|n&~o)+r+s;return(a<<i|a>>>32-i)+t}function HH(e,t,n,o,r,i,s){var a=e+(t^n^o)+r+s;return(a<<i|a>>>32-i)+t}function II(e,t,n,o,r,i,s){var a=e+(n^(t|~o))+r+s;return(a<<i|a>>>32-i)+t}t.MD5=i._createHelper(c),t.HmacMD5=i._createHmacHelper(c)}(Math),o.MD5)},fh9h:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),r=n("q1tI"),i=_interopRequireDefault(r),s=n("i8i4"),a=n("17x9"),c=_interopRequireDefault(n("Oqqw")),l=n("pwIv"),p=n("tyOK");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function EventsWrapper(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,EventsWrapper);var e=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(EventsWrapper.__proto__||Object.getPrototypeOf(EventsWrapper)).call(this));return e.portal=(0,l.createPortalContainer)("div"),e.unzoom=e.unzoom.bind(e),e._handleScroll=e._handleScroll.bind(e),e._handleKeyDown=e._handleKeyDown.bind(e),e._handleResize=e._handleResize.bind(e),e._handleTouchStart=e._handleTouchStart.bind(e),e._handleTouchMove=e._handleTouchMove.bind(e),e._handleTouchEnd=e._handleTouchEnd.bind(e),e}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(EventsWrapper,e),o(EventsWrapper,[{key:"componentDidMount",value:function componentDidMount(){var e=this;this.pageYOffset=window.pageYOffset,this.loadTimeout=setTimeout((function(){window.addEventListener("scroll",e._handleScroll),window.addEventListener("keydown",e._handleKeyDown),window.addEventListener("ontouchstart",e._handleTouchStart),window.addEventListener("ontouchmove",e._handleTouchMove),window.addEventListener("ontouchend",e._handleTouchEnd),window.addEventListener("ontouchcancel",e._handleTouchEnd),window.addEventListener("resize",e._handleResize)}),c.default.transitionDuration)}},{key:"componentWillUnmount",value:function componentWillUnmount(){clearTimeout(this.loadTimeout),window.removeEventListener("scroll",this._handleScroll),window.removeEventListener("keydown",this._handleKeyDown),window.removeEventListener("ontouchstart",this._handleTouchStart),window.removeEventListener("ontouchmove",this._handleTouchMove),window.removeEventListener("ontouchend",this._handleTouchEnd),window.removeEventListener("ontouchcancel",this._handleTouchEnd),window.removeEventListener("resize",this._handleResize),(0,l.removePortalContainer)(this.portal)}},{key:"render",value:function render(){return this.portal?(0,s.createPortal)(i.default.createElement("div",{onClick:this.unzoom},this._cloneChild()),this.portal):null}},{key:"unzoom",value:function unzoom(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.force,n=e.allowRefocus;return this.props.controlledEventFn&&!t?this.props.controlledEventFn():this.child.unzoom(n)}},{key:"_cloneChild",value:function _cloneChild(){var e=this;return i.default.cloneElement(i.default.Children.only(this.props.children),{ref:function ref(t){e.child=t}})}},{key:"_handleKeyDown",value:function _handleKeyDown(e){if((0,p.isTabKey)(e))e.preventDefault();else{var t=this.props.allowAccessibilityClose&&(0,p.isEnterOrSpaceBarKey)(e),n=(0,p.isEscapeKey)(e);t&&e.preventDefault(),(t||n)&&this.unzoom({allowRefocus:!0})}}},{key:"_handleResize",value:function _handleResize(){this.forceUpdate()}},{key:"_handleScroll",value:function _handleScroll(){this.forceUpdate(),Math.abs(window.pageYOffset-this.pageYOffset)>10&&this.unzoom()}},{key:"_handleTouchStart",value:function _handleTouchStart(e){this.yTouchPosition=e.touches[0].clientY}},{key:"_handleTouchMove",value:function _handleTouchMove(e){this.forceUpdate(),Math.abs(e.touches[0].clientY-this.yTouchPosition)>10&&this.unzoom()}},{key:"_handleTouchEnd",value:function _handleTouchEnd(){delete this.yTouchPosition}}]),EventsWrapper}(r.Component);t.default=d,d.propTypes={children:a.element.isRequired,getControlledEventFn:a.func}},gOCb:function(e,t,n){n("dG/n")("replace")},p532:function(e,t,n){"use strict";var o=n("I+eb"),r=n("xDBR"),i=n("/qmn"),s=n("0Dky"),a=n("0GbY"),c=n("SEBh"),l=n("zfnd"),p=n("busE");o({target:"Promise",proto:!0,real:!0,forced:!!i&&s((function(){i.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=c(this,a("Promise")),n="function"==typeof e;return this.then(n?function(n){return l(t,e()).then((function(){return n}))}:e,n?function(n){return l(t,e()).then((function(){throw n}))}:e)}}),r||"function"!=typeof i||i.prototype.finally||p(i.prototype,"finally",a("Promise").prototype.finally)},pwIv:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.createPortalContainer=function createPortalContainer(e){var t=document.createElement(e);return document.body.appendChild(t),t},t.removePortalContainer=function removePortalContainer(e){document.body.removeChild(e)},t.fetchImage=function fetchImage(e,t){var n=e.src,o=e.srcSet,r=e.sizes,i=new Image;i.addEventListener("load",(function onLoad(){t(i),i.removeEventListener("load",onLoad)})),i.src=n,o&&(i.srcset=o),r&&(i.sizes=r)};var o=t.getScale=function getScale(e){var t=e.width,n=e.height,o=e.zoomMargin,r=window.innerWidth/(t+o),i=window.innerHeight/(n+o);return Math.min(r,i)};t.getMaxDimensionScale=function getMaxDimensionScale(e){var t=e.width,n=e.height,r=e.naturalWidth,i=e.naturalHeight,s=e.zoomMargin,a=o({width:r,height:i,zoomMargin:s}),c=r>i?r/t:i/n;return a>1?c:a*c},t.isMaxDimension=function isMaxDimension(e){return e.clientWidth>=e.naturalWidth||e.clientHeight>=e.naturalHeight}},"qhw/":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),i=n("q1tI"),s=_interopRequireDefault(i),a=n("17x9"),c=_interopRequireDefault(n("Oqqw"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function Overlay(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Overlay);var t=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(Overlay.__proto__||Object.getPrototypeOf(Overlay)).call(this,e));return t.state={isMounted:!1},t}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Overlay,e),r(Overlay,[{key:"componentDidMount",value:function componentDidMount(){this.setState({isMounted:!0})}},{key:"render",value:function render(){return s.default.createElement("div",{style:this._getStyle()})}},{key:"_getStyle",value:function _getStyle(){var e=1&(this.state.isMounted&&this.props.isVisible);return o({},c.default.styles.overlay,{opacity:e},this.props.defaultStyles.overlay)}}]),Overlay}(i.PureComponent);t.default=l,l.propTypes={isVisible:a.bool.isRequired,defaultStyles:a.object.isRequired}},rKzb:function(e,t,n){"use strict";var o=n("4syw"),r=n("8YOa").getWeakData,i=n("glrk"),s=n("hh1v"),a=n("GarU"),c=n("ImZN"),l=n("tycR"),p=n("UTVS"),d=n("afO8"),h=d.set,u=d.getterFor,f=l.find,m=l.findIndex,v=0,uncaughtFrozenStore=function(e){return e.frozen||(e.frozen=new UncaughtFrozenStore)},UncaughtFrozenStore=function(){this.entries=[]},findUncaughtFrozen=function(e,t){return f(e.entries,(function(e){return e[0]===t}))};UncaughtFrozenStore.prototype={get:function(e){var t=findUncaughtFrozen(this,e);if(t)return t[1]},has:function(e){return!!findUncaughtFrozen(this,e)},set:function(e,t){var n=findUncaughtFrozen(this,e);n?n[1]=t:this.entries.push([e,t])},delete:function(e){var t=m(this.entries,(function(t){return t[0]===e}));return~t&&this.entries.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,n,l){var d=e((function(e,o){a(e,d,t),h(e,{type:t,id:v++,frozen:void 0}),null!=o&&c(o,e[l],{that:e,AS_ENTRIES:n})})),f=u(t),define=function(e,t,n){var o=f(e),s=r(i(t),!0);return!0===s?uncaughtFrozenStore(o).set(t,n):s[o.id]=n,e};return o(d.prototype,{delete:function(e){var t=f(this);if(!s(e))return!1;var n=r(e);return!0===n?uncaughtFrozenStore(t).delete(e):n&&p(n,t.id)&&delete n[t.id]},has:function has(e){var t=f(this);if(!s(e))return!1;var n=r(e);return!0===n?uncaughtFrozenStore(t).has(e):n&&p(n,t.id)}}),o(d.prototype,n?{get:function get(e){var t=f(this);if(s(e)){var n=r(e);return!0===n?uncaughtFrozenStore(t).get(e):n?n[t.id]:void 0}},set:function set(e,t){return define(this,e,t)}}:{add:function add(e){return define(this,e,!0)}}),d}}},tyOK:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={keys:["Enter"],keyCode:13},r=function isKey(e){var t=e.keyCode,n=e.keys;return function(e){return e.keyCode?e.keyCode===t:-1!==n.indexOf(e.key)}},i=(t.isEnterOrSpaceBarKey=function isEnterOrSpaceBarKey(e){return r(o)(e)||i(e)},t.isTabKey=r({keys:["Tab"],keyCode:9}),t.isSpaceBarKey=r({keys:[" "],keyCode:32}));t.isEscapeKey=r({keys:["Escape","Esc"],keyCode:27})},uqXc:function(e,t,n){var o=n("I+eb"),r=n("5Yz+");o({target:"Array",proto:!0,forced:r!==[].lastIndexOf},{lastIndexOf:r})},x83w:function(e,t,n){"use strict";var o=n("I+eb"),r=n("hXpO");o({target:"String",proto:!0,forced:n("rwPt")("fixed")},{fixed:function fixed(){return r(this,"tt","","")}})}}]);
//# sourceMappingURL=vendors~collection~document~shared-document.2870ed786ec0dc1c7436.js.map