{"version":3,"sources":["webpack:///./app/components/ContextMenu/Separator.tsx","webpack:///./app/components/InputSearch.tsx","webpack:///./app/menus/BreadcrumbMenu.tsx","webpack:///./app/components/Breadcrumb.tsx","webpack:///./app/hooks/useBoolean.ts","webpack:///./app/components/OutlineLogo.tsx","webpack:///./app/utils/isTextInput.ts","webpack:///./app/hooks/useKeyDown.ts","webpack:///./app/scenes/CollectionNew.tsx","webpack:///./app/actions/definitions/collections.tsx","webpack:///./app/components/Facepile.tsx","webpack:///./app/menus/separator.ts","webpack:///./app/components/ContextMenu/Header.ts","webpack:///./app/components/SkipNavContent.tsx","webpack:///./app/components/PaginatedDocumentList.tsx","webpack:///./app/hooks/useCurrentUser.ts","webpack:///./app/components/CopyToClipboard.ts","webpack:///./app/scenes/Error404.tsx","webpack:///./app/utils/browser.ts","webpack:///./app/components/Avatar/Avatar.tsx","webpack:///./app/scenes/UserProfile.tsx","webpack:///./app/components/Avatar/AvatarWithPresence.tsx","webpack:///./app/components/Avatar/index.ts","webpack:///./app/utils/i18n.ts","webpack:///./app/utils/keyboard.ts","webpack:///./app/components/Actions.ts","webpack:///./app/components/PaginatedList.tsx","webpack:///./app/utils/dates.ts","webpack:///./app/components/ContextMenu/index.tsx","webpack:///./app/components/Switch.tsx","webpack:///./app/components/PlaceholderDocument.tsx","webpack:///./app/components/Labeled.tsx","webpack:///./app/hooks/useMenuContext.tsx","webpack:///./app/components/Header.tsx","webpack:///./app/components/LoadingIndicator/LoadingIndicator.ts","webpack:///./app/components/LoadingIndicator/LoadingIndicatorBar.tsx","webpack:///./app/components/LoadingIndicator/index.ts","webpack:///./app/components/ContextMenu/MenuItem.tsx","webpack:///./app/components/CircularProgressBar.tsx","webpack:///./app/components/DocumentTasks.tsx","webpack:///./app/components/DocumentMeta.tsx","webpack:///./app/components/Sidebar/components/SidebarButton.tsx","webpack:///./app/components/Time.tsx","webpack:///./app/components/Highlight.tsx","webpack:///./app/components/Key.ts","webpack:///./app/components/PathToDocument.tsx","webpack:///./app/scenes/DocumentMove.tsx","webpack:///./app/components/MenuIconWrapper.ts","webpack:///./app/components/IconPicker.tsx","webpack:///./app/components/EmojiIcon.tsx","webpack:///./app/components/Input.tsx","webpack:///./shared/utils/getDataTransferFiles.ts","webpack:///./app/components/DocumentBreadcrumb.tsx","webpack:///./app/components/Tab.tsx","webpack:///./app/components/Scene.tsx","webpack:///./app/hooks/useCurrentTeam.ts","webpack:///./app/components/Subheading.tsx","webpack:///./app/scenes/DocumentDelete.tsx","webpack:///./app/components/Sidebar/components/NavLink.tsx","webpack:///./app/components/Sidebar/components/SidebarLink.tsx","webpack:///./app/hooks/useToasts.ts","webpack:///./app/utils/files.ts","webpack:///./app/components/Sidebar/components/Disclosure.tsx","webpack:///./app/components/Popover.tsx","webpack:///./app/scenes/DocumentPermanentDelete.tsx","webpack:///./app/menus/DocumentMenu.tsx","webpack:///./app/actions/index.ts","webpack:///./app/components/CollectionIcon.tsx","webpack:///./app/components/ContextMenu/OverflowMenuButton.tsx","webpack:///./app/components/Star.tsx","webpack:///./app/components/Avatar/placeholder.png","webpack:///./app/hooks/usePolicy.ts","webpack:///./app/components/Arrow.tsx","webpack:///./app/components/DocumentTemplatizeDialog.tsx","webpack:///./app/actions/definitions/documents.tsx","webpack:///./shared/random.ts","webpack:///./app/components/PlaceholderText.tsx","webpack:///./app/hooks/useMenuHeight.ts","webpack:///./app/actions/sections.ts","webpack:///./app/components/Tabs.tsx","webpack:///./app/components/Sidebar/components/Section.ts","webpack:///./app/components/NavLink.tsx","webpack:///./app/components/DocumentListItem.tsx","webpack:///./app/hooks/useActionContext.ts","webpack:///./app/components/List/Item.tsx","webpack:///./app/scenes/CollectionEdit.tsx","webpack:///./app/actions/definitions/navigation.tsx","webpack:///./app/components/withStores.tsx","webpack:///./app/actions/definitions/settings.tsx","webpack:///./app/components/SkipNavLink.tsx","webpack:///./app/components/Layout.tsx","webpack:///./app/components/RegisterKeyDown.ts","webpack:///./app/components/InputSelectPermission.tsx","webpack:///./app/components/ArrowKeyNavigation.tsx","webpack:///./app/components/InputSelect.tsx","webpack:///./app/scenes/KeyboardShortcuts.tsx","webpack:///./app/menus/AccountMenu.tsx","webpack:///./app/components/Sidebar/components/ResizeBorder.ts","webpack:///./app/components/Sidebar/components/Toggle.tsx","webpack:///./app/components/Sidebar/Sidebar.tsx","webpack:///./app/styles/index.ts","webpack:///./app/components/EventBoundary.tsx","webpack:///./app/components/ConfirmationDialog.tsx","webpack:///./app/components/ContextMenu/MouseSafeArea.tsx","webpack:///./app/hooks/useMousePosition.ts","webpack:///./app/components/ContextMenu/Template.tsx","webpack:///./app/components/List/Placeholder.tsx","webpack:///./app/components/Badge.ts","webpack:///./app/components/Notice.tsx"],"names":["Separator","rest","props","HorizontalRule","styled","hr","InputSearch","ref","t","useTranslation","theme","useTheme","React","isFocused","setIsFocused","handleFocus","handleBlur","placeholder","onKeyDown","type","icon","color","inputBorderFocused","inputBorder","onFocus","onBlur","margin","labelHidden","innerRef","BreadcrumbMenu","items","menu","useMenuState","modal","placement","OverflowMenuButton","aria-label","ContextMenu","Template","Slash","GoToIcon","divider","Item","Link","text","$highlight","$withIcon","Breadcrumb","overflowItems","highlightFirstItem","children","max","totalItems","length","topLevelItems","halfMax","Math","floor","splice","to","title","Flex","justify","align","map","item","index","key","useBoolean","initialState","value","setValue","setTrue","setFalse","OutlineLogo","size","fill","className","width","height","viewBox","xmlns","d","inputs","callbacks","imeOpen","useKeyDown","fn","options","predicate","createKeyPredicate","keyFilter","event","code","toUpperCase","_event","handler","push","callback","filter","cb","window","addEventListener","element","reverse","registered","defaultPrevented","target","indexOf","tagName","toLowerCase","attributes","getNamedItem","allowInInput","isModKey","CollectionNew","observer","hasOpenedIconPicker","handleSubmit","ev","preventDefault","isSaving","collection","Collection","name","sharing","permission","collections","save","onSubmit","history","url","toasts","showToast","message","handleNameChange","Object","keys","icons","keywords","split","namewords","handleIconPickerOpen","handlePermissionChange","newPermission","handleSharingChange","checked","handleChange","render","this","auth","teamSharingEnabled","team","Text","Trans","gap","Input","label","onChange","required","autoFocus","flex","IconPicker","onOpen","InputSelectPermission","note","Switch","id","Button","disabled","observable","withTranslation","withStores","ColorCollectionIcon","openCollection","createAction","section","CollectionSection","shortcut","stores","orderedData","perform","createCollection","visible","policies","abilities","stopPropagation","dialogs","openModal","content","closeAllModals","editCollection","activeCollectionId","update","CollectionEdit","collectionId","starCollection","get","isStarred","star","unstarCollection","unstar","rootCollectionActions","DefaultAvatar","user","src","avatarUrl","AvatarWrapper","div","More","slate","background","Avatars","Facepile","users","overflow","renderAvatar","separator","Header","h3","sidebarText","SkipNavContent","PaginatedDocumentList","empty","heading","documents","fetch","showParentDocuments","showCollection","showPublished","showTemplate","showDraft","renderItem","_index","compositeProps","document","showPin","useCurrentUser","useStores","invariant","CopyToClipboard","onClick","onCopy","elem","only","copy","debug","env","ENVIRONMENT","format","Error404","isTouchDevice","matchMedia","matches","isMac","navigator","platform","supportsPassive","opts","defineProperty","removeEventListener","e","supportsPassiveListener","Avatar","handleError","error","showBorder","CircleImg","onError","$showBorder","IconWrapper","defaultProps","primary","img","Edit","span","StyledBadge","Badge","Meta","UserProfile","currentUser","useHistory","isCurrentUser","Modal","alt","column","lastActiveAt","time","formatDistanceToNow","Date","parse","createdAt","isAdmin","isSuspended","settingsPath","neutral","createdByUser","fetchOwned","Subheading","userName","AvatarWithPresence","handleOpenProfile","isOpen","handleCloseProfile","isPresent","isEditing","isObserving","status","Tooltip","tooltip","Centered","$isPresent","$isObserving","$color","profileOnClick","onRequestClose","css","locales","de_DE","de","en_US","enUS","es_ES","es","fa_IR","faIR","fr_FR","fr","it_IT","it","ja_JP","ja","ko_KR","ko","pt_BR","ptBR","pt_PT","pt","pl_PL","pl","ru_RU","ru","tr_TR","tr","vi_VN","vi","zh_CN","zhCN","zh_TW","zhTW","dateLocale","userLocale","undefined","altDisplay","metaDisplay","metaKey","ctrlKey","Action","backgroundTransition","breakpoint","PaginatedList","reset","offset","allowLoadMore","renderCount","DEFAULT_PAGINATION_LIMIT","isFetching","isFetchingMore","fetchResults","counter","fetchCounter","limit","results","componentDidMount","componentDidUpdate","prevProps","renderHeading","onEscape","loading","DelayedMount","Placeholder","count","ArrowKeyNavigation","composite","previousHeading","slice","currentHeading","dateToHeading","dateTime","date","now","locale","isToday","isYesterday","weekDiff","differenceInCalendarWeeks","formatDate","monthDiff","differenceInCalendarMonths","differenceInCalendarYears","updatedAt","language","onEnter","loadMoreResults","action","leftToRender","onClose","previousVisible","usePrevious","maxHeight","useMenuHeight","unstable_disclosureRef","backgroundRef","ui","setIsMenuOpen","useMenuContext","useUnmount","sidebarCollapsed","hideOnClickOutside","preventBodyScroll","topAnchor","style","top","rightAnchor","Position","Background","dir","hiddenScrollbars","animating","Backdrop","hide","fadeIn","backdrop","depths","Scrollable","mobileContextMenu","menuBackground","fadeAndSlideDown","fadeAndSlideUp","menuShadow","Wrapper","InlineLabelText","LabelText","Label","Slider","HiddenInput","input","component","htmlFor","PlaceholderDocument","includeTitle","delay","auto","maxWidth","Fade","Labeled","MenuContext","createContext","MenuProvider","useState","isMenuOpen","memoized","useMemo","Provider","useContext","Breadcrumbs","Actions","header","$passThrough","transparentize","Title","MobileMenuButton","breadcrumb","actions","hasSidebar","isMobile","useMobile","hasMobileSidebar","passThrough","isScrolled","setScrolled","handleScroll","scrollY","useEventListener","passive","capture","handleClickTitle","scrollTo","behavior","shrink","toggleMobileSidebar","iconColor","LoadingIndicator","enableProgressBar","disableProgressBar","loadingFrame","keyframes","Container","loadingIndicatorBar","Loader","LoadingIndicatorBar","Spacer","svg","MenuAnchorCSS","level","textTertiary","textSecondary","white","dangerous","danger","disclosure","MenuAnchor","a","MenuItem","selected","as","handleClick","handleMouseDown","$toggleable","onMouseDown","Circle","strokePercentage","percentage","radius","circumference","PI","r","cx","cy","stroke","strokeWidth","strokeDasharray","strokeDashoffset","strokeLinecap","transition","SVG","CircularProgressBar","cleanPercentage","Number","isFinite","transform","progressBarBackground","Done","DoneIcon","$animated","bounceIn","DocumentTasks","tasks","tasksPercentage","completed","total","done","previousDone","getMessage","rtl","Viewed","Modified","highlight","DocumentMeta","showLastViewed","modifiedSinceViewed","updatedBy","publishedAt","archivedAt","deletedAt","isDraft","lastViewedAt","isTasks","isTemplate","lastUpdatedByCurrentUser","Time","addSuffix","nestedDocumentsCount","getDocumentChildren","canShowProgressBar","DocumentBreadcrumb","onlyText","timeSinceNow","shorten","SidebarButton","showDisclosure","showMoreMenu","image","minHeight","sidebarActiveBackground","LocaleTime","replace","fallback","tooltipDelay","Mark","mark","searchHighlight","Highlight","regex","processResult","caseSensitive","RegExp","tag","Key","kbd","symbol","fontFamily","fontFamilyMono","almostBlack","smokeLight","slateLight","PathToDocument","result","onSuccess","move","Component","ResultWrapperLink","ResultWrapper","href","role","selectable","CollectionIcon","path","doc","reduce","prev","curr","StyledGoToIcon","DocumentTitle","withComponent","listItemHoverBackground","Outline","Results","Section","DocumentMove","searchTerm","setSearchTerm","useToasts","searchIndex","paths","pathsToDocuments","indexeableDocuments","forEach","FuzzySearch","sort","onlyShowCollections","isLoaded","search","haystack","parentDocumentId","includes","handleSuccess","row","data","renderPathToCurrentDocument","getPathForDocument","handleFilter","itemData","itemCount","itemSize","itemKey","MenuIconWrapper","TwitterPicker","academicCap","AcademicCapIcon","bicycle","BicycleIcon","beaker","BeakerIcon","buildingBlocks","BuildingBlocksIcon","bookmark","BookmarkedIcon","coins","CoinsIcon","camera","CameraIcon","cloud","CloudIcon","CodeIcon","database","DatabaseIcon","email","EmailIcon","eye","EyeIcon","globe","GlobeIcon","info","InfoIcon","ImageIcon","leaf","LeafIcon","lightbulb","LightBulbIcon","lightning","LightningIcon","math","MathIcon","moon","MoonIcon","notepad","NotepadIcon","padlock","PadlockIcon","palette","PaletteIcon","pencil","EditIcon","promote","PromoteIcon","question","QuestionMarkIcon","sun","SunIcon","sport","SportIcon","smiley","SmileyIcon","TargetIcon","terminal","TerminalIcon","tools","ToolsIcon","vehicle","VehicleIcon","warning","WarningIcon","colors","Icon","Icons","NudeButton","IconButton","Loading","ColorPicker","hex","triangle","styles","default","hash","boxShadow","EmojiIcon","emoji","Span","$size","RealTextarea","textarea","hasIcon","RealInput","short","hasError","focused","InputComponent","wrappedLabel","getDataTransferFiles","dataTransferItemsList","dt","dataTransfer","files","Array","prototype","call","SmallSlash","collectionNode","category","useCategory","isDeleted","isArchived","expanded","collectionUrl","pathToDocument","output","node","TabLink","NavLinkWithChildrenFunc","Active","m","stiffness","damping","Tab","activeStyle","match","layoutId","initial","FillWidth","Scene","textTitle","centered","withStickyHeader","useCurrentTeam","H3","Underline","sticky","DocumentDelete","isDeleting","setDeleting","isArchiving","setArchiving","canArchive","delete","activeDocumentId","parent","documentUrl","handleArchive","archive","defaults","values","documentTitle","titleWithDefault","components","em","noun","NavLink","ariaCurrent","activeClassName","classNameProp","exact","isActiveProp","isActive","locationProp","location","strict","styleProp","scrollIntoViewIfNeeded","linkRef","context","RouterContext","currentLocation","toLocation","normalizeToLocation","createLocation","resolveToLocation","pathname","escapedPath","matchPath","joinClassnames","classnames","i","join","current","scrollIntoView","scrollMode","activeDropStyle","fontWeight","SidebarLink","onMouseEnter","active","isActiveDrop","showActions","depth","onDisclosureClick","paddingLeft","$isActiveDrop","$isDraft","$disabled","Content","Disclosure","root","EventBoundary","slateDark","sidebarDraftBorder","sidebarBackground","sidebarControlHoverBackground","hideToast","uploadFile","file","File","client","post","public","documentId","contentType","response","attachment","formData","FormData","form","append","blob","xhr","XMLHttpRequest","Promise","resolve","upload","lengthComputable","onProgress","loaded","Logger","Error","statusText","readyState","open","uploadUrl","send","dataUrlToBlob","dataURL","blobBin","atob","array","charCodeAt","Blob","Uint8Array","$root","StyledCollapsedIcon","CollapsedIcon","StyledDisclosure","Contents","fadeAndScaleIn","$shrink","$width","Popover","DocumentPermanentDelete","setIsDeleting","permanent","ToggleMenuItem","Style","CollectionName","DocumentMenu","isRevision","showToggleEmbeds","showDisplayOptions","unstable_preventOverflow","unstable_fixed","unstable_flip","useActionContext","isContextMenu","renderModals","setRenderModals","showDeleteModal","setShowDeleteModal","showPermanentDeleteModal","setShowPermanentDeleteModal","showMoveModal","setShowMoveModal","handleOpen","handleDuplicate","duplicate","duped","handleRestore","restore","handleUnpublish","unpublish","handlePrint","print","handleStar","handleUnstar","can","usePolicy","canViewHistory","read","restoreItems","filtered","handleImportDocument","click","handleFilePicked","import","publish","importedDocument","VisuallyHidden","accept","importFileTypes","tabIndex","MenuButton","unarchive","left","position","hover","actionToMenuItem","pinDocument","editDocumentUrl","collaborativeEditing","newDocumentPath","createChildDocument","createTemplate","permanentDelete","documentHistoryUrl","download","embedsDisabled","enableEmbeds","disableEmbeds","fullWidth","currentTarget","documentName","isCentered","definition","uuidv4","resolvedIcon","resolvedChildren","iconInContextMenu","Boolean","actionToKBar","resolvedSection","resolvedName","resolvedPlaceholder","concat","child","ResolvedCollectionIcon","inputColor","resolvedTheme","getLuminance","warn","AnimatedStar","StarredIcon","Star","hideOnActionDisabled","unstarDocument","starDocument","yellow","UnstarredIcon","module","exports","entityId","Arrow","DocumentTemplatizeDialog","templatize","template","ConfirmationDialog","submitText","savingText","openDocument","DocumentSection","createDocument","inStarredSection","starred","downloadDocument","duplicateDocument","pinDocumentToCollection","pin","pinned","startsWith","pinDocumentToHome","currentTeamId","pinToHome","pinnedToHome","homePath","printDocument","importDocument","createElement","onchange","searchDocumentsForQuery","searchQuery","searchPath","rootDocumentActions","randomInteger","min","random","PlaceholderText","minWidth","shouldComponentUpdate","Mask","pulsate","setMaxHeight","windowHeight","useWindowSize","getBoundingClientRect","bottom","DebugSection","SettingsSection","NavigationSection","UserSection","RecentSearchesSection","Nav","nav","$shadowVisible","Sticky","Tabs","shadowVisible","setShadow","updateShadows","c","scrollLeft","fade","scrollWidth","clientWidth","onScroll","sidebarMinWidth","SEARCH_RESULT_REGEX","replaceResultMarks","DocumentListItem","currentTeam","menuOpen","handleMenuOpen","handleMenuClose","queryIsInTitle","canStar","canCollection","DocumentLink","$isStarred","$menuOpen","state","Heading","isBadgedNew","createdBy","StarPositioner","ResultContext","templateId","overrides","useLocation","isCommandBar","isButton","currentUserId","ListItem","subtitle","small","border","compact","Image","$selected","$small","Subtitle","$border","p","white50","setName","setIcon","setColor","setSort","setIsSaving","field","direction","handleSortChange","ariaLabel","navigateToHome","navigateToRecentSearchQuery","query","navigateToDrafts","draftsPath","navigateToTemplates","templatesPath","navigateToArchive","archivePath","navigateToTrash","trashPath","navigateToSettings","organizationSettingsPath","navigateToProfileSettings","profileSettingsPath","openAPIDocumentation","developersUrl","openFeedbackUrl","feedbackUrl","openBugReportUrl","githubIssuesUrl","openChangelog","changelogUrl","openKeyboardShortcuts","openGuide","logout","rootNavigationActions","WrappedComponent","ComponentWithStore","displayName","hoistNonReactStatics","changeToDarkTheme","setTheme","Theme","Dark","changeToLightTheme","Light","changeToSystemTheme","System","changeTheme","rootSettingsActions","SkipNavLink","Anchor","popover","$isResizing","$hasSidebar","$sidebarCollapsed","sidebarCollapsedWidth","Layout","sidebar","rightRail","toggleCollapsedSidebar","Helmet","progressBarVisible","sidebarIsResizing","marginLeft","sidebarWidth","RegisterKeyDown","trigger","useCompositeState","handleKeyDown","currentId","StyledButton","buttonNeutralBackground","nude","Inner","StyledSelectOption","SelectOption","Positioner","InputSelect","select","useSelectState","gutter","selectedValue","popOver","useSelectPopover","previousValue","contentRef","selectedRef","buttonRef","setOffset","offsetWidth","selectedValueIndex","findIndex","option","load","block","round","getOptionFromValue","find","isSelected","CheckmarkIcon","KeyboardShortcuts","categories","x","List","Keys","h2","dl","dd","AccountMenu","previousTheme","ResizeBorder","Toggle","ToggleButton","$direction","button","Sidebar","isCollapsing","setCollapsing","previousLocation","collapsed","sidebarMaxWidth","setWidth","setSidebarWidth","isAnimating","setAnimating","isResizing","setResizing","isSmallerThanMinimum","handleDrag","pageX","handleStopDrag","activeElement","HTMLElement","blur","collapseSidebar","setTimeout","handleReset","setSidebarResizing","hideMobileSidebar","toggleStyle","right","$isAnimating","$isSmallerThanMinimum","$mobileSidebarVisible","mobileSidebarVisible","$collapsed","StyledAvatar","onDoubleClick","MouseSafeArea","parentRef","y","h","w","useMousePosition","mousePosition","setMousePosition","updateMousePosition","clientX","clientY","positions","mouseX","mouseY","getRight","getLeft","getWidth","clipPath","getClipPath","ExpandedIcon","Submenu","templateItems","unstable_popoverRef","ctx","filteredTemplates","filterTemplateItems","acc","arr","iconIsPresentInAnyMenuItem","ListPlaceHolder","body","Notice","description"],"mappings":"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","file":"default~authenticated-routes~shared-document.34c3e2a5d4ca34536265.js","sourcesContent":["import * as React from \"react\";\nimport { MenuSeparator } from \"reakit/Menu\";\nimport styled from \"styled-components\";\n\nexport default function Separator(rest: React.HTMLAttributes<HTMLHRElement>) {\n  return (\n    <MenuSeparator {...rest}>\n      {(props) => <HorizontalRule {...props} />}\n    </MenuSeparator>\n  );\n}\n\nconst HorizontalRule = styled.hr`\n  margin: 0.5em 12px;\n`;\n","import { SearchIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { useTheme } from \"styled-components\";\nimport Input, { Props as InputProps } from \"~/components/Input\";\n\ntype Props = InputProps & {\n  placeholder?: string;\n  value?: string;\n  onChange: (event: React.ChangeEvent<HTMLInputElement>) => unknown;\n  onKeyDown?: (event: React.KeyboardEvent<HTMLInputElement>) => unknown;\n};\n\nfunction InputSearch(\n  props: Props,\n  ref: React.RefObject<HTMLInputElement | HTMLTextAreaElement>\n) {\n  const { t } = useTranslation();\n  const theme = useTheme();\n  const [isFocused, setIsFocused] = React.useState(false);\n  const handleFocus = React.useCallback(() => {\n    setIsFocused(true);\n  }, []);\n\n  const handleBlur = React.useCallback(() => {\n    setIsFocused(false);\n  }, []);\n\n  const { placeholder = `${t(\"Search\")}`, onKeyDown, ...rest } = props;\n\n  return (\n    <Input\n      type=\"search\"\n      placeholder={placeholder}\n      icon={\n        <SearchIcon\n          color={isFocused ? theme.inputBorderFocused : theme.inputBorder}\n        />\n      }\n      onKeyDown={onKeyDown}\n      onFocus={handleFocus}\n      onBlur={handleBlur}\n      margin={0}\n      labelHidden\n      innerRef={ref}\n      {...rest}\n    />\n  );\n}\n\nexport default React.forwardRef(InputSearch);\n","import * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { useMenuState } from \"reakit/Menu\";\nimport ContextMenu from \"~/components/ContextMenu\";\nimport OverflowMenuButton from \"~/components/ContextMenu/OverflowMenuButton\";\nimport Template from \"~/components/ContextMenu/Template\";\nimport { MenuInternalLink } from \"~/types\";\n\ntype Props = {\n  items: MenuInternalLink[];\n};\n\nexport default function BreadcrumbMenu({ items }: Props) {\n  const { t } = useTranslation();\n  const menu = useMenuState({\n    modal: true,\n    placement: \"bottom\",\n  });\n\n  return (\n    <>\n      <OverflowMenuButton aria-label={t(\"Show path to document\")} {...menu} />\n      <ContextMenu {...menu} aria-label={t(\"Path to document\")}>\n        <Template {...menu} items={items} />\n      </ContextMenu>\n    </>\n  );\n}\n","import { GoToIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport Flex from \"~/components/Flex\";\nimport BreadcrumbMenu from \"~/menus/BreadcrumbMenu\";\nimport { MenuInternalLink } from \"~/types\";\n\ntype Props = {\n  items: MenuInternalLink[];\n  max?: number;\n  highlightFirstItem?: boolean;\n};\n\nfunction Breadcrumb({\n  items,\n  highlightFirstItem,\n  children,\n  max = 2,\n}: React.PropsWithChildren<Props>) {\n  const totalItems = items.length;\n  const topLevelItems: MenuInternalLink[] = [...items];\n  let overflowItems;\n\n  // chop middle breadcrumbs and present a \"...\" menu instead\n  if (totalItems > max) {\n    const halfMax = Math.floor(max / 2);\n    overflowItems = topLevelItems.splice(halfMax, totalItems - max);\n\n    topLevelItems.splice(halfMax, 0, {\n      to: \"\",\n      type: \"route\",\n      title: <BreadcrumbMenu items={overflowItems as MenuInternalLink[]} />,\n    });\n  }\n\n  return (\n    <Flex justify=\"flex-start\" align=\"center\">\n      {topLevelItems.map((item, index) => (\n        <React.Fragment key={item.to || index}>\n          {item.icon}\n          {item.to ? (\n            <Item\n              to={item.to}\n              $withIcon={!!item.icon}\n              $highlight={!!highlightFirstItem && index === 0}\n            >\n              {item.title}\n            </Item>\n          ) : (\n            item.title\n          )}\n          {index !== topLevelItems.length - 1 || !!children ? <Slash /> : null}\n        </React.Fragment>\n      ))}\n      {children}\n    </Flex>\n  );\n}\n\nconst Slash = styled(GoToIcon)`\n  flex-shrink: 0;\n  fill: ${(props) => props.theme.divider};\n`;\n\nconst Item = styled(Link)<{ $highlight: boolean; $withIcon: boolean }>`\n  display: flex;\n  flex-shrink: 1;\n  min-width: 0;\n  color: ${(props) => props.theme.text};\n  font-size: 15px;\n  height: 24px;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n  font-weight: ${(props) => (props.$highlight ? \"500\" : \"inherit\")};\n  margin-left: ${(props) => (props.$withIcon ? \"4px\" : \"0\")};\n\n  svg {\n    flex-shrink: 0;\n  }\n\n  &:hover {\n    text-decoration: underline;\n  }\n`;\n\nexport default Breadcrumb;\n","import * as React from \"react\";\n\ntype InitialState = boolean | (() => boolean);\n\n/**\n * React hook to manage booleans\n *\n * @param initialState the initial boolean state value\n */\nexport default function useBoolean(\n  initialState: InitialState = false\n): [boolean, () => void, () => void] {\n  const [value, setValue] = React.useState(initialState);\n  const setTrue = React.useCallback(() => {\n    setValue(true);\n  }, []);\n\n  const setFalse = React.useCallback(() => {\n    setValue(false);\n  }, []);\n\n  return [value, setTrue, setFalse];\n}\n","import * as React from \"react\";\n\ntype Props = {\n  size?: number;\n  fill?: string;\n  className?: string;\n};\n\nfunction OutlineLogo({ size = 32, fill = \"#333\", className }: Props) {\n  return (\n    <svg\n      fill={fill}\n      width={size}\n      height={size}\n      viewBox=\"0 0 64 64\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      className={className}\n    >\n      <path d=\"M32,57.6 L32,59.1606101 C32,61.3697491 30.209139,63.1606101 28,63.1606101 C27.3130526,63.1606101 26.6376816,62.9836959 26.038955,62.6469122 L2.03895504,49.1469122 C0.779447116,48.438439 -4.3614532e-15,47.1057033 -7.10542736e-15,45.6606101 L-7.10542736e-15,18.3393899 C-7.28240024e-15,16.8942967 0.779447116,15.561561 2.03895504,14.8530878 L26.038955,1.35308779 C27.9643866,0.270032565 30.4032469,0.952913469 31.4863021,2.87834498 C31.8230858,3.47707155 32,4.15244252 32,4.83938994 L32,6.4 L34.8506085,5.54481746 C36.9665799,4.91002604 39.1965137,6.11075966 39.8313051,8.22673106 C39.9431692,8.59961116 40,8.98682435 40,9.3761226 L40,11 L43.5038611,10.5620174 C45.6959408,10.2880074 47.6951015,11.8429102 47.9691115,14.0349899 C47.9896839,14.1995692 48,14.3652688 48,14.5311289 L48,49.4688711 C48,51.6780101 46.209139,53.4688711 44,53.4688711 C43.8341399,53.4688711 43.6684404,53.458555 43.5038611,53.4379826 L40,53 L40,54.6238774 C40,56.8330164 38.209139,58.6238774 36,58.6238774 C35.6107017,58.6238774 35.2234886,58.5670466 34.8506085,58.4551825 L32,57.6 Z M32,53.4238774 L36,54.6238774 L36,9.3761226 L32,10.5761226 L32,53.4238774 Z M40,15.0311289 L40,48.9688711 L44,49.4688711 L44,14.5311289 L40,15.0311289 Z M5.32907052e-15,44.4688711 L5.32907052e-15,19.5311289 L3.55271368e-15,44.4688711 Z M4,18.3393899 L4,45.6606101 L28,59.1606101 L28,4.83938994 L4,18.3393899 Z M8,21 L12,19 L12,45 L8,43 L8,21 Z\" />\n    </svg>\n  );\n}\n\nexport default OutlineLogo;\n","const inputs = [\"input\", \"select\", \"button\", \"textarea\"]; // detect if node is a text input element\n\nexport default function isTextInput(element: HTMLElement): boolean {\n  return (\n    element &&\n    (inputs.indexOf(element.tagName.toLowerCase()) !== -1 ||\n      element.attributes.getNamedItem(\"role\")?.value === \"textbox\" ||\n      element.attributes.getNamedItem(\"contenteditable\")?.value === \"true\")\n  );\n}\n","import * as React from \"react\";\nimport isTextInput from \"~/utils/isTextInput\";\nimport { isModKey } from \"~/utils/keyboard\";\n\ntype Callback = (event: KeyboardEvent) => void;\n\nexport type KeyFilter = ((event: KeyboardEvent) => boolean) | string;\n\nexport type Options = {\n  allowInInput?: boolean;\n};\n\ntype RegisteredCallback = {\n  callback: Callback;\n  options?: Options;\n};\n\n// Registered keyboard event callbacks\nlet callbacks: RegisteredCallback[] = [];\n\n// Track if IME input suggestions are open so we can ignore keydown shortcuts\n// in this case, they should never be triggered from mobile keyboards.\nlet imeOpen = false;\n\n// Based on implementation in react-use\n// https://github.com/streamich/react-use/blob/master/src/useKey.ts#L15-L22\nconst createKeyPredicate = (keyFilter: KeyFilter) =>\n  typeof keyFilter === \"function\"\n    ? keyFilter\n    : typeof keyFilter === \"string\"\n    ? (event: KeyboardEvent) =>\n        event.key === keyFilter ||\n        event.code === `Key${keyFilter.toUpperCase()}`\n    : keyFilter\n    ? (_event: KeyboardEvent) => true\n    : (_event: KeyboardEvent) => false;\n\nexport default function useKeyDown(\n  key: KeyFilter,\n  fn: Callback,\n  options?: Options\n): void {\n  const predicate = createKeyPredicate(key);\n\n  React.useEffect(() => {\n    const handler = (event: KeyboardEvent) => {\n      if (predicate(event)) {\n        fn(event);\n      }\n    };\n\n    callbacks.push({\n      callback: handler,\n      options,\n    });\n\n    return () => {\n      callbacks = callbacks.filter((cb) => cb.callback !== handler);\n    };\n  }, []);\n}\n\nwindow.addEventListener(\"keydown\", (event) => {\n  if (imeOpen) {\n    return;\n  }\n\n  // reverse so that the last registered callbacks get executed first\n  for (const registered of callbacks.reverse()) {\n    if (event.defaultPrevented === true) {\n      break;\n    }\n\n    if (\n      !isTextInput(event.target as HTMLElement) ||\n      registered.options?.allowInInput ||\n      isModKey(event)\n    ) {\n      registered.callback(event);\n    }\n  }\n});\n\nwindow.addEventListener(\"compositionstart\", () => {\n  imeOpen = true;\n});\n\nwindow.addEventListener(\"compositionend\", () => {\n  imeOpen = false;\n});\n","import { intersection } from \"lodash\";\nimport { observable } from \"mobx\";\nimport { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport { withTranslation, Trans, WithTranslation } from \"react-i18next\";\nimport RootStore from \"~/stores/RootStore\";\nimport Collection from \"~/models/Collection\";\nimport Button from \"~/components/Button\";\nimport Flex from \"~/components/Flex\";\nimport IconPicker, { icons } from \"~/components/IconPicker\";\nimport Input from \"~/components/Input\";\nimport InputSelectPermission from \"~/components/InputSelectPermission\";\nimport Switch from \"~/components/Switch\";\nimport Text from \"~/components/Text\";\nimport withStores from \"~/components/withStores\";\nimport history from \"~/utils/history\";\n\ntype Props = RootStore &\n  WithTranslation & {\n    onSubmit: () => void;\n  };\n\n@observer\nclass CollectionNew extends React.Component<Props> {\n  @observable\n  name = \"\";\n\n  @observable\n  icon = \"\";\n\n  @observable\n  color = \"#4E5C6E\";\n\n  @observable\n  sharing = true;\n\n  @observable\n  permission = \"read_write\";\n\n  @observable\n  isSaving: boolean;\n\n  hasOpenedIconPicker = false;\n\n  handleSubmit = async (ev: React.SyntheticEvent) => {\n    ev.preventDefault();\n    this.isSaving = true;\n    const collection = new Collection(\n      {\n        name: this.name,\n        sharing: this.sharing,\n        icon: this.icon,\n        color: this.color,\n        permission: this.permission,\n      },\n      this.props.collections\n    );\n\n    try {\n      await collection.save();\n      this.props.onSubmit();\n      history.push(collection.url);\n    } catch (err) {\n      this.props.toasts.showToast(err.message, {\n        type: \"error\",\n      });\n    } finally {\n      this.isSaving = false;\n    }\n  };\n\n  handleNameChange = (ev: React.ChangeEvent<HTMLInputElement>) => {\n    this.name = ev.target.value;\n\n    // If the user hasn't picked an icon yet, go ahead and suggest one based on\n    // the name of the collection. It's the little things sometimes.\n    if (!this.hasOpenedIconPicker) {\n      const keys = Object.keys(icons);\n\n      for (const key of keys) {\n        const icon = icons[key];\n        const keywords = icon.keywords.split(\" \");\n        const namewords = this.name.toLowerCase().split(\" \");\n        const matches = intersection(namewords, keywords);\n\n        if (matches.length > 0) {\n          this.icon = key;\n          return;\n        }\n      }\n\n      this.icon = \"collection\";\n    }\n  };\n\n  handleIconPickerOpen = () => {\n    this.hasOpenedIconPicker = true;\n  };\n\n  handlePermissionChange = (newPermission: string) => {\n    this.permission = newPermission;\n  };\n\n  handleSharingChange = (ev: React.ChangeEvent<HTMLInputElement>) => {\n    this.sharing = ev.target.checked;\n  };\n\n  handleChange = (color: string, icon: string) => {\n    this.color = color;\n    this.icon = icon;\n  };\n\n  render() {\n    const { t, auth } = this.props;\n    const teamSharingEnabled = !!auth.team && auth.team.sharing;\n    return (\n      <form onSubmit={this.handleSubmit}>\n        <Text type=\"secondary\">\n          <Trans>\n            Collections are for grouping your documents. They work best when\n            organized around a topic or internal team  Product or Engineering\n            for example.\n          </Trans>\n        </Text>\n        <Flex gap={8}>\n          <Input\n            type=\"text\"\n            label={t(\"Name\")}\n            onChange={this.handleNameChange}\n            value={this.name}\n            required\n            autoFocus\n            flex\n          />\n          <IconPicker\n            onOpen={this.handleIconPickerOpen}\n            onChange={this.handleChange}\n            color={this.color}\n            icon={this.icon}\n          />\n        </Flex>\n        <InputSelectPermission\n          value={this.permission}\n          onChange={this.handlePermissionChange}\n          note={t(\n            \"This is the default level of access, you can give individual users or groups more access once the collection is created.\"\n          )}\n        />\n        {teamSharingEnabled && (\n          <Switch\n            id=\"sharing\"\n            label={t(\"Public document sharing\")}\n            onChange={this.handleSharingChange}\n            checked={this.sharing}\n            note={t(\n              \"When enabled any documents within this collection can be shared publicly on the internet.\"\n            )}\n          />\n        )}\n\n        <Button type=\"submit\" disabled={this.isSaving || !this.name}>\n          {this.isSaving ? `${t(\"Creating\")}` : t(\"Create\")}\n        </Button>\n      </form>\n    );\n  }\n}\n\nexport default withTranslation()(withStores(CollectionNew));\n","import {\n  CollectionIcon,\n  EditIcon,\n  PlusIcon,\n  StarredIcon,\n  UnstarredIcon,\n} from \"outline-icons\";\nimport * as React from \"react\";\nimport stores from \"~/stores\";\nimport Collection from \"~/models/Collection\";\nimport CollectionEdit from \"~/scenes/CollectionEdit\";\nimport CollectionNew from \"~/scenes/CollectionNew\";\nimport DynamicCollectionIcon from \"~/components/CollectionIcon\";\nimport { createAction } from \"~/actions\";\nimport { CollectionSection } from \"~/actions/sections\";\nimport history from \"~/utils/history\";\n\nconst ColorCollectionIcon = ({ collection }: { collection: Collection }) => {\n  return <DynamicCollectionIcon collection={collection} />;\n};\n\nexport const openCollection = createAction({\n  name: ({ t }) => t(\"Open collection\"),\n  section: CollectionSection,\n  shortcut: [\"o\", \"c\"],\n  icon: <CollectionIcon />,\n  children: ({ stores }) => {\n    const collections = stores.collections.orderedData;\n    return collections.map((collection) => ({\n      // Note: using url which includes the slug rather than id here to bust\n      // cache if the collection is renamed\n      id: collection.url,\n      name: collection.name,\n      icon: <ColorCollectionIcon collection={collection} />,\n      section: CollectionSection,\n      perform: () => history.push(collection.url),\n    }));\n  },\n});\n\nexport const createCollection = createAction({\n  name: ({ t }) => t(\"New collection\"),\n  section: CollectionSection,\n  icon: <PlusIcon />,\n  keywords: \"create\",\n  visible: ({ stores }) =>\n    stores.policies.abilities(stores.auth.team?.id || \"\").createCollection,\n  perform: ({ t, event }) => {\n    event?.preventDefault();\n    event?.stopPropagation();\n    stores.dialogs.openModal({\n      title: t(\"Create a collection\"),\n      content: <CollectionNew onSubmit={stores.dialogs.closeAllModals} />,\n    });\n  },\n});\n\nexport const editCollection = createAction({\n  name: ({ t }) => t(\"Edit collection\"),\n  section: CollectionSection,\n  icon: <EditIcon />,\n  visible: ({ stores, activeCollectionId }) =>\n    !!activeCollectionId &&\n    stores.policies.abilities(activeCollectionId).update,\n  perform: ({ t, activeCollectionId }) => {\n    if (!activeCollectionId) {\n      return;\n    }\n\n    stores.dialogs.openModal({\n      title: t(\"Edit collection\"),\n      content: (\n        <CollectionEdit\n          onSubmit={stores.dialogs.closeAllModals}\n          collectionId={activeCollectionId}\n        />\n      ),\n    });\n  },\n});\n\nexport const starCollection = createAction({\n  name: ({ t }) => t(\"Star\"),\n  section: CollectionSection,\n  icon: <StarredIcon />,\n  keywords: \"favorite bookmark\",\n  visible: ({ activeCollectionId, stores }) => {\n    if (!activeCollectionId) {\n      return false;\n    }\n    const collection = stores.collections.get(activeCollectionId);\n    return (\n      !collection?.isStarred &&\n      stores.policies.abilities(activeCollectionId).star\n    );\n  },\n  perform: ({ activeCollectionId, stores }) => {\n    if (!activeCollectionId) {\n      return;\n    }\n\n    const collection = stores.collections.get(activeCollectionId);\n    collection?.star();\n  },\n});\n\nexport const unstarCollection = createAction({\n  name: ({ t }) => t(\"Unstar\"),\n  section: CollectionSection,\n  icon: <UnstarredIcon />,\n  keywords: \"unfavorite unbookmark\",\n  visible: ({ activeCollectionId, stores }) => {\n    if (!activeCollectionId) {\n      return false;\n    }\n    const collection = stores.collections.get(activeCollectionId);\n    return (\n      !!collection?.isStarred &&\n      stores.policies.abilities(activeCollectionId).unstar\n    );\n  },\n  perform: ({ activeCollectionId, stores }) => {\n    if (!activeCollectionId) {\n      return;\n    }\n\n    const collection = stores.collections.get(activeCollectionId);\n    collection?.unstar();\n  },\n});\n\nexport const rootCollectionActions = [\n  openCollection,\n  createCollection,\n  starCollection,\n  unstarCollection,\n];\n","import { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport styled from \"styled-components\";\nimport User from \"~/models/User\";\nimport Avatar from \"~/components/Avatar\";\nimport Flex from \"~/components/Flex\";\n\ntype Props = {\n  users: User[];\n  size?: number;\n  overflow?: number;\n  onClick?: React.MouseEventHandler<HTMLDivElement>;\n  renderAvatar?: (user: User) => React.ReactNode;\n};\n\nfunction Facepile({\n  users,\n  overflow = 0,\n  size = 32,\n  renderAvatar = DefaultAvatar,\n  ...rest\n}: Props) {\n  return (\n    <Avatars {...rest}>\n      {overflow > 0 && (\n        <More size={size}>\n          <span>+{overflow}</span>\n        </More>\n      )}\n      {users.map((user) => (\n        <AvatarWrapper key={user.id}>{renderAvatar(user)}</AvatarWrapper>\n      ))}\n    </Avatars>\n  );\n}\n\nfunction DefaultAvatar(user: User) {\n  return <Avatar user={user} src={user.avatarUrl} size={32} />;\n}\n\nconst AvatarWrapper = styled.div`\n  margin-right: -8px;\n\n  &:first-child {\n    margin-right: 0;\n  }\n`;\n\nconst More = styled.div<{ size: number }>`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  min-width: ${(props) => props.size}px;\n  height: ${(props) => props.size}px;\n  border-radius: 100%;\n  background: ${(props) => props.theme.slate};\n  color: ${(props) => props.theme.text};\n  border: 2px solid ${(props) => props.theme.background};\n  text-align: center;\n  font-size: 11px;\n  font-weight: 600;\n`;\n\nconst Avatars = styled(Flex)`\n  align-items: center;\n  flex-direction: row-reverse;\n  cursor: pointer;\n`;\n\nexport default observer(Facepile);\n","import { MenuSeparator } from \"~/types\";\n\nexport default function separator(): MenuSeparator {\n  return {\n    type: \"separator\",\n  };\n}\n","import styled from \"styled-components\";\n\nconst Header = styled.h3`\n  font-size: 11px;\n  font-weight: 600;\n  text-transform: uppercase;\n  color: ${(props) => props.theme.sidebarText};\n  letter-spacing: 0.04em;\n  margin: 1em 12px 0.5em;\n`;\n\nexport default Header;\n","import * as React from \"react\";\n\nexport const id = \"skip-nav\";\n\nexport default function SkipNavContent() {\n  return <div id={id} />;\n}\n","import * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport Document from \"~/models/Document\";\nimport DocumentListItem from \"~/components/DocumentListItem\";\nimport PaginatedList from \"~/components/PaginatedList\";\n\ntype Props = {\n  documents: Document[];\n  fetch: (options: any) => Promise<Document[] | undefined>;\n  options?: Record<string, any>;\n  heading?: React.ReactNode;\n  empty?: React.ReactNode;\n  showParentDocuments?: boolean;\n  showCollection?: boolean;\n  showPublished?: boolean;\n  showDraft?: boolean;\n  showTemplate?: boolean;\n};\n\nconst PaginatedDocumentList = React.memo<Props>(function PaginatedDocumentList({\n  empty,\n  heading,\n  documents,\n  fetch,\n  options,\n  showParentDocuments,\n  showCollection,\n  showPublished,\n  showTemplate,\n  showDraft,\n  ...rest\n}: Props) {\n  const { t } = useTranslation();\n\n  return (\n    <PaginatedList\n      aria-label={t(\"Documents\")}\n      items={documents}\n      empty={empty}\n      heading={heading}\n      fetch={fetch}\n      options={options}\n      renderItem={(item: Document, _index, compositeProps) => (\n        <DocumentListItem\n          key={item.id}\n          document={item}\n          showPin={!!options?.collectionId}\n          showParentDocuments={showParentDocuments}\n          showCollection={showCollection}\n          showPublished={showPublished}\n          showTemplate={showTemplate}\n          showDraft={showDraft}\n          {...compositeProps}\n        />\n      )}\n      {...rest}\n    />\n  );\n});\n\nexport default PaginatedDocumentList;\n","import invariant from \"invariant\";\nimport useStores from \"./useStores\";\n\nexport default function useCurrentUser() {\n  const { auth } = useStores();\n  invariant(auth.user, \"user required\");\n  return auth.user;\n}\n","import copy from \"copy-to-clipboard\";\nimport * as React from \"react\";\nimport env from \"~/env\";\n\ntype Props = {\n  text: string;\n  children?: React.ReactElement;\n  onClick?: React.MouseEventHandler<HTMLButtonElement>;\n  onCopy?: () => void;\n};\n\nclass CopyToClipboard extends React.PureComponent<Props> {\n  onClick = (ev: React.SyntheticEvent) => {\n    const { text, onCopy, children } = this.props;\n    const elem = React.Children.only(children);\n\n    copy(text, {\n      debug: env.ENVIRONMENT !== \"production\",\n      format: \"text/plain\",\n    });\n\n    onCopy?.();\n\n    if (elem && elem.props && typeof elem.props.onClick === \"function\") {\n      elem.props.onClick(ev);\n    }\n  };\n\n  render() {\n    const { text, onCopy, children, ...rest } = this.props;\n    const elem = React.Children.only(children);\n    if (!elem) {\n      return null;\n    }\n\n    return React.cloneElement(elem, { ...rest, onClick: this.onClick });\n  }\n}\n\nexport default CopyToClipboard;\n","import * as React from \"react\";\nimport { useTranslation, Trans } from \"react-i18next\";\nimport { Link } from \"react-router-dom\";\nimport Empty from \"~/components/Empty\";\nimport Scene from \"~/components/Scene\";\n\nconst Error404 = () => {\n  const { t } = useTranslation();\n  return (\n    <Scene title={t(\"Not Found\")}>\n      <h1>{t(\"Not Found\")}</h1>\n      <Empty>\n        <Trans>\n          We were unable to find the page youre looking for. Go to the{\" \"}\n          <Link to=\"/home\">homepage</Link>?\n        </Trans>\n      </Empty>\n    </Scene>\n  );\n};\n\nexport default Error404;\n","/**\n * Returns true if the client is a touch device.\n */\nexport function isTouchDevice(): boolean {\n  if (typeof window === \"undefined\") {\n    return false;\n  }\n  return window.matchMedia?.(\"(hover: none) and (pointer: coarse)\")?.matches;\n}\n\n/**\n * Returns true if the client is running on a Mac.\n */\nexport function isMac(): boolean {\n  const SSR = typeof window === \"undefined\";\n  return !SSR && window.navigator.platform === \"MacIntel\";\n}\n\nlet supportsPassive = false;\n\ntry {\n  const opts = Object.defineProperty({}, \"passive\", {\n    get: function () {\n      supportsPassive = true;\n    },\n  });\n  // @ts-expect-error ts-migrate(2769) testPassive is not a real event\n  window.addEventListener(\"testPassive\", null, opts);\n  // @ts-expect-error ts-migrate(2769) testPassive is not a real event\n  window.removeEventListener(\"testPassive\", null, opts);\n} catch (e) {\n  // No-op\n}\n\n/**\n * Returns true if the client supports passive event listeners\n */\nexport const supportsPassiveListener = supportsPassive;\n","import { observable } from \"mobx\";\nimport { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport styled from \"styled-components\";\nimport User from \"~/models/User\";\nimport placeholder from \"./placeholder.png\";\n\ntype Props = {\n  src: string;\n  size: number;\n  icon?: React.ReactNode;\n  user?: User;\n  alt?: string;\n  showBorder?: boolean;\n  onClick?: React.MouseEventHandler<HTMLImageElement>;\n  className?: string;\n};\n\n@observer\nclass Avatar extends React.Component<Props> {\n  @observable\n  error: boolean;\n\n  static defaultProps = {\n    size: 24,\n  };\n\n  handleError = () => {\n    this.error = true;\n  };\n\n  render() {\n    const { src, icon, showBorder, ...rest } = this.props;\n    return (\n      <AvatarWrapper>\n        <CircleImg\n          onError={this.handleError}\n          src={this.error ? placeholder : src}\n          $showBorder={showBorder}\n          {...rest}\n        />\n        {icon && <IconWrapper>{icon}</IconWrapper>}\n      </AvatarWrapper>\n    );\n  }\n}\n\nconst AvatarWrapper = styled.div`\n  position: relative;\n`;\n\nconst IconWrapper = styled.div`\n  display: flex;\n  position: absolute;\n  bottom: -2px;\n  right: -2px;\n  background: ${(props) => props.theme.primary};\n  border: 2px solid ${(props) => props.theme.background};\n  border-radius: 100%;\n  width: 20px;\n  height: 20px;\n`;\n\nconst CircleImg = styled.img<{ size: number; $showBorder?: boolean }>`\n  display: block;\n  width: ${(props) => props.size}px;\n  height: ${(props) => props.size}px;\n  border-radius: 50%;\n  border: 2px solid\n    ${(props) =>\n      props.$showBorder === false ? \"transparent\" : props.theme.background};\n  flex-shrink: 0;\n`;\n\nexport default Avatar;\n","import { formatDistanceToNow } from \"date-fns\";\nimport { observer } from \"mobx-react\";\nimport { EditIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { useHistory } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport User from \"~/models/User\";\nimport Avatar from \"~/components/Avatar\";\nimport Badge from \"~/components/Badge\";\nimport Button from \"~/components/Button\";\nimport Flex from \"~/components/Flex\";\nimport Modal from \"~/components/Modal\";\nimport PaginatedDocumentList from \"~/components/PaginatedDocumentList\";\nimport Subheading from \"~/components/Subheading\";\nimport Text from \"~/components/Text\";\nimport useCurrentUser from \"~/hooks/useCurrentUser\";\nimport useStores from \"~/hooks/useStores\";\nimport { settingsPath } from \"~/utils/routeHelpers\";\n\ntype Props = {\n  user: User;\n  onRequestClose: () => void;\n  isOpen: boolean;\n};\n\nfunction UserProfile(props: Props) {\n  const { t } = useTranslation();\n  const { documents } = useStores();\n  const currentUser = useCurrentUser();\n  const history = useHistory();\n  const { user, ...rest } = props;\n  if (!user) {\n    return null;\n  }\n  const isCurrentUser = currentUser.id === user.id;\n\n  return (\n    <Modal\n      title={\n        <Flex align=\"center\">\n          <Avatar src={user.avatarUrl} size={38} alt={t(\"Profile picture\")} />\n          <span>&nbsp;{user.name}</span>\n        </Flex>\n      }\n      {...rest}\n    >\n      <Flex column>\n        <Meta>\n          {isCurrentUser\n            ? t(\"You joined\")\n            : user.lastActiveAt\n            ? t(\"Joined\")\n            : t(\"Invited\")}{\" \"}\n          {t(\"{{ time }} ago.\", {\n            time: formatDistanceToNow(Date.parse(user.createdAt)),\n          })}\n          {user.isAdmin && (\n            <StyledBadge primary={user.isAdmin}>{t(\"Admin\")}</StyledBadge>\n          )}\n          {user.isSuspended && <StyledBadge>{t(\"Suspended\")}</StyledBadge>}\n          {isCurrentUser && (\n            <Edit>\n              <Button\n                onClick={() => history.push(settingsPath())}\n                icon={<EditIcon />}\n                neutral\n              >\n                {t(\"Edit Profile\")}\n              </Button>\n            </Edit>\n          )}\n        </Meta>\n        <PaginatedDocumentList\n          documents={documents.createdByUser(user.id)}\n          fetch={documents.fetchOwned}\n          options={{\n            user: user.id,\n          }}\n          heading={<Subheading>{t(\"Recently updated\")}</Subheading>}\n          empty={\n            <Text type=\"secondary\">\n              {t(\"{{ userName }} hasnt updated any documents yet.\", {\n                userName: user.name,\n              })}\n            </Text>\n          }\n          showCollection\n        />\n      </Flex>\n    </Modal>\n  );\n}\n\nconst Edit = styled.span`\n  position: absolute;\n  top: 46px;\n  right: 0;\n`;\n\nconst StyledBadge = styled(Badge)`\n  position: relative;\n  top: -2px;\n`;\n\nconst Meta = styled(Text)`\n  margin-top: -12px;\n`;\n\nexport default observer(UserProfile);\n","import { observable } from \"mobx\";\nimport { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport { WithTranslation, withTranslation } from \"react-i18next\";\nimport styled, { css } from \"styled-components\";\nimport User from \"~/models/User\";\nimport UserProfile from \"~/scenes/UserProfile\";\nimport Avatar from \"~/components/Avatar\";\nimport Tooltip from \"~/components/Tooltip\";\n\ntype Props = WithTranslation & {\n  user: User;\n  isPresent: boolean;\n  isEditing: boolean;\n  isObserving: boolean;\n  isCurrentUser: boolean;\n  profileOnClick: boolean;\n  onClick?: React.MouseEventHandler<HTMLImageElement>;\n};\n\n@observer\nclass AvatarWithPresence extends React.Component<Props> {\n  @observable\n  isOpen = false;\n\n  handleOpenProfile = () => {\n    this.isOpen = true;\n  };\n\n  handleCloseProfile = () => {\n    this.isOpen = false;\n  };\n\n  render() {\n    const {\n      onClick,\n      user,\n      isPresent,\n      isEditing,\n      isObserving,\n      isCurrentUser,\n      t,\n    } = this.props;\n    const status = isPresent\n      ? isEditing\n        ? t(\"currently editing\")\n        : t(\"currently viewing\")\n      : t(\"previously edited\");\n\n    return (\n      <>\n        <Tooltip\n          tooltip={\n            <Centered>\n              <strong>{user.name}</strong> {isCurrentUser && `(${t(\"You\")})`}\n              {status && (\n                <>\n                  <br />\n                  {status}\n                </>\n              )}\n            </Centered>\n          }\n          placement=\"bottom\"\n        >\n          <AvatarWrapper\n            $isPresent={isPresent}\n            $isObserving={isObserving}\n            $color={user.color}\n          >\n            <Avatar\n              src={user.avatarUrl}\n              onClick={\n                this.props.profileOnClick === false\n                  ? onClick\n                  : this.handleOpenProfile\n              }\n              size={32}\n            />\n          </AvatarWrapper>\n        </Tooltip>\n        {this.props.profileOnClick && (\n          <UserProfile\n            user={user}\n            isOpen={this.isOpen}\n            onRequestClose={this.handleCloseProfile}\n          />\n        )}\n      </>\n    );\n  }\n}\n\nconst Centered = styled.div`\n  text-align: center;\n`;\n\nconst AvatarWrapper = styled.div<{\n  $isPresent: boolean;\n  $isObserving: boolean;\n  $color: string;\n}>`\n  opacity: ${(props) => (props.$isPresent ? 1 : 0.5)};\n  transition: opacity 250ms ease-in-out;\n  border-radius: 50%;\n  position: relative;\n\n  &:after {\n    content: \"\";\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    border-radius: 50%;\n    transition: border-color 100ms ease-in-out;\n    border: 2px solid transparent;\n    pointer-events: none;\n\n    ${(props) =>\n      props.$isObserving &&\n      css`\n        border: 2px solid ${props.$color};\n        box-shadow: inset 0 0 0 2px ${props.theme.background};\n\n        &:hover {\n          top: -1px;\n          left: -1px;\n          right: -1px;\n          bottom: -1px;\n        }\n      `}\n  }\n\n  &:hover:after {\n    border: 2px solid ${(props) => props.$color};\n    box-shadow: inset 0 0 0 2px ${(props) => props.theme.background};\n  }\n`;\n\nexport default withTranslation()(AvatarWithPresence);\n","import Avatar from \"./Avatar\";\nimport AvatarWithPresence from \"./AvatarWithPresence\";\n\nexport { AvatarWithPresence };\n\nexport default Avatar;\n","import {\n  de,\n  enUS,\n  es,\n  faIR,\n  fr,\n  it,\n  ja,\n  ko,\n  ptBR,\n  pt,\n  pl,\n  ru,\n  tr,\n  vi,\n  zhCN,\n  zhTW,\n} from \"date-fns/locale\";\n\nconst locales = {\n  de_DE: de,\n  en_US: enUS,\n  es_ES: es,\n  fa_IR: faIR,\n  fr_FR: fr,\n  it_IT: it,\n  ja_JP: ja,\n  ko_KR: ko,\n  pt_BR: ptBR,\n  pt_PT: pt,\n  pl_PL: pl,\n  ru_RU: ru,\n  tr_TR: tr,\n  vi_VN: vi,\n  zh_CN: zhCN,\n  zh_TW: zhTW,\n};\n\nexport function dateLocale(userLocale: string | null | undefined) {\n  return userLocale ? locales[userLocale] : undefined;\n}\n\nexport { locales };\n","import { isMac } from \"~/utils/browser\";\n\nexport const altDisplay = isMac() ? \"\" : \"Alt\";\n\nexport const metaDisplay = isMac() ? \"\" : \"Ctrl\";\n\nexport const meta = isMac() ? \"cmd\" : \"ctrl\";\n\nexport function isModKey(\n  event: KeyboardEvent | MouseEvent | React.KeyboardEvent\n) {\n  return isMac() ? event.metaKey : event.ctrlKey;\n}\n","import styled from \"styled-components\";\nimport breakpoint from \"styled-components-breakpoint\";\nimport Flex from \"~/components/Flex\";\n\nexport const Action = styled(Flex)`\n  justify-content: center;\n  align-items: center;\n  padding: 0 0 0 12px;\n  height: 32px;\n  font-size: 15px;\n  flex-shrink: 0;\n\n  &:empty {\n    display: none;\n  }\n`;\n\nexport const Separator = styled.div`\n  flex-shrink: 0;\n  margin-left: 12px;\n  width: 1px;\n  height: 28px;\n  background: ${(props) => props.theme.divider};\n`;\n\nconst Actions = styled(Flex)`\n  position: fixed;\n  top: 0;\n  right: 0;\n  left: 0;\n  border-radius: 3px;\n  background: ${(props) => props.theme.background};\n  transition: ${(props) => props.theme.backgroundTransition};\n  padding: 12px;\n  backdrop-filter: blur(20px);\n\n  @media print {\n    display: none;\n  }\n\n  ${breakpoint(\"tablet\")`\n    left: auto;\n    padding: 24px;\n  `};\n`;\n\nexport default Actions;\n","import { isEqual } from \"lodash\";\nimport { observable, action } from \"mobx\";\nimport { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport { withTranslation, WithTranslation } from \"react-i18next\";\nimport { Waypoint } from \"react-waypoint\";\nimport { CompositeStateReturn } from \"reakit/Composite\";\nimport { DEFAULT_PAGINATION_LIMIT } from \"~/stores/BaseStore\";\nimport RootStore from \"~/stores/RootStore\";\nimport ArrowKeyNavigation from \"~/components/ArrowKeyNavigation\";\nimport DelayedMount from \"~/components/DelayedMount\";\nimport PlaceholderList from \"~/components/List/Placeholder\";\nimport withStores from \"~/components/withStores\";\nimport { dateToHeading } from \"~/utils/dates\";\n\nexport interface PaginatedItem {\n  id: string;\n  createdAt?: string;\n  updatedAt?: string;\n}\n\ntype Props<T> = WithTranslation &\n  RootStore & {\n    fetch?: (\n      options: Record<string, any> | undefined\n    ) => Promise<T[] | undefined> | undefined;\n    options?: Record<string, any>;\n    heading?: React.ReactNode;\n    empty?: React.ReactNode;\n    loading?: React.ReactElement;\n    items?: T[];\n    renderItem: (\n      item: T,\n      index: number,\n      compositeProps: CompositeStateReturn\n    ) => React.ReactNode;\n    renderHeading?: (name: React.ReactElement<any> | string) => React.ReactNode;\n    onEscape?: (ev: React.KeyboardEvent<HTMLDivElement>) => void;\n  };\n\n@observer\nclass PaginatedList<T extends PaginatedItem> extends React.Component<Props<T>> {\n  @observable\n  isFetchingMore = false;\n\n  @observable\n  isFetching = false;\n\n  @observable\n  fetchCounter = 0;\n\n  @observable\n  renderCount: number = DEFAULT_PAGINATION_LIMIT;\n\n  @observable\n  offset = 0;\n\n  @observable\n  allowLoadMore = true;\n\n  componentDidMount() {\n    this.fetchResults();\n  }\n\n  componentDidUpdate(prevProps: Props<T>) {\n    if (\n      prevProps.fetch !== this.props.fetch ||\n      !isEqual(prevProps.options, this.props.options)\n    ) {\n      this.reset();\n      this.fetchResults();\n    }\n  }\n\n  reset = () => {\n    this.offset = 0;\n    this.allowLoadMore = true;\n    this.renderCount = DEFAULT_PAGINATION_LIMIT;\n    this.isFetching = false;\n    this.isFetchingMore = false;\n  };\n\n  fetchResults = async () => {\n    if (!this.props.fetch) {\n      return;\n    }\n    this.isFetching = true;\n    const counter = ++this.fetchCounter;\n    const limit = DEFAULT_PAGINATION_LIMIT;\n\n    const results = await this.props.fetch({\n      limit,\n      offset: this.offset,\n      ...this.props.options,\n    });\n\n    if (results && (results.length === 0 || results.length < limit)) {\n      this.allowLoadMore = false;\n    } else {\n      this.offset += limit;\n    }\n\n    this.renderCount += limit;\n\n    // only the most recent fetch should end the loading state\n    if (counter >= this.fetchCounter) {\n      this.isFetching = false;\n      this.isFetchingMore = false;\n    }\n  };\n\n  @action\n  loadMoreResults = async () => {\n    // Don't paginate if there aren't more results or were currently fetching\n    if (!this.allowLoadMore || this.isFetching) {\n      return;\n    }\n    // If there are already cached results that we haven't yet rendered because\n    // of lazy rendering then show another page.\n    const leftToRender = (this.props.items?.length ?? 0) - this.renderCount;\n\n    if (leftToRender > 0) {\n      this.renderCount += DEFAULT_PAGINATION_LIMIT;\n    }\n\n    // If there are less than a pages results in the cache go ahead and fetch\n    // another page from the server\n    if (leftToRender <= DEFAULT_PAGINATION_LIMIT) {\n      this.isFetchingMore = true;\n      await this.fetchResults();\n    }\n  };\n\n  render() {\n    const {\n      items = [],\n      heading,\n      auth,\n      empty = null,\n      renderHeading,\n      onEscape,\n    } = this.props;\n\n    const showLoading =\n      this.isFetching &&\n      !this.isFetchingMore &&\n      (!items?.length || this.fetchCounter === 0);\n\n    if (showLoading) {\n      return (\n        this.props.loading || (\n          <DelayedMount>\n            <PlaceholderList count={5} />\n          </DelayedMount>\n        )\n      );\n    }\n\n    if (items?.length === 0) {\n      return empty;\n    }\n\n    return (\n      <>\n        {heading}\n        <ArrowKeyNavigation\n          aria-label={this.props[\"aria-label\"]}\n          onEscape={onEscape}\n        >\n          {(composite: CompositeStateReturn) => {\n            let previousHeading = \"\";\n            return items.slice(0, this.renderCount).map((item, index) => {\n              const children = this.props.renderItem(item, index, composite);\n\n              // If there is no renderHeading method passed then no date\n              // headings are rendered\n              if (!renderHeading) {\n                return children;\n              }\n\n              // Our models have standard date fields, updatedAt > createdAt.\n              // Get what a heading would look like for this item\n              const currentDate =\n                item.updatedAt || item.createdAt || previousHeading;\n              const currentHeading = dateToHeading(\n                currentDate,\n                this.props.t,\n                auth.user?.language\n              );\n\n              // If the heading is different to any previous heading then we\n              // should render it, otherwise the item can go under the previous\n              // heading\n              if (!previousHeading || currentHeading !== previousHeading) {\n                previousHeading = currentHeading;\n                return (\n                  <React.Fragment key={item.id}>\n                    {renderHeading(currentHeading)}\n                    {children}\n                  </React.Fragment>\n                );\n              }\n\n              return children;\n            });\n          }}\n        </ArrowKeyNavigation>\n        {this.allowLoadMore && (\n          <Waypoint key={this.renderCount} onEnter={this.loadMoreResults} />\n        )}\n      </>\n    );\n  }\n}\n\nexport const Component = PaginatedList;\n\nexport default withTranslation()(withStores(PaginatedList));\n","import {\n  isToday,\n  isYesterday,\n  differenceInCalendarWeeks,\n  differenceInCalendarMonths,\n  differenceInCalendarYears,\n  format as formatDate,\n} from \"date-fns\";\nimport { TFunction } from \"react-i18next\";\nimport { dateLocale } from \"~/utils/i18n\";\n\nexport function dateToHeading(\n  dateTime: string,\n  t: TFunction,\n  userLocale: string | null | undefined\n) {\n  const date = Date.parse(dateTime);\n  const now = new Date();\n  const locale = dateLocale(userLocale);\n\n  if (isToday(date)) {\n    return t(\"Today\");\n  }\n\n  if (isYesterday(date)) {\n    return t(\"Yesterday\");\n  }\n\n  // If the current calendar week but not today or yesterday then return the day\n  // of the week as a string. We use the LocaleTime component here to gain\n  // async bundle loading of languages\n  const weekDiff = differenceInCalendarWeeks(now, date);\n\n  if (weekDiff === 0) {\n    return formatDate(Date.parse(dateTime), \"iiii\", {\n      locale,\n    });\n  }\n\n  if (weekDiff === 1) {\n    return t(\"Last week\");\n  }\n\n  const monthDiff = differenceInCalendarMonths(now, date);\n\n  if (monthDiff === 0) {\n    return t(\"This month\");\n  }\n\n  if (monthDiff === 1) {\n    return t(\"Last month\");\n  }\n\n  const yearDiff = differenceInCalendarYears(now, date);\n\n  if (yearDiff === 0) {\n    return t(\"This year\");\n  }\n\n  // If older than the current calendar year then just print the year e.g 2020\n  return formatDate(Date.parse(dateTime), \"y\", {\n    locale,\n  });\n}\n","import * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { Portal } from \"react-portal\";\nimport { Menu } from \"reakit/Menu\";\nimport styled, { DefaultTheme } from \"styled-components\";\nimport breakpoint from \"styled-components-breakpoint\";\nimport { depths } from \"@shared/styles\";\nimport Scrollable from \"~/components/Scrollable\";\nimport useMenuContext from \"~/hooks/useMenuContext\";\nimport useMenuHeight from \"~/hooks/useMenuHeight\";\nimport usePrevious from \"~/hooks/usePrevious\";\nimport useStores from \"~/hooks/useStores\";\nimport useUnmount from \"~/hooks/useUnmount\";\nimport {\n  fadeIn,\n  fadeAndSlideUp,\n  fadeAndSlideDown,\n  mobileContextMenu,\n} from \"~/styles/animations\";\n\nexport type Placement =\n  | \"auto-start\"\n  | \"auto\"\n  | \"auto-end\"\n  | \"top-start\"\n  | \"top\"\n  | \"top-end\"\n  | \"right-start\"\n  | \"right\"\n  | \"right-end\"\n  | \"bottom-end\"\n  | \"bottom\"\n  | \"bottom-start\"\n  | \"left-end\"\n  | \"left\"\n  | \"left-start\";\n\ntype Props = {\n  \"aria-label\": string;\n  visible?: boolean;\n  placement?: Placement;\n  animating?: boolean;\n  unstable_disclosureRef?: React.RefObject<HTMLElement | null>;\n  onOpen?: () => void;\n  onClose?: () => void;\n  hide?: () => void;\n};\n\nconst ContextMenu: React.FC<Props> = ({\n  children,\n  onOpen,\n  onClose,\n  ...rest\n}) => {\n  const previousVisible = usePrevious(rest.visible);\n  const maxHeight = useMenuHeight(rest.visible, rest.unstable_disclosureRef);\n  const backgroundRef = React.useRef<HTMLDivElement>(null);\n  const { ui } = useStores();\n  const { t } = useTranslation();\n  const { setIsMenuOpen } = useMenuContext();\n\n  useUnmount(() => {\n    setIsMenuOpen(false);\n  });\n\n  React.useEffect(() => {\n    if (rest.visible && !previousVisible) {\n      if (onOpen) {\n        onOpen();\n      }\n      if (rest[\"aria-label\"] !== t(\"Submenu\")) {\n        setIsMenuOpen(true);\n      }\n    }\n\n    if (!rest.visible && previousVisible) {\n      if (onClose) {\n        onClose();\n      }\n      if (rest[\"aria-label\"] !== t(\"Submenu\")) {\n        setIsMenuOpen(false);\n      }\n    }\n  }, [\n    onOpen,\n    onClose,\n    previousVisible,\n    rest.visible,\n    ui.sidebarCollapsed,\n    setIsMenuOpen,\n    rest,\n    t,\n  ]);\n\n  // Perf win  don't render anything until the menu has been opened\n  if (!rest.visible && !previousVisible) {\n    return null;\n  }\n\n  // sets the menu height based on the available space between the disclosure/\n  // trigger and the bottom of the window\n  return (\n    <>\n      <Menu hideOnClickOutside preventBodyScroll {...rest}>\n        {(props) => {\n          // kind of hacky, but this is an effective way of telling which way\n          // the menu will _actually_ be placed when taking into account screen\n          // positioning.\n          const topAnchor = props.style?.top === \"0\";\n          // @ts-expect-error ts-migrate(2339) FIXME: Property 'placement' does not exist on type 'Extra... Remove this comment to see the full error message\n          const rightAnchor = props.placement === \"bottom-end\";\n\n          return (\n            <Position {...props}>\n              <Background\n                dir=\"auto\"\n                topAnchor={topAnchor}\n                rightAnchor={rightAnchor}\n                ref={backgroundRef}\n                hiddenScrollbars\n                style={\n                  maxHeight && topAnchor\n                    ? {\n                        maxHeight,\n                      }\n                    : undefined\n                }\n              >\n                {rest.visible || rest.animating ? children : null}\n              </Background>\n            </Position>\n          );\n        }}\n      </Menu>\n      {(rest.visible || rest.animating) && (\n        <Portal>\n          <Backdrop onClick={rest.hide} />\n        </Portal>\n      )}\n    </>\n  );\n};\n\nexport default ContextMenu;\n\nexport const Backdrop = styled.div`\n  animation: ${fadeIn} 200ms ease-in-out;\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: ${(props) => props.theme.backdrop};\n  z-index: ${depths.menu - 1};\n\n  ${breakpoint(\"tablet\")`\n    display: none;\n  `};\n`;\n\nexport const Position = styled.div`\n  position: absolute;\n  z-index: ${depths.menu};\n\n  /*\n   * overrides make mobile-first coding style challenging\n   * so we explicitly define mobile breakpoint here\n   */\n  ${breakpoint(\"mobile\", \"tablet\")`\n    position: fixed !important;\n    transform: none !important;\n    top: auto !important;\n    right: 8px !important;\n    bottom: 16px !important;\n    left: 8px !important;\n  `};\n`;\n\ntype BackgroundProps = {\n  topAnchor?: boolean;\n  rightAnchor?: boolean;\n  theme: DefaultTheme;\n};\n\nexport const Background = styled(Scrollable)<BackgroundProps>`\n  animation: ${mobileContextMenu} 200ms ease;\n  transform-origin: 50% 100%;\n  max-width: 100%;\n  background: ${(props) => props.theme.menuBackground};\n  border-radius: 6px;\n  padding: 6px 0;\n  min-width: 180px;\n  min-height: 44px;\n  max-height: 75vh;\n  pointer-events: all;\n  font-weight: normal;\n\n  @media print {\n    display: none;\n  }\n\n  ${breakpoint(\"tablet\")`\n    animation: ${(props: BackgroundProps) =>\n      props.topAnchor ? fadeAndSlideDown : fadeAndSlideUp} 200ms ease;\n    transform-origin: ${(props: BackgroundProps) =>\n      props.rightAnchor ? \"75%\" : \"25%\"} 0;\n    max-width: 276px;\n    background: ${(props: BackgroundProps) => props.theme.menuBackground};\n    box-shadow: ${(props: BackgroundProps) => props.theme.menuShadow};\n  `};\n`;\n","import * as React from \"react\";\nimport styled from \"styled-components\";\nimport { LabelText } from \"~/components/Input\";\nimport Text from \"~/components/Text\";\n\ntype Props = React.HTMLAttributes<HTMLInputElement> & {\n  width?: number;\n  height?: number;\n  label?: string;\n  name?: string;\n  note?: React.ReactNode;\n  checked?: boolean;\n  disabled?: boolean;\n  onChange: (event: React.ChangeEvent<HTMLInputElement>) => unknown;\n  id?: string;\n};\n\nfunction Switch({\n  width = 32,\n  height = 18,\n  label,\n  disabled,\n  className,\n  note,\n  ...props\n}: Props) {\n  const component = (\n    <Input\n      width={width}\n      height={height}\n      className={label ? undefined : className}\n    >\n      <HiddenInput\n        type=\"checkbox\"\n        width={width}\n        height={height}\n        disabled={disabled}\n        {...props}\n      />\n      <Slider width={width} height={height} />\n    </Input>\n  );\n\n  if (label) {\n    return (\n      <Wrapper>\n        <Label disabled={disabled} htmlFor={props.id} className={className}>\n          {component}\n          <InlineLabelText>{label}</InlineLabelText>\n        </Label>\n        {note && (\n          <Text type=\"secondary\" size=\"small\">\n            {note}\n          </Text>\n        )}\n      </Wrapper>\n    );\n  }\n\n  return component;\n}\n\nconst Wrapper = styled.div`\n  padding-bottom: 8px;\n`;\n\nconst InlineLabelText = styled(LabelText)`\n  padding-bottom: 0;\n`;\n\nconst Label = styled.label<{ disabled?: boolean }>`\n  display: flex;\n  align-items: center;\n  user-select: none;\n  ${(props) => (props.disabled ? `opacity: 0.75;` : \"\")}\n`;\n\nconst Input = styled.label<{ width: number; height: number }>`\n  position: relative;\n  display: inline-block;\n  width: ${(props) => props.width}px;\n  height: ${(props) => props.height}px;\n  margin-right: 8px;\n  flex-shrink: 0;\n`;\n\nconst Slider = styled.span<{ width: number; height: number }>`\n  position: absolute;\n  cursor: pointer;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: ${(props) => props.theme.slate};\n  -webkit-transition: 0.4s;\n  transition: 0.4s;\n  border-radius: ${(props) => props.height}px;\n\n  &:before {\n    position: absolute;\n    content: \"\";\n    height: ${(props) => props.height - 8}px;\n    width: ${(props) => props.height - 8}px;\n    left: 4px;\n    bottom: 4px;\n    background-color: white;\n    border-radius: 50%;\n    -webkit-transition: 0.4s;\n    transition: 0.4s;\n  }\n`;\n\nconst HiddenInput = styled.input<{ width: number; height: number }>`\n  opacity: 0;\n  width: 0;\n  height: 0;\n  visibility: hidden;\n\n  &:disabled + ${Slider} {\n    opacity: 0.75;\n    cursor: default;\n  }\n\n  &:checked + ${Slider} {\n    background-color: ${(props) => props.theme.primary};\n  }\n\n  &:focus + ${Slider} {\n    box-shadow: 0 0 1px ${(props) => props.theme.primary};\n  }\n\n  &:checked + ${Slider}:before {\n    transform: translateX(${(props) => props.width - props.height}px);\n  }\n`;\n\nexport default Switch;\n","import * as React from \"react\";\nimport styled from \"styled-components\";\nimport DelayedMount from \"~/components/DelayedMount\";\nimport Fade from \"~/components/Fade\";\nimport Flex from \"~/components/Flex\";\nimport PlaceholderText from \"~/components/PlaceholderText\";\n\nexport default function PlaceholderDocument({\n  includeTitle,\n  delay,\n}: {\n  includeTitle?: boolean;\n  delay?: number;\n}) {\n  const content = (\n    <>\n      <PlaceholderText delay={0.2} />\n      <PlaceholderText delay={0.4} />\n      <PlaceholderText delay={0.6} />\n    </>\n  );\n\n  if (includeTitle === false) {\n    return (\n      <DelayedMount delay={delay}>\n        <Fade>\n          <Flex column auto>\n            {content}\n          </Flex>\n        </Fade>\n      </DelayedMount>\n    );\n  }\n\n  return (\n    <DelayedMount delay={delay}>\n      <Wrapper>\n        <Fade>\n          <Flex column auto>\n            <PlaceholderText height={34} maxWidth={70} />\n            <PlaceholderText delay={0.2} maxWidth={40} />\n            <br />\n\n            {content}\n          </Flex>\n        </Fade>\n      </Wrapper>\n    </DelayedMount>\n  );\n}\n\nconst Wrapper = styled(Fade)`\n  display: block;\n  margin: 40px 0;\n`;\n","import { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport styled from \"styled-components\";\nimport Flex from \"~/components/Flex\";\n\ntype Props = {\n  label: React.ReactNode | string;\n};\n\nconst Labeled: React.FC<Props> = ({ label, children, ...props }) => (\n  <Flex column {...props}>\n    <Label>{label}</Label>\n    {children}\n  </Flex>\n);\n\nexport const Label = styled(Flex)`\n  font-weight: 500;\n  padding-bottom: 4px;\n  display: inline-block;\n  color: ${(props) => props.theme.text};\n`;\n\nexport default observer(Labeled);\n","import { noop } from \"lodash\";\nimport React from \"react\";\n\ntype MenuContextType = {\n  isMenuOpen: boolean;\n  setIsMenuOpen: React.Dispatch<React.SetStateAction<boolean>>;\n};\n\nconst MenuContext = React.createContext<MenuContextType | null>(null);\n\nexport const MenuProvider: React.FC = ({ children }) => {\n  const [isMenuOpen, setIsMenuOpen] = React.useState(false);\n  const memoized = React.useMemo(\n    () => ({\n      isMenuOpen,\n      setIsMenuOpen,\n    }),\n    [isMenuOpen, setIsMenuOpen]\n  );\n\n  return (\n    <MenuContext.Provider value={memoized}>{children}</MenuContext.Provider>\n  );\n};\n\nconst useMenuContext: () => MenuContextType = () => {\n  const value = React.useContext(MenuContext);\n  return value ? value : { isMenuOpen: false, setIsMenuOpen: noop };\n};\n\nexport default useMenuContext;\n","import { throttle } from \"lodash\";\nimport { observer } from \"mobx-react\";\nimport { MenuIcon } from \"outline-icons\";\nimport { transparentize } from \"polished\";\nimport * as React from \"react\";\nimport styled from \"styled-components\";\nimport breakpoint from \"styled-components-breakpoint\";\nimport { depths } from \"@shared/styles\";\nimport Button from \"~/components/Button\";\nimport Fade from \"~/components/Fade\";\nimport Flex from \"~/components/Flex\";\nimport useEventListener from \"~/hooks/useEventListener\";\nimport useMobile from \"~/hooks/useMobile\";\nimport useStores from \"~/hooks/useStores\";\nimport { supportsPassiveListener } from \"~/utils/browser\";\n\ntype Props = {\n  breadcrumb?: React.ReactNode;\n  title: React.ReactNode;\n  actions?: React.ReactNode;\n  hasSidebar?: boolean;\n};\n\nfunction Header({ breadcrumb, title, actions, hasSidebar }: Props) {\n  const { ui } = useStores();\n  const isMobile = useMobile();\n\n  const hasMobileSidebar = hasSidebar && isMobile;\n\n  const passThrough = !actions && !breadcrumb && !title;\n\n  const [isScrolled, setScrolled] = React.useState(false);\n  const handleScroll = React.useMemo(\n    () => throttle(() => setScrolled(window.scrollY > 75), 50),\n    []\n  );\n\n  useEventListener(\n    \"scroll\",\n    handleScroll,\n    window,\n    supportsPassiveListener ? { passive: true } : { capture: false }\n  );\n\n  const handleClickTitle = React.useCallback(() => {\n    window.scrollTo({\n      top: 0,\n      behavior: \"smooth\",\n    });\n  }, []);\n\n  return (\n    <Wrapper align=\"center\" shrink={false} $passThrough={passThrough}>\n      {breadcrumb || hasMobileSidebar ? (\n        <Breadcrumbs>\n          {hasMobileSidebar && (\n            <MobileMenuButton\n              onClick={ui.toggleMobileSidebar}\n              icon={<MenuIcon />}\n              iconColor=\"currentColor\"\n              neutral\n            />\n          )}\n          {breadcrumb}\n        </Breadcrumbs>\n      ) : null}\n\n      {isScrolled ? (\n        <Title onClick={handleClickTitle}>\n          <Fade>{title}</Fade>\n        </Title>\n      ) : (\n        <div />\n      )}\n      <Actions align=\"center\" justify=\"flex-end\">\n        {actions}\n      </Actions>\n    </Wrapper>\n  );\n}\n\nconst Breadcrumbs = styled(\"div\")`\n  flex-grow: 1;\n  flex-basis: 0;\n  align-items: center;\n  padding-right: 8px;\n  display: flex;\n`;\n\nconst Actions = styled(Flex)`\n  flex-grow: 1;\n  flex-basis: 0;\n  min-width: auto;\n  padding-left: 8px;\n\n  ${breakpoint(\"tablet\")`\n    position: unset;\n  `};\n`;\n\nconst Wrapper = styled(Flex)<{ $passThrough?: boolean }>`\n  top: 0;\n  z-index: ${depths.header};\n  position: sticky;\n  background: ${(props) => props.theme.background};\n\n  ${(props) =>\n    props.$passThrough\n      ? `\n      background: transparent;\n      pointer-events: none;\n      `\n      : `\n      background: ${transparentize(0.2, props.theme.background)};\n      backdrop-filter: blur(20px);\n      `};\n\n  padding: 12px;\n  transition: all 100ms ease-out;\n  transform: translate3d(0, 0, 0);\n  min-height: 64px;\n  justify-content: flex-start;\n\n  @supports (backdrop-filter: blur(20px)) {\n    backdrop-filter: blur(20px);\n    background: ${(props) => transparentize(0.2, props.theme.background)};\n  }\n\n  @media print {\n    display: none;\n  }\n\n  ${breakpoint(\"tablet\")`\n    padding: 16px;\n    justify-content: center;\n  `};\n`;\n\nconst Title = styled(\"div\")`\n  display: none;\n  font-size: 16px;\n  font-weight: 600;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n  cursor: pointer;\n  min-width: 0;\n\n  ${breakpoint(\"tablet\")`\n    padding-left: 0;\n    display: block;\n  `};\n\n  svg {\n    vertical-align: bottom;\n  }\n\n  @media (display-mode: standalone) {\n    overflow: hidden;\n    flex-grow: 0 !important;\n  }\n`;\n\nconst MobileMenuButton = styled(Button)`\n  margin-right: 8px;\n  pointer-events: auto;\n\n  @media print {\n    display: none;\n  }\n`;\n\nexport default observer(Header);\n","import { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport useStores from \"~/hooks/useStores\";\n\nfunction LoadingIndicator() {\n  const { ui } = useStores();\n\n  React.useEffect(() => {\n    ui.enableProgressBar();\n    return () => ui.disableProgressBar();\n  }, [ui]);\n\n  return null;\n}\n\nexport default observer(LoadingIndicator);\n","import * as React from \"react\";\nimport styled, { keyframes } from \"styled-components\";\nimport { depths } from \"@shared/styles\";\n\nconst LoadingIndicatorBar = () => {\n  return (\n    <Container>\n      <Loader />\n    </Container>\n  );\n};\n\nconst loadingFrame = keyframes`\n  from { margin-left: -100%; }\n  to { margin-left: 100%; }\n`;\n\nconst Container = styled.div`\n  position: fixed;\n  top: 0;\n  z-index: ${depths.loadingIndicatorBar};\n  width: 100%;\n  animation: ${loadingFrame} 4s ease-in-out infinite;\n  animation-delay: 250ms;\n  margin-left: -100%;\n`;\n\nconst Loader = styled.div`\n  width: 100%;\n  height: 2px;\n  background-color: ${(props) => props.theme.primary};\n`;\n\nexport default LoadingIndicatorBar;\n","import LoadingIndicator from \"./LoadingIndicator\";\nimport LoadingIndicatorBar from \"./LoadingIndicatorBar\";\n\nexport default LoadingIndicator;\n\nexport { LoadingIndicatorBar };\n","import { CheckmarkIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport { MenuItem as BaseMenuItem } from \"reakit/Menu\";\nimport styled, { css } from \"styled-components\";\nimport breakpoint from \"styled-components-breakpoint\";\nimport MenuIconWrapper from \"../MenuIconWrapper\";\n\ntype Props = {\n  onClick?: (event: React.SyntheticEvent) => void | Promise<void>;\n  selected?: boolean;\n  disabled?: boolean;\n  dangerous?: boolean;\n  to?: string;\n  href?: string;\n  target?: \"_blank\";\n  as?: string | React.ComponentType<any>;\n  hide?: () => void;\n  level?: number;\n  icon?: React.ReactElement;\n};\n\nconst MenuItem: React.FC<Props> = ({\n  onClick,\n  children,\n  selected,\n  disabled,\n  as,\n  hide,\n  icon,\n  ...rest\n}) => {\n  const handleClick = React.useCallback(\n    (ev) => {\n      if (onClick) {\n        ev.preventDefault();\n        ev.stopPropagation();\n        onClick(ev);\n      }\n\n      if (hide) {\n        hide();\n      }\n    },\n    [onClick, hide]\n  );\n\n  // Preventing default mousedown otherwise menu items do not work in Firefox,\n  // which triggers the hideOnClickOutside handler first via mousedown  hiding\n  // and un-rendering the menu contents.\n  const handleMouseDown = React.useCallback((ev) => {\n    ev.preventDefault();\n    ev.stopPropagation();\n  }, []);\n\n  return (\n    <BaseMenuItem\n      onClick={disabled ? undefined : onClick}\n      disabled={disabled}\n      hide={hide}\n      {...rest}\n    >\n      {(props) => (\n        <MenuAnchor\n          {...props}\n          $toggleable={selected !== undefined}\n          as={onClick ? \"button\" : as}\n          onClick={handleClick}\n          onMouseDown={handleMouseDown}\n        >\n          {selected !== undefined && (\n            <>\n              {selected ? <CheckmarkIcon color=\"currentColor\" /> : <Spacer />}\n              &nbsp;\n            </>\n          )}\n          {icon && (\n            <MenuIconWrapper>\n              {React.cloneElement(icon, { color: \"currentColor\" })}\n            </MenuIconWrapper>\n          )}\n          {children}\n        </MenuAnchor>\n      )}\n    </BaseMenuItem>\n  );\n};\n\nconst Spacer = styled.svg`\n  width: 24px;\n  height: 24px;\n  flex-shrink: 0;\n`;\n\ntype MenuAnchorProps = {\n  level?: number;\n  disabled?: boolean;\n  dangerous?: boolean;\n  disclosure?: boolean;\n};\n\nexport const MenuAnchorCSS = css<MenuAnchorProps>`\n  display: flex;\n  margin: 0;\n  border: 0;\n  padding: 12px;\n  padding-left: ${(props) => 12 + (props.level || 0) * 10}px;\n  width: 100%;\n  min-height: 32px;\n  background: none;\n  color: ${(props) =>\n    props.disabled ? props.theme.textTertiary : props.theme.textSecondary};\n  justify-content: left;\n  align-items: center;\n  font-size: 16px;\n  cursor: default;\n  user-select: none;\n  white-space: nowrap;\n  position: relative;\n\n  svg:not(:last-child) {\n    margin-right: 4px;\n  }\n\n  svg {\n    flex-shrink: 0;\n    opacity: ${(props) => (props.disabled ? \".5\" : 1)};\n  }\n\n  ${(props) =>\n    props.disabled\n      ? \"pointer-events: none;\"\n      : `\n\n  @media (hover: hover) {\n    &:hover,\n    &:focus,\n    &.focus-visible {\n      color: ${props.theme.white};\n      background: ${props.dangerous ? props.theme.danger : props.theme.primary};\n      box-shadow: none;\n      cursor: pointer;\n\n      svg {\n        fill: ${props.theme.white};\n      }\n    }\n  }\n  `};\n\n  ${breakpoint(\"tablet\")`\n    padding: 4px 12px;\n    padding-right: ${(props: MenuAnchorProps) =>\n      props.disclosure ? 32 : 12}px;\n    font-size: 14px;\n  `};\n`;\n\nexport const MenuAnchor = styled.a`\n  ${MenuAnchorCSS}\n`;\n\nexport default MenuItem;\n","import React from \"react\";\nimport styled, { useTheme } from \"styled-components\";\n\nconst cleanPercentage = (percentage: number) => {\n  const tooLow = !Number.isFinite(+percentage) || percentage < 0;\n  const tooHigh = percentage > 100;\n  return tooLow ? 0 : tooHigh ? 100 : +percentage;\n};\n\nconst Circle = ({\n  color,\n  percentage,\n  offset,\n}: {\n  color: string;\n  percentage?: number;\n  offset: number;\n}) => {\n  const radius = offset * 0.7;\n  const circumference = 2 * Math.PI * radius;\n  let strokePercentage;\n\n  if (percentage) {\n    // because the circle is so small, anything greater than 85% appears like 100%\n    percentage = percentage > 85 && percentage < 100 ? 85 : percentage;\n    strokePercentage = percentage\n      ? ((100 - percentage) * circumference) / 100\n      : 0;\n  }\n\n  return (\n    <circle\n      r={radius}\n      cx={offset}\n      cy={offset}\n      fill=\"none\"\n      stroke={strokePercentage !== circumference ? color : \"\"}\n      strokeWidth={2.5}\n      strokeDasharray={circumference}\n      strokeDashoffset={percentage ? strokePercentage : 0}\n      strokeLinecap=\"round\"\n      style={{\n        transition: \"stroke-dashoffset 0.6s ease 0s\",\n      }}\n    ></circle>\n  );\n};\n\nconst CircularProgressBar = ({\n  percentage,\n  size = 16,\n}: {\n  percentage: number;\n  size?: number;\n}) => {\n  const theme = useTheme();\n  percentage = cleanPercentage(percentage);\n  const offset = Math.floor(size / 2);\n\n  return (\n    <SVG width={size} height={size}>\n      <g transform={`rotate(-90 ${offset} ${offset})`}>\n        <Circle color={theme.progressBarBackground} offset={offset} />\n        {percentage > 0 && (\n          <Circle\n            color={theme.primary}\n            percentage={percentage}\n            offset={offset}\n          />\n        )}\n      </g>\n    </SVG>\n  );\n};\n\nconst SVG = styled.svg`\n  flex-shrink: 0;\n`;\n\nexport default CircularProgressBar;\n","import { observer } from \"mobx-react\";\nimport { DoneIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport { useTranslation, TFunction } from \"react-i18next\";\nimport styled, { useTheme } from \"styled-components\";\nimport Document from \"~/models/Document\";\nimport CircularProgressBar from \"~/components/CircularProgressBar\";\nimport usePrevious from \"~/hooks/usePrevious\";\nimport { bounceIn } from \"~/styles/animations\";\n\ntype Props = {\n  document: Document;\n};\n\nfunction getMessage(t: TFunction, total: number, completed: number): string {\n  if (completed === 0) {\n    return t(`{{ total }} task`, {\n      total,\n      count: total,\n    });\n  } else if (completed === total) {\n    return t(`{{ completed }} task done`, {\n      completed,\n      count: completed,\n    });\n  } else {\n    return t(`{{ completed }} of {{ total }} tasks`, {\n      total,\n      completed,\n    });\n  }\n}\n\nfunction DocumentTasks({ document }: Props) {\n  const { tasks, tasksPercentage } = document;\n  const { t } = useTranslation();\n  const theme = useTheme();\n  const { completed, total } = tasks;\n  const done = completed === total;\n  const previousDone = usePrevious(done);\n  const message = getMessage(t, total, completed);\n  return (\n    <>\n      {completed === total ? (\n        <Done\n          color={theme.primary}\n          size={20}\n          $animated={done && previousDone === false}\n        />\n      ) : (\n        <CircularProgressBar percentage={tasksPercentage} />\n      )}\n      &nbsp;{message}\n    </>\n  );\n}\n\nconst Done = styled(DoneIcon)<{ $animated: boolean }>`\n  margin: -1px;\n  animation: ${(props) => (props.$animated ? bounceIn : \"none\")} 600ms;\n  transform-origin: center center;\n`;\n\nexport default observer(DocumentTasks);\n","import { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { Link } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport Document from \"~/models/Document\";\nimport DocumentBreadcrumb from \"~/components/DocumentBreadcrumb\";\nimport DocumentTasks from \"~/components/DocumentTasks\";\nimport Flex from \"~/components/Flex\";\nimport Time from \"~/components/Time\";\nimport useCurrentUser from \"~/hooks/useCurrentUser\";\nimport useStores from \"~/hooks/useStores\";\n\nconst Container = styled(Flex)<{ rtl?: boolean }>`\n  justify-content: ${(props) => (props.rtl ? \"flex-end\" : \"flex-start\")};\n  color: ${(props) => props.theme.textTertiary};\n  font-size: 13px;\n  white-space: nowrap;\n  overflow: hidden;\n  min-width: 0;\n`;\n\nconst Viewed = styled.span`\n  text-overflow: ellipsis;\n  overflow: hidden;\n`;\n\nconst Modified = styled.span<{ highlight?: boolean }>`\n  font-weight: ${(props) => (props.highlight ? \"600\" : \"400\")};\n`;\n\ntype Props = {\n  showCollection?: boolean;\n  showPublished?: boolean;\n  showLastViewed?: boolean;\n  showParentDocuments?: boolean;\n  document: Document;\n  to?: string;\n};\n\nconst DocumentMeta: React.FC<Props> = ({\n  showPublished,\n  showCollection,\n  showLastViewed,\n  showParentDocuments,\n  document,\n  children,\n  to,\n  ...rest\n}) => {\n  const { t } = useTranslation();\n  const { collections } = useStores();\n  const user = useCurrentUser();\n  const {\n    modifiedSinceViewed,\n    updatedAt,\n    updatedBy,\n    createdAt,\n    publishedAt,\n    archivedAt,\n    deletedAt,\n    isDraft,\n    lastViewedAt,\n    isTasks,\n    isTemplate,\n  } = document;\n\n  // Prevent meta information from displaying if updatedBy is not available.\n  // Currently the situation where this is true is rendering share links.\n  if (!updatedBy) {\n    return null;\n  }\n\n  const collection = collections.get(document.collectionId);\n  const lastUpdatedByCurrentUser = user.id === updatedBy.id;\n  const userName = updatedBy.name;\n  let content;\n\n  if (deletedAt) {\n    content = (\n      <span>\n        {lastUpdatedByCurrentUser\n          ? t(\"You deleted\")\n          : t(\"{{ userName }} deleted\", { userName })}{\" \"}\n        <Time dateTime={deletedAt} addSuffix />\n      </span>\n    );\n  } else if (archivedAt) {\n    content = (\n      <span>\n        {lastUpdatedByCurrentUser\n          ? t(\"You archived\")\n          : t(\"{{ userName }} archived\", { userName })}{\" \"}\n        <Time dateTime={archivedAt} addSuffix />\n      </span>\n    );\n  } else if (createdAt === updatedAt) {\n    content = (\n      <span>\n        {lastUpdatedByCurrentUser\n          ? t(\"You created\")\n          : t(\"{{ userName }} created\", { userName })}{\" \"}\n        <Time dateTime={updatedAt} addSuffix />\n      </span>\n    );\n  } else if (publishedAt && (publishedAt === updatedAt || showPublished)) {\n    content = (\n      <span>\n        {lastUpdatedByCurrentUser\n          ? t(\"You published\")\n          : t(\"{{ userName }} published\", { userName })}{\" \"}\n        <Time dateTime={publishedAt} addSuffix />\n      </span>\n    );\n  } else if (isDraft) {\n    content = (\n      <span>\n        {lastUpdatedByCurrentUser\n          ? t(\"You saved\")\n          : t(\"{{ userName }} saved\", { userName })}{\" \"}\n        <Time dateTime={updatedAt} addSuffix />\n      </span>\n    );\n  } else {\n    content = (\n      <Modified highlight={modifiedSinceViewed && !lastUpdatedByCurrentUser}>\n        {lastUpdatedByCurrentUser\n          ? t(\"You updated\")\n          : t(\"{{ userName }} updated\", { userName })}{\" \"}\n        <Time dateTime={updatedAt} addSuffix />\n      </Modified>\n    );\n  }\n\n  const nestedDocumentsCount = collection\n    ? collection.getDocumentChildren(document.id).length\n    : 0;\n  const canShowProgressBar = isTasks && !isTemplate;\n\n  const timeSinceNow = () => {\n    if (isDraft || !showLastViewed) {\n      return null;\n    }\n\n    if (!lastViewedAt) {\n      if (lastUpdatedByCurrentUser) {\n        return null;\n      }\n      return (\n        <Viewed>\n          &nbsp;<Modified highlight>{t(\"Never viewed\")}</Modified>\n        </Viewed>\n      );\n    }\n\n    return (\n      <Viewed>\n        &nbsp;{t(\"Viewed\")} <Time dateTime={lastViewedAt} addSuffix shorten />\n      </Viewed>\n    );\n  };\n\n  return (\n    <Container align=\"center\" rtl={document.dir === \"rtl\"} {...rest} dir=\"ltr\">\n      {to ? <Link to={to}>{content}</Link> : content}\n      {showCollection && collection && (\n        <span>\n          &nbsp;{t(\"in\")}&nbsp;\n          <strong>\n            <DocumentBreadcrumb document={document} onlyText />\n          </strong>\n        </span>\n      )}\n      {showParentDocuments && nestedDocumentsCount > 0 && (\n        <span>\n          &nbsp; {nestedDocumentsCount}{\" \"}\n          {t(\"nested document\", {\n            count: nestedDocumentsCount,\n          })}\n        </span>\n      )}\n      &nbsp;{timeSinceNow()}\n      {canShowProgressBar && (\n        <>\n          &nbsp;&nbsp;\n          <DocumentTasks document={document} />\n        </>\n      )}\n      {children}\n    </Container>\n  );\n};\n\nexport default observer(DocumentMeta);\n","import { ExpandedIcon, MoreIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport styled from \"styled-components\";\nimport Flex from \"~/components/Flex\";\n\nexport type SidebarButtonProps = {\n  title: React.ReactNode;\n  image: React.ReactNode;\n  minHeight?: number;\n  rounded?: boolean;\n  showDisclosure?: boolean;\n  showMoreMenu?: boolean;\n  onClick: React.MouseEventHandler<HTMLButtonElement>;\n};\n\nconst SidebarButton = React.forwardRef<HTMLButtonElement, SidebarButtonProps>(\n  (\n    {\n      showDisclosure,\n      showMoreMenu,\n      image,\n      title,\n      minHeight = 0,\n      ...rest\n    }: SidebarButtonProps,\n    ref\n  ) => (\n    <Wrapper\n      justify=\"space-between\"\n      align=\"center\"\n      as=\"button\"\n      minHeight={minHeight}\n      {...rest}\n      ref={ref}\n    >\n      <Title gap={4} align=\"center\">\n        {image}\n        {title}\n      </Title>\n      {showDisclosure && <ExpandedIcon color=\"currentColor\" />}\n      {showMoreMenu && <MoreIcon color=\"currentColor\" />}\n    </Wrapper>\n  )\n);\n\nconst Title = styled(Flex)`\n  color: ${(props) => props.theme.text};\n  flex-shrink: 1;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n`;\n\nconst Wrapper = styled(Flex)<{ minHeight: number }>`\n  padding: 8px 4px;\n  font-size: 15px;\n  font-weight: 500;\n  border-radius: 4px;\n  margin: 8px;\n  color: ${(props) => props.theme.textTertiary};\n  border: 0;\n  background: none;\n  flex-shrink: 0;\n  min-height: ${(props) => props.minHeight}px;\n\n  -webkit-appearance: none;\n  text-decoration: none;\n  text-align: left;\n  overflow: hidden;\n  user-select: none;\n  cursor: pointer;\n\n  &:active,\n  &:hover,\n  &[aria-expanded=\"true\"] {\n    color: ${(props) => props.theme.sidebarText};\n    transition: background 100ms ease-in-out;\n    background: ${(props) => props.theme.sidebarActiveBackground};\n  }\n`;\n\nexport default SidebarButton;\n","import { formatDistanceToNow } from \"date-fns\";\nimport * as React from \"react\";\n\nconst LocaleTime = React.lazy(\n  () =>\n    import(\n      /* webpackChunkName: \"locale-time\" */\n      \"~/components/LocaleTime\"\n    )\n);\n\ntype Props = React.ComponentProps<typeof LocaleTime> & {\n  onClick?: () => void;\n};\n\nfunction Time({ onClick, ...props }: Props) {\n  let content = formatDistanceToNow(Date.parse(props.dateTime), {\n    addSuffix: props.addSuffix,\n  });\n\n  if (props.shorten) {\n    content = content\n      .replace(\"about\", \"\")\n      .replace(\"less than a minute ago\", \"just now\")\n      .replace(\"minute\", \"min\");\n  }\n\n  return (\n    <span onClick={onClick}>\n      <React.Suspense\n        fallback={\n          <time dateTime={props.dateTime}>{props.children || content}</time>\n        }\n      >\n        <LocaleTime tooltipDelay={250} {...props} />\n      </React.Suspense>\n    </span>\n  );\n}\n\nexport default Time;\n","import { escapeRegExp } from \"lodash\";\nimport * as React from \"react\";\nimport replace from \"string-replace-to-array\";\nimport styled from \"styled-components\";\n\ntype Props = React.HTMLAttributes<HTMLSpanElement> & {\n  highlight: (string | null | undefined) | RegExp;\n  processResult?: (tag: string) => string;\n  text: string | undefined;\n  caseSensitive?: boolean;\n};\n\nfunction Highlight({\n  highlight,\n  processResult,\n  caseSensitive,\n  text = \"\",\n  ...rest\n}: Props) {\n  let regex;\n  let index = 0;\n\n  if (highlight instanceof RegExp) {\n    regex = highlight;\n  } else {\n    regex = new RegExp(\n      escapeRegExp(highlight || \"\"),\n      caseSensitive ? \"g\" : \"gi\"\n    );\n  }\n\n  return (\n    <span {...rest}>\n      {highlight\n        ? replace(text, regex, (tag: string) => (\n            <Mark key={index++}>\n              {processResult ? processResult(tag) : tag}\n            </Mark>\n          ))\n        : text}\n    </span>\n  );\n}\n\nexport const Mark = styled.mark`\n  background: ${(props) => props.theme.searchHighlight};\n  border-radius: 2px;\n  padding: 0 2px;\n`;\n\nexport default Highlight;\n","import styled from \"styled-components\";\n\ntype Props = {\n  /* Set to true if displaying a single symbol character to disable monospace */\n  symbol?: boolean;\n};\n\nconst Key = styled.kbd<Props>`\n  display: inline-block;\n  padding: 4px 6px;\n  font-size: 11px;\n  font-family: ${(props) =>\n    props.symbol ? props.theme.fontFamily : props.theme.fontFamilyMono};\n  line-height: 10px;\n  color: ${(props) => props.theme.almostBlack};\n  vertical-align: middle;\n  background-color: ${(props) => props.theme.smokeLight};\n  border: solid 1px ${(props) => props.theme.slateLight};\n  border-bottom-color: ${(props) => props.theme.slate};\n  border-radius: 3px;\n  box-shadow: inset 0 -1px 0 ${(props) => props.theme.slate};\n`;\n\nexport default Key;\n","import { observer } from \"mobx-react\";\nimport { GoToIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport styled from \"styled-components\";\nimport { DocumentPath } from \"~/stores/CollectionsStore\";\nimport Collection from \"~/models/Collection\";\nimport Document from \"~/models/Document\";\nimport CollectionIcon from \"~/components/CollectionIcon\";\nimport Flex from \"~/components/Flex\";\n\ntype Props = {\n  result: DocumentPath;\n  document?: Document | null | undefined;\n  collection: Collection | null | undefined;\n  onSuccess?: () => void;\n  style?: React.CSSProperties;\n  ref?: (element: React.ElementRef<\"div\"> | null | undefined) => void;\n};\n\n@observer\nclass PathToDocument extends React.Component<Props> {\n  handleClick = async (ev: React.SyntheticEvent) => {\n    ev.preventDefault();\n    const { document, result, onSuccess } = this.props;\n    if (!document) {\n      return;\n    }\n\n    if (result.type === \"document\") {\n      await document.move(result.collectionId, result.id);\n    } else {\n      await document.move(result.collectionId);\n    }\n\n    if (onSuccess) {\n      onSuccess();\n    }\n  };\n\n  render() {\n    const { result, collection, document, ref, style } = this.props;\n    const Component = document ? ResultWrapperLink : ResultWrapper;\n    if (!result) {\n      return <div />;\n    }\n\n    return (\n      // @ts-expect-error ts-migrate(2604) FIXME: JSX element type 'Component' does not have any con... Remove this comment to see the full error message\n      <Component\n        ref={ref}\n        onClick={this.handleClick}\n        href=\"\"\n        style={style}\n        role=\"option\"\n        selectable\n      >\n        {collection && <CollectionIcon collection={collection} />}\n        &nbsp;\n        {result.path\n          .map((doc) => <Title key={doc.id}>{doc.title}</Title>)\n          // @ts-expect-error ts-migrate(2739) FIXME: Type 'Element[]' is missing the following properti... Remove this comment to see the full error message\n          .reduce((prev, curr) => [prev, <StyledGoToIcon />, curr])}\n        {document && (\n          <DocumentTitle>\n            {\" \"}\n            <StyledGoToIcon /> <Title>{document.title}</Title>\n          </DocumentTitle>\n        )}\n      </Component>\n    );\n  }\n}\n\nconst DocumentTitle = styled(Flex)``;\n\nconst Title = styled.span`\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n`;\n\nconst StyledGoToIcon = styled(GoToIcon)`\n  fill: ${(props) => props.theme.divider};\n`;\n\nconst ResultWrapper = styled.div`\n  display: flex;\n  margin-bottom: 10px;\n  user-select: none;\n\n  color: ${(props) => props.theme.text};\n  cursor: default;\n\n  svg {\n    flex-shrink: 0;\n  }\n`;\n\nconst ResultWrapperLink = styled(ResultWrapper.withComponent(\"a\"))`\n  padding: 8px 4px;\n\n  ${DocumentTitle} {\n    display: none;\n  }\n\n  svg {\n    flex-shrink: 0;\n  }\n\n  &:hover,\n  &:active,\n  &:focus {\n    background: ${(props) => props.theme.listItemHoverBackground};\n    outline: none;\n\n    ${DocumentTitle} {\n      display: flex;\n    }\n  }\n`;\n\nexport default PathToDocument;\n","import FuzzySearch from \"fuzzy-search\";\nimport { last } from \"lodash\";\nimport { observer } from \"mobx-react\";\nimport { useMemo, useState } from \"react\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport AutoSizer from \"react-virtualized-auto-sizer\";\nimport { FixedSizeList as List } from \"react-window\";\nimport styled from \"styled-components\";\nimport { DocumentPath } from \"~/stores/CollectionsStore\";\nimport Document from \"~/models/Document\";\nimport Flex from \"~/components/Flex\";\nimport { Outline } from \"~/components/Input\";\nimport InputSearch from \"~/components/InputSearch\";\nimport Labeled from \"~/components/Labeled\";\nimport PathToDocument from \"~/components/PathToDocument\";\nimport useStores from \"~/hooks/useStores\";\nimport useToasts from \"~/hooks/useToasts\";\n\ntype Props = {\n  document: Document;\n  onRequestClose: () => void;\n};\n\nfunction DocumentMove({ document, onRequestClose }: Props) {\n  const [searchTerm, setSearchTerm] = useState<string>();\n  const { collections, documents } = useStores();\n  const { showToast } = useToasts();\n  const { t } = useTranslation();\n\n  const searchIndex = useMemo(() => {\n    const paths = collections.pathsToDocuments;\n\n    // Build index\n    const indexeableDocuments: DocumentPath[] = [];\n\n    paths.forEach((path) => {\n      const doc = documents.get(path.id);\n\n      if (!doc || !doc.isTemplate) {\n        indexeableDocuments.push(path);\n      }\n    });\n\n    return new FuzzySearch<DocumentPath>(indexeableDocuments, [\"title\"], {\n      caseSensitive: false,\n      sort: true,\n    });\n  }, [documents, collections.pathsToDocuments]);\n\n  const results = useMemo(() => {\n    const onlyShowCollections = document.isTemplate;\n    let results: DocumentPath[] = [];\n\n    if (collections.isLoaded) {\n      if (searchTerm) {\n        results = searchIndex.search(searchTerm);\n      } else {\n        results = searchIndex.haystack;\n      }\n    }\n\n    if (onlyShowCollections) {\n      results = results.filter((result) => result.type === \"collection\");\n    } else {\n      // Exclude root from search results if document is already at the root\n      if (!document.parentDocumentId) {\n        results = results.filter(\n          (result) => result.id !== document.collectionId\n        );\n      }\n\n      // Exclude document if on the path to result, or the same result\n      results = results.filter(\n        (result) =>\n          !result.path.map((doc) => doc.id).includes(document.id) &&\n          last(result.path.map((doc) => doc.id)) !== document.parentDocumentId\n      );\n    }\n\n    return results;\n  }, [document, collections, searchTerm, searchIndex]);\n\n  const handleSuccess = () => {\n    showToast(t(\"Document moved\"), {\n      type: \"info\",\n    });\n    onRequestClose();\n  };\n\n  const handleFilter = (ev: React.ChangeEvent<HTMLInputElement>) => {\n    setSearchTerm(ev.target.value);\n  };\n\n  const renderPathToCurrentDocument = () => {\n    const result = collections.getPathForDocument(document.id);\n\n    if (result) {\n      return (\n        <PathToDocument\n          result={result}\n          collection={collections.get(result.collectionId)}\n        />\n      );\n    }\n\n    return null;\n  };\n\n  const row = ({\n    index,\n    data,\n    style,\n  }: {\n    index: number;\n    data: DocumentPath[];\n    style: React.CSSProperties;\n  }) => {\n    const result = data[index];\n    return (\n      <PathToDocument\n        result={result}\n        document={document}\n        collection={collections.get(result.collectionId)}\n        onSuccess={handleSuccess}\n        style={style}\n      />\n    );\n  };\n\n  const data = results;\n\n  if (!document || !collections.isLoaded) {\n    return null;\n  }\n\n  return (\n    <Flex column>\n      <Section>\n        <Labeled label={t(\"Current location\")}>\n          {renderPathToCurrentDocument()}\n        </Labeled>\n      </Section>\n\n      <Section column>\n        <Labeled label={t(\"Choose a new location\")} />\n        <Input\n          type=\"search\"\n          onChange={handleFilter}\n          placeholder={`${t(\"Search collections & documents\")}`}\n          label={t(\"Choose a new location\")}\n          labelHidden\n          required\n          autoFocus\n        />\n        <Results>\n          <AutoSizer>\n            {({ width, height }: { width: number; height: number }) => (\n              <Flex role=\"listbox\" column>\n                <List\n                  key={data.length}\n                  width={width}\n                  height={height}\n                  itemData={data}\n                  itemCount={data.length}\n                  itemSize={40}\n                  itemKey={(index, data) => data[index].id}\n                >\n                  {row}\n                </List>\n              </Flex>\n            )}\n          </AutoSizer>\n        </Results>\n      </Section>\n    </Flex>\n  );\n}\n\nconst Input = styled(InputSearch)`\n  ${Outline} {\n    border-bottom-left-radius: 0;\n    border-bottom-right-radius: 0;\n    padding: 4px 0;\n  }\n`;\n\nconst Results = styled.div`\n  padding: 0;\n  height: 40vh;\n  border: 1px solid ${(props) => props.theme.inputBorder};\n  border-top: 0;\n  border-bottom-left-radius: 4px;\n  border-bottom-right-radius: 4px;\n`;\n\nconst Section = styled(Flex)`\n  margin-bottom: 24px;\n`;\n\nexport default observer(DocumentMove);\n","import styled from \"styled-components\";\n\nconst MenuIconWrapper = styled.span`\n  width: 24px;\n  height: 24px;\n  margin-right: 6px;\n  margin-left: -4px;\n  color: ${({ theme }) => theme.textSecondary};\n`;\n\nexport default MenuIconWrapper;\n","import {\n  BookmarkedIcon,\n  BicycleIcon,\n  CollectionIcon,\n  CoinsIcon,\n  AcademicCapIcon,\n  BeakerIcon,\n  BuildingBlocksIcon,\n  CameraIcon,\n  CloudIcon,\n  CodeIcon,\n  EditIcon,\n  EmailIcon,\n  EyeIcon,\n  GlobeIcon,\n  InfoIcon,\n  ImageIcon,\n  LeafIcon,\n  LightBulbIcon,\n  MathIcon,\n  MoonIcon,\n  NotepadIcon,\n  PadlockIcon,\n  PaletteIcon,\n  PromoteIcon,\n  QuestionMarkIcon,\n  SportIcon,\n  SunIcon,\n  TargetIcon,\n  TerminalIcon,\n  ToolsIcon,\n  VehicleIcon,\n  WarningIcon,\n  DatabaseIcon,\n  SmileyIcon,\n  LightningIcon,\n} from \"outline-icons\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { useMenuState, MenuButton, MenuItem } from \"reakit/Menu\";\nimport styled, { useTheme } from \"styled-components\";\nimport breakpoint from \"styled-components-breakpoint\";\nimport ContextMenu from \"~/components/ContextMenu\";\nimport Flex from \"~/components/Flex\";\nimport { LabelText } from \"~/components/Input\";\nimport NudeButton from \"~/components/NudeButton\";\nimport Text from \"~/components/Text\";\n\nconst style = {\n  width: 30,\n  height: 30,\n};\nconst TwitterPicker = React.lazy(\n  () =>\n    import(\n      /* webpackChunkName: \"twitter-picker\" */\n      \"react-color/lib/components/twitter/Twitter\"\n    )\n);\n\nexport const icons = {\n  academicCap: {\n    component: AcademicCapIcon,\n    keywords: \"learn teach lesson guide tutorial onboarding training\",\n  },\n  bicycle: {\n    component: BicycleIcon,\n    keywords: \"bicycle bike cycle\",\n  },\n  beaker: {\n    component: BeakerIcon,\n    keywords: \"lab research experiment test\",\n  },\n  buildingBlocks: {\n    component: BuildingBlocksIcon,\n    keywords: \"app blocks product prototype\",\n  },\n  bookmark: {\n    component: BookmarkedIcon,\n    keywords: \"bookmark\",\n  },\n  collection: {\n    component: CollectionIcon,\n    keywords: \"collection\",\n  },\n  coins: {\n    component: CoinsIcon,\n    keywords: \"coins money finance sales income revenue cash\",\n  },\n  camera: {\n    component: CameraIcon,\n    keywords: \"photo picture\",\n  },\n  cloud: {\n    component: CloudIcon,\n    keywords: \"cloud service aws infrastructure\",\n  },\n  code: {\n    component: CodeIcon,\n    keywords: \"developer api code development engineering programming\",\n  },\n  database: {\n    component: DatabaseIcon,\n    keywords: \"server ops database\",\n  },\n  email: {\n    component: EmailIcon,\n    keywords: \"email at\",\n  },\n  eye: {\n    component: EyeIcon,\n    keywords: \"eye view\",\n  },\n  globe: {\n    component: GlobeIcon,\n    keywords: \"world translate\",\n  },\n  info: {\n    component: InfoIcon,\n    keywords: \"info information\",\n  },\n  image: {\n    component: ImageIcon,\n    keywords: \"image photo picture\",\n  },\n  leaf: {\n    component: LeafIcon,\n    keywords: \"leaf plant outdoors nature ecosystem climate\",\n  },\n  lightbulb: {\n    component: LightBulbIcon,\n    keywords: \"lightbulb idea\",\n  },\n  lightning: {\n    component: LightningIcon,\n    keywords: \"lightning fast zap\",\n  },\n  math: {\n    component: MathIcon,\n    keywords: \"math formula\",\n  },\n  moon: {\n    component: MoonIcon,\n    keywords: \"night moon dark\",\n  },\n  notepad: {\n    component: NotepadIcon,\n    keywords: \"journal notepad write notes\",\n  },\n  padlock: {\n    component: PadlockIcon,\n    keywords: \"padlock private security authentication authorization auth\",\n  },\n  palette: {\n    component: PaletteIcon,\n    keywords: \"design palette art brand\",\n  },\n  pencil: {\n    component: EditIcon,\n    keywords: \"copy writing post blog\",\n  },\n  promote: {\n    component: PromoteIcon,\n    keywords: \"marketing promotion\",\n  },\n  question: {\n    component: QuestionMarkIcon,\n    keywords: \"question help support faq\",\n  },\n  sun: {\n    component: SunIcon,\n    keywords: \"day sun weather\",\n  },\n  sport: {\n    component: SportIcon,\n    keywords: \"sport outdoor racket game\",\n  },\n  smiley: {\n    component: SmileyIcon,\n    keywords: \"emoji smiley happy\",\n  },\n  target: {\n    component: TargetIcon,\n    keywords: \"target goal sales\",\n  },\n  terminal: {\n    component: TerminalIcon,\n    keywords: \"terminal code\",\n  },\n  tools: {\n    component: ToolsIcon,\n    keywords: \"tool settings\",\n  },\n  vehicle: {\n    component: VehicleIcon,\n    keywords: \"truck car travel transport\",\n  },\n  warning: {\n    component: WarningIcon,\n    keywords: \"warning alert error\",\n  },\n};\nconst colors = [\n  \"#4E5C6E\",\n  \"#0366d6\",\n  \"#9E5CF7\",\n  \"#FF825C\",\n  \"#FF5C80\",\n  \"#FFBE0B\",\n  \"#42DED1\",\n  \"#00D084\",\n  \"#FF4DFA\",\n  \"#2F362F\",\n];\ntype Props = {\n  onOpen?: () => void;\n  onClose?: () => void;\n  onChange: (color: string, icon: string) => void;\n  icon: string;\n  color: string;\n};\n\nfunction IconPicker({ onOpen, onClose, icon, color, onChange }: Props) {\n  const { t } = useTranslation();\n  const theme = useTheme();\n  const menu = useMenuState({\n    modal: true,\n    placement: \"bottom-end\",\n  });\n\n  return (\n    <Wrapper>\n      <Label>\n        <LabelText>{t(\"Icon\")}</LabelText>\n      </Label>\n      <MenuButton {...menu}>\n        {(props) => (\n          <Button aria-label={t(\"Show menu\")} {...props}>\n            <Icon\n              as={icons[icon || \"collection\"].component}\n              color={color}\n              size={30}\n            />\n          </Button>\n        )}\n      </MenuButton>\n      <ContextMenu\n        {...menu}\n        onOpen={onOpen}\n        onClose={onClose}\n        aria-label={t(\"Choose icon\")}\n      >\n        <Icons>\n          {Object.keys(icons).map((name) => {\n            return (\n              <MenuItem\n                key={name}\n                onClick={() => onChange(color, name)}\n                {...menu}\n              >\n                {(props) => (\n                  <IconButton style={style} {...props}>\n                    <Icon as={icons[name].component} color={color} size={30} />\n                  </IconButton>\n                )}\n              </MenuItem>\n            );\n          })}\n        </Icons>\n        <Flex>\n          <React.Suspense fallback={<Loading>{t(\"Loading\")}</Loading>}>\n            <ColorPicker\n              color={color}\n              onChange={(color) => onChange(color.hex, icon)}\n              colors={colors}\n              triangle=\"hide\"\n              styles={{\n                default: {\n                  hash: {\n                    color: theme.text,\n                    background: theme.inputBorder,\n                  },\n                  input: {\n                    color: theme.text,\n                    boxShadow: `inset 0 0 0 1px ${theme.inputBorder}`,\n                    background: \"transparent\",\n                  },\n                },\n              }}\n            />\n          </React.Suspense>\n        </Flex>\n      </ContextMenu>\n    </Wrapper>\n  );\n}\n\nconst Icon = styled.svg`\n  transition: fill 150ms ease-in-out;\n`;\n\nconst Label = styled.label`\n  display: block;\n`;\n\nconst Icons = styled.div`\n  padding: 16px 8px 0 16px;\n\n  ${breakpoint(\"tablet\")`\n    width: 276px;\n  `};\n`;\n\nconst Button = styled(NudeButton)`\n  border: 1px solid ${(props) => props.theme.inputBorder};\n  width: 32px;\n  height: 32px;\n`;\n\nconst IconButton = styled(NudeButton)`\n  border-radius: 4px;\n  margin: 0px 6px 6px 0px;\n  width: 30px;\n  height: 30px;\n`;\n\nconst Loading = styled(Text)`\n  padding: 16px;\n`;\n\nconst ColorPicker = styled(TwitterPicker)`\n  box-shadow: none !important;\n  background: transparent !important;\n  width: auto !important;\n\n  ${breakpoint(\"tablet\")`\n    width: 276px;\n  `};\n`;\n\nconst Wrapper = styled(\"div\")`\n  display: inline-block;\n  position: relative;\n`;\n\nexport default IconPicker;\n","import * as React from \"react\";\nimport styled from \"styled-components\";\n\ntype Props = {\n  /* The emoji to render */\n  emoji: string;\n  /* The size of the emoji, 24px is default to match standard icons */\n  size?: number;\n};\n\n/**\n * EmojiIcon is a component that renders an emoji in the size of a standard icon\n * in a way that can be used wherever an Icon would be.\n */\nexport default function EmojiIcon({ size = 24, emoji, ...rest }: Props) {\n  return (\n    <Span $size={size} {...rest}>\n      {emoji}\n    </Span>\n  );\n}\n\nconst Span = styled.span<{ $size: number }>`\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n  width: ${(props) => props.$size}px;\n  height: ${(props) => props.$size}px;\n  text-indent: -0.15em;\n  font-size: 14px;\n`;\n","import { observable } from \"mobx\";\nimport { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport { VisuallyHidden } from \"reakit/VisuallyHidden\";\nimport styled from \"styled-components\";\nimport breakpoint from \"styled-components-breakpoint\";\nimport Flex from \"~/components/Flex\";\n\nconst RealTextarea = styled.textarea<{ hasIcon?: boolean }>`\n  border: 0;\n  flex: 1;\n  padding: 8px 12px 8px ${(props) => (props.hasIcon ? \"8px\" : \"12px\")};\n  outline: none;\n  background: none;\n  color: ${(props) => props.theme.text};\n\n  &:disabled,\n  &::placeholder {\n    color: ${(props) => props.theme.placeholder};\n  }\n`;\n\nconst RealInput = styled.input<{ hasIcon?: boolean }>`\n  border: 0;\n  flex: 1;\n  padding: 8px 12px 8px ${(props) => (props.hasIcon ? \"8px\" : \"12px\")};\n  outline: none;\n  background: none;\n  color: ${(props) => props.theme.text};\n  height: 30px;\n  min-width: 0;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n\n  &:disabled,\n  &::placeholder {\n    color: ${(props) => props.theme.placeholder};\n  }\n\n  &::-webkit-search-cancel-button {\n    -webkit-appearance: none;\n  }\n\n  ${breakpoint(\"mobile\", \"tablet\")`\n    font-size: 16px;\n  `};\n`;\n\nconst Wrapper = styled.div<{\n  flex?: boolean;\n  short?: boolean;\n  minHeight?: number;\n  maxHeight?: number;\n}>`\n  flex: ${(props) => (props.flex ? \"1\" : \"0\")};\n  width: ${(props) => (props.short ? \"49%\" : \"auto\")};\n  max-width: ${(props) => (props.short ? \"350px\" : \"100%\")};\n  min-height: ${({ minHeight }) => (minHeight ? `${minHeight}px` : \"0\")};\n  max-height: ${({ maxHeight }) => (maxHeight ? `${maxHeight}px` : \"initial\")};\n`;\n\nconst IconWrapper = styled.span`\n  position: relative;\n  left: 4px;\n  width: 24px;\n  height: 24px;\n`;\n\nexport const Outline = styled(Flex)<{\n  margin?: string | number;\n  hasError?: boolean;\n  focused?: boolean;\n}>`\n  flex: 1;\n  margin: ${(props) =>\n    props.margin !== undefined ? props.margin : \"0 0 16px\"};\n  color: inherit;\n  border-width: 1px;\n  border-style: solid;\n  border-color: ${(props) =>\n    props.hasError\n      ? props.theme.danger\n      : props.focused\n      ? props.theme.inputBorderFocused\n      : props.theme.inputBorder};\n  border-radius: 4px;\n  font-weight: normal;\n  align-items: center;\n  overflow: hidden;\n  background: ${(props) => props.theme.background};\n`;\n\nexport const LabelText = styled.div`\n  font-weight: 500;\n  padding-bottom: 4px;\n  display: inline-block;\n`;\n\nexport type Props = React.HTMLAttributes<HTMLInputElement> & {\n  type?: \"text\" | \"email\" | \"checkbox\" | \"search\" | \"textarea\";\n  value?: string;\n  label?: string;\n  className?: string;\n  labelHidden?: boolean;\n  flex?: boolean;\n  short?: boolean;\n  margin?: string | number;\n  icon?: React.ReactNode;\n  name?: string;\n  minLength?: number;\n  maxLength?: number;\n  autoFocus?: boolean;\n  autoComplete?: boolean | string;\n  readOnly?: boolean;\n  required?: boolean;\n  disabled?: boolean;\n  placeholder?: string;\n  onChange?: (\n    ev: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>\n  ) => unknown;\n  innerRef?: React.RefObject<HTMLInputElement | HTMLTextAreaElement>;\n  onKeyDown?: (ev: React.KeyboardEvent<HTMLInputElement>) => unknown;\n  onFocus?: (ev: React.SyntheticEvent) => unknown;\n  onBlur?: (ev: React.SyntheticEvent) => unknown;\n};\n\n@observer\nclass Input extends React.Component<Props> {\n  input = this.props.innerRef;\n\n  @observable\n  focused = false;\n\n  handleBlur = (ev: React.SyntheticEvent) => {\n    this.focused = false;\n\n    if (this.props.onBlur) {\n      this.props.onBlur(ev);\n    }\n  };\n\n  handleFocus = (ev: React.SyntheticEvent) => {\n    this.focused = true;\n\n    if (this.props.onFocus) {\n      this.props.onFocus(ev);\n    }\n  };\n\n  render() {\n    const {\n      type = \"text\",\n      icon,\n      label,\n      margin,\n      className,\n      short,\n      flex,\n      labelHidden,\n      onFocus,\n      onBlur,\n      ...rest\n    } = this.props;\n\n    const InputComponent: React.ComponentType =\n      type === \"textarea\" ? RealTextarea : RealInput;\n    const wrappedLabel = <LabelText>{label}</LabelText>;\n\n    return (\n      <Wrapper className={className} short={short} flex={flex}>\n        <label>\n          {label &&\n            (labelHidden ? (\n              <VisuallyHidden>{wrappedLabel}</VisuallyHidden>\n            ) : (\n              wrappedLabel\n            ))}\n          <Outline focused={this.focused} margin={margin}>\n            {icon && <IconWrapper>{icon}</IconWrapper>}\n            <InputComponent\n              // @ts-expect-error no idea why this is not working\n              ref={this.input}\n              onBlur={this.handleBlur}\n              onFocus={this.handleFocus}\n              hasIcon={!!icon}\n              type={type === \"textarea\" ? undefined : type}\n              {...rest}\n            />\n          </Outline>\n        </label>\n      </Wrapper>\n    );\n  }\n}\n\nexport default Input;\n","export default function getDataTransferFiles(\n  event:\n    | Event\n    | React.FormEvent<HTMLInputElement>\n    | React.DragEvent<HTMLElement>\n): File[] {\n  let dataTransferItemsList!: FileList | DataTransferItemList;\n\n  if (\"dataTransfer\" in event) {\n    const dt = event.dataTransfer;\n\n    if (dt.files && dt.files.length) {\n      dataTransferItemsList = dt.files;\n    } else if (dt.items && dt.items.length) {\n      // During the drag even the dataTransfer.files is null\n      // but Chrome implements some drag store, which is accesible via dataTransfer.items\n      dataTransferItemsList = dt.items;\n    }\n  } else if (event.target && \"files\" in event.target) {\n    // @ts-expect-error fallback\n    dataTransferItemsList = event.target.files;\n  }\n\n  // Convert from DataTransferItemsList to the native Array\n  return dataTransferItemsList\n    ? Array.prototype.slice.call(dataTransferItemsList)\n    : [];\n}\n","import { observer } from \"mobx-react\";\nimport { ArchiveIcon, GoToIcon, ShapesIcon, TrashIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport styled from \"styled-components\";\nimport Document from \"~/models/Document\";\nimport Breadcrumb from \"~/components/Breadcrumb\";\nimport CollectionIcon from \"~/components/CollectionIcon\";\nimport useStores from \"~/hooks/useStores\";\nimport { MenuInternalLink, NavigationNode } from \"~/types\";\nimport { collectionUrl } from \"~/utils/routeHelpers\";\n\ntype Props = {\n  document: Document;\n  onlyText?: boolean;\n};\n\nfunction useCategory(document: Document): MenuInternalLink | null {\n  const { t } = useTranslation();\n\n  if (document.isDeleted) {\n    return {\n      type: \"route\",\n      icon: <TrashIcon color=\"currentColor\" />,\n      title: t(\"Trash\"),\n      to: \"/trash\",\n    };\n  }\n\n  if (document.isArchived) {\n    return {\n      type: \"route\",\n      icon: <ArchiveIcon color=\"currentColor\" />,\n      title: t(\"Archive\"),\n      to: \"/archive\",\n    };\n  }\n\n  if (document.isTemplate) {\n    return {\n      type: \"route\",\n      icon: <ShapesIcon color=\"currentColor\" />,\n      title: t(\"Templates\"),\n      to: \"/templates\",\n    };\n  }\n\n  return null;\n}\n\nconst DocumentBreadcrumb: React.FC<Props> = ({\n  document,\n  children,\n  onlyText,\n}) => {\n  const { collections } = useStores();\n  const { t } = useTranslation();\n  const category = useCategory(document);\n  const collection = collections.get(document.collectionId);\n\n  let collectionNode: MenuInternalLink;\n\n  if (collection) {\n    collectionNode = {\n      type: \"route\",\n      title: collection.name,\n      icon: <CollectionIcon collection={collection} expanded />,\n      to: collectionUrl(collection.url),\n    };\n  } else {\n    collectionNode = {\n      type: \"route\",\n      title: t(\"Deleted Collection\"),\n      icon: undefined,\n      to: collectionUrl(\"deleted-collection\"),\n    };\n  }\n\n  const path = React.useMemo(\n    () => collection?.pathToDocument?.(document.id).slice(0, -1) || [],\n    [collection, document]\n  );\n\n  const items = React.useMemo(() => {\n    const output = [];\n\n    if (category) {\n      output.push(category);\n    }\n\n    output.push(collectionNode);\n\n    path.forEach((node: NavigationNode) => {\n      output.push({\n        type: \"route\",\n        title: node.title,\n        to: node.url,\n      });\n    });\n    return output;\n  }, [path, category, collectionNode]);\n\n  if (!collections.isLoaded) {\n    return null;\n  }\n\n  if (onlyText === true) {\n    return (\n      <>\n        {collection?.name}\n        {path.map((node: NavigationNode) => (\n          <React.Fragment key={node.id}>\n            <SmallSlash />\n            {node.title}\n          </React.Fragment>\n        ))}\n      </>\n    );\n  }\n\n  return <Breadcrumb items={items} children={children} highlightFirstItem />;\n};\n\nconst SmallSlash = styled(GoToIcon)`\n  width: 12px;\n  height: 12px;\n  vertical-align: middle;\n  flex-shrink: 0;\n\n  fill: ${(props) => props.theme.slate};\n  opacity: 0.5;\n`;\n\nexport default observer(DocumentBreadcrumb);\n","import { m } from \"framer-motion\";\nimport * as React from \"react\";\nimport styled, { useTheme } from \"styled-components\";\nimport NavLinkWithChildrenFunc from \"~/components/NavLink\";\n\ntype Props = Omit<\n  React.ComponentProps<typeof NavLinkWithChildrenFunc>,\n  \"children\"\n> & {\n  to: string;\n  exact?: boolean;\n};\n\nconst TabLink = styled(NavLinkWithChildrenFunc)`\n  position: relative;\n  display: inline-flex;\n  align-items: center;\n  font-weight: 500;\n  font-size: 14px;\n  color: ${(props) => props.theme.textTertiary};\n  margin-right: 24px;\n  padding: 6px 0;\n\n  &:hover {\n    color: ${(props) => props.theme.textSecondary};\n  }\n`;\n\nconst Active = styled(m.div)`\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  height: 3px;\n  width: 100%;\n  border-top-left-radius: 2px;\n  border-top-right-radius: 2px;\n  background: ${(props) => props.theme.textSecondary};\n`;\n\nconst transition = {\n  type: \"spring\",\n  stiffness: 500,\n  damping: 30,\n};\n\nconst Tab: React.FC<Props> = ({ children, ...rest }) => {\n  const theme = useTheme();\n  const activeStyle = {\n    color: theme.textSecondary,\n  };\n\n  return (\n    <TabLink {...rest} activeStyle={activeStyle}>\n      {(match) => (\n        <>\n          {children}\n          {match && (\n            <Active\n              layoutId=\"underline\"\n              initial={false}\n              transition={transition}\n            />\n          )}\n        </>\n      )}\n    </TabLink>\n  );\n};\n\nexport default Tab;\n","import * as React from \"react\";\nimport styled from \"styled-components\";\nimport CenteredContent from \"~/components/CenteredContent\";\nimport Header from \"~/components/Header\";\nimport PageTitle from \"~/components/PageTitle\";\n\ntype Props = {\n  icon?: React.ReactNode;\n  title?: React.ReactNode;\n  textTitle?: string;\n  breadcrumb?: React.ReactNode;\n  actions?: React.ReactNode;\n  centered?: boolean;\n};\n\nconst Scene: React.FC<Props> = ({\n  title,\n  icon,\n  textTitle,\n  actions,\n  breadcrumb,\n  children,\n  centered,\n}) => {\n  return (\n    <FillWidth>\n      <PageTitle title={textTitle || title} />\n      <Header\n        hasSidebar\n        title={\n          icon ? (\n            <>\n              {icon}&nbsp;{title}\n            </>\n          ) : (\n            title\n          )\n        }\n        actions={actions}\n        breadcrumb={breadcrumb}\n      />\n      {centered !== false ? (\n        <CenteredContent withStickyHeader>{children}</CenteredContent>\n      ) : (\n        children\n      )}\n    </FillWidth>\n  );\n};\n\nconst FillWidth = styled.div`\n  width: 100%;\n`;\n\nexport default Scene;\n","import invariant from \"invariant\";\nimport useStores from \"./useStores\";\n\nexport default function useCurrentTeam() {\n  const { auth } = useStores();\n  invariant(auth.team, \"team required\");\n  return auth.team;\n}\n","import * as React from \"react\";\nimport styled from \"styled-components\";\n\ntype Props = {\n  sticky?: boolean;\n};\n\nconst H3 = styled.h3`\n  border-bottom: 1px solid ${(props) => props.theme.divider};\n  margin: 12px 0;\n  line-height: 1;\n`;\n\nconst Underline = styled.div`\n  display: inline-block;\n  font-weight: 500;\n  font-size: 14px;\n  line-height: 1.5;\n  color: ${(props) => props.theme.textSecondary};\n  padding-top: 6px;\n  padding-bottom: 6px;\n`;\n\n// When sticky we need extra background coverage around the sides otherwise\n// items that scroll past can \"stick out\" the sides of the heading\nconst Background = styled.div<{ sticky?: boolean }>`\n  position: ${(props) => (props.sticky ? \"sticky\" : \"relative\")};\n  ${(props) => (props.sticky ? \"top: 54px;\" : \"\")}\n  margin: 0 -8px;\n  padding: 0 8px;\n  background: ${(props) => props.theme.background};\n  transition: ${(props) => props.theme.backgroundTransition};\n  z-index: 1;\n`;\n\nconst Subheading: React.FC<Props> = ({ children, sticky, ...rest }) => {\n  return (\n    <Background sticky={sticky}>\n      <H3 {...rest}>\n        <Underline>{children}</Underline>\n      </H3>\n    </Background>\n  );\n};\n\nexport default Subheading;\n","import { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport { useTranslation, Trans } from \"react-i18next\";\nimport { useHistory } from \"react-router-dom\";\nimport Document from \"~/models/Document\";\nimport Button from \"~/components/Button\";\nimport Flex from \"~/components/Flex\";\nimport Text from \"~/components/Text\";\nimport useStores from \"~/hooks/useStores\";\nimport useToasts from \"~/hooks/useToasts\";\nimport { collectionUrl, documentUrl } from \"~/utils/routeHelpers\";\n\ntype Props = {\n  document: Document;\n  onSubmit: () => void;\n};\n\nfunction DocumentDelete({ document, onSubmit }: Props) {\n  const { t } = useTranslation();\n  const { ui, documents, collections } = useStores();\n  const history = useHistory();\n  const [isDeleting, setDeleting] = React.useState(false);\n  const [isArchiving, setArchiving] = React.useState(false);\n  const { showToast } = useToasts();\n  const canArchive = !document.isDraft && !document.isArchived;\n  const collection = collections.get(document.collectionId);\n  const handleSubmit = React.useCallback(\n    async (ev: React.SyntheticEvent) => {\n      ev.preventDefault();\n      setDeleting(true);\n\n      try {\n        await document.delete();\n\n        // only redirect if we're currently viewing the document that's deleted\n        if (ui.activeDocumentId === document.id) {\n          // If the document has a parent and it's available in the store then\n          // redirect to it\n          if (document.parentDocumentId) {\n            const parent = documents.get(document.parentDocumentId);\n\n            if (parent) {\n              history.push(documentUrl(parent));\n              return;\n            }\n          }\n\n          // otherwise, redirect to the collection home\n          history.push(collectionUrl(collection?.url || \"/\"));\n        }\n\n        onSubmit();\n      } catch (err) {\n        showToast(err.message, {\n          type: \"error\",\n        });\n      } finally {\n        setDeleting(false);\n      }\n    },\n    [showToast, onSubmit, ui, document, documents, history, collection]\n  );\n\n  const handleArchive = React.useCallback(\n    async (ev: React.SyntheticEvent) => {\n      ev.preventDefault();\n      setArchiving(true);\n\n      try {\n        await document.archive();\n        onSubmit();\n      } catch (err) {\n        showToast(err.message, {\n          type: \"error\",\n        });\n      } finally {\n        setArchiving(false);\n      }\n    },\n    [showToast, onSubmit, document]\n  );\n\n  return (\n    <Flex column>\n      <form onSubmit={handleSubmit}>\n        <Text type=\"secondary\">\n          {document.isTemplate ? (\n            <Trans\n              defaults=\"Are you sure you want to delete the <em>{{ documentTitle }}</em> template?\"\n              values={{\n                documentTitle: document.titleWithDefault,\n              }}\n              components={{\n                em: <strong />,\n              }}\n            />\n          ) : (\n            <Trans\n              defaults=\"Are you sure about that? Deleting the <em>{{ documentTitle }}</em> document will delete all of its history and any nested documents.\"\n              values={{\n                documentTitle: document.titleWithDefault,\n              }}\n              components={{\n                em: <strong />,\n              }}\n            />\n          )}\n        </Text>\n        {canArchive && (\n          <Text type=\"secondary\">\n            <Trans>\n              If youd like the option of referencing or restoring the{\" \"}\n              {{\n                noun: document.noun,\n              }}{\" \"}\n              in the future, consider archiving it instead.\n            </Trans>\n          </Text>\n        )}\n        <Button type=\"submit\" danger>\n          {isDeleting ? `${t(\"Deleting\")}` : t(\"Im sure  Delete\")}\n        </Button>\n        &nbsp;&nbsp;\n        {canArchive && (\n          <Button type=\"button\" onClick={handleArchive} neutral>\n            {isArchiving ? `${t(\"Archiving\")}` : t(\"Archive\")}\n          </Button>\n        )}\n      </form>\n    </Flex>\n  );\n}\n\nexport default observer(DocumentDelete);\n","// ref: https://github.com/ReactTraining/react-router/blob/master/packages/react-router-dom/modules/NavLink.js\n// This file is pulled almost 100% from react-router with the addition of one\n// thing, automatic scroll to the active link. It's worth the copy paste because\n// it avoids recalculating the link match again.\nimport { Location, createLocation } from \"history\";\nimport * as React from \"react\";\nimport {\n  __RouterContext as RouterContext,\n  matchPath,\n  match,\n} from \"react-router\";\nimport { Link } from \"react-router-dom\";\nimport scrollIntoView from \"smooth-scroll-into-view-if-needed\";\n\nconst resolveToLocation = (\n  to: string | Record<string, any>,\n  currentLocation: Location\n) => (typeof to === \"function\" ? to(currentLocation) : to);\n\nconst normalizeToLocation = (\n  to: string | Record<string, any>,\n  currentLocation: Location\n) => {\n  return typeof to === \"string\"\n    ? createLocation(to, null, undefined, currentLocation)\n    : to;\n};\n\nconst joinClassnames = (...classnames: (string | undefined)[]) => {\n  return classnames.filter((i) => i).join(\" \");\n};\n\nexport type Props = React.HTMLAttributes<HTMLAnchorElement> & {\n  activeClassName?: string;\n  activeStyle?: React.CSSProperties;\n  className?: string;\n  scrollIntoViewIfNeeded?: boolean;\n  exact?: boolean;\n  isActive?: (match: match | null, location: Location) => boolean;\n  location?: Location;\n  strict?: boolean;\n  style?: React.CSSProperties;\n  to: string | Record<string, any>;\n};\n\n/**\n * A <Link> wrapper that knows if it's \"active\" or not.\n */\nconst NavLink = ({\n  \"aria-current\": ariaCurrent = \"page\",\n  activeClassName = \"active\",\n  activeStyle,\n  className: classNameProp,\n  exact,\n  isActive: isActiveProp,\n  location: locationProp,\n  strict,\n  style: styleProp,\n  scrollIntoViewIfNeeded,\n  to,\n  ...rest\n}: Props) => {\n  const linkRef = React.useRef(null);\n  const context = React.useContext(RouterContext);\n  const currentLocation = locationProp || context.location;\n  const toLocation = normalizeToLocation(\n    resolveToLocation(to, currentLocation),\n    currentLocation\n  );\n  const { pathname: path } = toLocation;\n\n  // Regex taken from: https://github.com/pillarjs/path-to-regexp/blob/master/index.js#L202\n  const escapedPath = path?.replace(/([.+*?=^!:${}()[\\]|/\\\\])/g, \"\\\\$1\");\n  const match = escapedPath\n    ? matchPath(currentLocation.pathname, {\n        path: escapedPath,\n        exact,\n        strict,\n      })\n    : null;\n\n  const isActive = !!(isActiveProp\n    ? isActiveProp(match, currentLocation)\n    : match);\n  const className = isActive\n    ? joinClassnames(classNameProp, activeClassName)\n    : classNameProp;\n  const style = isActive ? { ...styleProp, ...activeStyle } : styleProp;\n\n  React.useEffect(() => {\n    if (isActive && linkRef.current && scrollIntoViewIfNeeded !== false) {\n      scrollIntoView(linkRef.current, {\n        scrollMode: \"if-needed\",\n        behavior: \"auto\",\n      });\n    }\n  }, [linkRef, scrollIntoViewIfNeeded, isActive]);\n\n  const props = {\n    \"aria-current\": (isActive && ariaCurrent) || undefined,\n    className,\n    style,\n    to: toLocation,\n    ...rest,\n  };\n\n  return <Link ref={linkRef} {...props} />;\n};\n\nexport default NavLink;\n","import * as React from \"react\";\nimport styled, { useTheme, css } from \"styled-components\";\nimport breakpoint from \"styled-components-breakpoint\";\nimport EventBoundary from \"~/components/EventBoundary\";\nimport NudeButton from \"~/components/NudeButton\";\nimport { NavigationNode } from \"~/types\";\nimport Disclosure from \"./Disclosure\";\nimport NavLink, { Props as NavLinkProps } from \"./NavLink\";\n\nexport type DragObject = NavigationNode & {\n  depth: number;\n  active: boolean;\n  collectionId: string;\n};\n\ntype Props = Omit<NavLinkProps, \"to\"> & {\n  to?: string | Record<string, any>;\n  href?: string | Record<string, any>;\n  innerRef?: (ref: HTMLElement | null | undefined) => void;\n  onClick?: React.MouseEventHandler<HTMLAnchorElement>;\n  onMouseEnter?: React.MouseEventHandler<HTMLAnchorElement>;\n  onDisclosureClick?: React.MouseEventHandler<HTMLButtonElement>;\n  icon?: React.ReactNode;\n  label?: React.ReactNode;\n  menu?: React.ReactNode;\n  showActions?: boolean;\n  disabled?: boolean;\n  active?: boolean;\n  /* If set, a disclosure will be rendered to the left of any icon */\n  expanded?: boolean;\n  isActiveDrop?: boolean;\n  isDraft?: boolean;\n  depth?: number;\n  scrollIntoViewIfNeeded?: boolean;\n};\n\nconst activeDropStyle = {\n  fontWeight: 600,\n};\n\nfunction SidebarLink(\n  {\n    icon,\n    onClick,\n    onMouseEnter,\n    to,\n    label,\n    active,\n    isActiveDrop,\n    isDraft,\n    menu,\n    showActions,\n    exact,\n    href,\n    depth,\n    className,\n    expanded,\n    onDisclosureClick,\n    disabled,\n    ...rest\n  }: Props,\n  ref: React.RefObject<HTMLAnchorElement>\n) {\n  const theme = useTheme();\n  const style = React.useMemo(\n    () => ({\n      paddingLeft: `${(depth || 0) * 16 + 12}px`,\n    }),\n    [depth]\n  );\n\n  const activeStyle = React.useMemo(\n    () => ({\n      fontWeight: 600,\n      color: theme.text,\n      background: theme.sidebarActiveBackground,\n      ...style,\n    }),\n    [theme.text, theme.sidebarActiveBackground, style]\n  );\n\n  return (\n    <>\n      <Link\n        $isActiveDrop={isActiveDrop}\n        $isDraft={isDraft}\n        $disabled={disabled}\n        activeStyle={isActiveDrop ? activeDropStyle : activeStyle}\n        style={active ? activeStyle : style}\n        onClick={onClick}\n        onMouseEnter={onMouseEnter}\n        // @ts-expect-error exact does not exist on div\n        exact={exact !== false}\n        to={to}\n        as={to ? undefined : href ? \"a\" : \"div\"}\n        href={href}\n        className={className}\n        ref={ref}\n        {...rest}\n      >\n        <Content>\n          {expanded !== undefined && (\n            <Disclosure\n              expanded={expanded}\n              onClick={onDisclosureClick}\n              root={depth === 0}\n            />\n          )}\n          {icon && <IconWrapper>{icon}</IconWrapper>}\n          <Label>{label}</Label>\n        </Content>\n      </Link>\n      {menu && <Actions showActions={showActions}>{menu}</Actions>}\n    </>\n  );\n}\n\nconst Content = styled.span`\n  display: flex;\n  align-items: start;\n  position: relative;\n  width: 100%;\n\n  ${Disclosure} {\n    margin-top: 2px;\n  }\n`;\n\n// accounts for whitespace around icon\nexport const IconWrapper = styled.span`\n  margin-left: -4px;\n  margin-right: 4px;\n  height: 24px;\n  overflow: hidden;\n  flex-shrink: 0;\n`;\n\nconst Actions = styled(EventBoundary)<{ showActions?: boolean }>`\n  display: inline-flex;\n  visibility: ${(props) => (props.showActions ? \"visible\" : \"hidden\")};\n  position: absolute;\n  top: 4px;\n  right: 4px;\n  gap: 4px;\n  color: ${(props) => props.theme.textTertiary};\n  transition: opacity 50ms;\n  height: 24px;\n\n  svg {\n    color: ${(props) => props.theme.textSecondary};\n    fill: currentColor;\n    opacity: 0.5;\n  }\n\n  &:hover {\n    visibility: visible;\n\n    svg {\n      opacity: 0.75;\n    }\n  }\n`;\n\nconst Link = styled(NavLink)<{\n  $isActiveDrop?: boolean;\n  $isDraft?: boolean;\n  $disabled?: boolean;\n}>`\n  display: flex;\n  position: relative;\n  text-overflow: ellipsis;\n  padding: 6px 16px;\n  border-radius: 4px;\n  transition: background 50ms, color 50ms;\n  user-select: none;\n  background: ${(props) =>\n    props.$isActiveDrop ? props.theme.slateDark : \"inherit\"};\n  color: ${(props) =>\n    props.$isActiveDrop ? props.theme.white : props.theme.sidebarText};\n  font-size: 16px;\n  cursor: pointer;\n  overflow: hidden;\n\n  ${(props) =>\n    props.$disabled &&\n    css`\n      pointer-events: none;\n      opacity: 0.75;\n    `}\n\n  ${(props) =>\n    props.$isDraft &&\n    css`\n      padding: 4px 14px;\n      border: 1px dashed ${props.theme.sidebarDraftBorder};\n    `}\n\n  svg {\n    ${(props) => (props.$isActiveDrop ? `fill: ${props.theme.white};` : \"\")}\n    transition: fill 50ms;\n  }\n\n  &:hover svg {\n    display: inline;\n  }\n\n  & + ${Actions} {\n    background: ${(props) => props.theme.sidebarBackground};\n\n    ${NudeButton} {\n      background: transparent;\n\n      &:hover,\n      &[aria-expanded=\"true\"] {\n        background: ${(props) => props.theme.sidebarControlHoverBackground};\n      }\n    }\n  }\n\n  &[aria-current=\"page\"] + ${Actions} {\n    background: ${(props) => props.theme.sidebarActiveBackground};\n  }\n\n  ${breakpoint(\"tablet\")`\n    padding: 4px 8px 4px 16px;\n    font-size: 15px;\n  `}\n\n  @media (hover: hover) {\n    &:hover + ${Actions}, &:active + ${Actions} {\n      visibility: visible;\n\n      svg {\n        opacity: 0.75;\n      }\n    }\n\n    &:hover {\n      color: ${(props) =>\n        props.$isActiveDrop ? props.theme.white : props.theme.text};\n    }\n  }\n\n  &:hover {\n    ${Disclosure} {\n      opacity: 1;\n    }\n  }\n`;\n\nconst Label = styled.div`\n  position: relative;\n  width: 100%;\n  max-height: 4.8em;\n  line-height: 1.6;\n\n  * {\n    unicode-bidi: plaintext;\n  }\n`;\n\nexport default React.forwardRef<HTMLAnchorElement, Props>(SidebarLink);\n","import useStores from \"./useStores\";\n\nexport default function useToasts() {\n  const { toasts } = useStores();\n  return {\n    showToast: toasts.showToast,\n    hideToast: toasts.hideToast,\n  };\n}\n","import invariant from \"invariant\";\nimport { client } from \"./ApiClient\";\nimport Logger from \"./Logger\";\n\ntype UploadOptions = {\n  /** The user facing name of the file */\n  name?: string;\n  /** The document that this file was uploaded in, if any */\n  documentId?: string;\n  /** Whether the file should be public in cloud storage */\n  public?: boolean;\n  /** Callback will be passed a number between 0-1 as upload progresses */\n  onProgress?: (fractionComplete: number) => void;\n};\n\nexport const uploadFile = async (\n  file: File | Blob,\n  options: UploadOptions = {\n    name: \"\",\n  }\n) => {\n  const name = file instanceof File ? file.name : options.name;\n  const response = await client.post(\"/attachments.create\", {\n    public: options.public,\n    documentId: options.documentId,\n    contentType: file.type,\n    size: file.size,\n    name,\n  });\n  invariant(response, \"Response should be available\");\n  const data = response.data;\n  const attachment = data.attachment;\n  const formData = new FormData();\n\n  for (const key in data.form) {\n    formData.append(key, data.form[key]);\n  }\n\n  // @ts-expect-error ts-migrate(2339) FIXME: Property 'blob' does not exist on type 'File | Blo... Remove this comment to see the full error message\n  if (file.blob) {\n    // @ts-expect-error ts-migrate(2339) FIXME: Property 'file' does not exist on type 'File | Blo... Remove this comment to see the full error message\n    formData.append(\"file\", file.file);\n  } else {\n    formData.append(\"file\", file);\n  }\n\n  // Using XMLHttpRequest instead of fetch because fetch doesn't support progress\n  const xhr = new XMLHttpRequest();\n  const success = await new Promise((resolve) => {\n    xhr.upload.addEventListener(\"progress\", (event) => {\n      if (event.lengthComputable && options.onProgress) {\n        options.onProgress(event.loaded / event.total);\n      }\n    });\n    xhr.addEventListener(\"error\", () => {\n      Logger.error(\n        \"File upload failed\",\n        new Error(`${xhr.status} ${xhr.statusText}`)\n      );\n    });\n    xhr.addEventListener(\"loadend\", () => {\n      resolve(xhr.readyState === 4 && xhr.status >= 200 && xhr.status < 400);\n    });\n    xhr.open(\"POST\", data.uploadUrl, true);\n    xhr.send(formData);\n  });\n\n  if (!success) {\n    throw new Error(\"Upload failed\");\n  }\n\n  return attachment;\n};\n\nexport const dataUrlToBlob = (dataURL: string) => {\n  const blobBin = atob(dataURL.split(\",\")[1]);\n  const array = [];\n\n  for (let i = 0; i < blobBin.length; i++) {\n    array.push(blobBin.charCodeAt(i));\n  }\n\n  const file = new Blob([new Uint8Array(array)], {\n    type: \"image/png\",\n  });\n  return file;\n};\n","import { CollapsedIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport styled, { css } from \"styled-components\";\nimport NudeButton from \"~/components/NudeButton\";\n\ntype Props = {\n  onClick?: React.MouseEventHandler<HTMLButtonElement>;\n  expanded: boolean;\n  root?: boolean;\n};\n\nfunction Disclosure({ onClick, root, expanded, ...rest }: Props) {\n  const { t } = useTranslation();\n\n  return (\n    <Button\n      size={20}\n      onClick={onClick}\n      $root={root}\n      aria-label={expanded ? t(\"Collapse\") : t(\"Expand\")}\n      {...rest}\n    >\n      <StyledCollapsedIcon expanded={expanded} size={20} color=\"currentColor\" />\n    </Button>\n  );\n}\n\nconst Button = styled(NudeButton)<{ $root?: boolean }>`\n  position: absolute;\n  left: -24px;\n  flex-shrink: 0;\n  color: ${(props) => props.theme.textSecondary};\n\n  &:hover {\n    color: ${(props) => props.theme.text};\n    background: ${(props) => props.theme.sidebarControlHoverBackground};\n  }\n\n  ${(props) =>\n    props.$root &&\n    css`\n      opacity: 0;\n      left: -16px;\n\n      &:hover {\n        opacity: 1;\n        background: none;\n      }\n    `}\n`;\n\nconst StyledCollapsedIcon = styled(CollapsedIcon)<{\n  expanded?: boolean;\n}>`\n  transition: opacity 100ms ease, transform 100ms ease, fill 50ms !important;\n  ${(props) => !props.expanded && \"transform: rotate(-90deg);\"};\n`;\n\n// Enables identifying this component within styled components\nconst StyledDisclosure = styled(Disclosure)``;\n\nexport default StyledDisclosure;\n","import * as React from \"react\";\nimport { Dialog } from \"reakit/Dialog\";\nimport { Popover as ReakitPopover, PopoverProps } from \"reakit/Popover\";\nimport styled from \"styled-components\";\nimport breakpoint from \"styled-components-breakpoint\";\nimport { depths } from \"@shared/styles\";\nimport useMobile from \"~/hooks/useMobile\";\nimport { fadeAndScaleIn } from \"~/styles/animations\";\n\ntype Props = PopoverProps & {\n  children: React.ReactNode;\n  width?: number;\n  shrink?: boolean;\n  tabIndex?: number;\n};\n\nconst Popover: React.FC<Props> = ({\n  children,\n  shrink,\n  width = 380,\n  ...rest\n}) => {\n  const isMobile = useMobile();\n\n  if (isMobile) {\n    return (\n      <Dialog {...rest} modal>\n        <Contents $shrink={shrink}>{children}</Contents>\n      </Dialog>\n    );\n  }\n\n  return (\n    <ReakitPopover {...rest}>\n      <Contents $shrink={shrink} $width={width}>\n        {children}\n      </Contents>\n    </ReakitPopover>\n  );\n};\n\nconst Contents = styled.div<{ $shrink?: boolean; $width?: number }>`\n  animation: ${fadeAndScaleIn} 200ms ease;\n  transform-origin: 75% 0;\n  background: ${(props) => props.theme.menuBackground};\n  border-radius: 6px;\n  padding: ${(props) => (props.$shrink ? \"6px 0\" : \"12px 24px\")};\n  max-height: 50vh;\n  overflow-y: scroll;\n  box-shadow: ${(props) => props.theme.menuShadow};\n  width: ${(props) => props.$width}px;\n\n  ${breakpoint(\"mobile\", \"tablet\")`\n    position: fixed;\n    z-index: ${depths.menu};\n\n    // 50 is a magic number that positions us nicely under the top bar\n    top: 50px;\n    left: 8px;\n    right: 8px;\n    width: auto;\n  `};\n`;\n\nexport default Popover;\n","import { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport { useTranslation, Trans } from \"react-i18next\";\nimport { useHistory } from \"react-router-dom\";\nimport Document from \"~/models/Document\";\nimport Button from \"~/components/Button\";\nimport Flex from \"~/components/Flex\";\nimport Text from \"~/components/Text\";\nimport useStores from \"~/hooks/useStores\";\nimport useToasts from \"~/hooks/useToasts\";\n\ntype Props = {\n  document: Document;\n  onSubmit: () => void;\n};\n\nfunction DocumentPermanentDelete({ document, onSubmit }: Props) {\n  const [isDeleting, setIsDeleting] = React.useState(false);\n  const { t } = useTranslation();\n  const { documents } = useStores();\n  const { showToast } = useToasts();\n  const history = useHistory();\n\n  const handleSubmit = React.useCallback(\n    async (ev: React.SyntheticEvent) => {\n      ev.preventDefault();\n\n      try {\n        setIsDeleting(true);\n        await documents.delete(document, {\n          permanent: true,\n        });\n        showToast(t(\"Document permanently deleted\"), {\n          type: \"success\",\n        });\n        onSubmit();\n        history.push(\"/trash\");\n      } catch (err) {\n        showToast(err.message, {\n          type: \"error\",\n        });\n      } finally {\n        setIsDeleting(false);\n      }\n    },\n    [document, onSubmit, showToast, t, history, documents]\n  );\n\n  return (\n    <Flex column>\n      <form onSubmit={handleSubmit}>\n        <Text type=\"secondary\">\n          <Trans\n            defaults=\"Are you sure you want to permanently delete the <em>{{ documentTitle }}</em> document? This action is immediate and cannot be undone.\"\n            values={{\n              documentTitle: document.titleWithDefault,\n            }}\n            components={{\n              em: <strong />,\n            }}\n          />\n        </Text>\n        <Button type=\"submit\" danger>\n          {isDeleting ? `${t(\"Deleting\")}` : t(\"Im sure  Delete\")}\n        </Button>\n      </form>\n    </Flex>\n  );\n}\n\nexport default observer(DocumentPermanentDelete);\n","import { observer } from \"mobx-react\";\nimport {\n  EditIcon,\n  StarredIcon,\n  UnstarredIcon,\n  DuplicateIcon,\n  ArchiveIcon,\n  TrashIcon,\n  MoveIcon,\n  HistoryIcon,\n  UnpublishIcon,\n  PrintIcon,\n  ImportIcon,\n  NewDocumentIcon,\n  DownloadIcon,\n  RestoreIcon,\n  CrossIcon,\n} from \"outline-icons\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { useHistory } from \"react-router-dom\";\nimport { useMenuState, MenuButton, MenuButtonHTMLProps } from \"reakit/Menu\";\nimport { VisuallyHidden } from \"reakit/VisuallyHidden\";\nimport styled from \"styled-components\";\nimport breakpoint from \"styled-components-breakpoint\";\nimport getDataTransferFiles from \"@shared/utils/getDataTransferFiles\";\nimport Document from \"~/models/Document\";\nimport DocumentDelete from \"~/scenes/DocumentDelete\";\nimport DocumentMove from \"~/scenes/DocumentMove\";\nimport DocumentPermanentDelete from \"~/scenes/DocumentPermanentDelete\";\nimport CollectionIcon from \"~/components/CollectionIcon\";\nimport ContextMenu from \"~/components/ContextMenu\";\nimport OverflowMenuButton from \"~/components/ContextMenu/OverflowMenuButton\";\nimport Separator from \"~/components/ContextMenu/Separator\";\nimport Template from \"~/components/ContextMenu/Template\";\nimport Flex from \"~/components/Flex\";\nimport Modal from \"~/components/Modal\";\nimport Switch from \"~/components/Switch\";\nimport { actionToMenuItem } from \"~/actions\";\nimport { pinDocument, createTemplate } from \"~/actions/definitions/documents\";\nimport useActionContext from \"~/hooks/useActionContext\";\nimport useCurrentTeam from \"~/hooks/useCurrentTeam\";\nimport useMobile from \"~/hooks/useMobile\";\nimport usePolicy from \"~/hooks/usePolicy\";\nimport useStores from \"~/hooks/useStores\";\nimport useToasts from \"~/hooks/useToasts\";\nimport { MenuItem } from \"~/types\";\nimport {\n  documentHistoryUrl,\n  documentUrl,\n  editDocumentUrl,\n  newDocumentPath,\n} from \"~/utils/routeHelpers\";\n\ntype Props = {\n  document: Document;\n  className?: string;\n  isRevision?: boolean;\n  /** Pass true if the document is currently being displayed */\n  showDisplayOptions?: boolean;\n  modal?: boolean;\n  showToggleEmbeds?: boolean;\n  showPin?: boolean;\n  label?: (props: MenuButtonHTMLProps) => React.ReactNode;\n  onOpen?: () => void;\n  onClose?: () => void;\n};\n\nfunction DocumentMenu({\n  document,\n  isRevision,\n  className,\n  modal = true,\n  showToggleEmbeds,\n  showDisplayOptions,\n  label,\n  onOpen,\n  onClose,\n}: Props) {\n  const team = useCurrentTeam();\n  const { policies, collections, documents } = useStores();\n  const { showToast } = useToasts();\n  const menu = useMenuState({\n    modal,\n    unstable_preventOverflow: true,\n    unstable_fixed: true,\n    unstable_flip: true,\n  });\n  const history = useHistory();\n  const context = useActionContext({\n    isContextMenu: true,\n    activeDocumentId: document.id,\n    activeCollectionId: document.collectionId,\n  });\n  const { t } = useTranslation();\n  const isMobile = useMobile();\n  const [renderModals, setRenderModals] = React.useState(false);\n  const [showDeleteModal, setShowDeleteModal] = React.useState(false);\n  const [\n    showPermanentDeleteModal,\n    setShowPermanentDeleteModal,\n  ] = React.useState(false);\n  const [showMoveModal, setShowMoveModal] = React.useState(false);\n  const file = React.useRef<HTMLInputElement>(null);\n\n  const handleOpen = React.useCallback(() => {\n    setRenderModals(true);\n\n    if (onOpen) {\n      onOpen();\n    }\n  }, [onOpen]);\n\n  const handleDuplicate = React.useCallback(async () => {\n    const duped = await document.duplicate();\n    // when duplicating, go straight to the duplicated document content\n    history.push(duped.url);\n    showToast(t(\"Document duplicated\"), {\n      type: \"success\",\n    });\n  }, [t, history, showToast, document]);\n\n  const handleArchive = React.useCallback(async () => {\n    await document.archive();\n    showToast(t(\"Document archived\"), {\n      type: \"success\",\n    });\n  }, [showToast, t, document]);\n\n  const handleRestore = React.useCallback(\n    async (\n      ev: React.SyntheticEvent,\n      options?: {\n        collectionId: string;\n      }\n    ) => {\n      await document.restore(options);\n      showToast(t(\"Document restored\"), {\n        type: \"success\",\n      });\n    },\n    [showToast, t, document]\n  );\n\n  const handleUnpublish = React.useCallback(async () => {\n    await document.unpublish();\n    showToast(t(\"Document unpublished\"), {\n      type: \"success\",\n    });\n  }, [showToast, t, document]);\n\n  const handlePrint = React.useCallback(() => {\n    menu.hide();\n    window.print();\n  }, [menu]);\n\n  const handleStar = React.useCallback(\n    (ev: React.SyntheticEvent) => {\n      ev.preventDefault();\n      ev.stopPropagation();\n      document.star();\n    },\n    [document]\n  );\n\n  const handleUnstar = React.useCallback(\n    (ev: React.SyntheticEvent) => {\n      ev.preventDefault();\n      ev.stopPropagation();\n      document.unstar();\n    },\n    [document]\n  );\n\n  const collection = collections.get(document.collectionId);\n  const can = usePolicy(document.id);\n  const canViewHistory = can.read && !can.restore;\n  const restoreItems = React.useMemo(\n    () => [\n      ...collections.orderedData.reduce<MenuItem[]>((filtered, collection) => {\n        const can = policies.abilities(collection.id);\n\n        if (can.update) {\n          filtered.push({\n            type: \"button\",\n            onClick: (ev) =>\n              handleRestore(ev, {\n                collectionId: collection.id,\n              }),\n            title: (\n              <Flex align=\"center\">\n                <CollectionIcon collection={collection} />\n                <CollectionName>{collection.name}</CollectionName>\n              </Flex>\n            ),\n          });\n        }\n\n        return filtered;\n      }, []),\n    ],\n    [collections.orderedData, handleRestore, policies]\n  );\n  const stopPropagation = React.useCallback((ev: React.SyntheticEvent) => {\n    ev.stopPropagation();\n  }, []);\n\n  const handleImportDocument = React.useCallback(\n    (ev: React.SyntheticEvent) => {\n      ev.preventDefault();\n      ev.stopPropagation();\n\n      // simulate a click on the file upload input element\n      if (file.current) {\n        file.current.click();\n      }\n    },\n    [file]\n  );\n\n  const handleFilePicked = React.useCallback(\n    async (ev: React.FormEvent<HTMLInputElement>) => {\n      const files = getDataTransferFiles(ev);\n\n      // Because this is the onChange handler it's possible for the change to be\n      // from previously selecting a file to not selecting a file  aka empty\n      if (!files.length) {\n        return;\n      }\n\n      if (!collection) {\n        return;\n      }\n\n      try {\n        const file = files[0];\n        const importedDocument = await documents.import(\n          file,\n          document.id,\n          collection.id,\n          {\n            publish: true,\n          }\n        );\n        history.push(importedDocument.url);\n      } catch (err) {\n        showToast(err.message, {\n          type: \"error\",\n        });\n        throw err;\n      }\n    },\n    [history, showToast, collection, documents, document.id]\n  );\n\n  return (\n    <>\n      <VisuallyHidden>\n        <label>\n          {t(\"Import document\")}\n          <input\n            type=\"file\"\n            ref={file}\n            onChange={handleFilePicked}\n            onClick={stopPropagation}\n            accept={documents.importFileTypes.join(\", \")}\n            tabIndex={-1}\n          />\n        </label>\n      </VisuallyHidden>\n      {label ? (\n        <MenuButton {...menu}>{label}</MenuButton>\n      ) : (\n        <OverflowMenuButton\n          className={className}\n          aria-label={t(\"Show menu\")}\n          {...menu}\n        />\n      )}\n      <ContextMenu\n        {...menu}\n        aria-label={t(\"Document options\")}\n        onOpen={handleOpen}\n        onClose={onClose}\n      >\n        <Template\n          {...menu}\n          items={[\n            {\n              type: \"button\",\n              title: t(\"Restore\"),\n              visible: (!!collection && can.restore) || can.unarchive,\n              onClick: (ev) => handleRestore(ev),\n              icon: <RestoreIcon />,\n            },\n            {\n              type: \"submenu\",\n              title: t(\"Restore\"),\n              visible:\n                !collection && !!can.restore && restoreItems.length !== 0,\n              style: {\n                left: -170,\n                position: \"relative\",\n                top: -40,\n              },\n              icon: <RestoreIcon />,\n              hover: true,\n              items: [\n                {\n                  type: \"heading\",\n                  title: t(\"Choose a collection\"),\n                },\n                ...restoreItems,\n              ],\n            },\n            {\n              type: \"button\",\n              title: t(\"Unstar\"),\n              onClick: handleUnstar,\n              visible: document.isStarred && !!can.unstar,\n              icon: <UnstarredIcon />,\n            },\n            {\n              type: \"button\",\n              title: t(\"Star\"),\n              onClick: handleStar,\n              visible: !document.isStarred && !!can.star,\n              icon: <StarredIcon />,\n            },\n            // Pin document\n            actionToMenuItem(pinDocument, context),\n            {\n              type: \"separator\",\n            },\n            {\n              type: \"route\",\n              title: t(\"Edit\"),\n              to: editDocumentUrl(document),\n              visible: !!can.update && !team.collaborativeEditing,\n              icon: <EditIcon />,\n            },\n            {\n              type: \"route\",\n              title: t(\"New nested document\"),\n              to: newDocumentPath(document.collectionId, {\n                parentDocumentId: document.id,\n              }),\n              visible: !!can.createChildDocument,\n              icon: <NewDocumentIcon />,\n            },\n            {\n              type: \"button\",\n              title: t(\"Import document\"),\n              visible: can.createChildDocument,\n              onClick: handleImportDocument,\n              icon: <ImportIcon />,\n            },\n            // Templatize document\n            actionToMenuItem(createTemplate, context),\n            {\n              type: \"button\",\n              title: t(\"Duplicate\"),\n              onClick: handleDuplicate,\n              visible: !!can.update,\n              icon: <DuplicateIcon />,\n            },\n            {\n              type: \"button\",\n              title: t(\"Unpublish\"),\n              onClick: handleUnpublish,\n              visible: !!can.unpublish,\n              icon: <UnpublishIcon />,\n            },\n            {\n              type: \"button\",\n              title: t(\"Archive\"),\n              onClick: handleArchive,\n              visible: !!can.archive,\n              icon: <ArchiveIcon />,\n            },\n            {\n              type: \"button\",\n              title: `${t(\"Move\")}`,\n              onClick: () => setShowMoveModal(true),\n              visible: !!can.move,\n              icon: <MoveIcon />,\n            },\n            {\n              type: \"button\",\n              title: `${t(\"Delete\")}`,\n              dangerous: true,\n              onClick: () => setShowDeleteModal(true),\n              visible: !!can.delete,\n              icon: <TrashIcon />,\n            },\n            {\n              type: \"button\",\n              title: `${t(\"Permanently delete\")}`,\n              dangerous: true,\n              onClick: () => setShowPermanentDeleteModal(true),\n              visible: can.permanentDelete,\n              icon: <CrossIcon />,\n            },\n            {\n              type: \"separator\",\n            },\n            {\n              type: \"route\",\n              title: t(\"History\"),\n              to: isRevision\n                ? documentUrl(document)\n                : documentHistoryUrl(document),\n              visible: canViewHistory,\n              icon: <HistoryIcon />,\n            },\n            {\n              type: \"button\",\n              title: t(\"Download\"),\n              onClick: document.download,\n              visible: !!can.download,\n              icon: <DownloadIcon />,\n            },\n            {\n              type: \"button\",\n              title: t(\"Print\"),\n              onClick: handlePrint,\n              visible: !!showDisplayOptions,\n              icon: <PrintIcon />,\n            },\n          ]}\n        />\n        {(showDisplayOptions || showToggleEmbeds) && (\n          <>\n            <Separator />\n            {showToggleEmbeds && (\n              <Style>\n                <ToggleMenuItem\n                  width={26}\n                  height={14}\n                  label={t(\"Enable embeds\")}\n                  checked={!document.embedsDisabled}\n                  onChange={\n                    document.embedsDisabled\n                      ? document.enableEmbeds\n                      : document.disableEmbeds\n                  }\n                />\n              </Style>\n            )}\n            {showDisplayOptions && !isMobile && (\n              <Style>\n                <ToggleMenuItem\n                  width={26}\n                  height={14}\n                  label={t(\"Full width\")}\n                  checked={document.fullWidth}\n                  onChange={(ev) => {\n                    document.fullWidth = ev.currentTarget.checked;\n                    document.save();\n                  }}\n                />\n              </Style>\n            )}\n          </>\n        )}\n      </ContextMenu>\n      {renderModals && (\n        <>\n          {can.move && (\n            <Modal\n              title={t(\"Move {{ documentName }}\", {\n                documentName: document.noun,\n              })}\n              onRequestClose={() => setShowMoveModal(false)}\n              isOpen={showMoveModal}\n            >\n              <DocumentMove\n                document={document}\n                onRequestClose={() => setShowMoveModal(false)}\n              />\n            </Modal>\n          )}\n          {can.delete && (\n            <Modal\n              title={t(\"Delete {{ documentName }}\", {\n                documentName: document.noun,\n              })}\n              onRequestClose={() => setShowDeleteModal(false)}\n              isOpen={showDeleteModal}\n              isCentered\n            >\n              <DocumentDelete\n                document={document}\n                onSubmit={() => setShowDeleteModal(false)}\n              />\n            </Modal>\n          )}\n          {can.permanentDelete && (\n            <Modal\n              title={t(\"Permanently delete {{ documentName }}\", {\n                documentName: document.noun,\n              })}\n              onRequestClose={() => setShowPermanentDeleteModal(false)}\n              isOpen={showPermanentDeleteModal}\n              isCentered\n            >\n              <DocumentPermanentDelete\n                document={document}\n                onSubmit={() => setShowPermanentDeleteModal(false)}\n              />\n            </Modal>\n          )}\n        </>\n      )}\n    </>\n  );\n}\n\nconst ToggleMenuItem = styled(Switch)`\n  * {\n    font-weight: normal;\n    color: ${(props) => props.theme.textSecondary};\n  }\n`;\n\nconst Style = styled.div`\n  padding: 12px;\n\n  ${breakpoint(\"tablet\")`\n    padding: 4px 12px;\n    font-size: 14px;\n  `};\n`;\n\nconst CollectionName = styled.div`\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n`;\n\nexport default observer(DocumentMenu);\n","import { flattenDeep } from \"lodash\";\nimport * as React from \"react\";\nimport { Optional } from \"utility-types\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport {\n  Action,\n  ActionContext,\n  CommandBarAction,\n  MenuItemButton,\n  MenuItemWithChildren,\n} from \"~/types\";\n\nfunction resolve<T>(value: any, context: ActionContext): T {\n  return typeof value === \"function\" ? value(context) : value;\n}\n\nexport function createAction(definition: Optional<Action, \"id\">): Action {\n  return {\n    ...definition,\n    id: uuidv4(),\n  };\n}\n\nexport function actionToMenuItem(\n  action: Action,\n  context: ActionContext\n): MenuItemButton | MenuItemWithChildren {\n  const resolvedIcon = resolve<React.ReactElement<any>>(action.icon, context);\n  const resolvedChildren = resolve<Action[]>(action.children, context);\n  const visible = action.visible ? action.visible(context) : true;\n  const title = resolve<string>(action.name, context);\n  const icon =\n    resolvedIcon && action.iconInContextMenu !== false\n      ? React.cloneElement(resolvedIcon, {\n          color: \"currentColor\",\n        })\n      : undefined;\n\n  if (resolvedChildren) {\n    const items = resolvedChildren\n      .map((a) => actionToMenuItem(a, context))\n      .filter(Boolean)\n      .filter((a) => a.visible);\n\n    return {\n      type: \"submenu\",\n      title,\n      icon,\n      items,\n      visible: visible && items.length > 0,\n    };\n  }\n\n  return {\n    type: \"button\",\n    title,\n    icon,\n    visible,\n    onClick: () => action.perform && action.perform(context),\n    selected: action.selected ? action.selected(context) : undefined,\n  };\n}\n\nexport function actionToKBar(\n  action: Action,\n  context: ActionContext\n): CommandBarAction[] {\n  if (typeof action.visible === \"function\" && !action.visible(context)) {\n    return [];\n  }\n\n  const resolvedIcon = resolve<React.ReactElement<any>>(action.icon, context);\n  const resolvedChildren = resolve<Action[]>(action.children, context);\n  const resolvedSection = resolve<string>(action.section, context);\n  const resolvedName = resolve<string>(action.name, context);\n  const resolvedPlaceholder = resolve<string>(action.placeholder, context);\n  const children = resolvedChildren\n    ? flattenDeep(resolvedChildren.map((a) => actionToKBar(a, context))).filter(\n        (a) => !!a\n      )\n    : [];\n\n  return [\n    {\n      id: action.id,\n      name: resolvedName,\n      section: resolvedSection,\n      placeholder: resolvedPlaceholder,\n      keywords: action.keywords ?? \"\",\n      shortcut: action.shortcut || [],\n      icon: resolvedIcon,\n      perform: action.perform ? () => action?.perform?.(context) : undefined,\n    },\n    // @ts-expect-error ts-migrate(2769) FIXME: No overload matches this call.\n  ].concat(children.map((child) => ({ ...child, parent: action.id })));\n}\n","import { observer } from \"mobx-react\";\nimport { CollectionIcon } from \"outline-icons\";\nimport { getLuminance } from \"polished\";\nimport * as React from \"react\";\nimport Collection from \"~/models/Collection\";\nimport { icons } from \"~/components/IconPicker\";\nimport useStores from \"~/hooks/useStores\";\nimport Logger from \"~/utils/Logger\";\n\ntype Props = {\n  collection: Collection;\n  expanded?: boolean;\n  size?: number;\n  color?: string;\n};\n\nfunction ResolvedCollectionIcon({\n  collection,\n  color: inputColor,\n  expanded,\n  size,\n}: Props) {\n  const { ui } = useStores();\n\n  // If the chosen icon color is very dark then we invert it in dark mode\n  // otherwise it will be impossible to see against the dark background.\n  const color =\n    inputColor ||\n    (ui.resolvedTheme === \"dark\" && collection.color !== \"currentColor\"\n      ? getLuminance(collection.color) > 0.09\n        ? collection.color\n        : \"currentColor\"\n      : collection.color);\n\n  if (collection.icon && collection.icon !== \"collection\") {\n    try {\n      const Component = icons[collection.icon].component;\n      return <Component color={color} size={size} />;\n    } catch (error) {\n      Logger.warn(\"Failed to render custom icon\", {\n        icon: collection.icon,\n      });\n    }\n  }\n\n  return <CollectionIcon color={color} expanded={expanded} size={size} />;\n}\n\nexport default observer(ResolvedCollectionIcon);\n","import { MoreIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport { MenuButton } from \"reakit/Menu\";\nimport NudeButton from \"~/components/NudeButton\";\n\ntype Props = React.ComponentProps<typeof MenuButton> & {\n  className?: string;\n  iconColor?: string;\n};\n\nexport default function OverflowMenuButton({\n  iconColor,\n  className,\n  ...rest\n}: Props) {\n  return (\n    <MenuButton {...rest}>\n      {(props) => (\n        <NudeButton className={className} {...props}>\n          <MoreIcon color={iconColor} />\n        </NudeButton>\n      )}\n    </MenuButton>\n  );\n}\n","import { observer } from \"mobx-react\";\nimport { StarredIcon, UnstarredIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport styled, { useTheme } from \"styled-components\";\nimport Collection from \"~/models/Collection\";\nimport Document from \"~/models/Document\";\nimport {\n  starCollection,\n  unstarCollection,\n} from \"~/actions/definitions/collections\";\nimport { starDocument, unstarDocument } from \"~/actions/definitions/documents\";\nimport useActionContext from \"~/hooks/useActionContext\";\nimport { hover } from \"~/styles\";\nimport NudeButton from \"./NudeButton\";\n\ntype Props = {\n  collection?: Collection;\n  document?: Document;\n  size?: number;\n};\n\nfunction Star({ size, document, collection, ...rest }: Props) {\n  const theme = useTheme();\n  const context = useActionContext({\n    activeDocumentId: document?.id,\n    activeCollectionId: collection?.id,\n  });\n\n  const target = document || collection;\n\n  if (!target) {\n    return null;\n  }\n\n  return (\n    <NudeButton\n      context={context}\n      hideOnActionDisabled\n      action={\n        collection\n          ? collection.isStarred\n            ? unstarCollection\n            : starCollection\n          : document\n          ? document.isStarred\n            ? unstarDocument\n            : starDocument\n          : undefined\n      }\n      size={size}\n      {...rest}\n    >\n      {target.isStarred ? (\n        <AnimatedStar size={size} color={theme.yellow} />\n      ) : (\n        <AnimatedStar\n          size={size}\n          color={theme.textTertiary}\n          as={UnstarredIcon}\n        />\n      )}\n    </NudeButton>\n  );\n}\n\nexport const AnimatedStar = styled(StarredIcon)`\n  flex-shrink: 0;\n  transition: all 100ms ease-in-out;\n\n  &: ${hover} {\n    transform: scale(1.1);\n  }\n  &:active {\n    transform: scale(0.95);\n  }\n\n  @media print {\n    display: none;\n  }\n`;\n\nexport default observer(Star);\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsSAAALEgHS3X78AAAB5klEQVRo3u2YwUvDMBTG+xeKeBOGggdxh6mDgQ4EDwoK/hEePAiihzlBcIgy8CAeZOpkDo8iDvXo5irtp98OIq5bmzbpmpIPAqNN3nu/Ncl7iTWWmYfOzTIABsAAGIDfNldYw/ZuCde3DTw9t9DufPYaf/MZ37FP4gDyK1uo3T0gqNiXY0YOMD61iKOTKlzXhag4hmNpYyQAk7NLqNWbiCraoK1YAfivyQj+L0TYLxEKgJ9etmgzFgAuvjBzPsiaCLOwhQFEdhvhqfRjWylAtrAO1RLNE0IATESqRR/KAJhNVYs+lAGwJFAt+lAGwLpGtehDa4CPdsdMofQuYu23Ue0TmfalRCqKOe3L6VQcaLQ/UqbiUJ+KaxWvPOF3scU+5mrRAHi03PIGdvbKOL+4ws19s28K8RnfsQ/7JgKAgZSOz/DSehPehTiGY6PChAKYWVjFafUSjuNEzgO0QVu0qRxgYjqP/cMKbPtLeinR7do92/ShBCCTLaLeeFReTtMHfUkFyBU30Xp9R1yiL/qUAkBDcRzmvW4ngkBYftMmzn/e60v4TSdr2IKNY84HWRPDFvZAgINyBUkRdychAO7J3NaSIsYyKE94AjCxJE2MKRAAU7uMDCtbjMmr7OgDYH2SVDG2//F+AxD0rwg91nDvAAAAAElFTkSuQmCC\"","import useStores from \"./useStores\";\n\n/**\n * Quick access to retrieve the abilities of a policy for a given entity\n *\n * @param entityId The entity id\n * @returns The available abilities\n */\nexport default function usePolicy(entityId: string) {\n  const { policies } = useStores();\n  return policies.abilities(entityId);\n}\n","import * as React from \"react\";\n\nexport default function Arrow() {\n  return (\n    <svg\n      width=\"13\"\n      height=\"30\"\n      viewBox=\"0 0 13 30\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <path\n        fill=\"currentColor\"\n        d=\"M7.40242 1.48635C8.23085 0.0650039 10.0656 -0.421985 11.5005 0.39863C12.9354 1.21924 13.427 3.03671 12.5986 4.45806L5.59858 16.4681C4.77015 17.8894 2.93538 18.3764 1.5005 17.5558C0.065623 16.7352 -0.426002 14.9177 0.402425 13.4964L7.40242 1.48635Z\"\n      />\n      <path\n        fill=\"currentColor\"\n        d=\"M12.5986 25.5419C13.427 26.9633 12.9354 28.7808 11.5005 29.6014C10.0656 30.422 8.23087 29.935 7.40244 28.5136L0.402438 16.5036C-0.425989 15.0823 0.0656365 13.2648 1.50051 12.4442C2.93539 11.6236 4.77016 12.1106 5.59859 13.5319L12.5986 25.5419Z\"\n      />\n    </svg>\n  );\n}\n","import invariant from \"invariant\";\nimport { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport { useTranslation, Trans } from \"react-i18next\";\nimport { useHistory } from \"react-router-dom\";\nimport ConfirmationDialog from \"~/components/ConfirmationDialog\";\nimport useStores from \"~/hooks/useStores\";\nimport useToasts from \"~/hooks/useToasts\";\nimport { documentUrl } from \"~/utils/routeHelpers\";\n\ntype Props = {\n  documentId: string;\n};\n\nfunction DocumentTemplatizeDialog({ documentId }: Props) {\n  const history = useHistory();\n  const { showToast } = useToasts();\n  const { t } = useTranslation();\n  const { documents } = useStores();\n  const document = documents.get(documentId);\n  invariant(document, \"Document must exist\");\n\n  const handleSubmit = React.useCallback(async () => {\n    const template = await document?.templatize();\n    if (template) {\n      history.push(documentUrl(template));\n      showToast(t(\"Template created, go ahead and customize it\"), {\n        type: \"info\",\n      });\n    }\n  }, [document, showToast, history, t]);\n\n  return (\n    <ConfirmationDialog\n      onSubmit={handleSubmit}\n      submitText={t(\"Create template\")}\n      savingText={`${t(\"Creating\")}`}\n    >\n      <Trans\n        defaults=\"Creating a template from <em>{{titleWithDefault}}</em> is a non-destructive action  we'll make a copy of the document and turn it into a template that can be used as a starting point for new documents.\"\n        values={{\n          titleWithDefault: document.titleWithDefault,\n        }}\n        components={{\n          em: <strong />,\n        }}\n      />\n    </ConfirmationDialog>\n  );\n}\n\nexport default observer(DocumentTemplatizeDialog);\n","import invariant from \"invariant\";\nimport {\n  DownloadIcon,\n  DuplicateIcon,\n  StarredIcon,\n  PrintIcon,\n  UnstarredIcon,\n  DocumentIcon,\n  NewDocumentIcon,\n  ShapesIcon,\n  ImportIcon,\n  PinIcon,\n  SearchIcon,\n} from \"outline-icons\";\nimport * as React from \"react\";\nimport getDataTransferFiles from \"@shared/utils/getDataTransferFiles\";\nimport DocumentTemplatizeDialog from \"~/components/DocumentTemplatizeDialog\";\nimport { createAction } from \"~/actions\";\nimport { DocumentSection } from \"~/actions/sections\";\nimport history from \"~/utils/history\";\nimport { homePath, newDocumentPath, searchPath } from \"~/utils/routeHelpers\";\n\nexport const openDocument = createAction({\n  name: ({ t }) => t(\"Open document\"),\n  section: DocumentSection,\n  shortcut: [\"o\", \"d\"],\n  keywords: \"go to\",\n  icon: <DocumentIcon />,\n  children: ({ stores }) => {\n    const paths = stores.collections.pathsToDocuments;\n\n    return paths\n      .filter((path) => path.type === \"document\")\n      .map((path) => ({\n        // Note: using url which includes the slug rather than id here to bust\n        // cache if the document is renamed\n        id: path.url,\n        name: path.title,\n        icon: () =>\n          stores.documents.get(path.id)?.isStarred ? <StarredIcon /> : null,\n        section: DocumentSection,\n        perform: () => history.push(path.url),\n      }));\n  },\n});\n\nexport const createDocument = createAction({\n  name: ({ t }) => t(\"New document\"),\n  section: DocumentSection,\n  icon: <NewDocumentIcon />,\n  keywords: \"create\",\n  visible: ({ activeCollectionId, stores }) =>\n    !!activeCollectionId &&\n    stores.policies.abilities(activeCollectionId).update,\n  perform: ({ activeCollectionId, inStarredSection }) =>\n    activeCollectionId &&\n    history.push(newDocumentPath(activeCollectionId), {\n      starred: inStarredSection,\n    }),\n});\n\nexport const starDocument = createAction({\n  name: ({ t }) => t(\"Star\"),\n  section: DocumentSection,\n  icon: <StarredIcon />,\n  keywords: \"favorite bookmark\",\n  visible: ({ activeDocumentId, stores }) => {\n    if (!activeDocumentId) {\n      return false;\n    }\n    const document = stores.documents.get(activeDocumentId);\n    return (\n      !document?.isStarred && stores.policies.abilities(activeDocumentId).star\n    );\n  },\n  perform: ({ activeDocumentId, stores }) => {\n    if (!activeDocumentId) {\n      return;\n    }\n\n    const document = stores.documents.get(activeDocumentId);\n    document?.star();\n  },\n});\n\nexport const unstarDocument = createAction({\n  name: ({ t }) => t(\"Unstar\"),\n  section: DocumentSection,\n  icon: <UnstarredIcon />,\n  keywords: \"unfavorite unbookmark\",\n  visible: ({ activeDocumentId, stores }) => {\n    if (!activeDocumentId) {\n      return false;\n    }\n    const document = stores.documents.get(activeDocumentId);\n    return (\n      !!document?.isStarred &&\n      stores.policies.abilities(activeDocumentId).unstar\n    );\n  },\n  perform: ({ activeDocumentId, stores }) => {\n    if (!activeDocumentId) {\n      return;\n    }\n\n    const document = stores.documents.get(activeDocumentId);\n    document?.unstar();\n  },\n});\n\nexport const downloadDocument = createAction({\n  name: ({ t, isContextMenu }) =>\n    isContextMenu ? t(\"Download\") : t(\"Download document\"),\n  section: DocumentSection,\n  icon: <DownloadIcon />,\n  keywords: \"export\",\n  visible: ({ activeDocumentId, stores }) =>\n    !!activeDocumentId && stores.policies.abilities(activeDocumentId).download,\n  perform: ({ activeDocumentId, stores }) => {\n    if (!activeDocumentId) {\n      return;\n    }\n\n    const document = stores.documents.get(activeDocumentId);\n    document?.download();\n  },\n});\n\nexport const duplicateDocument = createAction({\n  name: ({ t, isContextMenu }) =>\n    isContextMenu ? t(\"Duplicate\") : t(\"Duplicate document\"),\n  section: DocumentSection,\n  icon: <DuplicateIcon />,\n  keywords: \"copy\",\n  visible: ({ activeDocumentId, stores }) =>\n    !!activeDocumentId && stores.policies.abilities(activeDocumentId).update,\n  perform: async ({ activeDocumentId, t, stores }) => {\n    if (!activeDocumentId) {\n      return;\n    }\n\n    const document = stores.documents.get(activeDocumentId);\n    invariant(document, \"Document must exist\");\n    const duped = await document.duplicate();\n    // when duplicating, go straight to the duplicated document content\n    history.push(duped.url);\n    stores.toasts.showToast(t(\"Document duplicated\"), {\n      type: \"success\",\n    });\n  },\n});\n\n/**\n * Pin a document to a collection. Pinned documents will be displayed at the top\n * of the collection for all collection members to see.\n */\nexport const pinDocumentToCollection = createAction({\n  name: ({ t }) => t(\"Pin to collection\"),\n  section: DocumentSection,\n  icon: <PinIcon />,\n  iconInContextMenu: false,\n  visible: ({ activeCollectionId, activeDocumentId, stores }) => {\n    if (!activeDocumentId || !activeCollectionId) {\n      return false;\n    }\n\n    const document = stores.documents.get(activeDocumentId);\n    return (\n      !!stores.policies.abilities(activeDocumentId).pin && !document?.pinned\n    );\n  },\n  perform: async ({ activeDocumentId, activeCollectionId, t, stores }) => {\n    if (!activeDocumentId || !activeCollectionId) {\n      return;\n    }\n\n    const document = stores.documents.get(activeDocumentId);\n    await document?.pin(document.collectionId);\n\n    const collection = stores.collections.get(activeCollectionId);\n\n    if (!collection || !location.pathname.startsWith(collection?.url)) {\n      stores.toasts.showToast(t(\"Pinned to collection\"));\n    }\n  },\n});\n\n/**\n * Pin a document to team home. Pinned documents will be displayed at the top\n * of the home screen for all team members to see.\n */\nexport const pinDocumentToHome = createAction({\n  name: ({ t }) => t(\"Pin to home\"),\n  section: DocumentSection,\n  icon: <PinIcon />,\n  iconInContextMenu: false,\n  visible: ({ activeDocumentId, currentTeamId, stores }) => {\n    if (!currentTeamId || !activeDocumentId) {\n      return false;\n    }\n\n    const document = stores.documents.get(activeDocumentId);\n\n    return (\n      !!stores.policies.abilities(activeDocumentId).pinToHome &&\n      !document?.pinnedToHome\n    );\n  },\n  perform: async ({ activeDocumentId, location, t, stores }) => {\n    if (!activeDocumentId) {\n      return;\n    }\n    const document = stores.documents.get(activeDocumentId);\n\n    await document?.pin();\n\n    if (location.pathname !== homePath()) {\n      stores.toasts.showToast(t(\"Pinned to team home\"));\n    }\n  },\n});\n\nexport const pinDocument = createAction({\n  name: ({ t }) => t(\"Pin\"),\n  section: DocumentSection,\n  icon: <PinIcon />,\n  children: [pinDocumentToCollection, pinDocumentToHome],\n});\n\nexport const printDocument = createAction({\n  name: ({ t, isContextMenu }) =>\n    isContextMenu ? t(\"Print\") : t(\"Print document\"),\n  section: DocumentSection,\n  icon: <PrintIcon />,\n  visible: ({ activeDocumentId }) => !!activeDocumentId,\n  perform: async () => {\n    window.print();\n  },\n});\n\nexport const importDocument = createAction({\n  name: ({ t }) => t(\"Import document\"),\n  section: DocumentSection,\n  icon: <ImportIcon />,\n  keywords: \"upload\",\n  visible: ({ activeCollectionId, activeDocumentId, stores }) => {\n    if (activeDocumentId) {\n      return !!stores.policies.abilities(activeDocumentId).createChildDocument;\n    }\n\n    if (activeCollectionId) {\n      return !!stores.policies.abilities(activeCollectionId).update;\n    }\n\n    return false;\n  },\n  perform: ({ activeCollectionId, activeDocumentId, stores }) => {\n    const { documents, toasts } = stores;\n    const input = document.createElement(\"input\");\n    input.type = \"file\";\n    input.accept = documents.importFileTypes.join(\", \");\n\n    input.onchange = async (ev: Event) => {\n      const files = getDataTransferFiles(ev);\n\n      try {\n        const file = files[0];\n        const document = await documents.import(\n          file,\n          activeDocumentId,\n          activeCollectionId,\n          {\n            publish: true,\n          }\n        );\n        history.push(document.url);\n      } catch (err) {\n        toasts.showToast(err.message, {\n          type: \"error\",\n        });\n        throw err;\n      }\n    };\n\n    input.click();\n  },\n});\n\nexport const createTemplate = createAction({\n  name: ({ t }) => t(\"Templatize\"),\n  section: DocumentSection,\n  icon: <ShapesIcon />,\n  keywords: \"new create template\",\n  visible: ({ activeCollectionId, activeDocumentId, stores }) => {\n    if (!activeDocumentId) {\n      return false;\n    }\n    const document = stores.documents.get(activeDocumentId);\n    return (\n      !!activeCollectionId &&\n      stores.policies.abilities(activeCollectionId).update &&\n      !document?.isTemplate\n    );\n  },\n  perform: ({ activeDocumentId, stores, t, event }) => {\n    if (!activeDocumentId) {\n      return;\n    }\n    event?.preventDefault();\n    event?.stopPropagation();\n\n    stores.dialogs.openModal({\n      title: t(\"Create template\"),\n      isCentered: true,\n      content: <DocumentTemplatizeDialog documentId={activeDocumentId} />,\n    });\n  },\n});\n\nexport const searchDocumentsForQuery = (searchQuery: string) =>\n  createAction({\n    id: \"search\",\n    section: DocumentSection,\n    name: ({ t }) =>\n      t(`Search documents for \"{{searchQuery}}\"`, { searchQuery }),\n    icon: <SearchIcon />,\n    perform: () => history.push(searchPath(searchQuery)),\n    visible: ({ location }) => location.pathname !== searchPath(),\n  });\n\nexport const rootDocumentActions = [\n  openDocument,\n  createDocument,\n  createTemplate,\n  importDocument,\n  downloadDocument,\n  starDocument,\n  unstarDocument,\n  duplicateDocument,\n  printDocument,\n  pinDocumentToCollection,\n  pinDocumentToHome,\n];\n","const randomInteger = (min: number, max: number) => {\n  return Math.floor(Math.random() * (max - min + 1) + min);\n};\n\nexport { randomInteger };\n","import * as React from \"react\";\nimport styled from \"styled-components\";\nimport { randomInteger } from \"@shared/random\";\nimport Flex from \"~/components/Flex\";\nimport { pulsate } from \"~/styles/animations\";\n\nexport type Props = {\n  header?: boolean;\n  height?: number;\n  minWidth?: number;\n  maxWidth?: number;\n  delay?: number;\n};\n\nclass PlaceholderText extends React.Component<Props> {\n  width = randomInteger(this.props.minWidth || 75, this.props.maxWidth || 100);\n\n  shouldComponentUpdate() {\n    return false;\n  }\n\n  render() {\n    return (\n      <Mask\n        width={this.width}\n        height={this.props.height}\n        delay={this.props.delay}\n        header={this.props.header}\n      />\n    );\n  }\n}\n\nconst Mask = styled(Flex)<{\n  width: number;\n  height?: number;\n  delay?: number;\n  header?: boolean;\n}>`\n  width: ${(props) => (props.header ? props.width / 2 : props.width)}%;\n  height: ${(props) =>\n    props.height ? props.height : props.header ? 24 : 18}px;\n  margin-bottom: 6px;\n  border-radius: 6px;\n  background-color: ${(props) => props.theme.divider};\n  animation: ${pulsate} 2s infinite;\n  animation-delay: ${(props) => props.delay || 0}s;\n\n  &:last-child {\n    margin-bottom: 0;\n  }\n`;\n\nexport default PlaceholderText;\n","import * as React from \"react\";\nimport useMobile from \"~/hooks/useMobile\";\nimport useWindowSize from \"~/hooks/useWindowSize\";\n\nconst useMenuHeight = (\n  visible: void | boolean,\n  unstable_disclosureRef?: React.RefObject<HTMLElement | null>\n) => {\n  const [maxHeight, setMaxHeight] = React.useState<number | undefined>();\n  const isMobile = useMobile();\n  const { height: windowHeight } = useWindowSize();\n\n  React.useLayoutEffect(() => {\n    const padding = 8;\n\n    if (visible && !isMobile) {\n      setMaxHeight(\n        unstable_disclosureRef?.current\n          ? windowHeight -\n              unstable_disclosureRef.current.getBoundingClientRect().bottom -\n              padding\n          : undefined\n      );\n    }\n  }, [visible, unstable_disclosureRef, windowHeight, isMobile]);\n  return maxHeight;\n};\n\nexport default useMenuHeight;\n","import { ActionContext } from \"~/types\";\n\nexport const CollectionSection = ({ t }: ActionContext) => t(\"Collection\");\n\nexport const DebugSection = ({ t }: ActionContext) => t(\"Debug\");\n\nexport const DocumentSection = ({ t }: ActionContext) => t(\"Document\");\n\nexport const SettingsSection = ({ t }: ActionContext) => t(\"Settings\");\n\nexport const NavigationSection = ({ t }: ActionContext) => t(\"Navigation\");\n\nexport const UserSection = ({ t }: ActionContext) => t(\"People\");\n\nexport const RecentSearchesSection = ({ t }: ActionContext) =>\n  t(\"Recent searches\");\n","import { AnimateSharedLayout } from \"framer-motion\";\nimport { transparentize } from \"polished\";\nimport * as React from \"react\";\nimport styled from \"styled-components\";\nimport useWindowSize from \"~/hooks/useWindowSize\";\n\nconst Nav = styled.nav<{ $shadowVisible?: boolean }>`\n  border-bottom: 1px solid ${(props) => props.theme.divider};\n  margin: 12px 0;\n  overflow-y: auto;\n  white-space: nowrap;\n\n  -ms-overflow-style: none;\n  scrollbar-width: none;\n\n  &::-webkit-scrollbar {\n    display: none;\n  }\n\n  &:after {\n    content: \"\";\n    position: absolute;\n    top: 0;\n    right: 0;\n    width: 50px;\n    height: 100%;\n    pointer-events: none;\n    background: ${(props) =>\n      props.$shadowVisible\n        ? `linear-gradient(\n      90deg,\n      ${transparentize(1, props.theme.background)} 0%,\n      ${props.theme.background} 100%\n    )`\n        : `transparent`};\n  }\n`;\n\n// When sticky we need extra background coverage around the sides otherwise\n// items that scroll past can \"stick out\" the sides of the heading\nconst Sticky = styled.div`\n  position: sticky;\n  top: 54px;\n  margin: 0 -8px;\n  padding: 0 8px;\n  background: ${(props) => props.theme.background};\n  transition: ${(props) => props.theme.backgroundTransition};\n  z-index: 1;\n`;\n\nexport const Separator = styled.span`\n  border-left: 1px solid ${(props) => props.theme.divider};\n  position: relative;\n  top: 2px;\n  margin-right: 24px;\n  margin-top: 6px;\n`;\n\nconst Tabs: React.FC = ({ children }) => {\n  const ref = React.useRef<any>();\n  const [shadowVisible, setShadow] = React.useState(false);\n  const { width } = useWindowSize();\n\n  const updateShadows = React.useCallback(() => {\n    const c = ref.current;\n    if (!c) {\n      return;\n    }\n    const scrollLeft = c.scrollLeft;\n    const wrapperWidth = c.scrollWidth - c.clientWidth;\n    const fade = !!(wrapperWidth - scrollLeft !== 0);\n\n    if (fade !== shadowVisible) {\n      setShadow(fade);\n    }\n  }, [shadowVisible]);\n\n  React.useEffect(() => {\n    updateShadows();\n  }, [width, updateShadows]);\n\n  return (\n    <AnimateSharedLayout>\n      <Sticky>\n        <Nav ref={ref} onScroll={updateShadows} $shadowVisible={shadowVisible}>\n          {children}\n        </Nav>\n      </Sticky>\n    </AnimateSharedLayout>\n  );\n};\n\nexport default Tabs;\n","import styled from \"styled-components\";\nimport Flex from \"~/components/Flex\";\n\nconst Section = styled(Flex)`\n  position: relative;\n  flex-direction: column;\n  margin: 0 8px 12px;\n  min-width: ${(props) => props.theme.sidebarMinWidth}px;\n  flex-shrink: 0;\n\n  &:first-child {\n    margin-top: 20px;\n  }\n`;\n\nexport default Section;\n","import * as React from \"react\";\nimport { match, NavLink, Route } from \"react-router-dom\";\n\ntype Props = React.ComponentProps<typeof NavLink> & {\n  children?: (\n    match:\n      | match<{\n          [x: string]: string | undefined;\n        }>\n      | boolean\n      | null\n  ) => React.ReactNode;\n  exact?: boolean;\n  activeStyle?: React.CSSProperties;\n  to: string;\n};\n\nfunction NavLinkWithChildrenFunc(\n  { to, exact = false, children, ...rest }: Props,\n  ref?: React.Ref<HTMLAnchorElement>\n) {\n  return (\n    <Route path={to} exact={exact}>\n      {({ match, location }) => (\n        <NavLink {...rest} to={to} exact={exact} ref={ref}>\n          {children\n            ? children(rest.isActive ? rest.isActive(match, location) : match)\n            : null}\n        </NavLink>\n      )}\n    </Route>\n  );\n}\n\nexport default React.forwardRef<HTMLAnchorElement, Props>(\n  NavLinkWithChildrenFunc\n);\n","import { observer } from \"mobx-react\";\nimport { PlusIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { Link } from \"react-router-dom\";\nimport { CompositeStateReturn, CompositeItem } from \"reakit/Composite\";\nimport styled, { css } from \"styled-components\";\nimport breakpoint from \"styled-components-breakpoint\";\nimport Document from \"~/models/Document\";\nimport Badge from \"~/components/Badge\";\nimport Button from \"~/components/Button\";\nimport DocumentMeta from \"~/components/DocumentMeta\";\nimport EventBoundary from \"~/components/EventBoundary\";\nimport Flex from \"~/components/Flex\";\nimport Highlight from \"~/components/Highlight\";\nimport NudeButton from \"~/components/NudeButton\";\nimport StarButton, { AnimatedStar } from \"~/components/Star\";\nimport Tooltip from \"~/components/Tooltip\";\nimport useBoolean from \"~/hooks/useBoolean\";\nimport useCurrentTeam from \"~/hooks/useCurrentTeam\";\nimport useCurrentUser from \"~/hooks/useCurrentUser\";\nimport usePolicy from \"~/hooks/usePolicy\";\nimport DocumentMenu from \"~/menus/DocumentMenu\";\nimport { hover } from \"~/styles\";\nimport { newDocumentPath } from \"~/utils/routeHelpers\";\n\ntype Props = {\n  document: Document;\n  highlight?: string | undefined;\n  context?: string | undefined;\n  showParentDocuments?: boolean;\n  showCollection?: boolean;\n  showPublished?: boolean;\n  showPin?: boolean;\n  showDraft?: boolean;\n  showTemplate?: boolean;\n} & CompositeStateReturn;\n\nconst SEARCH_RESULT_REGEX = /<b\\b[^>]*>(.*?)<\\/b>/gi;\n\nfunction replaceResultMarks(tag: string) {\n  // don't use SEARCH_RESULT_REGEX here as it causes\n  // an infinite loop to trigger a regex inside it's own callback\n  return tag.replace(/<b\\b[^>]*>(.*?)<\\/b>/gi, \"$1\");\n}\n\nfunction DocumentListItem(\n  props: Props,\n  ref: React.RefObject<HTMLAnchorElement>\n) {\n  const { t } = useTranslation();\n  const currentUser = useCurrentUser();\n  const currentTeam = useCurrentTeam();\n  const [menuOpen, handleMenuOpen, handleMenuClose] = useBoolean();\n\n  const {\n    document,\n    showParentDocuments,\n    showCollection,\n    showPublished,\n    showPin,\n    showDraft = true,\n    showTemplate,\n    highlight,\n    context,\n    ...rest\n  } = props;\n  const queryIsInTitle =\n    !!highlight &&\n    !!document.title.toLowerCase().includes(highlight.toLowerCase());\n  const canStar =\n    !document.isDraft && !document.isArchived && !document.isTemplate;\n  const can = usePolicy(currentTeam.id);\n  const canCollection = usePolicy(document.collectionId);\n\n  return (\n    <CompositeItem\n      as={DocumentLink}\n      ref={ref}\n      dir={document.dir}\n      role=\"menuitem\"\n      $isStarred={document.isStarred}\n      $menuOpen={menuOpen}\n      to={{\n        pathname: document.url,\n        state: {\n          title: document.titleWithDefault,\n        },\n      }}\n      {...rest}\n    >\n      <Content>\n        <Heading dir={document.dir}>\n          <Title\n            text={document.titleWithDefault}\n            highlight={highlight}\n            dir={document.dir}\n          />\n          {document.isBadgedNew && document.createdBy.id !== currentUser.id && (\n            <Badge yellow>{t(\"New\")}</Badge>\n          )}\n          {canStar && (\n            <StarPositioner>\n              <StarButton document={document} />\n            </StarPositioner>\n          )}\n          {document.isDraft && showDraft && (\n            <Tooltip\n              tooltip={t(\"Only visible to you\")}\n              delay={500}\n              placement=\"top\"\n            >\n              <Badge>{t(\"Draft\")}</Badge>\n            </Tooltip>\n          )}\n          {document.isTemplate && showTemplate && (\n            <Badge primary>{t(\"Template\")}</Badge>\n          )}\n        </Heading>\n\n        {!queryIsInTitle && (\n          <ResultContext\n            text={context}\n            highlight={highlight ? SEARCH_RESULT_REGEX : undefined}\n            processResult={replaceResultMarks}\n          />\n        )}\n        <DocumentMeta\n          document={document}\n          showCollection={showCollection}\n          showPublished={showPublished}\n          showParentDocuments={showParentDocuments}\n          showLastViewed\n        />\n      </Content>\n      <Actions>\n        {document.isTemplate &&\n          !document.isArchived &&\n          !document.isDeleted &&\n          can.createDocument &&\n          canCollection.update && (\n            <>\n              <Button\n                as={Link}\n                to={newDocumentPath(document.collectionId, {\n                  templateId: document.id,\n                })}\n                icon={<PlusIcon />}\n                neutral\n              >\n                {t(\"New doc\")}\n              </Button>\n              &nbsp;\n            </>\n          )}\n        <DocumentMenu\n          document={document}\n          showPin={showPin}\n          onOpen={handleMenuOpen}\n          onClose={handleMenuClose}\n          modal={false}\n        />\n      </Actions>\n    </CompositeItem>\n  );\n}\n\nconst Content = styled.div`\n  flex-grow: 1;\n  flex-shrink: 1;\n  min-width: 0;\n`;\n\nconst Actions = styled(EventBoundary)`\n  display: none;\n  align-items: center;\n  margin: 8px;\n  flex-shrink: 0;\n  flex-grow: 0;\n\n  ${NudeButton} {\n    &:hover,\n    &[aria-expanded=\"true\"] {\n      background: ${(props) => props.theme.sidebarControlHoverBackground};\n    }\n  }\n\n  ${breakpoint(\"tablet\")`\n    display: flex;\n  `};\n`;\n\nconst DocumentLink = styled(Link)<{\n  $isStarred?: boolean;\n  $menuOpen?: boolean;\n}>`\n  display: flex;\n  align-items: center;\n  margin: 10px -8px;\n  padding: 6px 8px;\n  border-radius: 8px;\n  max-height: 50vh;\n  width: calc(100vw - 8px);\n\n  &:focus-visible {\n    outline: none;\n  }\n\n  ${breakpoint(\"tablet\")`\n    width: auto;\n  `};\n\n  ${Actions} {\n    opacity: 0;\n  }\n\n  ${AnimatedStar} {\n    opacity: ${(props) => (props.$isStarred ? \"1 !important\" : 0)};\n  }\n\n  &:${hover},\n  &:active,\n  &:focus,\n  &:focus-within {\n    background: ${(props) => props.theme.listItemHoverBackground};\n\n    ${Actions} {\n      opacity: 1;\n    }\n\n    ${AnimatedStar} {\n      opacity: 0.5;\n\n      &:hover {\n        opacity: 1;\n      }\n    }\n  }\n\n  ${(props) =>\n    props.$menuOpen &&\n    css`\n      background: ${(props) => props.theme.listItemHoverBackground};\n\n      ${Actions} {\n        opacity: 1;\n      }\n\n      ${AnimatedStar} {\n        opacity: 0.5;\n      }\n    `}\n`;\n\nconst Heading = styled.h3<{ rtl?: boolean }>`\n  display: flex;\n  justify-content: ${(props) => (props.rtl ? \"flex-end\" : \"flex-start\")};\n  align-items: center;\n  height: 24px;\n  margin-top: 0;\n  margin-bottom: 0.25em;\n  overflow: hidden;\n  white-space: nowrap;\n  color: ${(props) => props.theme.text};\n  font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Oxygen,\n    Ubuntu, Cantarell, \"Open Sans\", \"Helvetica Neue\", sans-serif;\n`;\n\nconst StarPositioner = styled(Flex)`\n  margin-left: 4px;\n  align-items: center;\n`;\n\nconst Title = styled(Highlight)`\n  max-width: 90%;\n  overflow: hidden;\n  text-overflow: ellipsis;\n`;\n\nconst ResultContext = styled(Highlight)`\n  display: block;\n  color: ${(props) => props.theme.textTertiary};\n  font-size: 14px;\n  margin-top: -0.25em;\n  margin-bottom: 0.25em;\n`;\n\nexport default observer(React.forwardRef(DocumentListItem));\n","import { useTranslation } from \"react-i18next\";\nimport { useLocation } from \"react-router\";\nimport useStores from \"~/hooks/useStores\";\nimport { ActionContext } from \"~/types\";\n\n/**\n * Hook to get the current action context, an object that is passed to all\n * action definitions.\n *\n * @param overrides Overides of the default action context.\n * @returns The current action context.\n */\nexport default function useActionContext(\n  overrides?: Partial<ActionContext>\n): ActionContext {\n  const stores = useStores();\n  const { t } = useTranslation();\n  const location = useLocation();\n\n  return {\n    isContextMenu: false,\n    isCommandBar: false,\n    isButton: false,\n    activeCollectionId: stores.ui.activeCollectionId,\n    activeDocumentId: stores.ui.activeDocumentId,\n    currentUserId: stores.auth.user?.id,\n    currentTeamId: stores.auth.team?.id,\n    ...overrides,\n    location,\n    stores,\n    t,\n  };\n}\n","import * as React from \"react\";\nimport styled, { useTheme } from \"styled-components\";\nimport Flex from \"~/components/Flex\";\nimport NavLink from \"~/components/NavLink\";\n\nexport type Props = {\n  image?: React.ReactNode;\n  to?: string;\n  exact?: boolean;\n  title: React.ReactNode;\n  subtitle?: React.ReactNode;\n  actions?: React.ReactNode;\n  border?: boolean;\n  small?: boolean;\n};\n\nconst ListItem = (\n  { image, title, subtitle, actions, small, border, to, ...rest }: Props,\n  ref?: React.Ref<HTMLAnchorElement>\n) => {\n  const theme = useTheme();\n  const compact = !subtitle;\n\n  const content = (selected: boolean) => (\n    <>\n      {image && <Image>{image}</Image>}\n      <Content\n        justify={compact ? \"center\" : undefined}\n        column={!compact}\n        $selected={selected}\n      >\n        <Heading $small={small}>{title}</Heading>\n        {subtitle && (\n          <Subtitle $small={small} $selected={selected}>\n            {subtitle}\n          </Subtitle>\n        )}\n      </Content>\n      {actions && (\n        <Actions $selected={selected} gap={4}>\n          {actions}\n        </Actions>\n      )}\n    </>\n  );\n\n  if (to) {\n    return (\n      <Wrapper\n        ref={ref}\n        $border={border}\n        $small={small}\n        activeStyle={{\n          background: theme.primary,\n        }}\n        {...rest}\n        as={NavLink}\n        to={to}\n      >\n        {content}\n      </Wrapper>\n    );\n  }\n\n  return (\n    <Wrapper ref={ref} $border={border} $small={small} {...rest}>\n      {content(false)}\n    </Wrapper>\n  );\n};\n\nconst Wrapper = styled.a<{ $small?: boolean; $border?: boolean; to?: string }>`\n  display: flex;\n  padding: ${(props) => (props.$border === false ? 0 : \"8px 0\")};\n  margin: ${(props) =>\n    props.$border === false ? (props.$small ? \"8px 0\" : \"16px 0\") : 0};\n  border-bottom: 1px solid\n    ${(props) =>\n      props.$border === false ? \"transparent\" : props.theme.divider};\n\n  &:last-child {\n    border-bottom: 0;\n  }\n\n  cursor: ${({ to }) => (to ? \"pointer\" : \"default\")};\n`;\n\nconst Image = styled(Flex)`\n  padding: 0 8px 0 0;\n  max-height: 32px;\n  align-items: center;\n  user-select: none;\n  flex-shrink: 0;\n  align-self: center;\n  color: ${(props) => props.theme.text};\n`;\n\nconst Heading = styled.p<{ $small?: boolean }>`\n  font-size: ${(props) => (props.$small ? 14 : 16)}px;\n  font-weight: 500;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  line-height: ${(props) => (props.$small ? 1.3 : 1.2)};\n  margin: 0;\n`;\n\nconst Content = styled(Flex)<{ $selected: boolean }>`\n  flex-direction: column;\n  flex-grow: 1;\n  color: ${(props) => (props.$selected ? props.theme.white : props.theme.text)};\n`;\n\nconst Subtitle = styled.p<{ $small?: boolean; $selected?: boolean }>`\n  margin: 0;\n  font-size: ${(props) => (props.$small ? 13 : 14)}px;\n  color: ${(props) =>\n    props.$selected ? props.theme.white50 : props.theme.textTertiary};\n  margin-top: -2px;\n`;\n\nexport const Actions = styled(Flex)<{ $selected?: boolean }>`\n  align-self: center;\n  justify-content: center;\n  color: ${(props) =>\n    props.$selected ? props.theme.white : props.theme.textSecondary};\n`;\n\nexport default React.forwardRef(ListItem);\n","import invariant from \"invariant\";\nimport { observer } from \"mobx-react\";\nimport { useState } from \"react\";\nimport * as React from \"react\";\nimport { Trans, useTranslation } from \"react-i18next\";\nimport Button from \"~/components/Button\";\nimport Flex from \"~/components/Flex\";\nimport IconPicker from \"~/components/IconPicker\";\nimport Input from \"~/components/Input\";\nimport InputSelect from \"~/components/InputSelect\";\nimport Text from \"~/components/Text\";\nimport useStores from \"~/hooks/useStores\";\nimport useToasts from \"~/hooks/useToasts\";\n\ntype Props = {\n  collectionId: string;\n  onSubmit: () => void;\n};\n\nconst CollectionEdit = ({ collectionId, onSubmit }: Props) => {\n  const { collections } = useStores();\n  const collection = collections.get(collectionId);\n  invariant(collection, \"Collection not found\");\n  const [name, setName] = useState(collection.name);\n  const [icon, setIcon] = useState(collection.icon);\n  const [color, setColor] = useState(collection.color || \"#4E5C6E\");\n  const [sort, setSort] = useState<{\n    field: string;\n    direction: \"asc\" | \"desc\";\n  }>(collection.sort);\n  const [isSaving, setIsSaving] = useState(false);\n  const { showToast } = useToasts();\n  const { t } = useTranslation();\n\n  const handleSubmit = React.useCallback(\n    async (ev: React.SyntheticEvent<HTMLFormElement>) => {\n      ev.preventDefault();\n      setIsSaving(true);\n\n      try {\n        await collection.save({\n          name,\n          icon,\n          color,\n          sort,\n        });\n        onSubmit();\n        showToast(t(\"The collection was updated\"), {\n          type: \"success\",\n        });\n      } catch (err) {\n        showToast(err.message, {\n          type: \"error\",\n        });\n      } finally {\n        setIsSaving(false);\n      }\n    },\n    [collection, color, icon, name, onSubmit, showToast, sort, t]\n  );\n\n  const handleSortChange = (value: string) => {\n    const [field, direction] = value.split(\".\");\n\n    if (direction === \"asc\" || direction === \"desc\") {\n      setSort({\n        field,\n        direction,\n      });\n    }\n  };\n\n  const handleNameChange = (ev: React.ChangeEvent<HTMLInputElement>) => {\n    setName(ev.target.value);\n  };\n\n  const handleChange = (color: string, icon: string) => {\n    setColor(color);\n    setIcon(icon);\n  };\n\n  return (\n    <Flex column>\n      <form onSubmit={handleSubmit}>\n        <Text type=\"secondary\">\n          <Trans>\n            You can edit the name and other details at any time, however doing\n            so often might confuse your team mates.\n          </Trans>\n        </Text>\n        <Flex gap={8}>\n          <Input\n            type=\"text\"\n            label={t(\"Name\")}\n            onChange={handleNameChange}\n            value={name}\n            required\n            autoFocus\n            flex\n          />\n          <IconPicker onChange={handleChange} color={color} icon={icon} />\n        </Flex>\n        <InputSelect\n          label={t(\"Sort in sidebar\")}\n          options={[\n            {\n              label: t(\"Alphabetical sort\"),\n              value: \"title.asc\",\n            },\n            {\n              label: t(\"Manual sort\"),\n              value: \"index.asc\",\n            },\n          ]}\n          value={`${sort.field}.${sort.direction}`}\n          onChange={handleSortChange}\n          ariaLabel={t(\"Sort\")}\n        />\n        <Button type=\"submit\" disabled={isSaving || !collection.name}>\n          {isSaving ? `${t(\"Saving\")}` : t(\"Save\")}\n        </Button>\n      </form>\n    </Flex>\n  );\n};\n\nexport default observer(CollectionEdit);\n","import {\n  HomeIcon,\n  SearchIcon,\n  ArchiveIcon,\n  TrashIcon,\n  EditIcon,\n  OpenIcon,\n  SettingsIcon,\n  ShapesIcon,\n  KeyboardIcon,\n  EmailIcon,\n  LogoutIcon,\n  ProfileIcon,\n} from \"outline-icons\";\nimport * as React from \"react\";\nimport {\n  developersUrl,\n  changelogUrl,\n  feedbackUrl,\n  githubIssuesUrl,\n} from \"@shared/utils/urlHelpers\";\nimport stores from \"~/stores\";\nimport SearchQuery from \"~/models/SearchQuery\";\nimport KeyboardShortcuts from \"~/scenes/KeyboardShortcuts\";\nimport { createAction } from \"~/actions\";\nimport { NavigationSection, RecentSearchesSection } from \"~/actions/sections\";\nimport history from \"~/utils/history\";\nimport {\n  organizationSettingsPath,\n  profileSettingsPath,\n  homePath,\n  searchPath,\n  draftsPath,\n  templatesPath,\n  archivePath,\n  trashPath,\n} from \"~/utils/routeHelpers\";\n\nexport const navigateToHome = createAction({\n  name: ({ t }) => t(\"Home\"),\n  section: NavigationSection,\n  shortcut: [\"d\"],\n  icon: <HomeIcon />,\n  perform: () => history.push(homePath()),\n  visible: ({ location }) => location.pathname !== homePath(),\n});\n\nexport const navigateToRecentSearchQuery = (searchQuery: SearchQuery) =>\n  createAction({\n    section: RecentSearchesSection,\n    name: searchQuery.query,\n    icon: <SearchIcon />,\n    perform: () => history.push(searchPath(searchQuery.query)),\n  });\n\nexport const navigateToDrafts = createAction({\n  name: ({ t }) => t(\"Drafts\"),\n  section: NavigationSection,\n  icon: <EditIcon />,\n  perform: () => history.push(draftsPath()),\n  visible: ({ location }) => location.pathname !== draftsPath(),\n});\n\nexport const navigateToTemplates = createAction({\n  name: ({ t }) => t(\"Templates\"),\n  section: NavigationSection,\n  icon: <ShapesIcon />,\n  perform: () => history.push(templatesPath()),\n  visible: ({ location }) => location.pathname !== templatesPath(),\n});\n\nexport const navigateToArchive = createAction({\n  name: ({ t }) => t(\"Archive\"),\n  section: NavigationSection,\n  shortcut: [\"g\", \"a\"],\n  icon: <ArchiveIcon />,\n  perform: () => history.push(archivePath()),\n  visible: ({ location }) => location.pathname !== archivePath(),\n});\n\nexport const navigateToTrash = createAction({\n  name: ({ t }) => t(\"Trash\"),\n  section: NavigationSection,\n  icon: <TrashIcon />,\n  perform: () => history.push(trashPath()),\n  visible: ({ location }) => location.pathname !== trashPath(),\n});\n\nexport const navigateToSettings = createAction({\n  name: ({ t }) => t(\"Settings\"),\n  section: NavigationSection,\n  shortcut: [\"g\", \"s\"],\n  icon: <SettingsIcon />,\n  visible: ({ stores }) =>\n    stores.policies.abilities(stores.auth.team?.id || \"\").update,\n  perform: () => history.push(organizationSettingsPath()),\n});\n\nexport const navigateToProfileSettings = createAction({\n  name: ({ t }) => t(\"Profile\"),\n  section: NavigationSection,\n  iconInContextMenu: false,\n  icon: <ProfileIcon />,\n  perform: () => history.push(profileSettingsPath()),\n});\n\nexport const openAPIDocumentation = createAction({\n  name: ({ t }) => t(\"API documentation\"),\n  section: NavigationSection,\n  iconInContextMenu: false,\n  icon: <OpenIcon />,\n  perform: () => window.open(developersUrl()),\n});\n\nexport const openFeedbackUrl = createAction({\n  name: ({ t }) => t(\"Send us feedback\"),\n  section: NavigationSection,\n  iconInContextMenu: false,\n  icon: <EmailIcon />,\n  perform: () => window.open(feedbackUrl()),\n});\n\nexport const openBugReportUrl = createAction({\n  name: ({ t }) => t(\"Report a bug\"),\n  section: NavigationSection,\n  perform: () => window.open(githubIssuesUrl()),\n});\n\nexport const openChangelog = createAction({\n  name: ({ t }) => t(\"Changelog\"),\n  section: NavigationSection,\n  iconInContextMenu: false,\n  icon: <OpenIcon />,\n  perform: () => window.open(changelogUrl()),\n});\n\nexport const openKeyboardShortcuts = createAction({\n  name: ({ t }) => t(\"Keyboard shortcuts\"),\n  section: NavigationSection,\n  shortcut: [\"?\"],\n  iconInContextMenu: false,\n  icon: <KeyboardIcon />,\n  perform: ({ t }) => {\n    stores.dialogs.openGuide({\n      title: t(\"Keyboard shortcuts\"),\n      content: <KeyboardShortcuts />,\n    });\n  },\n});\n\nexport const logout = createAction({\n  name: ({ t }) => t(\"Log out\"),\n  section: NavigationSection,\n  icon: <LogoutIcon />,\n  perform: () => stores.auth.logout(),\n});\n\nexport const rootNavigationActions = [\n  navigateToHome,\n  navigateToDrafts,\n  navigateToTemplates,\n  navigateToArchive,\n  navigateToTrash,\n  openAPIDocumentation,\n  openFeedbackUrl,\n  openBugReportUrl,\n  openChangelog,\n  openKeyboardShortcuts,\n  logout,\n];\n","import hoistNonReactStatics from \"hoist-non-react-statics\";\nimport * as React from \"react\";\nimport RootStore from \"~/stores/RootStore\";\nimport useStores from \"~/hooks/useStores\";\n\ntype StoreProps = keyof RootStore;\n\nfunction withStores<\n  P extends React.ComponentType<React.ComponentProps<P> & RootStore>,\n  ResolvedProps = JSX.LibraryManagedAttributes<\n    P,\n    Omit<React.ComponentProps<P>, StoreProps>\n  >\n>(WrappedComponent: P): React.FC<Omit<ResolvedProps, StoreProps>> {\n  const ComponentWithStore = (\n    props: Omit<React.ComponentProps<P>, StoreProps>\n  ) => {\n    const stores = useStores();\n    return <WrappedComponent {...(props as any)} {...stores} />;\n  };\n\n  ComponentWithStore.displayName = `WithStores(${\n    WrappedComponent.name || WrappedComponent.displayName\n  })`;\n\n  /**\n   * https://reactjs.org/docs/higher-order-components.html#static-methods-must-be-copied-over\n   */\n  hoistNonReactStatics(ComponentWithStore, WrappedComponent);\n\n  return ComponentWithStore;\n}\n\nexport default withStores;\n","import { SunIcon, MoonIcon, BrowserIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport stores from \"~/stores\";\nimport { Theme } from \"~/stores/UiStore\";\nimport { createAction } from \"~/actions\";\nimport { SettingsSection } from \"~/actions/sections\";\n\nexport const changeToDarkTheme = createAction({\n  name: ({ t }) => t(\"Dark\"),\n  icon: <MoonIcon />,\n  iconInContextMenu: false,\n  keywords: \"theme dark night\",\n  section: SettingsSection,\n  selected: () => stores.ui.theme === \"dark\",\n  perform: () => stores.ui.setTheme(Theme.Dark),\n});\n\nexport const changeToLightTheme = createAction({\n  name: ({ t }) => t(\"Light\"),\n  icon: <SunIcon />,\n  iconInContextMenu: false,\n  keywords: \"theme light day\",\n  section: SettingsSection,\n  selected: () => stores.ui.theme === \"light\",\n  perform: () => stores.ui.setTheme(Theme.Light),\n});\n\nexport const changeToSystemTheme = createAction({\n  name: ({ t }) => t(\"System\"),\n  icon: <BrowserIcon />,\n  iconInContextMenu: false,\n  keywords: \"theme system default\",\n  section: SettingsSection,\n  selected: () => stores.ui.theme === \"system\",\n  perform: () => stores.ui.setTheme(Theme.System),\n});\n\nexport const changeTheme = createAction({\n  name: ({ t, isContextMenu }) =>\n    isContextMenu ? t(\"Appearance\") : t(\"Change theme\"),\n  placeholder: ({ t }) => t(\"Change theme to\"),\n  icon: () =>\n    stores.ui.resolvedTheme === \"light\" ? <SunIcon /> : <MoonIcon />,\n  keywords: \"appearance display\",\n  section: SettingsSection,\n  children: [changeToLightTheme, changeToDarkTheme, changeToSystemTheme],\n});\n\nexport const rootSettingsActions = [changeTheme];\n","import * as React from \"react\";\nimport styled from \"styled-components\";\nimport { depths } from \"@shared/styles\";\nimport { id } from \"~/components/SkipNavContent\";\n\nexport default function SkipNavLink() {\n  return <Anchor href={`#${id}`}>Skip navigation</Anchor>;\n}\n\nconst Anchor = styled.a`\n  border: 0;\n  clip: rect(0 0 0 0);\n  height: 1px;\n  width: 1px;\n  margin: -1px;\n  padding: 0;\n  overflow: hidden;\n  position: absolute;\n  z-index: 1;\n\n  &:focus {\n    padding: 1rem;\n    position: fixed;\n    top: 12px;\n    left: 12px;\n    background: ${(props) => props.theme.background};\n    color: ${(props) => props.theme.text};\n    outline-color: ${(props) => props.theme.primary};\n    z-index: ${depths.popover};\n    width: auto;\n    height: auto;\n    clip: auto;\n  }\n`;\n","import { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport { Helmet } from \"react-helmet\";\nimport styled, { DefaultTheme } from \"styled-components\";\nimport breakpoint from \"styled-components-breakpoint\";\nimport Flex from \"~/components/Flex\";\nimport { LoadingIndicatorBar } from \"~/components/LoadingIndicator\";\nimport SkipNavContent from \"~/components/SkipNavContent\";\nimport SkipNavLink from \"~/components/SkipNavLink\";\nimport useKeyDown from \"~/hooks/useKeyDown\";\nimport { MenuProvider } from \"~/hooks/useMenuContext\";\nimport useStores from \"~/hooks/useStores\";\nimport { isModKey } from \"~/utils/keyboard\";\n\ntype Props = {\n  title?: string;\n  sidebar?: React.ReactNode;\n  rightRail?: React.ReactNode;\n};\n\nconst Layout: React.FC<Props> = ({ title, children, sidebar, rightRail }) => {\n  const { ui } = useStores();\n  const sidebarCollapsed = !sidebar || ui.isEditing || ui.sidebarCollapsed;\n\n  useKeyDown(\".\", (event) => {\n    if (isModKey(event)) {\n      ui.toggleCollapsedSidebar();\n    }\n  });\n\n  return (\n    <Container column auto>\n      <Helmet>\n        <title>{title ? title : \"Outline\"}</title>\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n      </Helmet>\n\n      <SkipNavLink />\n\n      {ui.progressBarVisible && <LoadingIndicatorBar />}\n\n      <Container auto>\n        <MenuProvider>{sidebar}</MenuProvider>\n\n        <SkipNavContent />\n        <Content\n          auto\n          justify=\"center\"\n          $isResizing={ui.sidebarIsResizing}\n          $sidebarCollapsed={sidebarCollapsed}\n          $hasSidebar={!!sidebar}\n          style={\n            sidebarCollapsed\n              ? undefined\n              : {\n                  marginLeft: `${ui.sidebarWidth}px`,\n                }\n          }\n        >\n          {children}\n        </Content>\n\n        {rightRail}\n      </Container>\n    </Container>\n  );\n};\n\nconst Container = styled(Flex)`\n  background: ${(props) => props.theme.background};\n  transition: ${(props) => props.theme.backgroundTransition};\n  position: relative;\n  width: 100%;\n  min-height: 100%;\n`;\n\ntype ContentProps = {\n  $isResizing?: boolean;\n  $sidebarCollapsed?: boolean;\n  $hasSidebar?: boolean;\n  theme: DefaultTheme;\n};\n\nconst Content = styled(Flex)<ContentProps>`\n  margin: 0;\n  transition: ${(props) =>\n    props.$isResizing ? \"none\" : `margin-left 100ms ease-out`};\n\n  @media print {\n    margin: 0 !important;\n  }\n\n  ${breakpoint(\"mobile\", \"tablet\")`\n    margin-left: 0 !important;\n  `}\n\n  ${breakpoint(\"tablet\")`\n    ${(props: ContentProps) =>\n      props.$hasSidebar &&\n      props.$sidebarCollapsed &&\n      `margin-left: ${props.theme.sidebarCollapsedWidth}px;`}\n  `};\n`;\n\nexport default observer(Layout);\n","import useKeyDown, { KeyFilter, Options } from \"~/hooks/useKeyDown\";\n\ntype Props = {\n  trigger: KeyFilter;\n  handler: (event: KeyboardEvent) => void;\n  options?: Options;\n};\n\n/**\n * This method is a wrapper around the useKeyDown hook to allow easier use in\n * class components that have not yet been converted to functions. Do not use\n * this method in functional components.\n */\nexport default function RegisterKeyDown({ trigger, handler, options }: Props) {\n  useKeyDown(trigger, handler, options);\n  return null;\n}\n","import * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { $Diff } from \"utility-types\";\nimport InputSelect, { Props, Option } from \"./InputSelect\";\n\nexport default function InputSelectPermission(\n  props: $Diff<\n    Props,\n    {\n      options: Array<Option>;\n      ariaLabel: string;\n    }\n  >\n) {\n  const { value, onChange, ...rest } = props;\n  const { t } = useTranslation();\n  const handleChange = React.useCallback(\n    (value) => {\n      if (value === \"no_access\") {\n        value = \"\";\n      }\n\n      onChange(value);\n    },\n    [onChange]\n  );\n\n  return (\n    <InputSelect\n      label={t(\"Default access\")}\n      options={[\n        {\n          label: t(\"View and edit\"),\n          value: \"read_write\",\n        },\n        {\n          label: t(\"View only\"),\n          value: \"read\",\n        },\n        {\n          label: t(\"No access\"),\n          value: \"no_access\",\n        },\n      ]}\n      ariaLabel={t(\"Default access\")}\n      value={value || \"no_access\"}\n      onChange={handleChange}\n      {...rest}\n    />\n  );\n}\n","import { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport {\n  useCompositeState,\n  Composite,\n  CompositeStateReturn,\n} from \"reakit/Composite\";\n\ntype Props = {\n  children: (composite: CompositeStateReturn) => React.ReactNode;\n  onEscape?: (ev: React.KeyboardEvent<HTMLDivElement>) => void;\n};\n\nfunction ArrowKeyNavigation(\n  { children, onEscape, ...rest }: Props,\n  ref: React.RefObject<HTMLDivElement>\n) {\n  const composite = useCompositeState();\n\n  const handleKeyDown = React.useCallback(\n    (ev) => {\n      if (onEscape) {\n        if (ev.key === \"Escape\") {\n          onEscape(ev);\n        }\n\n        if (\n          ev.key === \"ArrowUp\" &&\n          composite.currentId === composite.items[0].id\n        ) {\n          onEscape(ev);\n        }\n      }\n    },\n    [composite.currentId, composite.items, onEscape]\n  );\n\n  return (\n    <Composite\n      {...rest}\n      {...composite}\n      onKeyDown={handleKeyDown}\n      role=\"menu\"\n      ref={ref}\n    >\n      {children(composite)}\n    </Composite>\n  );\n}\n\nexport default observer(React.forwardRef(ArrowKeyNavigation));\n","import {\n  Select,\n  SelectOption,\n  useSelectState,\n  useSelectPopover,\n  SelectPopover,\n} from \"@renderlesskit/react\";\nimport { CheckmarkIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport { VisuallyHidden } from \"reakit/VisuallyHidden\";\nimport scrollIntoView from \"smooth-scroll-into-view-if-needed\";\nimport styled, { css } from \"styled-components\";\nimport Button, { Inner } from \"~/components/Button\";\nimport Text from \"~/components/Text\";\nimport useMenuHeight from \"~/hooks/useMenuHeight\";\nimport { Position, Background, Backdrop, Placement } from \"./ContextMenu\";\nimport { MenuAnchorCSS } from \"./ContextMenu/MenuItem\";\nimport { LabelText } from \"./Input\";\n\nexport type Option = {\n  label: string | JSX.Element;\n  value: string;\n};\n\nexport type Props = {\n  id?: string;\n  name?: string;\n  value?: string | null;\n  label?: string;\n  nude?: boolean;\n  ariaLabel: string;\n  short?: boolean;\n  disabled?: boolean;\n  className?: string;\n  labelHidden?: boolean;\n  icon?: React.ReactNode;\n  options: Option[];\n  note?: React.ReactNode;\n  onChange: (value: string | null) => void;\n};\n\nconst getOptionFromValue = (options: Option[], value: string | null) => {\n  return options.find((option) => option.value === value);\n};\n\nconst InputSelect = (props: Props) => {\n  const {\n    value = null,\n    label,\n    className,\n    labelHidden,\n    options,\n    short,\n    ariaLabel,\n    onChange,\n    disabled,\n    note,\n    icon,\n    ...rest\n  } = props;\n\n  const select = useSelectState({\n    gutter: 0,\n    modal: true,\n    selectedValue: value,\n  });\n\n  const popOver = useSelectPopover({\n    ...select,\n    hideOnClickOutside: true,\n    preventBodyScroll: true,\n    disabled,\n  });\n\n  const previousValue = React.useRef<string | null>(value);\n  const contentRef = React.useRef<HTMLDivElement>(null);\n  const selectedRef = React.useRef<HTMLDivElement>(null);\n  const buttonRef = React.useRef<HTMLButtonElement>(null);\n  const [offset, setOffset] = React.useState(0);\n  const minWidth = buttonRef.current?.offsetWidth || 0;\n  const maxHeight = useMenuHeight(\n    select.visible,\n    select.unstable_disclosureRef\n  );\n  const wrappedLabel = <LabelText>{label}</LabelText>;\n  const selectedValueIndex = options.findIndex(\n    (option) => option.value === select.selectedValue\n  );\n\n  React.useEffect(() => {\n    if (previousValue.current === select.selectedValue) {\n      return;\n    }\n    previousValue.current = select.selectedValue;\n\n    async function load() {\n      await onChange(select.selectedValue);\n    }\n\n    load();\n  }, [onChange, select.selectedValue]);\n\n  // Ensure selected option is visible when opening the input\n  React.useEffect(() => {\n    if (!select.animating && selectedRef.current) {\n      scrollIntoView(selectedRef.current, {\n        scrollMode: \"if-needed\",\n        behavior: \"auto\",\n        block: \"start\",\n      });\n    }\n  }, [select.animating]);\n\n  React.useLayoutEffect(() => {\n    if (select.visible) {\n      const offset = Math.round(\n        (selectedRef.current?.getBoundingClientRect().top || 0) -\n          (contentRef.current?.getBoundingClientRect().top || 0)\n      );\n      setOffset(offset);\n    }\n  }, [select.visible]);\n\n  return (\n    <>\n      <Wrapper short={short}>\n        {label &&\n          (labelHidden ? (\n            <VisuallyHidden>{wrappedLabel}</VisuallyHidden>\n          ) : (\n            wrappedLabel\n          ))}\n\n        <Select {...select} disabled={disabled} {...rest} ref={buttonRef}>\n          {(props) => (\n            <StyledButton\n              neutral\n              disclosure\n              className={className}\n              icon={icon}\n              {...props}\n            >\n              {getOptionFromValue(options, select.selectedValue)?.label || (\n                <Placeholder>Select a {ariaLabel.toLowerCase()}</Placeholder>\n              )}\n            </StyledButton>\n          )}\n        </Select>\n        <SelectPopover {...select} {...popOver} aria-label={ariaLabel}>\n          {(\n            props: React.HTMLAttributes<HTMLDivElement> & {\n              placement: Placement;\n            }\n          ) => {\n            if (!props.style) {\n              props.style = {};\n            }\n            const topAnchor = props.style.top === \"0\";\n            const rightAnchor = props.placement === \"bottom-end\";\n\n            // offset top of select to place selected item under the cursor\n            if (selectedValueIndex !== -1) {\n              props.style.top = `-${offset + 32}px`;\n            }\n\n            return (\n              <Positioner {...props}>\n                <Background\n                  dir=\"auto\"\n                  ref={contentRef}\n                  topAnchor={topAnchor}\n                  rightAnchor={rightAnchor}\n                  style={\n                    maxHeight && topAnchor\n                      ? {\n                          maxHeight,\n                          minWidth,\n                        }\n                      : {\n                          minWidth,\n                        }\n                  }\n                >\n                  {select.visible\n                    ? options.map((option) => {\n                        const isSelected =\n                          select.selectedValue === option.value;\n                        const Icon = isSelected ? CheckmarkIcon : Spacer;\n                        return (\n                          <StyledSelectOption\n                            {...select}\n                            value={option.value}\n                            key={option.value}\n                            ref={isSelected ? selectedRef : undefined}\n                          >\n                            <Icon />\n                            &nbsp;\n                            {option.label}\n                          </StyledSelectOption>\n                        );\n                      })\n                    : null}\n                </Background>\n              </Positioner>\n            );\n          }}\n        </SelectPopover>\n      </Wrapper>\n      {note && (\n        <Text type=\"secondary\" size=\"small\">\n          {note}\n        </Text>\n      )}\n      {select.visible && <Backdrop />}\n    </>\n  );\n};\n\nconst Placeholder = styled.span`\n  color: ${(props) => props.theme.placeholder};\n`;\n\nconst Spacer = styled.div`\n  width: 24px;\n  height: 24px;\n  flex-shrink: 0;\n`;\n\nconst StyledButton = styled(Button)<{ nude?: boolean }>`\n  font-weight: normal;\n  text-transform: none;\n  margin-bottom: 16px;\n  display: block;\n  width: 100%;\n  cursor: default;\n\n  &:hover:not(:disabled) {\n    background: ${(props) => props.theme.buttonNeutralBackground};\n  }\n\n  ${(props) =>\n    props.nude &&\n    css`\n      border-color: transparent;\n      box-shadow: none;\n    `}\n\n  ${Inner} {\n    line-height: 28px;\n    padding-left: 16px;\n    padding-right: 8px;\n  }\n\n  svg {\n    justify-self: flex-end;\n    margin-left: auto;\n  }\n`;\n\nexport const StyledSelectOption = styled(SelectOption)`\n  ${MenuAnchorCSS}\n  /* overriding the styles from MenuAnchorCSS because we use &nbsp; here */\n  svg:not(:last-child) {\n    margin-right: 0px;\n  }\n`;\n\nconst Wrapper = styled.label<{ short?: boolean }>`\n  display: block;\n  max-width: ${(props) => (props.short ? \"350px\" : \"100%\")};\n`;\n\nconst Positioner = styled(Position)`\n  &.focus-visible {\n    ${StyledSelectOption} {\n      &[aria-selected=\"true\"] {\n        color: ${(props) => props.theme.white};\n        background: ${(props) => props.theme.primary};\n        box-shadow: none;\n        cursor: pointer;\n\n        svg {\n          fill: ${(props) => props.theme.white};\n        }\n      }\n    }\n  }\n`;\n\nexport default InputSelect;\n","import * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport styled from \"styled-components\";\nimport Flex from \"~/components/Flex\";\nimport InputSearch from \"~/components/InputSearch\";\nimport Key from \"~/components/Key\";\nimport { isMac } from \"~/utils/browser\";\nimport { metaDisplay, altDisplay } from \"~/utils/keyboard\";\n\nfunction KeyboardShortcuts() {\n  const { t } = useTranslation();\n  const categories = React.useMemo(\n    () => [\n      {\n        title: t(\"Navigation\"),\n        items: [\n          {\n            shortcut: <Key>n</Key>,\n            label: t(\"New document\"),\n          },\n          {\n            shortcut: <Key>e</Key>,\n            label: t(\"Edit current document\"),\n          },\n          {\n            shortcut: <Key>m</Key>,\n            label: t(\"Move current document\"),\n          },\n          {\n            shortcut: <Key>h</Key>,\n            label: t(\"Open document history\"),\n          },\n          {\n            shortcut: (\n              <>\n                <Key>/</Key> or <Key>t</Key>\n              </>\n            ),\n            label: t(\"Jump to search\"),\n          },\n          {\n            shortcut: <Key>d</Key>,\n            label: t(\"Jump to home\"),\n          },\n          {\n            shortcut: (\n              <>\n                <Key>Ctrl</Key> + <Key symbol>{altDisplay}</Key> + <Key>h</Key>\n              </>\n            ),\n            label: t(\"Table of contents\"),\n          },\n          {\n            shortcut: (\n              <>\n                <Key symbol>{metaDisplay}</Key> + <Key>.</Key>\n              </>\n            ),\n            label: t(\"Toggle navigation\"),\n          },\n          {\n            shortcut: (\n              <>\n                <Key symbol>{metaDisplay}</Key> + <Key>f</Key>\n              </>\n            ),\n            label: t(\"Focus search input\"),\n          },\n          {\n            shortcut: <Key>?</Key>,\n            label: t(\"Open this guide\"),\n          },\n          {\n            shortcut: (\n              <>\n                <Key symbol>{metaDisplay}</Key> + <Key>Enter</Key>\n              </>\n            ),\n            label: t(\"Save document and exit\"),\n          },\n          {\n            shortcut: (\n              <>\n                <Key symbol>{metaDisplay}</Key> + <Key symbol></Key> +{\" \"}\n                <Key>p</Key>\n              </>\n            ),\n            label: t(\"Publish document and exit\"),\n          },\n          {\n            shortcut: (\n              <>\n                <Key symbol>{metaDisplay}</Key> + <Key>s</Key>\n              </>\n            ),\n            label: t(\"Save document\"),\n          },\n          {\n            shortcut: (\n              <>\n                <Key symbol>{isMac() ? metaDisplay : \"\"}</Key> + <Key>Esc</Key>\n              </>\n            ),\n            label: t(\"Cancel editing\"),\n          },\n        ],\n      },\n      {\n        title: t(\"Formatting\"),\n        items: [\n          {\n            shortcut: (\n              <>\n                <Key>Ctrl</Key> + <Key symbol></Key> + <Key>0</Key>\n              </>\n            ),\n            label: t(\"Paragraph\"),\n          },\n          {\n            shortcut: (\n              <>\n                <Key>Ctrl</Key> + <Key symbol></Key> + <Key>1</Key>\n              </>\n            ),\n            label: t(\"Large header\"),\n          },\n          {\n            shortcut: (\n              <>\n                <Key>Ctrl</Key> + <Key symbol></Key> + <Key>2</Key>\n              </>\n            ),\n            label: t(\"Medium header\"),\n          },\n          {\n            shortcut: (\n              <>\n                <Key>Ctrl</Key> + <Key symbol></Key> + <Key>3</Key>\n              </>\n            ),\n            label: t(\"Small header\"),\n          },\n          {\n            shortcut: (\n              <>\n                <Key>Ctrl</Key> + <Key symbol></Key> + <Key>\\</Key>\n              </>\n            ),\n            label: t(\"Code block\"),\n          },\n          {\n            shortcut: (\n              <>\n                <Key symbol>{metaDisplay}</Key> + <Key>b</Key>\n              </>\n            ),\n            label: t(\"Bold\"),\n          },\n          {\n            shortcut: (\n              <>\n                <Key symbol>{metaDisplay}</Key> + <Key>i</Key>\n              </>\n            ),\n            label: t(\"Italic\"),\n          },\n          {\n            shortcut: (\n              <>\n                <Key symbol>{metaDisplay}</Key> + <Key>u</Key>\n              </>\n            ),\n            label: t(\"Underline\"),\n          },\n          {\n            shortcut: (\n              <>\n                <Key symbol>{metaDisplay}</Key> + <Key>d</Key>\n              </>\n            ),\n            label: t(\"Strikethrough\"),\n          },\n          {\n            shortcut: (\n              <>\n                <Key symbol>{metaDisplay}</Key> + <Key>k</Key>\n              </>\n            ),\n            label: t(\"Link\"),\n          },\n          {\n            shortcut: (\n              <>\n                <Key symbol>{metaDisplay}</Key> + <Key>z</Key>\n              </>\n            ),\n            label: t(\"Undo\"),\n          },\n          {\n            shortcut: (\n              <>\n                <Key symbol>{metaDisplay}</Key> + <Key symbol></Key> +{\" \"}\n                <Key>z</Key>\n              </>\n            ),\n            label: t(\"Redo\"),\n          },\n        ],\n      },\n      {\n        title: t(\"Lists\"),\n        items: [\n          {\n            shortcut: (\n              <>\n                <Key>Ctrl</Key> + <Key symbol></Key> + <Key>7</Key>\n              </>\n            ),\n            label: t(\"Todo list\"),\n          },\n          {\n            shortcut: (\n              <>\n                <Key>Ctrl</Key> + <Key symbol></Key> + <Key>8</Key>\n              </>\n            ),\n            label: t(\"Bulleted list\"),\n          },\n          {\n            shortcut: (\n              <>\n                <Key>Ctrl</Key> + <Key symbol></Key> + <Key>9</Key>\n              </>\n            ),\n            label: t(\"Ordered list\"),\n          },\n          {\n            shortcut: <Key>Tab</Key>,\n            label: t(\"Indent list item\"),\n          },\n          {\n            shortcut: (\n              <>\n                <Key symbol></Key> + <Key>Tab</Key>\n              </>\n            ),\n            label: t(\"Outdent list item\"),\n          },\n          {\n            shortcut: (\n              <>\n                <Key symbol>{altDisplay}</Key> + <Key symbol></Key>\n              </>\n            ),\n            label: t(\"Move list item up\"),\n          },\n          {\n            shortcut: (\n              <>\n                <Key symbol>{altDisplay}</Key> + <Key symbol></Key>\n              </>\n            ),\n            label: t(\"Move list item down\"),\n          },\n        ],\n      },\n      {\n        title: \"Markdown\",\n        items: [\n          {\n            shortcut: (\n              <>\n                <Key>#</Key> <Key>Space</Key>\n              </>\n            ),\n            label: t(\"Large header\"),\n          },\n          {\n            shortcut: (\n              <>\n                <Key>##</Key> <Key>Space</Key>\n              </>\n            ),\n            label: t(\"Medium header\"),\n          },\n          {\n            shortcut: (\n              <>\n                <Key>###</Key> <Key>Space</Key>\n              </>\n            ),\n            label: t(\"Small header\"),\n          },\n          {\n            shortcut: (\n              <>\n                <Key>1.</Key> <Key>Space</Key>\n              </>\n            ),\n            label: t(\"Numbered list\"),\n          },\n          {\n            shortcut: (\n              <>\n                <Key>-</Key> <Key>Space</Key>\n              </>\n            ),\n            label: t(\"Bulleted list\"),\n          },\n          {\n            shortcut: (\n              <>\n                <Key>[ ]</Key> <Key>Space</Key>\n              </>\n            ),\n            label: t(\"Todo list\"),\n          },\n          {\n            shortcut: (\n              <>\n                <Key>&gt;</Key> <Key>Space</Key>\n              </>\n            ),\n            label: t(\"Blockquote\"),\n          },\n          {\n            shortcut: <Key>---</Key>,\n            label: t(\"Horizontal divider\"),\n          },\n          {\n            shortcut: <Key>{\"```\"}</Key>,\n            label: t(\"Code block\"),\n          },\n          {\n            shortcut: <Key>{\":::\"}</Key>,\n            label: t(\"Info notice\"),\n          },\n          {\n            shortcut: \"_italic_\",\n            label: t(\"Italic\"),\n          },\n          {\n            shortcut: \"**bold**\",\n            label: t(\"Bold\"),\n          },\n          {\n            shortcut: \"~~strikethrough~~\",\n            label: t(\"Strikethrough\"),\n          },\n          {\n            shortcut: \"`code`\",\n            label: t(\"Inline code\"),\n          },\n          {\n            shortcut: \"==highlight==\",\n            label: t(\"Highlight\"),\n          },\n        ],\n      },\n    ],\n    [t]\n  );\n  const [searchTerm, setSearchTerm] = React.useState(\"\");\n  const handleChange = React.useCallback((event) => {\n    setSearchTerm(event.target.value);\n  }, []);\n  const handleKeyDown = React.useCallback((event) => {\n    if (event.currentTarget.value && event.key === \"Escape\") {\n      event.preventDefault();\n      event.stopPropagation();\n      setSearchTerm(\"\");\n    }\n  }, []);\n  return (\n    <Flex column>\n      <InputSearch\n        onChange={handleChange}\n        onKeyDown={handleKeyDown}\n        value={searchTerm}\n      />\n      {categories.map((category, x) => {\n        const filtered = searchTerm\n          ? category.items.filter((item) =>\n              item.label.toLowerCase().includes(searchTerm.toLowerCase())\n            )\n          : category.items;\n\n        if (!filtered.length) {\n          return null;\n        }\n\n        return (\n          <React.Fragment key={x}>\n            <Header>{category.title}</Header>\n            <List>\n              {filtered.map((item) => (\n                <React.Fragment key={item.label}>\n                  <Keys>\n                    <span>{item.shortcut}</span>\n                  </Keys>\n                  <Label>{item.label}</Label>\n                </React.Fragment>\n              ))}\n            </List>\n          </React.Fragment>\n        );\n      })}\n    </Flex>\n  );\n}\n\nconst Header = styled.h2`\n  font-size: 15px;\n  font-weight: 500;\n  margin-top: 2em;\n`;\n\nconst List = styled.dl`\n  font-size: 14px;\n  width: 100%;\n  overflow: hidden;\n  padding: 0;\n  margin: 0;\n`;\n\nconst Keys = styled.dt`\n  float: right;\n  width: 45%;\n  margin: 0 0 10px;\n  clear: left;\n  text-align: right;\n  font-size: 12px;\n  color: ${(props) => props.theme.textSecondary};\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n`;\n\nconst Label = styled.dd`\n  float: left;\n  width: 55%;\n  margin: 0 0 10px;\n  display: flex;\n  align-items: center;\n  color: ${(props) => props.theme.textSecondary};\n`;\n\nexport default React.memo(KeyboardShortcuts);\n","import { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { MenuButton, useMenuState } from \"reakit/Menu\";\nimport ContextMenu from \"~/components/ContextMenu\";\nimport Template from \"~/components/ContextMenu/Template\";\nimport {\n  navigateToProfileSettings,\n  openKeyboardShortcuts,\n  openChangelog,\n  openAPIDocumentation,\n  openBugReportUrl,\n  openFeedbackUrl,\n  logout,\n} from \"~/actions/definitions/navigation\";\nimport { changeTheme } from \"~/actions/definitions/settings\";\nimport usePrevious from \"~/hooks/usePrevious\";\nimport useStores from \"~/hooks/useStores\";\nimport separator from \"~/menus/separator\";\n\nconst AccountMenu: React.FC = ({ children }) => {\n  const menu = useMenuState({\n    placement: \"bottom-end\",\n    modal: true,\n  });\n  const { ui } = useStores();\n  const { theme } = ui;\n  const previousTheme = usePrevious(theme);\n  const { t } = useTranslation();\n\n  React.useEffect(() => {\n    if (theme !== previousTheme) {\n      menu.hide();\n    }\n  }, [menu, theme, previousTheme]);\n\n  const actions = React.useMemo(() => {\n    return [\n      openKeyboardShortcuts,\n      openAPIDocumentation,\n      separator(),\n      openChangelog,\n      openFeedbackUrl,\n      openBugReportUrl,\n      changeTheme,\n      navigateToProfileSettings,\n      separator(),\n      logout,\n    ];\n  }, []);\n\n  return (\n    <>\n      <MenuButton {...menu}>{children}</MenuButton>\n      <ContextMenu {...menu} aria-label={t(\"Account\")}>\n        <Template {...menu} items={undefined} actions={actions} />\n      </ContextMenu>\n    </>\n  );\n};\n\nexport default observer(AccountMenu);\n","import styled from \"styled-components\";\n\nconst ResizeBorder = styled.div`\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  right: -1px;\n  width: 2px;\n  cursor: col-resize;\n\n  &:hover {\n    transition-delay: 500ms;\n    transition: background 250ms ease-in-out;\n    background: ${(props) => props.theme.sidebarActiveBackground};\n  }\n\n  &:after {\n    content: \"\";\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    right: -4px;\n    width: 10px;\n  }\n`;\n\nexport default ResizeBorder;\n","import * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport styled from \"styled-components\";\nimport breakpoint from \"styled-components-breakpoint\";\nimport Arrow from \"~/components/Arrow\";\n\ntype Props = {\n  direction: \"left\" | \"right\";\n  style?: React.CSSProperties;\n  onClick?: React.MouseEventHandler<HTMLButtonElement>;\n};\n\nconst Toggle = React.forwardRef<HTMLButtonElement, Props>(\n  ({ direction = \"left\", onClick, style }: Props, ref) => {\n    const { t } = useTranslation();\n    return (\n      <Positioner style={style}>\n        <ToggleButton\n          ref={ref}\n          $direction={direction}\n          onClick={onClick}\n          aria-label={t(\"Toggle sidebar\")}\n        >\n          <Arrow />\n        </ToggleButton>\n      </Positioner>\n    );\n  }\n);\n\nexport const ToggleButton = styled.button<{ $direction?: \"left\" | \"right\" }>`\n  opacity: 0;\n  background: none;\n  transition: opacity 100ms ease-in-out;\n  transform: translateY(-50%)\n    scaleX(${(props) => (props.$direction === \"left\" ? 1 : -1)});\n  position: fixed;\n  top: 50vh;\n  padding: 8px;\n  border: 0;\n  pointer-events: none;\n  color: ${(props) => props.theme.divider};\n\n  &:active {\n    color: ${(props) => props.theme.sidebarText};\n  }\n\n  ${breakpoint(\"tablet\")`\n    pointer-events: all;\n    cursor: pointer;\n  `}\n\n  @media (hover: none) {\n    opacity: 1;\n  }\n`;\n\nexport const Positioner = styled.div`\n  display: none;\n  z-index: 2;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  right: -30px;\n  width: 30px;\n\n  &:hover ${ToggleButton}, &:focus-within ${ToggleButton} {\n    opacity: 1;\n  }\n\n  ${breakpoint(\"tablet\")`\n    display: block;\n  `}\n`;\n\nexport default Toggle;\n","import { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { Portal } from \"react-portal\";\nimport { useLocation } from \"react-router-dom\";\nimport styled, { useTheme } from \"styled-components\";\nimport breakpoint from \"styled-components-breakpoint\";\nimport { depths } from \"@shared/styles\";\nimport Flex from \"~/components/Flex\";\nimport useMenuContext from \"~/hooks/useMenuContext\";\nimport usePrevious from \"~/hooks/usePrevious\";\nimport useStores from \"~/hooks/useStores\";\nimport AccountMenu from \"~/menus/AccountMenu\";\nimport { fadeIn } from \"~/styles/animations\";\nimport Avatar from \"../Avatar\";\nimport ResizeBorder from \"./components/ResizeBorder\";\nimport SidebarButton, { SidebarButtonProps } from \"./components/SidebarButton\";\nimport Toggle, { ToggleButton, Positioner } from \"./components/Toggle\";\n\nconst ANIMATION_MS = 250;\n\ntype Props = {\n  children: React.ReactNode;\n};\n\nconst Sidebar = React.forwardRef<HTMLDivElement, Props>(\n  ({ children }: Props, ref: React.RefObject<HTMLDivElement>) => {\n    const [isCollapsing, setCollapsing] = React.useState(false);\n    const theme = useTheme();\n    const { t } = useTranslation();\n    const { ui, auth } = useStores();\n    const location = useLocation();\n    const previousLocation = usePrevious(location);\n    const { isMenuOpen } = useMenuContext();\n    const { user } = auth;\n\n    const width = ui.sidebarWidth;\n    const collapsed = (ui.isEditing || ui.sidebarCollapsed) && !isMenuOpen;\n    const maxWidth = theme.sidebarMaxWidth;\n    const minWidth = theme.sidebarMinWidth + 16; // padding\n\n    const setWidth = ui.setSidebarWidth;\n    const [offset, setOffset] = React.useState(0);\n    const [isAnimating, setAnimating] = React.useState(false);\n    const [isResizing, setResizing] = React.useState(false);\n    const isSmallerThanMinimum = width < minWidth;\n\n    const handleDrag = React.useCallback(\n      (event: MouseEvent) => {\n        // suppresses text selection\n        event.preventDefault();\n        // this is simple because the sidebar is always against the left edge\n        const width = Math.min(event.pageX - offset, maxWidth);\n        const isSmallerThanCollapsePoint = width < minWidth / 2;\n\n        if (isSmallerThanCollapsePoint) {\n          setWidth(theme.sidebarCollapsedWidth);\n        } else {\n          setWidth(width);\n        }\n      },\n      [theme, offset, minWidth, maxWidth, setWidth]\n    );\n\n    const handleStopDrag = React.useCallback(() => {\n      setResizing(false);\n\n      if (document.activeElement instanceof HTMLElement) {\n        document.activeElement.blur();\n      }\n\n      if (isSmallerThanMinimum) {\n        const isSmallerThanCollapsePoint = width < minWidth / 2;\n\n        if (isSmallerThanCollapsePoint) {\n          setAnimating(false);\n          setCollapsing(true);\n          ui.collapseSidebar();\n        } else {\n          setWidth(minWidth);\n          setAnimating(true);\n        }\n      } else {\n        setWidth(width);\n      }\n    }, [ui, isSmallerThanMinimum, minWidth, width, setWidth]);\n\n    const handleMouseDown = React.useCallback(\n      (event) => {\n        setOffset(event.pageX - width);\n        setResizing(true);\n        setAnimating(false);\n      },\n      [width]\n    );\n\n    React.useEffect(() => {\n      if (isAnimating) {\n        setTimeout(() => setAnimating(false), ANIMATION_MS);\n      }\n    }, [isAnimating]);\n\n    React.useEffect(() => {\n      if (isCollapsing) {\n        setTimeout(() => {\n          setWidth(minWidth);\n          setCollapsing(false);\n        }, ANIMATION_MS);\n      }\n    }, [setWidth, minWidth, isCollapsing]);\n\n    React.useEffect(() => {\n      if (isResizing) {\n        document.addEventListener(\"mousemove\", handleDrag);\n        document.addEventListener(\"mouseup\", handleStopDrag);\n      }\n\n      return () => {\n        document.removeEventListener(\"mousemove\", handleDrag);\n        document.removeEventListener(\"mouseup\", handleStopDrag);\n      };\n    }, [isResizing, handleDrag, handleStopDrag]);\n\n    const handleReset = React.useCallback(() => {\n      ui.setSidebarWidth(theme.sidebarWidth);\n    }, [ui, theme.sidebarWidth]);\n\n    React.useEffect(() => {\n      ui.setSidebarResizing(isResizing);\n    }, [ui, isResizing]);\n\n    React.useEffect(() => {\n      if (location !== previousLocation) {\n        ui.hideMobileSidebar();\n      }\n    }, [ui, location, previousLocation]);\n\n    const style = React.useMemo(\n      () => ({\n        width: `${width}px`,\n      }),\n      [width]\n    );\n\n    const toggleStyle = React.useMemo(\n      () => ({\n        right: \"auto\",\n        marginLeft: `${collapsed ? theme.sidebarCollapsedWidth : width}px`,\n      }),\n      [width, theme.sidebarCollapsedWidth, collapsed]\n    );\n\n    return (\n      <>\n        <Container\n          ref={ref}\n          style={style}\n          $isAnimating={isAnimating}\n          $isSmallerThanMinimum={isSmallerThanMinimum}\n          $mobileSidebarVisible={ui.mobileSidebarVisible}\n          $collapsed={collapsed}\n          column\n        >\n          {ui.mobileSidebarVisible && (\n            <Portal>\n              <Backdrop onClick={ui.toggleMobileSidebar} />\n            </Portal>\n          )}\n          {children}\n\n          {user && (\n            <AccountMenu>\n              {(props: SidebarButtonProps) => (\n                <SidebarButton\n                  {...props}\n                  showMoreMenu\n                  title={user.name}\n                  image={\n                    <StyledAvatar\n                      alt={user.name}\n                      src={user.avatarUrl}\n                      size={24}\n                      showBorder={false}\n                    />\n                  }\n                />\n              )}\n            </AccountMenu>\n          )}\n          <ResizeBorder\n            onMouseDown={handleMouseDown}\n            onDoubleClick={ui.sidebarCollapsed ? undefined : handleReset}\n          />\n          {ui.sidebarCollapsed && !ui.isEditing && (\n            <Toggle\n              onClick={ui.toggleCollapsedSidebar}\n              direction={\"right\"}\n              aria-label={t(\"Expand\")}\n            />\n          )}\n        </Container>\n        {!ui.isEditing && (\n          <Toggle\n            style={toggleStyle}\n            onClick={ui.toggleCollapsedSidebar}\n            direction={ui.sidebarCollapsed ? \"right\" : \"left\"}\n            aria-label={ui.sidebarCollapsed ? t(\"Expand\") : t(\"Collapse\")}\n          />\n        )}\n      </>\n    );\n  }\n);\n\nconst StyledAvatar = styled(Avatar)`\n  margin-left: 4px;\n`;\n\nconst Backdrop = styled.a`\n  animation: ${fadeIn} 250ms ease-in-out;\n  position: fixed;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  cursor: default;\n  z-index: ${depths.sidebar - 1};\n  background: ${(props) => props.theme.backdrop};\n`;\n\ntype ContainerProps = {\n  $mobileSidebarVisible: boolean;\n  $isAnimating: boolean;\n  $isSmallerThanMinimum: boolean;\n  $collapsed: boolean;\n};\n\nconst Container = styled(Flex)<ContainerProps>`\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  width: 100%;\n  background: ${(props) => props.theme.sidebarBackground};\n  transition: box-shadow 100ms ease-in-out, transform 100ms ease-out,\n    ${(props) => props.theme.backgroundTransition}\n      ${(props: ContainerProps) =>\n        props.$isAnimating ? `,width ${ANIMATION_MS}ms ease-out` : \"\"};\n  transform: translateX(\n    ${(props) => (props.$mobileSidebarVisible ? 0 : \"-100%\")}\n  );\n  z-index: ${depths.sidebar};\n  max-width: 70%;\n  min-width: 280px;\n\n  ${Positioner} {\n    display: none;\n  }\n\n  @media print {\n    display: none;\n    transform: none;\n  }\n\n  ${breakpoint(\"tablet\")`\n    margin: 0;\n    min-width: 0;\n    transform: translateX(${(props: ContainerProps) =>\n      props.$collapsed ? \"calc(-100% + 16px)\" : 0});\n\n    &:hover,\n    &:focus-within {\n      transform: none;\n      box-shadow: ${(props: ContainerProps) =>\n        props.$collapsed\n          ? \"rgba(0, 0, 0, 0.2) 1px 0 4px\"\n          : props.$isSmallerThanMinimum\n          ? \"rgba(0, 0, 0, 0.1) inset -1px 0 2px\"\n          : \"none\"};\n\n      ${Positioner} {\n        display: block;\n      }\n\n      ${ToggleButton} {\n        opacity: 1;\n      }\n    }\n\n    &:not(:hover):not(:focus-within) > div {\n      opacity: ${(props: ContainerProps) => (props.$collapsed ? \"0\" : \"1\")};\n      transition: opacity 100ms ease-in-out;\n    }\n  `};\n`;\n\nexport default observer(Sidebar);\n","import { isTouchDevice } from \"~/utils/browser\";\n\n/**\n * Returns \"hover\" on a non-touch device and \"active\" on a touch device. To\n * avoid \"sticky\" hover on mobile. Use `&:${hover} {...}` instead of\n * using `&:hover {...}`.\n */\nexport const hover = isTouchDevice() ? \"active\" : \"hover\";\n","import * as React from \"react\";\n\ntype Props = {\n  className?: string;\n};\n\nconst EventBoundary: React.FC<Props> = ({ children, className }) => {\n  const handleClick = React.useCallback((event: React.SyntheticEvent) => {\n    event.preventDefault();\n    event.stopPropagation();\n  }, []);\n\n  return (\n    <span onClick={handleClick} className={className}>\n      {children}\n    </span>\n  );\n};\n\nexport default EventBoundary;\n","import { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport Button from \"~/components/Button\";\nimport Flex from \"~/components/Flex\";\nimport Text from \"~/components/Text\";\nimport useStores from \"~/hooks/useStores\";\nimport useToasts from \"~/hooks/useToasts\";\n\ntype Props = {\n  /** Callback when the dialog is submitted */\n  onSubmit: () => Promise<void> | void;\n  /** Text to display on the submit button */\n  submitText?: string;\n  /** Text to display while the form is saving */\n  savingText?: string;\n  /** If true, the submit button will be a dangerous red */\n  danger?: boolean;\n};\n\nconst ConfirmationDialog: React.FC<Props> = ({\n  onSubmit,\n  children,\n  submitText,\n  savingText,\n  danger,\n}) => {\n  const [isSaving, setIsSaving] = React.useState(false);\n  const { dialogs } = useStores();\n  const { showToast } = useToasts();\n\n  const handleSubmit = React.useCallback(\n    async (ev: React.SyntheticEvent) => {\n      ev.preventDefault();\n      setIsSaving(true);\n      try {\n        await onSubmit();\n        dialogs.closeAllModals();\n      } catch (err) {\n        showToast(err.message, {\n          type: \"error\",\n        });\n      } finally {\n        setIsSaving(false);\n      }\n    },\n    [onSubmit, dialogs, showToast]\n  );\n\n  return (\n    <Flex column>\n      <form onSubmit={handleSubmit}>\n        <Text type=\"secondary\">{children}</Text>\n        <Button type=\"submit\" disabled={isSaving} danger={danger} autoFocus>\n          {isSaving ? savingText : submitText}\n        </Button>\n      </form>\n    </Flex>\n  );\n};\n\nexport default observer(ConfirmationDialog);\n","import * as React from \"react\";\nimport { useMousePosition } from \"~/hooks/useMousePosition\";\n\ntype Positions = {\n  /* Sub-menu x */\n  x: number;\n  /* Sub-menu y */\n  y: number;\n  /* Sub-menu height */\n  h: number;\n  /* Sub-menu width */\n  w: number;\n  /* Mouse x */\n  mouseX: number;\n  /* Mouse y */\n  mouseY: number;\n};\n\n/**\n * Component to cover the area between the mouse cursor and the sub-menu, to\n * allow moving cursor to lower parts of sub-menu without the sub-menu\n * disappearing.\n */\nexport default function MouseSafeArea(props: {\n  parentRef: React.RefObject<HTMLElement | null>;\n}) {\n  const { x = 0, y = 0, height: h = 0, width: w = 0 } =\n    props.parentRef.current?.getBoundingClientRect() || {};\n  const [mouseX, mouseY] = useMousePosition();\n  const positions = { x, y, h, w, mouseX, mouseY };\n\n  return (\n    <div\n      style={{\n        position: \"absolute\",\n        top: 0,\n        // backgroundColor: \"rgba(255,0,0,0.1)\", // Uncomment to debug\n        right: getRight(positions),\n        left: getLeft(positions),\n        height: h,\n        width: getWidth(positions),\n        clipPath: getClipPath(positions),\n      }}\n    />\n  );\n}\n\nconst getLeft = ({ x, mouseX }: Positions) =>\n  mouseX > x ? undefined : -Math.max(x - mouseX, 10) + \"px\";\n\nconst getRight = ({ x, w, mouseX }: Positions) =>\n  mouseX > x ? -Math.max(mouseX - (x + w), 10) + \"px\" : undefined;\n\nconst getWidth = ({ x, w, mouseX }: Positions) =>\n  mouseX > x\n    ? Math.max(mouseX - (x + w), 10) + \"px\"\n    : Math.max(x - mouseX, 10) + \"px\";\n\nconst getClipPath = ({ x, y, h, mouseX, mouseY }: Positions) =>\n  mouseX > x\n    ? `polygon(0% 0%, 0% 100%, 100% ${(100 * (mouseY - y)) / h - 10}%, 100% ${\n        (100 * (mouseY - y)) / h + 5\n      }%)`\n    : `polygon(100% 0%, 0% ${(100 * (mouseY - y)) / h - 10}%, 0% ${\n        (100 * (mouseY - y)) / h + 5\n      }%, 100% 100%)`;\n","import { throttle } from \"lodash\";\nimport * as React from \"react\";\nimport useEventListener from \"./useEventListener\";\n\n/**\n * Mouse position as a tuple of [x, y]\n */\ntype MousePosition = [number, number];\n\n/**\n * Hook to get the current mouse position\n *\n * @returns Mouse position as a tuple of [x, y]\n */\nexport const useMousePosition = () => {\n  const [mousePosition, setMousePosition] = React.useState<MousePosition>([\n    0,\n    0,\n  ]);\n\n  const updateMousePosition = React.useMemo(\n    () =>\n      throttle((ev: MouseEvent) => {\n        setMousePosition([ev.clientX, ev.clientY]);\n      }, 200),\n    []\n  );\n\n  useEventListener(\"mousemove\", updateMousePosition);\n\n  return mousePosition;\n};\n","import { ExpandedIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { Link } from \"react-router-dom\";\nimport {\n  useMenuState,\n  MenuButton,\n  MenuItem as BaseMenuItem,\n} from \"reakit/Menu\";\nimport styled, { useTheme } from \"styled-components\";\nimport Flex from \"~/components/Flex\";\nimport MenuIconWrapper from \"~/components/MenuIconWrapper\";\nimport { actionToMenuItem } from \"~/actions\";\nimport useActionContext from \"~/hooks/useActionContext\";\nimport {\n  Action,\n  ActionContext,\n  MenuSeparator,\n  MenuHeading,\n  MenuItem as TMenuItem,\n} from \"~/types\";\nimport Header from \"./Header\";\nimport MenuItem, { MenuAnchor } from \"./MenuItem\";\nimport MouseSafeArea from \"./MouseSafeArea\";\nimport Separator from \"./Separator\";\nimport ContextMenu from \".\";\n\ntype Props = {\n  actions?: (Action | MenuSeparator | MenuHeading)[];\n  context?: Partial<ActionContext>;\n  items?: TMenuItem[];\n};\n\nconst Disclosure = styled(ExpandedIcon)`\n  transform: rotate(270deg);\n  position: absolute;\n  right: 8px;\n`;\n\nconst Submenu = React.forwardRef(\n  (\n    {\n      templateItems,\n      title,\n      ...rest\n    }: { templateItems: TMenuItem[]; title: React.ReactNode },\n    ref: React.LegacyRef<HTMLButtonElement>\n  ) => {\n    const { t } = useTranslation();\n    const theme = useTheme();\n    const menu = useMenuState();\n\n    return (\n      <>\n        <MenuButton ref={ref} {...menu} {...rest}>\n          {(props) => (\n            <MenuAnchor disclosure {...props}>\n              {title} <Disclosure color={theme.textTertiary} />\n            </MenuAnchor>\n          )}\n        </MenuButton>\n        <ContextMenu {...menu} aria-label={t(\"Submenu\")}>\n          <MouseSafeArea parentRef={menu.unstable_popoverRef} />\n          <Template {...menu} items={templateItems} />\n        </ContextMenu>\n      </>\n    );\n  }\n);\n\nexport function filterTemplateItems(items: TMenuItem[]): TMenuItem[] {\n  return items\n    .filter((item) => item.visible !== false)\n    .reduce((acc, item) => {\n      // trim separator if the previous item was a separator\n      if (\n        item.type === \"separator\" &&\n        acc[acc.length - 1]?.type === \"separator\"\n      ) {\n        return acc;\n      }\n      return [...acc, item];\n    }, [] as TMenuItem[])\n    .filter((item, index, arr) => {\n      if (\n        item.type === \"separator\" &&\n        (index === 0 || index === arr.length - 1)\n      ) {\n        return false;\n      }\n      return true;\n    });\n}\n\nfunction Template({ items, actions, context, ...menu }: Props) {\n  const ctx = useActionContext({\n    isContextMenu: true,\n  });\n\n  const templateItems = actions\n    ? actions.map((item) =>\n        item.type === \"separator\" || item.type === \"heading\"\n          ? item\n          : actionToMenuItem(item, ctx)\n      )\n    : items || [];\n\n  const filteredTemplates = filterTemplateItems(templateItems);\n\n  const iconIsPresentInAnyMenuItem = filteredTemplates.find(\n    (item) =>\n      item.type !== \"separator\" && item.type !== \"heading\" && !!item.icon\n  );\n\n  return (\n    <>\n      {filteredTemplates.map((item, index) => {\n        if (\n          iconIsPresentInAnyMenuItem &&\n          item.type !== \"separator\" &&\n          item.type !== \"heading\"\n        ) {\n          item.icon = item.icon || <MenuIconWrapper />;\n        }\n\n        if (item.type === \"route\") {\n          return (\n            <MenuItem\n              as={Link}\n              to={item.to}\n              key={index}\n              disabled={item.disabled}\n              selected={item.selected}\n              icon={item.icon}\n              {...menu}\n            >\n              {item.title}\n            </MenuItem>\n          );\n        }\n\n        if (item.type === \"link\") {\n          return (\n            <MenuItem\n              href={item.href}\n              key={index}\n              disabled={item.disabled}\n              selected={item.selected}\n              level={item.level}\n              target={item.href.startsWith(\"#\") ? undefined : \"_blank\"}\n              icon={item.icon}\n              {...menu}\n            >\n              {item.title}\n            </MenuItem>\n          );\n        }\n\n        if (item.type === \"button\") {\n          return (\n            <MenuItem\n              as=\"button\"\n              onClick={item.onClick}\n              disabled={item.disabled}\n              selected={item.selected}\n              dangerous={item.dangerous}\n              key={index}\n              icon={item.icon}\n              {...menu}\n            >\n              {item.title}\n            </MenuItem>\n          );\n        }\n\n        if (item.type === \"submenu\") {\n          return (\n            <BaseMenuItem\n              key={index}\n              as={Submenu}\n              templateItems={item.items}\n              title={<Title title={item.title} icon={item.icon} />}\n              {...menu}\n            />\n          );\n        }\n\n        if (item.type === \"separator\") {\n          return <Separator key={index} />;\n        }\n\n        if (item.type === \"heading\") {\n          return <Header>{item.title}</Header>;\n        }\n\n        const _exhaustiveCheck: never = item;\n        return _exhaustiveCheck;\n      })}\n    </>\n  );\n}\n\nfunction Title({\n  title,\n  icon,\n}: {\n  title: React.ReactNode;\n  icon?: React.ReactNode;\n}) {\n  return (\n    <Flex align=\"center\">\n      {icon && <MenuIconWrapper>{icon}</MenuIconWrapper>}\n      {title}\n    </Flex>\n  );\n}\n\nexport default React.memo<Props>(Template);\n","import { times } from \"lodash\";\nimport * as React from \"react\";\nimport styled from \"styled-components\";\nimport Fade from \"~/components/Fade\";\nimport Flex from \"~/components/Flex\";\nimport PlaceholderText, {\n  Props as PlaceholderTextProps,\n} from \"~/components/PlaceholderText\";\n\ntype Props = {\n  count?: number;\n  className?: string;\n  header?: PlaceholderTextProps;\n  body?: PlaceholderTextProps;\n};\n\nconst ListPlaceHolder = ({ count, className, header, body }: Props) => {\n  return (\n    <Fade>\n      {times(count || 2, (index) => (\n        <Item key={index} className={className} column auto>\n          <PlaceholderText {...header} header delay={0.2 * index} />\n          <PlaceholderText {...body} delay={0.2 * index} />\n        </Item>\n      ))}\n    </Fade>\n  );\n};\n\nconst Item = styled(Flex)`\n  padding: 10px 0;\n`;\n\nexport default ListPlaceHolder;\n","import { transparentize } from \"polished\";\nimport styled from \"styled-components\";\n\nconst Badge = styled.span<{ yellow?: boolean; primary?: boolean }>`\n  margin-left: 10px;\n  padding: 1px 5px 2px;\n  background-color: ${({ yellow, primary, theme }) =>\n    yellow ? theme.yellow : primary ? theme.primary : \"transparent\"};\n  color: ${({ primary, yellow, theme }) =>\n    primary ? theme.white : yellow ? theme.almostBlack : theme.textTertiary};\n  border: 1px solid\n    ${({ primary, yellow, theme }) =>\n      primary || yellow\n        ? \"transparent\"\n        : transparentize(0.4, theme.textTertiary)};\n  border-radius: 10px;\n  font-size: 12px;\n  font-weight: 500;\n  user-select: none;\n`;\n\nexport default Badge;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport Flex from \"./Flex\";\nimport Text from \"./Text\";\n\ntype Props = {\n  icon?: JSX.Element;\n  description?: JSX.Element;\n};\n\nconst Notice: React.FC<Props> = ({ children, icon, description }) => {\n  return (\n    <Container>\n      <Flex as=\"span\" gap={8}>\n        {icon}\n        <span>\n          <Title>{children}</Title>\n          {description && (\n            <>\n              <br />\n              {description}\n            </>\n          )}\n        </span>\n      </Flex>\n    </Container>\n  );\n};\n\nconst Title = styled.span`\n  font-weight: 500;\n  font-size: 16px;\n`;\n\nconst Container = styled(Text)`\n  background: ${(props) => props.theme.sidebarBackground};\n  color: ${(props) => props.theme.sidebarText};\n  padding: 10px 12px;\n  border-radius: 4px;\n  position: relative;\n  font-size: 14px;\n  margin: 1em 0 0;\n\n  svg {\n    flex-shrink: 0;\n  }\n`;\n\nexport default Notice;\n"],"sourceRoot":""}