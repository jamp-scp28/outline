(window.webpackJsonp=window.webpackJsonp||[]).push([["document-history"],{RDsd:function(e,t,n){"use strict";n.r(t);n("+2oP"),n("3KgV");var r=n("TyAF"),o=n("tsqv"),a=n("q1tI"),i=n("9Koi"),c=n("Ty5D"),s=n("vOnD"),l=n("ewKk"),u=n("v3FN"),d=n("ME/M"),m=n("W//j"),p=n("KFZt"),f=(n("tkto"),n("yXV3"),n("pNMO"),n("zKZe"),n("A4e3")),b=(n("sMBO"),n("98Z2")),v=n("kTC8"),h=n("lICW"),y=["to"];function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _objectWithoutProperties(e,t){if(null==e)return{};var n,r,o=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function CompositeItem_CompositeItem(e,t){var n=e.to,r=_objectWithoutProperties(e,y);return a.createElement(v.a,_extends({as:h.b,to:n},r,{ref:t}))}var g=a.forwardRef(CompositeItem_CompositeItem),O=n("Jrrx"),E=n("e0LR"),j=(n("ma9I"),n("07d7"),n("5s+n"),n("ls82"),n("LU5X")),x=n("Cqmt"),_=n("JFwc"),w=n("dCEO"),I=n("/19Q"),k=n("6HK0"),C=n("N72w"),P=n("SJh+"),L=n("Y8J7"),N=n("R9tu");function RevisionMenu_extends(){return(RevisionMenu_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function asyncGeneratorStep(e,t,n,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}var M=Object(r.c)((function RevisionMenu(e){var t=e.document,n=e.revisionId,r=e.className,s=Object(L.a)().showToast,l=Object(P.a)(),u=Object(j.a)({modal:!0}),d=Object(i.a)().t,m=Object(c.h)(),p=a.useCallback(function(){var e=function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function _next(e){asyncGeneratorStep(a,r,o,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(a,r,o,_next,_throw,"throw",e)}_next(void 0)}))}}(regeneratorRuntime.mark((function _callee(e){return regeneratorRuntime.wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:if(e.preventDefault(),!l.collaborativeEditing){r.next=5;break}m.push(t.url,{restore:!0,revisionId:n}),r.next=9;break;case 5:return r.next=7,t.restore({revisionId:n});case 7:s(d("Document restored"),{type:"success"}),m.push(t.url);case 9:case"end":return r.stop()}}),_callee)})));return function(t){return e.apply(this,arguments)}}(),[m,s,d,l.collaborativeEditing,t,n]),f=a.useCallback((function(){s(d("Link copied"),{type:"info"})}),[s,d]),b="".concat(window.location.origin).concat(Object(N.c)(t,n));return a.createElement(a.Fragment,null,a.createElement(w.a,RevisionMenu_extends({className:r,iconColor:"currentColor","aria-label":d("Show menu")},u)),a.createElement(x.d,RevisionMenu_extends({},u,{"aria-label":d("Revision options")}),a.createElement(_.c,RevisionMenu_extends({},u,{onClick:p}),a.createElement(C.a,null,a.createElement(o.RestoreIcon,null)),d("Restore version")),a.createElement(I.a,null),a.createElement(k.a,{text:b,onCopy:f},a.createElement(_.c,u,a.createElement(C.a,null,a.createElement(o.LinkIcon,null)),d("Copy link")))))})),R=["event","latest","document"],S=["to"];function EventListItem_extends(){return(EventListItem_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function EventListItem_objectWithoutProperties(e,t){if(null==e)return{};var n,r,o=function EventListItem_objectWithoutPropertiesLoose(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var H=a.forwardRef((function(e,t){var n=e.to,r=EventListItem_objectWithoutProperties(e,S);return n?a.createElement(T,EventListItem_extends({to:n,ref:t},r)):a.createElement(D,EventListItem_extends({ref:t},r))})),W=s.default.span.withConfig({displayName:"EventListItem__Subtitle",componentId:"sc-1amjaws-0"})(["svg{margin:-3px;margin-right:2px;}"]),z=Object(s.css)(['border:0;position:relative;margin:8px;padding:8px;border-radius:8px;img{border-color:transparent;}&::before{content:"";display:block;position:absolute;top:-4px;left:23px;width:2px;height:calc(100% + 8px);background:',";opacity:0.25;}&:nth-child(2)::before{height:50%;top:auto;bottom:-4px;}&:last-child::before{height:50%;}&:first-child:last-child::before{display:none;}","{opacity:0.5;&:hover{opacity:1;}}"],(function(e){return e.theme.textSecondary}),h.a),D=Object(s.default)(h.b).withConfig({displayName:"EventListItem__ListItem",componentId:"sc-1amjaws-1"})(["",""],z),T=Object(s.default)(g).withConfig({displayName:"EventListItem__CompositeListItem",componentId:"sc-1amjaws-2"})(["",""],z),A=function EventListItem(e){var t,n,r,s,l=e.event,u=e.latest,d=e.document,m=EventListItem_objectWithoutProperties(e,R),p=Object(i.a)().t,f=Object(c.i)(),v=Object(E.a)(d.id),h={userName:l.actor.name},y="revisions.create"===l.name,g=a.useRef(null),j=a.useCallback((function(){var e;null===(e=g.current)||void 0===e||e.focus()}),[g]);switch(l.name){case"revisions.create":case"documents.latest_version":if(u){r=a.createElement(o.CheckboxIcon,{color:"currentColor",size:16,checked:!0}),n=p("Latest version"),s=Object(N.c)(d);break}r=a.createElement(o.EditIcon,{color:"currentColor",size:16}),n=p("{{userName}} edited",h),s=Object(N.c)(d,l.modelId||"");break;case"documents.archive":r=a.createElement(o.ArchiveIcon,{color:"currentColor",size:16}),n=p("{{userName}} archived",h);break;case"documents.unarchive":n=p("{{userName}} restored",h);break;case"documents.delete":r=a.createElement(o.TrashIcon,{color:"currentColor",size:16}),n=p("{{userName}} deleted",h);break;case"documents.restore":n=p("{{userName}} moved from trash",h);break;case"documents.publish":r=a.createElement(o.PublishIcon,{color:"currentColor",size:16}),n=p("{{userName}} published",h);break;case"documents.move":r=a.createElement(o.MoveIcon,{color:"currentColor",size:16}),n=p("{{userName}} moved",h);break;default:console.warn("Unhandled event: ",l.name)}if(!n)return null;var x=f.pathname===s;return d.isDeleted&&(s=void 0),a.createElement(H,EventListItem_extends({small:!0,exact:!0,to:s,title:a.createElement(O.a,{dateTime:l.createdAt,tooltipDelay:500,format:{en_US:"MMM do, h:mm a",fr_FR:"'Le 'd MMMM 'Ã ' H:mm"},relative:!1,addSuffix:!0,onClick:j}),image:a.createElement(b.b,{src:null===(t=l.actor)||void 0===t?void 0:t.avatarUrl,size:32}),subtitle:a.createElement(W,null,r,n),actions:y&&x&&l.modelId&&v.update?a.createElement(M,{document:d,revisionId:l.modelId}):void 0,ref:g},m))},J=["empty","heading","events","fetch","options","document"];function PaginatedEventList_extends(){return(PaginatedEventList_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function PaginatedEventList_objectWithoutProperties(e,t){if(null==e)return{};var n,r,o=function PaginatedEventList_objectWithoutPropertiesLoose(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var F,K=a.memo((function PaginatedEventList(e){var t=e.empty,n=e.heading,r=e.events,o=e.fetch,i=e.options,c=e.document,s=PaginatedEventList_objectWithoutProperties(e,J);return a.createElement(f.a,PaginatedEventList_extends({items:r,empty:t,heading:n,fetch:o,options:i,renderItem:function renderItem(e,t,n){return a.createElement(A,PaginatedEventList_extends({key:e.id,event:e,document:c,latest:0===t},n))},renderHeading:function renderHeading(e){return a.createElement(B,null,e)}},s))})),B=Object(s.default)("h3").withConfig({displayName:"PaginatedEventList__Heading",componentId:"sc-18ao1qd-0"})(["font-size:14px;padding:0 12px;"]),U=K,q=n("J0+w"),G=n("1RBS");var Z=[];var V=Object(s.default)(p.a).withConfig({displayName:"DocumentHistory__Position",componentId:"rablu0-0"})(["position:fixed;top:0;bottom:0;width:","px;"],(function(e){return e.theme.sidebarWidth})),X=Object(s.default)(p.a).withConfig({displayName:"DocumentHistory__Sidebar",componentId:"rablu0-1"})(["display:none;position:relative;flex-shrink:0;background:",";width:","px;border-left:1px solid ",";z-index:1;",";"],(function(e){return e.theme.background}),(function(e){return e.theme.sidebarWidth}),(function(e){return e.theme.divider}),Object(l.a)("tablet")(F||(F=function _taggedTemplateLiteral(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    display: flex;\n  "])))),Q=Object(s.default)(p.a).withConfig({displayName:"DocumentHistory__Title",componentId:"rablu0-2"})(["font-size:16px;font-weight:600;text-align:center;align-items:center;justify-content:flex-start;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;width:0;flex-grow:1;"]),Y=Object(s.default)(p.a).withConfig({displayName:"DocumentHistory__Header",componentId:"rablu0-3"})(["align-items:center;position:relative;padding:12px;color:",";flex-shrink:0;"],(function(e){return e.theme.text}));t.default=Object(r.c)((function DocumentHistory(){var e=Object(G.a)(),t=e.events,n=e.documents,r=Object(i.a)().t,s=Object(c.k)(),l=Object(c.h)(),p=n.getByUrl(s.params.documentSlug),f=p?t.inDocument(p.id):Z,b=a.useMemo((function(){return f[0]&&p&&f[0].createdAt!==p.updatedAt&&f.unshift(new u.a({name:"documents.latest_version",documentId:p.id,createdAt:p.updatedAt,actor:p.updatedBy},t)),f}),[f,t,p]);return a.createElement(X,null,p?a.createElement(V,{column:!0},a.createElement(Y,null,a.createElement(Q,null,r("History")),a.createElement(d.b,{icon:a.createElement(o.CloseIcon,null),onClick:function onCloseHistory(){p?l.push(Object(N.e)(p)):l.goBack()},borderOnHover:!0,neutral:!0})),a.createElement(q.a,{topShadow:!0},a.createElement(U,{"aria-label":r("History"),fetch:t.fetchPage,events:b,options:{documentId:p.id},document:p,empty:a.createElement(m.a,null,r("Oh weird, there's nothing here"))}))):null)}))}}]);
//# sourceMappingURL=document-history.d686426c96d6e7fc2326.js.map