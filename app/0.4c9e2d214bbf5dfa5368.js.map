{"version":3,"sources":["webpack:///./node_modules/framer-motion/dist/es/render/utils/is-draggable.js","webpack:///./node_modules/framer-motion/dist/es/render/svg/lowercase-elements.js","webpack:///./node_modules/framer-motion/dist/es/render/dom/utils/is-svg-component.js","webpack:///./node_modules/framer-motion/dist/es/context/SharedLayoutContext.js","webpack:///./node_modules/framer-motion/dist/es/render/dom/projection/scale-correction.js","webpack:///./node_modules/style-value-types/dist/es/color/rgba.js","webpack:///./node_modules/style-value-types/dist/es/utils.js","webpack:///./node_modules/framer-motion/dist/es/gestures/PanSession.js","webpack:///./node_modules/framer-motion/dist/es/components/AnimatePresence/use-presence.js","webpack:///./node_modules/framer-motion/dist/es/render/html/utils/transform.js","webpack:///./node_modules/framer-motion/dist/es/render/svg/utils/scrape-motion-values.js","webpack:///./node_modules/framer-motion/dist/es/render/svg/utils/camel-case-attrs.js","webpack:///./node_modules/hey-listen/dist/hey-listen.es.js","webpack:///./node_modules/framer-motion/dist/es/render/dom/value-types/animatable-none.js","webpack:///./node_modules/style-value-types/dist/es/color/hsla.js","webpack:///./node_modules/framer-motion/dist/es/utils/noop.js","webpack:///./node_modules/framer-motion/dist/es/utils/geometry/index.js","webpack:///./node_modules/popmotion/dist/es/animations/utils/find-spring.js","webpack:///./node_modules/popmotion/dist/es/animations/generators/spring.js","webpack:///./node_modules/popmotion/dist/es/utils/mix-complex.js","webpack:///./node_modules/popmotion/dist/es/utils/interpolate.js","webpack:///./node_modules/popmotion/dist/es/animations/generators/keyframes.js","webpack:///./node_modules/popmotion/dist/es/animations/utils/detect-animation-from-options.js","webpack:///./node_modules/popmotion/dist/es/animations/generators/decay.js","webpack:///./node_modules/popmotion/dist/es/animations/utils/elapsed.js","webpack:///./node_modules/popmotion/dist/es/animations/index.js","webpack:///./node_modules/popmotion/dist/es/easing/cubic-bezier.js","webpack:///./node_modules/framer-motion/dist/es/animation/utils/easing.js","webpack:///./node_modules/framer-motion/dist/es/animation/utils/is-animatable.js","webpack:///./node_modules/framer-motion/dist/es/animation/utils/default-transitions.js","webpack:///./node_modules/framer-motion/dist/es/animation/utils/transitions.js","webpack:///./node_modules/popmotion/dist/es/animations/inertia.js","webpack:///./node_modules/framer-motion/dist/es/render/html/utils/scrape-motion-values.js","webpack:///./node_modules/framer-motion/dist/es/gestures/drag/utils/lock.js","webpack:///./node_modules/framer-motion/dist/es/utils/geometry/delta-apply.js","webpack:///./node_modules/style-value-types/dist/es/numbers/index.js","webpack:///./node_modules/framer-motion/dist/es/utils/is-browser.js","webpack:///./node_modules/popmotion/dist/es/utils/mix-color.js","webpack:///./node_modules/style-value-types/dist/es/complex/index.js","webpack:///./node_modules/framer-motion/dist/es/render/svg/utils/render.js","webpack:///./node_modules/framer-motion/dist/es/render/dom/utils/is-css-variable.js","webpack:///./node_modules/framer-motion/dist/es/animation/utils/is-keyframes-target.js","webpack:///./node_modules/style-value-types/dist/es/color/hex.js","webpack:///./node_modules/framer-motion/dist/es/value/index.js","webpack:///./node_modules/popmotion/dist/es/utils/is-point.js","webpack:///./node_modules/popmotion/dist/es/utils/is-point-3d.js","webpack:///./node_modules/popmotion/dist/es/utils/distance.js","webpack:///./node_modules/framer-motion/dist/es/utils/use-constant.js","webpack:///./node_modules/popmotion/dist/es/utils/mix.js","webpack:///./node_modules/framer-motion/dist/es/render/dom/utils/batch-layout.js","webpack:///./node_modules/popmotion/dist/es/utils/clamp.js","webpack:///./node_modules/popmotion/dist/es/utils/pipe.js","webpack:///./node_modules/framer-motion/dist/es/render/utils/types.js","webpack:///./node_modules/framer-motion/dist/es/animation/utils/is-animation-controls.js","webpack:///./node_modules/framer-motion/dist/es/render/dom/projection/utils.js","webpack:///./node_modules/framer-motion/dist/es/value/utils/is-motion-value.js","webpack:///./node_modules/framer-motion/dist/es/utils/geometry/delta-calc.js","webpack:///./node_modules/style-value-types/dist/es/color/index.js","webpack:///./node_modules/framer-motion/dist/es/utils/time-conversion.js","webpack:///./node_modules/framer-motion/dist/es/utils/array.js","webpack:///./node_modules/framer-motion/dist/es/render/dom/value-types/defaults.js","webpack:///./node_modules/framer-motion/dist/es/events/event-info.js","webpack:///./node_modules/framer-motion/dist/es/utils/each-axis.js","webpack:///./node_modules/framer-motion/dist/es/render/utils/compare-by-depth.js","webpack:///./node_modules/popmotion/dist/es/utils/inc.js","webpack:///./node_modules/framesync/dist/es/on-next-frame.js","webpack:///./node_modules/framesync/dist/es/index.js","webpack:///./node_modules/framesync/dist/es/create-render-step.js","webpack:///./node_modules/framer-motion/dist/es/utils/is-ref-object.js","webpack:///./node_modules/framer-motion/dist/es/context/PresenceContext.js","webpack:///./node_modules/framer-motion/dist/es/components/AnimateSharedLayout/utils/batcher.js","webpack:///./node_modules/framer-motion/dist/es/context/MotionConfigContext.js","webpack:///./node_modules/framer-motion/dist/es/components/AnimateSharedLayout/types.js","webpack:///./node_modules/framer-motion/dist/es/render/html/utils/render.js","webpack:///./node_modules/framer-motion/dist/es/render/dom/projection/measure.js","webpack:///./node_modules/framer-motion/dist/es/render/utils/variants.js","webpack:///./node_modules/framer-motion/dist/es/render/dom/value-types/type-int.js","webpack:///./node_modules/framer-motion/dist/es/render/dom/value-types/number.js","webpack:///./node_modules/framer-motion/dist/es/events/use-dom-event.js","webpack:///./node_modules/framer-motion/dist/es/events/use-pointer-event.js","webpack:///./node_modules/framer-motion/dist/es/events/utils.js","webpack:///./node_modules/framer-motion/dist/es/utils/resolve-value.js","webpack:///./node_modules/framer-motion/dist/es/gestures/utils/event-type.js","webpack:///./node_modules/framer-motion/dist/es/render/html/utils/build-transform.js","webpack:///./node_modules/framer-motion/dist/es/render/dom/value-types/get-as-type.js","webpack:///./node_modules/framer-motion/dist/es/render/html/utils/build-styles.js","webpack:///./node_modules/framer-motion/dist/es/utils/subscription-manager.js","webpack:///./node_modules/popmotion/dist/es/utils/velocity-per-second.js","webpack:///./node_modules/framer-motion/dist/es/render/dom/utils/camel-to-dash.js","webpack:///./node_modules/framer-motion/dist/es/gestures/drag/utils/constraints.js","webpack:///./node_modules/framer-motion/dist/es/gestures/drag/VisualElementDragControls.js","webpack:///./node_modules/framer-motion/dist/es/render/dom/projection/convert-to-relative.js","webpack:///./node_modules/style-value-types/dist/es/complex/filter.js","webpack:///./node_modules/popmotion/dist/es/utils/progress.js","webpack:///./node_modules/style-value-types/dist/es/numbers/units.js","webpack:///./node_modules/framer-motion/dist/es/motion/features/layout/utils.js","webpack:///./node_modules/framer-motion/dist/es/motion/utils/is-forced-motion-value.js","webpack:///./node_modules/style-value-types/dist/es/color/utils.js","webpack:///./node_modules/popmotion/dist/es/easing/utils.js","webpack:///./node_modules/popmotion/dist/es/easing/index.js","webpack:///./node_modules/framer-motion/dist/es/render/svg/utils/transform-origin.js","webpack:///./node_modules/framer-motion/dist/es/render/svg/utils/path.js","webpack:///./node_modules/framer-motion/dist/es/render/svg/utils/build-attrs.js"],"names":["isDraggable","visualElement","_a","getProps","drag","_dragX","lowercaseSVGElements","isSVGComponent","Component","includes","indexOf","test","SharedLayoutContext","FramerTreeLayoutContext","isSharedLayout","context","forceUpdate","valueScaleCorrection","addScaleCorrection","correctors","key","clampRgbUnit","rgbUnit","transform","v","Math","round","rgba","parse","red","green","blue","_b","alpha","alpha$1","clamp","min","max","sanitize","Number","toFixed","floatRegex","colorRegex","singleColorRegex","isString","PanSession","event","handlers","_this","this","transformPagePoint","startEvent","lastMoveEvent","lastMoveEventInfo","updatePoint","info","getPanInfo","history","isPanStarted","isDistancePastThreshold","offset","x","y","point","timestamp","push","onStart","onMove","handlePointerMove","transformPoint","buttons","handlePointerUp","update","end","onEnd","onSessionEnd","panInfo","touches","length","initialInfo","onSessionStart","removeListeners","window","prototype","updateHandlers","subtractPoint","a","b","delta","lastDevicePoint","startDevicePoint","velocity","getVelocity","timeDelta","i","timestampedPoint","lastPoint","time","currentVelocity","Infinity","usePresence","isPresent","onExitComplete","register","id","useUniqueId","counter","incrementId","transformAxes","transformProps","sortTransformProps","forEach","operationKey","axesKey","transformPropSet","Set","isTransformProp","has","transformOriginProps","isTransformOriginProp","scrapeMotionValuesFromProps","props","newValues","toUpperCase","camelCaseAttributes","warning","invariant","getAnimatableNone","value","defaultValueType","call","hsla","hue","saturation","lightness","noop","any","convertBoundingBoxToAxisBox","top","left","right","bottom","convertAxisBoxToBoundingBox","transformBoundingBox","topLeft","bottomRight","axisBox","copyAxisBox","box","zeroDelta","translate","scale","origin","originPoint","safeMin","findSpring","envelope","derivative","duration","_c","bounce","_d","_e","mass","maxDuration","dampingRatio","undampedFreq","exponentialDecay","calcAngularFreq","c","exp","d","e","pow","f","g","approximateRoot","initialGuess","result","isNaN","stiffness","damping","sqrt","durationKeys","physicsKeys","isSpringType","options","keys","some","undefined","spring","from","to","restSpeed","restDelta","state","done","getSpringOptions","springOptions","isResolvedFromDuration","derived","resolveSpring","zero","resolveVelocity","createSpring","initialVelocity","initialDelta","undampedAngularFreq","abs","angularFreq_1","t","sin","cos","dampedAngularFreq_1","freqForT","sinh","cosh","next","current","isBelowVelocityThreshold","isBelowDisplacementThreshold","flipTarget","needsInterpolation","_t","getMixer","target","mix","color","mixComplex","mixArray","output","numValues","blendValue","map","fromThis","mixObject","analyse","parsed","complex","numNumbers","numRGB","numHSL","template","createTransformer","originStats","targetStats","pipe","mixNumber","p","createMixers","ease","customMixer","mixers","mixerFactory","detectMixerFactory","Array","isArray","numMixers","mixer","easingFunction","interpolate","input","isClamp","inputLength","concat","reverse","interpolator","fastInterpolate","progress","slowInterpolate","lastInputIndex","mixerIndex","foundMixerIndex","progressInRange","defaultEasing","values","easing","splice","keyframes","times","convertOffsetToTimes","o","defaultOffset","_value","createInterpolator","types","decay","power","timeConstant","_f","modifyTarget","amplitude","ideal","loopElapsed","elapsed","delay","framesync","passTimestamp","start","stop","animate","driverControls","latest","interpolateFromNumber","autoplay","driver","_g","repeat","repeatMax","_h","repeatType","_j","repeatDelay","onPlay","onStop","onComplete","onRepeat","onUpdate","repeatCount","computedDuration","isComplete","isForwardPlayback","animator","detectAnimationFromOptions","config","type","Object","animation","reverseElapsed","hasRepeatDelayElapsed","complete","play","a1","a2","calcBezier","getSlope","kSampleStepSize","cubicBezier","mX1","mY1","mX2","mY2","sampleValues","Float32Array","getTForX","aX","intervalStart","currentSample","kSplineTableSize","guessForT","initialSlope","newtonRaphsonIterate","aGuessT","currentSlope","binarySubdivide","aA","aB","currentX","currentT","easingLookup","linear","easeIn","easeInOut","easeOut","circIn","circInOut","circOut","backIn","backInOut","backOut","anticipate","bounceIn","bounceInOut","bounceOut","easingDefinitionToFunction","definition","isAnimatable","startsWith","underDampedSpring","criticallyDampedSpring","linearTween","defaultTransitions","z","rotate","rotateX","rotateY","rotateZ","scaleX","scaleY","opacity","backgroundColor","default","legacyRepeatWarning","convertTransitionToAnimationOptions","yoyo","flip","loop","transition","isEasingArray","getPopmotionAnimationOptions","valueKey","transitionFactory","hydrateKeyframes","isTransitionDefined","when","delayChildren","staggerChildren","staggerDirection","getAnimation","valueTransition","getValueTransition","get","isTargetAnimatable","isZero","getZeroUnit","isOriginAnimatable","set","inertia","currentAnimation","bounceStiffness","bounceDamping","isOutOfBounds","boundaryNearest","startAnimation","startSpring","prev_1","current_1","boundary_1","heading_1","parseFloat","potentialUnitType","delayTimer","controls","getDelayFromTransition","setTimeout","clearTimeout","style","createLock","name","lock","globalHorizontalLock","globalVerticalLock","getGlobalLock","openHorizontal_1","openVertical_1","isDragActive","openGestureLock","resetAxis","axis","originAxis","resetBox","originBox","scalePoint","applyPointDelta","boxScale","applyAxisDelta","applyBoxDelta","applyAxisTransforms","final","transforms","scaleKey","originKey","axisOrigin","xKeys","yKeys","applyBoxTransforms","finalBox","removePointDelta","removeAxisTransforms","removeAxisDelta","removeBoxTransforms","applyTreeDeltas","treeScale","treePath","treeLength","node","getLayoutState","getLatestValues","number","isBrowser","mixLinearColor","fromExpo","toExpo","colorTypes","getColorType","find","notAnimatable","mixColor","fromColorType","toColorType","fromColor","toColor","blended","mixFunc","colorToken","numberToken","numColors","colors","match","replace","apply","numbers","tokenised","convertNumbersToZero","transformer","renderSVG","element","renderState","attrs","setAttribute","isCSSVariable","isKeyframesTarget","hex","parseHex","r","substr","parseInt","MotionValue","init","lastUpdated","updateSubscribers","velocityUpdateSubscribers","renderSubscribers","canTrackVelocity","updateAndNotify","render","prev","postRender","scheduleVelocityCheck","notify","getSize","velocityCheck","hasAnimated","onChange","subscription","add","clearListeners","clear","onRenderRequest","attach","passiveEffect","getPrevious","Promise","resolve","stopAnimation","then","clearAnimation","isAnimating","destroy","motionValue","isPoint","hasOwnProperty","isPoint3D","distance1D","distance","xDelta","yDelta","zDelta","useConstant","ref","unresolvedJobs","pushJob","stack","job","pointer","batchLayout","callback","delete","flushLayout","size","reads","writes","setRead","setWrite","numStacks","executeJob","combineFunctions","transformers","_i","arguments","reduce","AnimationType","isAnimationControls","isProjecting","projection","isEnabled","shouldResetTransform","collectProjectingAncestors","ancestors","parent","collectProjectingChildren","children","addChild","child","sort","updateLayoutMeasurement","layoutState","notifyBeforeLayoutMeasure","layout","isHydrated","measureViewportBox","layoutCorrected","notifyLayoutMeasure","prevViewportBox","rebaseProjectionTarget","snapshotViewportBox","isMotionValue","isNear","maxDistance","calcLength","calcOrigin","source","sourceLength","targetLength","updateAxisDelta","updateBoxDelta","defaultOrigin","originX","originY","calcRelativeAxis","relative","calcRelativeBox","parentProjection","relativeTarget","secondsToMilliseconds","seconds","addUniqueItem","arr","item","removeItem","index","defaultValueTypes","outlineColor","fill","stroke","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","filter","WebkitFilter","getDefaultValueType","defaultPagePoint","pageX","pageY","pointFromTouch","pointType","changedTouches","pointFromMouse","extractEventInfo","getViewportPointFromEvent","wrapHandler","handler","shouldFilterPrimaryPointer","listener","filterPrimaryPointer","eventHandler","isMouseEvent","MouseEvent","button","eachAxis","compareByDepth","depth","isNum","defaultTimestep","getCurrentTime","performance","now","Date","onNextFrame","requestAnimationFrame","useDefaultElapsed","runNextFrame","isProcessing","stepsOrder","steps","acc","createRenderStep","toRun","toRunNextFrame","numToRun","toKeepAlive","WeakSet","step","schedule","keepAlive","immediate","addToCurrentFrame","buffer","cancel","process","frameData","sync","startLoop","cancelSync","flushSync","processStep","stepId","processFrame","getFrameData","isRefObject","PresenceContext","defaultHandler","layoutReady","notifyLayoutReady","createBatcher","queue","flush","read","write","order","resetTransform","restoreTransform","presence","Present","preRender","assignProjectionToSnapshot","MotionConfigContext","isStatic","Presence","VisibilityAction","renderHTML","vars","assign","setProperty","getBoundingBox","getBoundingClientRect","isVariantLabels","isVariantLabel","resolveVariantFromProps","custom","currentValues","variants","resolveVariant","getCurrent","forEachValue","checkIfControllingVariants","initial","whileHover","whileDrag","whileTap","whileFocus","exit","checkIfVariantNode","Boolean","numberValueTypes","borderWidth","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderRadius","radius","borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius","width","maxWidth","height","maxHeight","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","margin","marginTop","marginRight","marginBottom","marginLeft","scaleZ","skew","skewX","skewY","translateX","translateY","translateZ","perspective","transformPerspective","originZ","zIndex","fillOpacity","strokeOpacity","numOctaves","addDomEvent","eventName","addEventListener","removeEventListener","useDomEvent","mouseEventNames","pointerdown","pointermove","pointerup","pointercancel","pointerover","pointerout","pointerenter","pointerleave","touchEventNames","getPointerEventName","onpointerdown","ontouchstart","onmousedown","addPointerEvent","usePointerEvent","isCustomValue","toValue","resolveFinalValueInKeyframes","PointerEvent","pointerType","isTouchEvent","translateAlias","getValueAsType","buildHTMLStyles","latestValues","transformTemplate","buildProjectionTransform","buildProjectionTransformOrigin","transformKeys","transformOrigin","hasTransform","hasTransformOrigin","transformIsNone","valueType","valueAsType","correctedValue","applyTo","num","deltaFinal","buildTransform","transformIsDefault","enableHardwareAcceleration","allowTransformNone","transformString","transformHasZ","numTransformKeys","trim","buildTransformOrigin","SubscriptionManager","subscriptions","numSubscriptions","velocityPerSecond","frameDuration","CAMEL_CASE_PATTERN","camelToDash","str","toLowerCase","applyConstraints","elastic","calcRelativeAxisConstraints","calcViewportAxisConstraints","layoutAxis","constraintsAxis","resolveAxisElastic","dragElastic","minLabel","maxLabel","resolvePointElastic","label","lastPointerEvent","elementDragControls","WeakMap","VisualElementDragControls","isDragging","currentDirection","constraints","hasMutatedConstraints","cursorProgress","openGlobalLock","panSession","enableLayoutProjection","originEvent","snapToCursor","stopMotion","initialPoint","cancelLayout","tree","hasManuallySetCursorOrigin","isLayoutDrag","lockProjectionTarget","getAxisMotionValue","isExternalDrag","scheduleUpdateLayoutProjection","axisValue","resolveDragConstraints","dragPropagation","onDragStart","animationState","setActive","Drag","dragDirectionLock","getCurrentDirection","lockThreshold","direction","onDirectionLock","updateAxis","onDrag","dragConstraints","resolveRefConstraints","calcRelativeConstraints","layoutBox","resolveDragElastic","rebaseAxisConstraints","relativeConstraints","onMeasureDragConstraints","constraintsElement","constraintsBox","measuredConstraints","calcViewportConstraints","userConstraints","cancelDrag","unlockProjectionTarget","animateDragEnd","onDragEnd","shouldDrag","length_1","center","updateAxisMotionValue","updateVisualElementAxis","nextValue","axisLayout","axisLength","axisProgress","calcConstrainedMinPoint","setProjectionTargetAxis","setProps","dragMomentum","remainingProps","layoutId","dragKey","getValue","_dragY","dragTransition","isRelative","convertToRelativeProjection","projectionParent","getProjectionParent","relativeConstraints_1","targetFinal","momentumAnimations","startAxisValueAnimation","startLayoutAnimation","all","onDragTransitionEnd","stopLayoutAnimation","currentValue","boxProgress","updateConstraints","calcPositionFromProgress","onReady","mount","getInstance","stopPointerListener","dragListener","stopResizeListener","stopLayoutUpdateListener","onLayoutUpdate","prevDragCursor","maxDefaults","applyDefaultFilter","slice","split","unit","defaultValue","functionRegex","functions","join","toFromDifference","createUnitType","endsWith","degrees","percent","px","vh","vw","progressPercentage","tweenAxis","calcRelativeOffsetAxis","calcRelativeOffset","checkIfParentHasChanged","prevId","getLayoutId","nextId","isForcedMotionValue","isColorString","testProp","splitColor","aName","bName","cName","reverseEasing","mirrorEasing","createBackIn","acos","backEasing","createAnticipate","p2","progressToPixels","dashKeys","array","camelKeys","buildSVGAttrs","attrX","attrY","pathLength","pathSpacing","pathOffset","dimensions","totalPathLength","calcSVGTransformOrigin","buildSVGPath","totalLength","spacing","useDashCase"],"mappings":"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","file":"0.4c9e2d214bbf5dfa5368.js","sourcesContent":["function isDraggable(visualElement) {\n    var _a = visualElement.getProps(), drag = _a.drag, _dragX = _a._dragX;\n    return drag && !_dragX;\n}\n\nexport { isDraggable };\n","/**\n * We keep these listed seperately as we use the lowercase tag names as part\n * of the runtime bundle to detect SVG components\n */\nvar lowercaseSVGElements = [\n    \"animate\",\n    \"circle\",\n    \"defs\",\n    \"desc\",\n    \"ellipse\",\n    \"g\",\n    \"image\",\n    \"line\",\n    \"filter\",\n    \"marker\",\n    \"mask\",\n    \"metadata\",\n    \"path\",\n    \"pattern\",\n    \"polygon\",\n    \"polyline\",\n    \"rect\",\n    \"stop\",\n    \"svg\",\n    \"switch\",\n    \"symbol\",\n    \"text\",\n    \"tspan\",\n    \"use\",\n    \"view\",\n];\n\nexport { lowercaseSVGElements };\n","import { lowercaseSVGElements } from '../../svg/lowercase-elements.js';\n\nfunction isSVGComponent(Component) {\n    if (\n    /**\n     * If it's not a string, it's a custom React component. Currently we only support\n     * HTML custom React components.\n     */\n    typeof Component !== \"string\" ||\n        /**\n         * If it contains a dash, the element is a custom HTML webcomponent.\n         */\n        Component.includes(\"-\")) {\n        return false;\n    }\n    else if (\n    /**\n     * If it's in our list of lowercase SVG tags, it's an SVG component\n     */\n    lowercaseSVGElements.indexOf(Component) > -1 ||\n        /**\n         * If it contains a capital letter, it's an SVG component\n         */\n        /[A-Z]/.test(Component)) {\n        return true;\n    }\n    return false;\n}\n\nexport { isSVGComponent };\n","import { createContext } from 'react';\nimport { createBatcher } from '../components/AnimateSharedLayout/utils/batcher.js';\n\nvar SharedLayoutContext = createContext(createBatcher());\n/**\n * @internal\n */\nvar FramerTreeLayoutContext = createContext(createBatcher());\nfunction isSharedLayout(context) {\n    return !!context.forceUpdate;\n}\n\nexport { FramerTreeLayoutContext, SharedLayoutContext, isSharedLayout };\n","var valueScaleCorrection = {};\n/**\n * @internal\n */\nfunction addScaleCorrection(correctors) {\n    for (var key in correctors) {\n        valueScaleCorrection[key] = correctors[key];\n    }\n}\n\nexport { addScaleCorrection, valueScaleCorrection };\n","import { __assign } from 'tslib';\nimport { number, alpha } from '../numbers/index.js';\nimport { sanitize, clamp } from '../utils.js';\nimport { isColorString, splitColor } from './utils.js';\n\nvar clampRgbUnit = clamp(0, 255);\nvar rgbUnit = __assign(__assign({}, number), { transform: function (v) { return Math.round(clampRgbUnit(v)); } });\nvar rgba = {\n    test: isColorString('rgb', 'red'),\n    parse: splitColor('red', 'green', 'blue'),\n    transform: function (_a) {\n        var red = _a.red, green = _a.green, blue = _a.blue, _b = _a.alpha, alpha$1 = _b === void 0 ? 1 : _b;\n        return 'rgba(' +\n            rgbUnit.transform(red) +\n            ', ' +\n            rgbUnit.transform(green) +\n            ', ' +\n            rgbUnit.transform(blue) +\n            ', ' +\n            sanitize(alpha.transform(alpha$1)) +\n            ')';\n    },\n};\n\nexport { rgbUnit, rgba };\n","var clamp = function (min, max) { return function (v) {\n    return Math.max(Math.min(v, max), min);\n}; };\nvar sanitize = function (v) { return (v % 1 ? Number(v.toFixed(5)) : v); };\nvar floatRegex = /(-)?([\\d]*\\.?[\\d])+/g;\nvar colorRegex = /(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\\((-?[\\d\\.]+%?[,\\s]+){2,3}\\s*\\/*\\s*[\\d\\.]+%?\\))/gi;\nvar singleColorRegex = /^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\\((-?[\\d\\.]+%?[,\\s]+){2,3}\\s*\\/*\\s*[\\d\\.]+%?\\))$/i;\nfunction isString(v) {\n    return typeof v === 'string';\n}\n\nexport { clamp, colorRegex, floatRegex, isString, sanitize, singleColorRegex };\n","import { __assign } from 'tslib';\nimport { isMouseEvent, isTouchEvent } from './utils/event-type.js';\nimport { extractEventInfo } from '../events/event-info.js';\nimport sync, { getFrameData, cancelSync } from 'framesync';\nimport { secondsToMilliseconds } from '../utils/time-conversion.js';\nimport { addPointerEvent } from '../events/use-pointer-event.js';\nimport { distance, pipe } from 'popmotion';\n\n/**\n * @internal\n */\nvar PanSession = /** @class */ (function () {\n    function PanSession(event, handlers, _a) {\n        var _this = this;\n        var _b = _a === void 0 ? {} : _a, transformPagePoint = _b.transformPagePoint;\n        /**\n         * @internal\n         */\n        this.startEvent = null;\n        /**\n         * @internal\n         */\n        this.lastMoveEvent = null;\n        /**\n         * @internal\n         */\n        this.lastMoveEventInfo = null;\n        /**\n         * @internal\n         */\n        this.handlers = {};\n        this.updatePoint = function () {\n            if (!(_this.lastMoveEvent && _this.lastMoveEventInfo))\n                return;\n            var info = getPanInfo(_this.lastMoveEventInfo, _this.history);\n            var isPanStarted = _this.startEvent !== null;\n            // Only start panning if the offset is larger than 3 pixels. If we make it\n            // any larger than this we'll want to reset the pointer history\n            // on the first update to avoid visual snapping to the cursoe.\n            var isDistancePastThreshold = distance(info.offset, { x: 0, y: 0 }) >= 3;\n            if (!isPanStarted && !isDistancePastThreshold)\n                return;\n            var point = info.point;\n            var timestamp = getFrameData().timestamp;\n            _this.history.push(__assign(__assign({}, point), { timestamp: timestamp }));\n            var _a = _this.handlers, onStart = _a.onStart, onMove = _a.onMove;\n            if (!isPanStarted) {\n                onStart && onStart(_this.lastMoveEvent, info);\n                _this.startEvent = _this.lastMoveEvent;\n            }\n            onMove && onMove(_this.lastMoveEvent, info);\n        };\n        this.handlePointerMove = function (event, info) {\n            _this.lastMoveEvent = event;\n            _this.lastMoveEventInfo = transformPoint(info, _this.transformPagePoint);\n            // Because Safari doesn't trigger mouseup events when it's above a `<select>`\n            if (isMouseEvent(event) && event.buttons === 0) {\n                _this.handlePointerUp(event, info);\n                return;\n            }\n            // Throttle mouse move event to once per frame\n            sync.update(_this.updatePoint, true);\n        };\n        this.handlePointerUp = function (event, info) {\n            _this.end();\n            var _a = _this.handlers, onEnd = _a.onEnd, onSessionEnd = _a.onSessionEnd;\n            var panInfo = getPanInfo(transformPoint(info, _this.transformPagePoint), _this.history);\n            if (_this.startEvent && onEnd) {\n                onEnd(event, panInfo);\n            }\n            onSessionEnd && onSessionEnd(event, panInfo);\n        };\n        // If we have more than one touch, don't start detecting this gesture\n        if (isTouchEvent(event) && event.touches.length > 1)\n            return;\n        this.handlers = handlers;\n        this.transformPagePoint = transformPagePoint;\n        var info = extractEventInfo(event);\n        var initialInfo = transformPoint(info, this.transformPagePoint);\n        var point = initialInfo.point;\n        var timestamp = getFrameData().timestamp;\n        this.history = [__assign(__assign({}, point), { timestamp: timestamp })];\n        var onSessionStart = handlers.onSessionStart;\n        onSessionStart &&\n            onSessionStart(event, getPanInfo(initialInfo, this.history));\n        this.removeListeners = pipe(addPointerEvent(window, \"pointermove\", this.handlePointerMove), addPointerEvent(window, \"pointerup\", this.handlePointerUp), addPointerEvent(window, \"pointercancel\", this.handlePointerUp));\n    }\n    PanSession.prototype.updateHandlers = function (handlers) {\n        this.handlers = handlers;\n    };\n    PanSession.prototype.end = function () {\n        this.removeListeners && this.removeListeners();\n        cancelSync.update(this.updatePoint);\n    };\n    return PanSession;\n}());\nfunction transformPoint(info, transformPagePoint) {\n    return transformPagePoint ? { point: transformPagePoint(info.point) } : info;\n}\nfunction subtractPoint(a, b) {\n    return { x: a.x - b.x, y: a.y - b.y };\n}\nfunction getPanInfo(_a, history) {\n    var point = _a.point;\n    return {\n        point: point,\n        delta: subtractPoint(point, lastDevicePoint(history)),\n        offset: subtractPoint(point, startDevicePoint(history)),\n        velocity: getVelocity(history, 0.1),\n    };\n}\nfunction startDevicePoint(history) {\n    return history[0];\n}\nfunction lastDevicePoint(history) {\n    return history[history.length - 1];\n}\nfunction getVelocity(history, timeDelta) {\n    if (history.length < 2) {\n        return { x: 0, y: 0 };\n    }\n    var i = history.length - 1;\n    var timestampedPoint = null;\n    var lastPoint = lastDevicePoint(history);\n    while (i >= 0) {\n        timestampedPoint = history[i];\n        if (lastPoint.timestamp - timestampedPoint.timestamp >\n            secondsToMilliseconds(timeDelta)) {\n            break;\n        }\n        i--;\n    }\n    if (!timestampedPoint) {\n        return { x: 0, y: 0 };\n    }\n    var time = (lastPoint.timestamp - timestampedPoint.timestamp) / 1000;\n    if (time === 0) {\n        return { x: 0, y: 0 };\n    }\n    var currentVelocity = {\n        x: (lastPoint.x - timestampedPoint.x) / time,\n        y: (lastPoint.y - timestampedPoint.y) / time,\n    };\n    if (currentVelocity.x === Infinity) {\n        currentVelocity.x = 0;\n    }\n    if (currentVelocity.y === Infinity) {\n        currentVelocity.y = 0;\n    }\n    return currentVelocity;\n}\n\nexport { PanSession };\n","import { useContext, useEffect } from 'react';\nimport { PresenceContext } from '../../context/PresenceContext.js';\nimport { useConstant } from '../../utils/use-constant.js';\n\n/**\n * When a component is the child of `AnimatePresence`, it can use `usePresence`\n * to access information about whether it's still present in the React tree.\n *\n * ```jsx\n * import { usePresence } from \"framer-motion\"\n *\n * export const Component = () => {\n *   const [isPresent, safeToRemove] = usePresence()\n *\n *   useEffect(() => {\n *     !isPresent && setTimeout(safeToRemove, 1000)\n *   }, [isPresent])\n *\n *   return <div />\n * }\n * ```\n *\n * If `isPresent` is `false`, it means that a component has been removed the tree, but\n * `AnimatePresence` won't really remove it until `safeToRemove` has been called.\n *\n * @public\n */\nfunction usePresence() {\n    var context = useContext(PresenceContext);\n    if (context === null)\n        return [true, null];\n    var isPresent = context.isPresent, onExitComplete = context.onExitComplete, register = context.register;\n    // It's safe to call the following hooks conditionally (after an early return) because the context will always\n    // either be null or non-null for the lifespan of the component.\n    // Replace with useOpaqueId when released in React\n    var id = useUniqueId();\n    useEffect(function () { return register(id); }, []);\n    var safeToRemove = function () { return onExitComplete === null || onExitComplete === void 0 ? void 0 : onExitComplete(id); };\n    return !isPresent && onExitComplete ? [false, safeToRemove] : [true];\n}\n/**\n * Similar to `usePresence`, except `useIsPresent` simply returns whether or not the component is present.\n * There is no `safeToRemove` function.\n *\n * ```jsx\n * import { useIsPresent } from \"framer-motion\"\n *\n * export const Component = () => {\n *   const isPresent = useIsPresent()\n *\n *   useEffect(() => {\n *     !isPresent && console.log(\"I've been removed!\")\n *   }, [isPresent])\n *\n *   return <div />\n * }\n * ```\n *\n * @public\n */\nfunction useIsPresent() {\n    return isPresent(useContext(PresenceContext));\n}\nfunction isPresent(context) {\n    return context === null ? true : context.isPresent;\n}\nvar counter = 0;\nvar incrementId = function () { return counter++; };\nvar useUniqueId = function () { return useConstant(incrementId); };\n\nexport { isPresent, useIsPresent, usePresence };\n","/**\n * A list of all transformable axes. We'll use this list to generated a version\n * of each axes for each transform.\n */\nvar transformAxes = [\"\", \"X\", \"Y\", \"Z\"];\n/**\n * An ordered array of each transformable value. By default, transform values\n * will be sorted to this order.\n */\nvar order = [\"translate\", \"scale\", \"rotate\", \"skew\"];\n/**\n * Generate a list of every possible transform key.\n */\nvar transformProps = [\"transformPerspective\", \"x\", \"y\", \"z\"];\norder.forEach(function (operationKey) {\n    return transformAxes.forEach(function (axesKey) {\n        return transformProps.push(operationKey + axesKey);\n    });\n});\n/**\n * A function to use with Array.sort to sort transform keys by their default order.\n */\nfunction sortTransformProps(a, b) {\n    return transformProps.indexOf(a) - transformProps.indexOf(b);\n}\n/**\n * A quick lookup for transform props.\n */\nvar transformPropSet = new Set(transformProps);\nfunction isTransformProp(key) {\n    return transformPropSet.has(key);\n}\n/**\n * A quick lookup for transform origin props\n */\nvar transformOriginProps = new Set([\"originX\", \"originY\", \"originZ\"]);\nfunction isTransformOriginProp(key) {\n    return transformOriginProps.has(key);\n}\n\nexport { isTransformOriginProp, isTransformProp, sortTransformProps, transformAxes, transformProps };\n","import { isMotionValue } from '../../../value/utils/is-motion-value.js';\nimport { scrapeMotionValuesFromProps as scrapeMotionValuesFromProps$1 } from '../../html/utils/scrape-motion-values.js';\n\nfunction scrapeMotionValuesFromProps(props) {\n    var newValues = scrapeMotionValuesFromProps$1(props);\n    for (var key in props) {\n        if (isMotionValue(props[key])) {\n            var targetKey = key === \"x\" || key === \"y\" ? \"attr\" + key.toUpperCase() : key;\n            newValues[targetKey] = props[key];\n        }\n    }\n    return newValues;\n}\n\nexport { scrapeMotionValuesFromProps };\n","/**\n * A set of attribute names that are always read/written as camel case.\n */\nvar camelCaseAttributes = new Set([\n    \"baseFrequency\",\n    \"diffuseConstant\",\n    \"kernelMatrix\",\n    \"kernelUnitLength\",\n    \"keySplines\",\n    \"keyTimes\",\n    \"limitingConeAngle\",\n    \"markerHeight\",\n    \"markerWidth\",\n    \"numOctaves\",\n    \"targetX\",\n    \"targetY\",\n    \"surfaceScale\",\n    \"specularConstant\",\n    \"specularExponent\",\n    \"stdDeviation\",\n    \"tableValues\",\n    \"viewBox\",\n    \"gradientTransform\",\n]);\n\nexport { camelCaseAttributes };\n","var warning = function () { };\r\nvar invariant = function () { };\r\nif (process.env.NODE_ENV !== 'production') {\r\n    warning = function (check, message) {\r\n        if (!check && typeof console !== 'undefined') {\r\n            console.warn(message);\r\n        }\r\n    };\r\n    invariant = function (check, message) {\r\n        if (!check) {\r\n            throw new Error(message);\r\n        }\r\n    };\r\n}\n\nexport { invariant, warning };\n","import { filter, complex } from 'style-value-types';\nimport { getDefaultValueType } from './defaults.js';\n\nfunction getAnimatableNone(key, value) {\n    var _a;\n    var defaultValueType = getDefaultValueType(key);\n    if (defaultValueType !== filter)\n        defaultValueType = complex;\n    // If value is not recognised as animatable, ie \"none\", create an animatable version origin based on the target\n    return (_a = defaultValueType.getAnimatableNone) === null || _a === void 0 ? void 0 : _a.call(defaultValueType, value);\n}\n\nexport { getAnimatableNone };\n","import { alpha } from '../numbers/index.js';\nimport { percent } from '../numbers/units.js';\nimport { sanitize } from '../utils.js';\nimport { isColorString, splitColor } from './utils.js';\n\nvar hsla = {\n    test: isColorString('hsl', 'hue'),\n    parse: splitColor('hue', 'saturation', 'lightness'),\n    transform: function (_a) {\n        var hue = _a.hue, saturation = _a.saturation, lightness = _a.lightness, _b = _a.alpha, alpha$1 = _b === void 0 ? 1 : _b;\n        return ('hsla(' +\n            Math.round(hue) +\n            ', ' +\n            percent.transform(sanitize(saturation)) +\n            ', ' +\n            percent.transform(sanitize(lightness)) +\n            ', ' +\n            sanitize(alpha.transform(alpha$1)) +\n            ')');\n    },\n};\n\nexport { hsla };\n","function noop(any) {\n    return any;\n}\n\nexport { noop };\n","import { __assign } from 'tslib';\nimport { noop } from '../noop.js';\n\n/**\n * Bounding boxes tend to be defined as top, left, right, bottom. For various operations\n * it's easier to consider each axis individually. This function returns a bounding box\n * as a map of single-axis min/max values.\n */\nfunction convertBoundingBoxToAxisBox(_a) {\n    var top = _a.top, left = _a.left, right = _a.right, bottom = _a.bottom;\n    return {\n        x: { min: left, max: right },\n        y: { min: top, max: bottom },\n    };\n}\nfunction convertAxisBoxToBoundingBox(_a) {\n    var x = _a.x, y = _a.y;\n    return {\n        top: y.min,\n        bottom: y.max,\n        left: x.min,\n        right: x.max,\n    };\n}\n/**\n * Applies a TransformPoint function to a bounding box. TransformPoint is usually a function\n * provided by Framer to allow measured points to be corrected for device scaling. This is used\n * when measuring DOM elements and DOM event points.\n */\nfunction transformBoundingBox(_a, transformPoint) {\n    var top = _a.top, left = _a.left, bottom = _a.bottom, right = _a.right;\n    if (transformPoint === void 0) { transformPoint = noop; }\n    var topLeft = transformPoint({ x: left, y: top });\n    var bottomRight = transformPoint({ x: right, y: bottom });\n    return {\n        top: topLeft.y,\n        left: topLeft.x,\n        bottom: bottomRight.y,\n        right: bottomRight.x,\n    };\n}\n/**\n * Create an empty axis box of zero size\n */\nfunction axisBox() {\n    return { x: { min: 0, max: 1 }, y: { min: 0, max: 1 } };\n}\nfunction copyAxisBox(box) {\n    return {\n        x: __assign({}, box.x),\n        y: __assign({}, box.y),\n    };\n}\n/**\n * Create an empty box delta\n */\nvar zeroDelta = {\n    translate: 0,\n    scale: 1,\n    origin: 0,\n    originPoint: 0,\n};\nfunction delta() {\n    return {\n        x: __assign({}, zeroDelta),\n        y: __assign({}, zeroDelta),\n    };\n}\n\nexport { axisBox, convertAxisBoxToBoundingBox, convertBoundingBoxToAxisBox, copyAxisBox, delta, transformBoundingBox };\n","import { warning } from 'hey-listen';\nimport { clamp } from '../../utils/clamp.js';\n\nvar safeMin = 0.001;\nvar minDuration = 0.01;\nvar maxDuration = 10.0;\nvar minDamping = 0.05;\nvar maxDamping = 1;\nfunction findSpring(_a) {\n    var _b = _a.duration, duration = _b === void 0 ? 800 : _b, _c = _a.bounce, bounce = _c === void 0 ? 0.25 : _c, _d = _a.velocity, velocity = _d === void 0 ? 0 : _d, _e = _a.mass, mass = _e === void 0 ? 1 : _e;\n    var envelope;\n    var derivative;\n    warning(duration <= maxDuration * 1000, \"Spring duration must be 10 seconds or less\");\n    var dampingRatio = 1 - bounce;\n    dampingRatio = clamp(minDamping, maxDamping, dampingRatio);\n    duration = clamp(minDuration, maxDuration, duration / 1000);\n    if (dampingRatio < 1) {\n        envelope = function (undampedFreq) {\n            var exponentialDecay = undampedFreq * dampingRatio;\n            var delta = exponentialDecay * duration;\n            var a = exponentialDecay - velocity;\n            var b = calcAngularFreq(undampedFreq, dampingRatio);\n            var c = Math.exp(-delta);\n            return safeMin - (a / b) * c;\n        };\n        derivative = function (undampedFreq) {\n            var exponentialDecay = undampedFreq * dampingRatio;\n            var delta = exponentialDecay * duration;\n            var d = delta * velocity + velocity;\n            var e = Math.pow(dampingRatio, 2) * Math.pow(undampedFreq, 2) * duration;\n            var f = Math.exp(-delta);\n            var g = calcAngularFreq(Math.pow(undampedFreq, 2), dampingRatio);\n            var factor = -envelope(undampedFreq) + safeMin > 0 ? -1 : 1;\n            return (factor * ((d - e) * f)) / g;\n        };\n    }\n    else {\n        envelope = function (undampedFreq) {\n            var a = Math.exp(-undampedFreq * duration);\n            var b = (undampedFreq - velocity) * duration + 1;\n            return -safeMin + a * b;\n        };\n        derivative = function (undampedFreq) {\n            var a = Math.exp(-undampedFreq * duration);\n            var b = (velocity - undampedFreq) * (duration * duration);\n            return a * b;\n        };\n    }\n    var initialGuess = 5 / duration;\n    var undampedFreq = approximateRoot(envelope, derivative, initialGuess);\n    duration = duration * 1000;\n    if (isNaN(undampedFreq)) {\n        return {\n            stiffness: 100,\n            damping: 10,\n            duration: duration,\n        };\n    }\n    else {\n        var stiffness = Math.pow(undampedFreq, 2) * mass;\n        return {\n            stiffness: stiffness,\n            damping: dampingRatio * 2 * Math.sqrt(mass * stiffness),\n            duration: duration,\n        };\n    }\n}\nvar rootIterations = 12;\nfunction approximateRoot(envelope, derivative, initialGuess) {\n    var result = initialGuess;\n    for (var i = 1; i < rootIterations; i++) {\n        result = result - envelope(result) / derivative(result);\n    }\n    return result;\n}\nfunction calcAngularFreq(undampedFreq, dampingRatio) {\n    return undampedFreq * Math.sqrt(1 - dampingRatio * dampingRatio);\n}\n\nexport { calcAngularFreq, findSpring, maxDamping, maxDuration, minDamping, minDuration };\n","import { __rest, __assign } from 'tslib';\nimport { findSpring, calcAngularFreq } from '../utils/find-spring.js';\n\nvar durationKeys = [\"duration\", \"bounce\"];\nvar physicsKeys = [\"stiffness\", \"damping\", \"mass\"];\nfunction isSpringType(options, keys) {\n    return keys.some(function (key) { return options[key] !== undefined; });\n}\nfunction getSpringOptions(options) {\n    var springOptions = __assign({ velocity: 0.0, stiffness: 100, damping: 10, mass: 1.0, isResolvedFromDuration: false }, options);\n    if (!isSpringType(options, physicsKeys) &&\n        isSpringType(options, durationKeys)) {\n        var derived = findSpring(options);\n        springOptions = __assign(__assign(__assign({}, springOptions), derived), { velocity: 0.0, mass: 1.0 });\n        springOptions.isResolvedFromDuration = true;\n    }\n    return springOptions;\n}\nfunction spring(_a) {\n    var _b = _a.from, from = _b === void 0 ? 0.0 : _b, _c = _a.to, to = _c === void 0 ? 1.0 : _c, _d = _a.restSpeed, restSpeed = _d === void 0 ? 2 : _d, restDelta = _a.restDelta, options = __rest(_a, [\"from\", \"to\", \"restSpeed\", \"restDelta\"]);\n    var state = { done: false, value: from };\n    var _e = getSpringOptions(options), stiffness = _e.stiffness, damping = _e.damping, mass = _e.mass, velocity = _e.velocity, duration = _e.duration, isResolvedFromDuration = _e.isResolvedFromDuration;\n    var resolveSpring = zero;\n    var resolveVelocity = zero;\n    function createSpring() {\n        var initialVelocity = velocity ? -(velocity / 1000) : 0.0;\n        var initialDelta = to - from;\n        var dampingRatio = damping / (2 * Math.sqrt(stiffness * mass));\n        var undampedAngularFreq = Math.sqrt(stiffness / mass) / 1000;\n        restDelta !== null && restDelta !== void 0 ? restDelta : (restDelta = Math.abs(to - from) <= 1 ? 0.01 : 0.4);\n        if (dampingRatio < 1) {\n            var angularFreq_1 = calcAngularFreq(undampedAngularFreq, dampingRatio);\n            resolveSpring = function (t) {\n                var envelope = Math.exp(-dampingRatio * undampedAngularFreq * t);\n                return (to -\n                    envelope *\n                        (((initialVelocity +\n                            dampingRatio * undampedAngularFreq * initialDelta) /\n                            angularFreq_1) *\n                            Math.sin(angularFreq_1 * t) +\n                            initialDelta * Math.cos(angularFreq_1 * t)));\n            };\n            resolveVelocity = function (t) {\n                var envelope = Math.exp(-dampingRatio * undampedAngularFreq * t);\n                return (dampingRatio *\n                    undampedAngularFreq *\n                    envelope *\n                    ((Math.sin(angularFreq_1 * t) *\n                        (initialVelocity +\n                            dampingRatio *\n                                undampedAngularFreq *\n                                initialDelta)) /\n                        angularFreq_1 +\n                        initialDelta * Math.cos(angularFreq_1 * t)) -\n                    envelope *\n                        (Math.cos(angularFreq_1 * t) *\n                            (initialVelocity +\n                                dampingRatio *\n                                    undampedAngularFreq *\n                                    initialDelta) -\n                            angularFreq_1 *\n                                initialDelta *\n                                Math.sin(angularFreq_1 * t)));\n            };\n        }\n        else if (dampingRatio === 1) {\n            resolveSpring = function (t) {\n                return to -\n                    Math.exp(-undampedAngularFreq * t) *\n                        (initialDelta +\n                            (initialVelocity + undampedAngularFreq * initialDelta) *\n                                t);\n            };\n        }\n        else {\n            var dampedAngularFreq_1 = undampedAngularFreq * Math.sqrt(dampingRatio * dampingRatio - 1);\n            resolveSpring = function (t) {\n                var envelope = Math.exp(-dampingRatio * undampedAngularFreq * t);\n                var freqForT = Math.min(dampedAngularFreq_1 * t, 300);\n                return (to -\n                    (envelope *\n                        ((initialVelocity +\n                            dampingRatio * undampedAngularFreq * initialDelta) *\n                            Math.sinh(freqForT) +\n                            dampedAngularFreq_1 *\n                                initialDelta *\n                                Math.cosh(freqForT))) /\n                        dampedAngularFreq_1);\n            };\n        }\n    }\n    createSpring();\n    return {\n        next: function (t) {\n            var current = resolveSpring(t);\n            if (!isResolvedFromDuration) {\n                var currentVelocity = resolveVelocity(t) * 1000;\n                var isBelowVelocityThreshold = Math.abs(currentVelocity) <= restSpeed;\n                var isBelowDisplacementThreshold = Math.abs(to - current) <= restDelta;\n                state.done =\n                    isBelowVelocityThreshold && isBelowDisplacementThreshold;\n            }\n            else {\n                state.done = t >= duration;\n            }\n            state.value = state.done ? to : current;\n            return state;\n        },\n        flipTarget: function () {\n            var _a;\n            velocity = -velocity;\n            _a = [to, from], from = _a[0], to = _a[1];\n            createSpring();\n        },\n    };\n}\nspring.needsInterpolation = function (a, b) {\n    return typeof a === \"string\" || typeof b === \"string\";\n};\nvar zero = function (_t) { return 0; };\n\nexport { spring };\n","import { __spreadArray, __assign } from 'tslib';\nimport { complex, color } from 'style-value-types';\nimport { mix } from './mix.js';\nimport { mixColor } from './mix-color.js';\nimport { isNum } from './inc.js';\nimport { pipe } from './pipe.js';\nimport { invariant } from 'hey-listen';\n\nfunction getMixer(origin, target) {\n    if (isNum(origin)) {\n        return function (v) { return mix(origin, target, v); };\n    }\n    else if (color.test(origin)) {\n        return mixColor(origin, target);\n    }\n    else {\n        return mixComplex(origin, target);\n    }\n}\nvar mixArray = function (from, to) {\n    var output = __spreadArray([], from);\n    var numValues = output.length;\n    var blendValue = from.map(function (fromThis, i) { return getMixer(fromThis, to[i]); });\n    return function (v) {\n        for (var i = 0; i < numValues; i++) {\n            output[i] = blendValue[i](v);\n        }\n        return output;\n    };\n};\nvar mixObject = function (origin, target) {\n    var output = __assign(__assign({}, origin), target);\n    var blendValue = {};\n    for (var key in output) {\n        if (origin[key] !== undefined && target[key] !== undefined) {\n            blendValue[key] = getMixer(origin[key], target[key]);\n        }\n    }\n    return function (v) {\n        for (var key in blendValue) {\n            output[key] = blendValue[key](v);\n        }\n        return output;\n    };\n};\nfunction analyse(value) {\n    var parsed = complex.parse(value);\n    var numValues = parsed.length;\n    var numNumbers = 0;\n    var numRGB = 0;\n    var numHSL = 0;\n    for (var i = 0; i < numValues; i++) {\n        if (numNumbers || typeof parsed[i] === \"number\") {\n            numNumbers++;\n        }\n        else {\n            if (parsed[i].hue !== undefined) {\n                numHSL++;\n            }\n            else {\n                numRGB++;\n            }\n        }\n    }\n    return { parsed: parsed, numNumbers: numNumbers, numRGB: numRGB, numHSL: numHSL };\n}\nvar mixComplex = function (origin, target) {\n    var template = complex.createTransformer(target);\n    var originStats = analyse(origin);\n    var targetStats = analyse(target);\n    invariant(originStats.numHSL === targetStats.numHSL &&\n        originStats.numRGB === targetStats.numRGB &&\n        originStats.numNumbers >= targetStats.numNumbers, \"Complex values '\" + origin + \"' and '\" + target + \"' too different to mix. Ensure all colors are of the same type.\");\n    return pipe(mixArray(originStats.parsed, targetStats.parsed), template);\n};\n\nexport { mixArray, mixComplex, mixObject };\n","import { progress } from './progress.js';\nimport { mix } from './mix.js';\nimport { mixColor } from './mix-color.js';\nimport { mixComplex, mixArray, mixObject } from './mix-complex.js';\nimport { color } from 'style-value-types';\nimport { clamp } from './clamp.js';\nimport { pipe } from './pipe.js';\nimport { invariant } from 'hey-listen';\n\nvar mixNumber = function (from, to) { return function (p) { return mix(from, to, p); }; };\nfunction detectMixerFactory(v) {\n    if (typeof v === 'number') {\n        return mixNumber;\n    }\n    else if (typeof v === 'string') {\n        if (color.test(v)) {\n            return mixColor;\n        }\n        else {\n            return mixComplex;\n        }\n    }\n    else if (Array.isArray(v)) {\n        return mixArray;\n    }\n    else if (typeof v === 'object') {\n        return mixObject;\n    }\n}\nfunction createMixers(output, ease, customMixer) {\n    var mixers = [];\n    var mixerFactory = customMixer || detectMixerFactory(output[0]);\n    var numMixers = output.length - 1;\n    for (var i = 0; i < numMixers; i++) {\n        var mixer = mixerFactory(output[i], output[i + 1]);\n        if (ease) {\n            var easingFunction = Array.isArray(ease) ? ease[i] : ease;\n            mixer = pipe(easingFunction, mixer);\n        }\n        mixers.push(mixer);\n    }\n    return mixers;\n}\nfunction fastInterpolate(_a, _b) {\n    var from = _a[0], to = _a[1];\n    var mixer = _b[0];\n    return function (v) { return mixer(progress(from, to, v)); };\n}\nfunction slowInterpolate(input, mixers) {\n    var inputLength = input.length;\n    var lastInputIndex = inputLength - 1;\n    return function (v) {\n        var mixerIndex = 0;\n        var foundMixerIndex = false;\n        if (v <= input[0]) {\n            foundMixerIndex = true;\n        }\n        else if (v >= input[lastInputIndex]) {\n            mixerIndex = lastInputIndex - 1;\n            foundMixerIndex = true;\n        }\n        if (!foundMixerIndex) {\n            var i = 1;\n            for (; i < inputLength; i++) {\n                if (input[i] > v || i === lastInputIndex) {\n                    break;\n                }\n            }\n            mixerIndex = i - 1;\n        }\n        var progressInRange = progress(input[mixerIndex], input[mixerIndex + 1], v);\n        return mixers[mixerIndex](progressInRange);\n    };\n}\nfunction interpolate(input, output, _a) {\n    var _b = _a === void 0 ? {} : _a, _c = _b.clamp, isClamp = _c === void 0 ? true : _c, ease = _b.ease, mixer = _b.mixer;\n    var inputLength = input.length;\n    invariant(inputLength === output.length, 'Both input and output ranges must be the same length');\n    invariant(!ease || !Array.isArray(ease) || ease.length === inputLength - 1, 'Array of easing functions must be of length `input.length - 1`, as it applies to the transitions **between** the defined values.');\n    if (input[0] > input[inputLength - 1]) {\n        input = [].concat(input);\n        output = [].concat(output);\n        input.reverse();\n        output.reverse();\n    }\n    var mixers = createMixers(output, ease, mixer);\n    var interpolator = inputLength === 2\n        ? fastInterpolate(input, mixers)\n        : slowInterpolate(input, mixers);\n    return isClamp\n        ? function (v) { return interpolator(clamp(input[0], input[inputLength - 1], v)); }\n        : interpolator;\n}\n\nexport { interpolate };\n","import { interpolate } from '../../utils/interpolate.js';\nimport { easeInOut } from '../../easing/index.js';\n\nfunction defaultEasing(values, easing) {\n    return values.map(function () { return easing || easeInOut; }).splice(0, values.length - 1);\n}\nfunction defaultOffset(values) {\n    var numValues = values.length;\n    return values.map(function (_value, i) {\n        return i !== 0 ? i / (numValues - 1) : 0;\n    });\n}\nfunction convertOffsetToTimes(offset, duration) {\n    return offset.map(function (o) { return o * duration; });\n}\nfunction keyframes(_a) {\n    var _b = _a.from, from = _b === void 0 ? 0 : _b, _c = _a.to, to = _c === void 0 ? 1 : _c, ease = _a.ease, offset = _a.offset, _d = _a.duration, duration = _d === void 0 ? 300 : _d;\n    var state = { done: false, value: from };\n    var values = Array.isArray(to) ? to : [from, to];\n    var times = convertOffsetToTimes(offset && offset.length === values.length\n        ? offset\n        : defaultOffset(values), duration);\n    function createInterpolator() {\n        return interpolate(times, values, {\n            ease: Array.isArray(ease) ? ease : defaultEasing(values, ease),\n        });\n    }\n    var interpolator = createInterpolator();\n    return {\n        next: function (t) {\n            state.value = interpolator(t);\n            state.done = t >= duration;\n            return state;\n        },\n        flipTarget: function () {\n            values.reverse();\n            interpolator = createInterpolator();\n        },\n    };\n}\n\nexport { convertOffsetToTimes, defaultEasing, defaultOffset, keyframes };\n","import { spring } from '../generators/spring.js';\nimport { keyframes } from '../generators/keyframes.js';\nimport { decay } from '../generators/decay.js';\n\nvar types = { keyframes: keyframes, spring: spring, decay: decay };\nfunction detectAnimationFromOptions(config) {\n    if (Array.isArray(config.to)) {\n        return keyframes;\n    }\n    else if (types[config.type]) {\n        return types[config.type];\n    }\n    var keys = new Set(Object.keys(config));\n    if (keys.has(\"ease\") ||\n        (keys.has(\"duration\") && !keys.has(\"dampingRatio\"))) {\n        return keyframes;\n    }\n    else if (keys.has(\"dampingRatio\") ||\n        keys.has(\"stiffness\") ||\n        keys.has(\"mass\") ||\n        keys.has(\"damping\") ||\n        keys.has(\"restSpeed\") ||\n        keys.has(\"restDelta\")) {\n        return spring;\n    }\n    return keyframes;\n}\n\nexport { detectAnimationFromOptions };\n","function decay(_a) {\n    var _b = _a.velocity, velocity = _b === void 0 ? 0 : _b, _c = _a.from, from = _c === void 0 ? 0 : _c, _d = _a.power, power = _d === void 0 ? 0.8 : _d, _e = _a.timeConstant, timeConstant = _e === void 0 ? 350 : _e, _f = _a.restDelta, restDelta = _f === void 0 ? 0.5 : _f, modifyTarget = _a.modifyTarget;\n    var state = { done: false, value: from };\n    var amplitude = power * velocity;\n    var ideal = from + amplitude;\n    var target = modifyTarget === undefined ? ideal : modifyTarget(ideal);\n    if (target !== ideal)\n        amplitude = target - from;\n    return {\n        next: function (t) {\n            var delta = -amplitude * Math.exp(-t / timeConstant);\n            state.done = !(delta > restDelta || delta < -restDelta);\n            state.value = state.done ? target : target + delta;\n            return state;\n        },\n        flipTarget: function () { },\n    };\n}\n\nexport { decay };\n","function loopElapsed(elapsed, duration, delay) {\n    if (delay === void 0) { delay = 0; }\n    return elapsed - duration - delay;\n}\nfunction reverseElapsed(elapsed, duration, delay, isForwardPlayback) {\n    if (delay === void 0) { delay = 0; }\n    if (isForwardPlayback === void 0) { isForwardPlayback = true; }\n    return isForwardPlayback\n        ? loopElapsed(duration + -elapsed, duration, delay)\n        : duration - (elapsed - duration) + delay;\n}\nfunction hasRepeatDelayElapsed(elapsed, duration, delay, isForwardPlayback) {\n    return isForwardPlayback ? elapsed >= duration + delay : elapsed <= -delay;\n}\n\nexport { hasRepeatDelayElapsed, loopElapsed, reverseElapsed };\n","import { __rest, __assign } from 'tslib';\nimport { detectAnimationFromOptions } from './utils/detect-animation-from-options.js';\nimport sync, { cancelSync } from 'framesync';\nimport { interpolate } from '../utils/interpolate.js';\nimport { hasRepeatDelayElapsed, reverseElapsed, loopElapsed } from './utils/elapsed.js';\n\nvar framesync = function (update) {\n    var passTimestamp = function (_a) {\n        var delta = _a.delta;\n        return update(delta);\n    };\n    return {\n        start: function () { return sync.update(passTimestamp, true); },\n        stop: function () { return cancelSync.update(passTimestamp); },\n    };\n};\nfunction animate(_a) {\n    var _b, _c;\n    var from = _a.from, _d = _a.autoplay, autoplay = _d === void 0 ? true : _d, _e = _a.driver, driver = _e === void 0 ? framesync : _e, _f = _a.elapsed, elapsed = _f === void 0 ? 0 : _f, _g = _a.repeat, repeatMax = _g === void 0 ? 0 : _g, _h = _a.repeatType, repeatType = _h === void 0 ? \"loop\" : _h, _j = _a.repeatDelay, repeatDelay = _j === void 0 ? 0 : _j, onPlay = _a.onPlay, onStop = _a.onStop, onComplete = _a.onComplete, onRepeat = _a.onRepeat, onUpdate = _a.onUpdate, options = __rest(_a, [\"from\", \"autoplay\", \"driver\", \"elapsed\", \"repeat\", \"repeatType\", \"repeatDelay\", \"onPlay\", \"onStop\", \"onComplete\", \"onRepeat\", \"onUpdate\"]);\n    var to = options.to;\n    var driverControls;\n    var repeatCount = 0;\n    var computedDuration = options.duration;\n    var latest;\n    var isComplete = false;\n    var isForwardPlayback = true;\n    var interpolateFromNumber;\n    var animator = detectAnimationFromOptions(options);\n    if ((_c = (_b = animator).needsInterpolation) === null || _c === void 0 ? void 0 : _c.call(_b, from, to)) {\n        interpolateFromNumber = interpolate([0, 100], [from, to], {\n            clamp: false,\n        });\n        from = 0;\n        to = 100;\n    }\n    var animation = animator(__assign(__assign({}, options), { from: from, to: to }));\n    function repeat() {\n        repeatCount++;\n        if (repeatType === \"reverse\") {\n            isForwardPlayback = repeatCount % 2 === 0;\n            elapsed = reverseElapsed(elapsed, computedDuration, repeatDelay, isForwardPlayback);\n        }\n        else {\n            elapsed = loopElapsed(elapsed, computedDuration, repeatDelay);\n            if (repeatType === \"mirror\")\n                animation.flipTarget();\n        }\n        isComplete = false;\n        onRepeat && onRepeat();\n    }\n    function complete() {\n        driverControls.stop();\n        onComplete && onComplete();\n    }\n    function update(delta) {\n        if (!isForwardPlayback)\n            delta = -delta;\n        elapsed += delta;\n        if (!isComplete) {\n            var state = animation.next(Math.max(0, elapsed));\n            latest = state.value;\n            if (interpolateFromNumber)\n                latest = interpolateFromNumber(latest);\n            isComplete = isForwardPlayback ? state.done : elapsed <= 0;\n        }\n        onUpdate === null || onUpdate === void 0 ? void 0 : onUpdate(latest);\n        if (isComplete) {\n            if (repeatCount === 0)\n                computedDuration !== null && computedDuration !== void 0 ? computedDuration : (computedDuration = elapsed);\n            if (repeatCount < repeatMax) {\n                hasRepeatDelayElapsed(elapsed, computedDuration, repeatDelay, isForwardPlayback) && repeat();\n            }\n            else {\n                complete();\n            }\n        }\n    }\n    function play() {\n        onPlay === null || onPlay === void 0 ? void 0 : onPlay();\n        driverControls = driver(update);\n        driverControls.start();\n    }\n    autoplay && play();\n    return {\n        stop: function () {\n            onStop === null || onStop === void 0 ? void 0 : onStop();\n            driverControls.stop();\n        },\n    };\n}\n\nexport { animate };\n","import { linear } from './index.js';\n\nvar a = function (a1, a2) { return 1.0 - 3.0 * a2 + 3.0 * a1; };\nvar b = function (a1, a2) { return 3.0 * a2 - 6.0 * a1; };\nvar c = function (a1) { return 3.0 * a1; };\nvar calcBezier = function (t, a1, a2) {\n    return ((a(a1, a2) * t + b(a1, a2)) * t + c(a1)) * t;\n};\nvar getSlope = function (t, a1, a2) {\n    return 3.0 * a(a1, a2) * t * t + 2.0 * b(a1, a2) * t + c(a1);\n};\nvar subdivisionPrecision = 0.0000001;\nvar subdivisionMaxIterations = 10;\nfunction binarySubdivide(aX, aA, aB, mX1, mX2) {\n    var currentX;\n    var currentT;\n    var i = 0;\n    do {\n        currentT = aA + (aB - aA) / 2.0;\n        currentX = calcBezier(currentT, mX1, mX2) - aX;\n        if (currentX > 0.0) {\n            aB = currentT;\n        }\n        else {\n            aA = currentT;\n        }\n    } while (Math.abs(currentX) > subdivisionPrecision &&\n        ++i < subdivisionMaxIterations);\n    return currentT;\n}\nvar newtonIterations = 8;\nvar newtonMinSlope = 0.001;\nfunction newtonRaphsonIterate(aX, aGuessT, mX1, mX2) {\n    for (var i = 0; i < newtonIterations; ++i) {\n        var currentSlope = getSlope(aGuessT, mX1, mX2);\n        if (currentSlope === 0.0) {\n            return aGuessT;\n        }\n        var currentX = calcBezier(aGuessT, mX1, mX2) - aX;\n        aGuessT -= currentX / currentSlope;\n    }\n    return aGuessT;\n}\nvar kSplineTableSize = 11;\nvar kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\nfunction cubicBezier(mX1, mY1, mX2, mY2) {\n    if (mX1 === mY1 && mX2 === mY2)\n        return linear;\n    var sampleValues = new Float32Array(kSplineTableSize);\n    for (var i = 0; i < kSplineTableSize; ++i) {\n        sampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\n    }\n    function getTForX(aX) {\n        var intervalStart = 0.0;\n        var currentSample = 1;\n        var lastSample = kSplineTableSize - 1;\n        for (; currentSample !== lastSample && sampleValues[currentSample] <= aX; ++currentSample) {\n            intervalStart += kSampleStepSize;\n        }\n        --currentSample;\n        var dist = (aX - sampleValues[currentSample]) /\n            (sampleValues[currentSample + 1] - sampleValues[currentSample]);\n        var guessForT = intervalStart + dist * kSampleStepSize;\n        var initialSlope = getSlope(guessForT, mX1, mX2);\n        if (initialSlope >= newtonMinSlope) {\n            return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\n        }\n        else if (initialSlope === 0.0) {\n            return guessForT;\n        }\n        else {\n            return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize, mX1, mX2);\n        }\n    }\n    return function (t) {\n        return t === 0 || t === 1 ? t : calcBezier(getTForX(t), mY1, mY2);\n    };\n}\n\nexport { cubicBezier };\n","import { __read } from 'tslib';\nimport { invariant } from 'hey-listen';\nimport { cubicBezier, linear, easeIn, easeInOut, easeOut, circIn, circInOut, circOut, backIn, backInOut, backOut, anticipate, bounceIn, bounceInOut, bounceOut } from 'popmotion';\n\nvar easingLookup = {\n    linear: linear,\n    easeIn: easeIn,\n    easeInOut: easeInOut,\n    easeOut: easeOut,\n    circIn: circIn,\n    circInOut: circInOut,\n    circOut: circOut,\n    backIn: backIn,\n    backInOut: backInOut,\n    backOut: backOut,\n    anticipate: anticipate,\n    bounceIn: bounceIn,\n    bounceInOut: bounceInOut,\n    bounceOut: bounceOut,\n};\nvar easingDefinitionToFunction = function (definition) {\n    if (Array.isArray(definition)) {\n        // If cubic bezier definition, create bezier curve\n        invariant(definition.length === 4, \"Cubic bezier arrays must contain four numerical values.\");\n        var _a = __read(definition, 4), x1 = _a[0], y1 = _a[1], x2 = _a[2], y2 = _a[3];\n        return cubicBezier(x1, y1, x2, y2);\n    }\n    else if (typeof definition === \"string\") {\n        // Else lookup from table\n        invariant(easingLookup[definition] !== undefined, \"Invalid easing type '\" + definition + \"'\");\n        return easingLookup[definition];\n    }\n    return definition;\n};\nvar isEasingArray = function (ease) {\n    return Array.isArray(ease) && typeof ease[0] !== \"number\";\n};\n\nexport { easingDefinitionToFunction, isEasingArray };\n","import { complex } from 'style-value-types';\n\n/**\n * Check if a value is animatable. Examples:\n *\n * : 100, \"100px\", \"#fff\"\n * : \"block\", \"url(2.jpg)\"\n * @param value\n *\n * @internal\n */\nvar isAnimatable = function (key, value) {\n    // If the list of keys tat might be non-animatable grows, replace with Set\n    if (key === \"zIndex\")\n        return false;\n    // If it's a number or a keyframes array, we can animate it. We might at some point\n    // need to do a deep isAnimatable check of keyframes, or let Popmotion handle this,\n    // but for now lets leave it like this for performance reasons\n    if (typeof value === \"number\" || Array.isArray(value))\n        return true;\n    if (typeof value === \"string\" && // It's animatable if we have a string\n        complex.test(value) && // And it contains numbers and/or colors\n        !value.startsWith(\"url(\") // Unless it starts with \"url(\"\n    ) {\n        return true;\n    }\n    return false;\n};\n\nexport { isAnimatable };\n","import { __assign } from 'tslib';\nimport { isKeyframesTarget } from './is-keyframes-target.js';\n\nvar underDampedSpring = function () { return ({\n    type: \"spring\",\n    stiffness: 500,\n    damping: 25,\n    restDelta: 0.5,\n    restSpeed: 10,\n}); };\nvar criticallyDampedSpring = function (to) { return ({\n    type: \"spring\",\n    stiffness: 550,\n    damping: to === 0 ? 2 * Math.sqrt(550) : 30,\n    restDelta: 0.01,\n    restSpeed: 10,\n}); };\nvar linearTween = function () { return ({\n    type: \"keyframes\",\n    ease: \"linear\",\n    duration: 0.3,\n}); };\nvar keyframes = function (values) { return ({\n    type: \"keyframes\",\n    duration: 0.8,\n    values: values,\n}); };\nvar defaultTransitions = {\n    x: underDampedSpring,\n    y: underDampedSpring,\n    z: underDampedSpring,\n    rotate: underDampedSpring,\n    rotateX: underDampedSpring,\n    rotateY: underDampedSpring,\n    rotateZ: underDampedSpring,\n    scaleX: criticallyDampedSpring,\n    scaleY: criticallyDampedSpring,\n    scale: criticallyDampedSpring,\n    opacity: linearTween,\n    backgroundColor: linearTween,\n    color: linearTween,\n    default: criticallyDampedSpring,\n};\nvar getDefaultTransition = function (valueKey, to) {\n    var transitionFactory;\n    if (isKeyframesTarget(to)) {\n        transitionFactory = keyframes;\n    }\n    else {\n        transitionFactory =\n            defaultTransitions[valueKey] || defaultTransitions.default;\n    }\n    return __assign({ to: to }, transitionFactory(to));\n};\n\nexport { criticallyDampedSpring, getDefaultTransition, linearTween, underDampedSpring };\n","import { __assign, __rest, __spreadArray, __read } from 'tslib';\nimport { inertia, animate } from 'popmotion';\nimport { secondsToMilliseconds } from '../../utils/time-conversion.js';\nimport { isEasingArray, easingDefinitionToFunction } from './easing.js';\nimport { isAnimatable } from './is-animatable.js';\nimport { getDefaultTransition } from './default-transitions.js';\nimport { warning } from 'hey-listen';\nimport { getAnimatableNone } from '../../render/dom/value-types/animatable-none.js';\n\n/**\n * Decide whether a transition is defined on a given Transition.\n * This filters out orchestration options and returns true\n * if any options are left.\n */\nfunction isTransitionDefined(_a) {\n    _a.when; _a.delay; _a.delayChildren; _a.staggerChildren; _a.staggerDirection; _a.repeat; _a.repeatType; _a.repeatDelay; _a.from; var transition = __rest(_a, [\"when\", \"delay\", \"delayChildren\", \"staggerChildren\", \"staggerDirection\", \"repeat\", \"repeatType\", \"repeatDelay\", \"from\"]);\n    return !!Object.keys(transition).length;\n}\nvar legacyRepeatWarning = false;\n/**\n * Convert Framer Motion's Transition type into Popmotion-compatible options.\n */\nfunction convertTransitionToAnimationOptions(_a) {\n    var ease = _a.ease, times = _a.times, yoyo = _a.yoyo, flip = _a.flip, loop = _a.loop, transition = __rest(_a, [\"ease\", \"times\", \"yoyo\", \"flip\", \"loop\"]);\n    var options = __assign({}, transition);\n    if (times)\n        options[\"offset\"] = times;\n    /**\n     * Convert any existing durations from seconds to milliseconds\n     */\n    if (transition.duration)\n        options[\"duration\"] = secondsToMilliseconds(transition.duration);\n    if (transition.repeatDelay)\n        options.repeatDelay = secondsToMilliseconds(transition.repeatDelay);\n    /**\n     * Map easing names to Popmotion's easing functions\n     */\n    if (ease) {\n        options[\"ease\"] = isEasingArray(ease)\n            ? ease.map(easingDefinitionToFunction)\n            : easingDefinitionToFunction(ease);\n    }\n    /**\n     * Support legacy transition API\n     */\n    if (transition.type === \"tween\")\n        options.type = \"keyframes\";\n    /**\n     * TODO: These options are officially removed from the API.\n     */\n    if (yoyo || loop || flip) {\n        warning(!legacyRepeatWarning, \"yoyo, loop and flip have been removed from the API. Replace with repeat and repeatType options.\");\n        legacyRepeatWarning = true;\n        if (yoyo) {\n            options.repeatType = \"reverse\";\n        }\n        else if (loop) {\n            options.repeatType = \"loop\";\n        }\n        else if (flip) {\n            options.repeatType = \"mirror\";\n        }\n        options.repeat = loop || yoyo || flip || transition.repeat;\n    }\n    /**\n     * TODO: Popmotion 9 has the ability to automatically detect whether to use\n     * a keyframes or spring animation, but does so by detecting velocity and other spring options.\n     * It'd be good to introduce a similar thing here.\n     */\n    if (transition.type !== \"spring\")\n        options.type = \"keyframes\";\n    return options;\n}\n/**\n * Get the delay for a value by checking Transition with decreasing specificity.\n */\nfunction getDelayFromTransition(transition, key) {\n    var _a;\n    var valueTransition = getValueTransition(transition, key) || {};\n    return (_a = valueTransition.delay) !== null && _a !== void 0 ? _a : 0;\n}\nfunction hydrateKeyframes(options) {\n    if (Array.isArray(options.to) && options.to[0] === null) {\n        options.to = __spreadArray([], __read(options.to));\n        options.to[0] = options.from;\n    }\n    return options;\n}\nfunction getPopmotionAnimationOptions(transition, options, key) {\n    var _a;\n    if (Array.isArray(options.to)) {\n        (_a = transition.duration) !== null && _a !== void 0 ? _a : (transition.duration = 0.8);\n    }\n    hydrateKeyframes(options);\n    /**\n     * Get a default transition if none is determined to be defined.\n     */\n    if (!isTransitionDefined(transition)) {\n        transition = __assign(__assign({}, transition), getDefaultTransition(key, options.to));\n    }\n    return __assign(__assign({}, options), convertTransitionToAnimationOptions(transition));\n}\n/**\n *\n */\nfunction getAnimation(key, value, target, transition, onComplete) {\n    var _a;\n    var valueTransition = getValueTransition(transition, key);\n    var origin = (_a = valueTransition.from) !== null && _a !== void 0 ? _a : value.get();\n    var isTargetAnimatable = isAnimatable(key, target);\n    if (origin === \"none\" && isTargetAnimatable && typeof target === \"string\") {\n        /**\n         * If we're trying to animate from \"none\", try and get an animatable version\n         * of the target. This could be improved to work both ways.\n         */\n        origin = getAnimatableNone(key, target);\n    }\n    else if (isZero(origin) && typeof target === \"string\") {\n        origin = getZeroUnit(target);\n    }\n    else if (!Array.isArray(target) &&\n        isZero(target) &&\n        typeof origin === \"string\") {\n        target = getZeroUnit(origin);\n    }\n    var isOriginAnimatable = isAnimatable(key, origin);\n    warning(isOriginAnimatable === isTargetAnimatable, \"You are trying to animate \" + key + \" from \\\"\" + origin + \"\\\" to \\\"\" + target + \"\\\". \" + origin + \" is not an animatable value - to enable this animation set \" + origin + \" to a value animatable to \" + target + \" via the `style` property.\");\n    function start() {\n        var options = {\n            from: origin,\n            to: target,\n            velocity: value.getVelocity(),\n            onComplete: onComplete,\n            onUpdate: function (v) { return value.set(v); },\n        };\n        return valueTransition.type === \"inertia\" ||\n            valueTransition.type === \"decay\"\n            ? inertia(__assign(__assign({}, options), valueTransition))\n            : animate(__assign(__assign({}, getPopmotionAnimationOptions(valueTransition, options, key)), { onUpdate: function (v) {\n                    var _a;\n                    options.onUpdate(v);\n                    (_a = valueTransition.onUpdate) === null || _a === void 0 ? void 0 : _a.call(valueTransition, v);\n                }, onComplete: function () {\n                    var _a;\n                    options.onComplete();\n                    (_a = valueTransition.onComplete) === null || _a === void 0 ? void 0 : _a.call(valueTransition);\n                } }));\n    }\n    function set() {\n        var _a;\n        value.set(target);\n        onComplete();\n        (_a = valueTransition === null || valueTransition === void 0 ? void 0 : valueTransition.onComplete) === null || _a === void 0 ? void 0 : _a.call(valueTransition);\n        return { stop: function () { } };\n    }\n    return !isOriginAnimatable ||\n        !isTargetAnimatable ||\n        valueTransition.type === false\n        ? set\n        : start;\n}\nfunction isZero(value) {\n    return (value === 0 ||\n        (typeof value === \"string\" &&\n            parseFloat(value) === 0 &&\n            value.indexOf(\" \") === -1));\n}\nfunction getZeroUnit(potentialUnitType) {\n    return typeof potentialUnitType === \"number\"\n        ? 0\n        : getAnimatableNone(\"\", potentialUnitType);\n}\nfunction getValueTransition(transition, key) {\n    return transition[key] || transition[\"default\"] || transition;\n}\n/**\n * Start animation on a MotionValue. This function is an interface between\n * Framer Motion and Popmotion\n *\n * @internal\n */\nfunction startAnimation(key, value, target, transition) {\n    if (transition === void 0) { transition = {}; }\n    return value.start(function (onComplete) {\n        var delayTimer;\n        var controls;\n        var animation = getAnimation(key, value, target, transition, onComplete);\n        var delay = getDelayFromTransition(transition, key);\n        var start = function () { return (controls = animation()); };\n        if (delay) {\n            delayTimer = setTimeout(start, secondsToMilliseconds(delay));\n        }\n        else {\n            start();\n        }\n        return function () {\n            clearTimeout(delayTimer);\n            controls === null || controls === void 0 ? void 0 : controls.stop();\n        };\n    });\n}\n\nexport { convertTransitionToAnimationOptions, getDelayFromTransition, getPopmotionAnimationOptions, getValueTransition, getZeroUnit, hydrateKeyframes, isTransitionDefined, isZero, startAnimation };\n","import { __assign } from 'tslib';\nimport { animate } from './index.js';\nimport { velocityPerSecond } from '../utils/velocity-per-second.js';\nimport { getFrameData } from 'framesync';\n\nfunction inertia(_a) {\n    var _b = _a.from, from = _b === void 0 ? 0 : _b, _c = _a.velocity, velocity = _c === void 0 ? 0 : _c, min = _a.min, max = _a.max, _d = _a.power, power = _d === void 0 ? 0.8 : _d, _e = _a.timeConstant, timeConstant = _e === void 0 ? 750 : _e, _f = _a.bounceStiffness, bounceStiffness = _f === void 0 ? 500 : _f, _g = _a.bounceDamping, bounceDamping = _g === void 0 ? 10 : _g, _h = _a.restDelta, restDelta = _h === void 0 ? 1 : _h, modifyTarget = _a.modifyTarget, driver = _a.driver, onUpdate = _a.onUpdate, onComplete = _a.onComplete;\n    var currentAnimation;\n    function isOutOfBounds(v) {\n        return (min !== undefined && v < min) || (max !== undefined && v > max);\n    }\n    function boundaryNearest(v) {\n        if (min === undefined)\n            return max;\n        if (max === undefined)\n            return min;\n        return Math.abs(min - v) < Math.abs(max - v) ? min : max;\n    }\n    function startAnimation(options) {\n        currentAnimation === null || currentAnimation === void 0 ? void 0 : currentAnimation.stop();\n        currentAnimation = animate(__assign(__assign({}, options), { driver: driver, onUpdate: function (v) {\n                var _a;\n                onUpdate === null || onUpdate === void 0 ? void 0 : onUpdate(v);\n                (_a = options.onUpdate) === null || _a === void 0 ? void 0 : _a.call(options, v);\n            }, onComplete: onComplete }));\n    }\n    function startSpring(options) {\n        startAnimation(__assign({ type: \"spring\", stiffness: bounceStiffness, damping: bounceDamping, restDelta: restDelta }, options));\n    }\n    if (isOutOfBounds(from)) {\n        startSpring({ from: from, velocity: velocity, to: boundaryNearest(from) });\n    }\n    else {\n        var target = power * velocity + from;\n        if (typeof modifyTarget !== \"undefined\")\n            target = modifyTarget(target);\n        var boundary_1 = boundaryNearest(target);\n        var heading_1 = boundary_1 === min ? -1 : 1;\n        var prev_1;\n        var current_1;\n        var checkBoundary = function (v) {\n            prev_1 = current_1;\n            current_1 = v;\n            velocity = velocityPerSecond(v - prev_1, getFrameData().delta);\n            if ((heading_1 === 1 && v > boundary_1) ||\n                (heading_1 === -1 && v < boundary_1)) {\n                startSpring({ from: v, to: boundary_1, velocity: velocity });\n            }\n        };\n        startAnimation({\n            type: \"decay\",\n            from: from,\n            velocity: velocity,\n            timeConstant: timeConstant,\n            power: power,\n            restDelta: restDelta,\n            modifyTarget: modifyTarget,\n            onUpdate: isOutOfBounds(target) ? checkBoundary : undefined,\n        });\n    }\n    return {\n        stop: function () { return currentAnimation === null || currentAnimation === void 0 ? void 0 : currentAnimation.stop(); },\n    };\n}\n\nexport { inertia };\n","import { isForcedMotionValue } from '../../../motion/utils/is-forced-motion-value.js';\nimport { isMotionValue } from '../../../value/utils/is-motion-value.js';\n\nfunction scrapeMotionValuesFromProps(props) {\n    var style = props.style;\n    var newValues = {};\n    for (var key in style) {\n        if (isMotionValue(style[key]) || isForcedMotionValue(key, props)) {\n            newValues[key] = style[key];\n        }\n    }\n    return newValues;\n}\n\nexport { scrapeMotionValuesFromProps };\n","function createLock(name) {\n    var lock = null;\n    return function () {\n        var openLock = function () {\n            lock = null;\n        };\n        if (lock === null) {\n            lock = name;\n            return openLock;\n        }\n        return false;\n    };\n}\nvar globalHorizontalLock = createLock(\"dragHorizontal\");\nvar globalVerticalLock = createLock(\"dragVertical\");\nfunction getGlobalLock(drag) {\n    var lock = false;\n    if (drag === \"y\") {\n        lock = globalVerticalLock();\n    }\n    else if (drag === \"x\") {\n        lock = globalHorizontalLock();\n    }\n    else {\n        var openHorizontal_1 = globalHorizontalLock();\n        var openVertical_1 = globalVerticalLock();\n        if (openHorizontal_1 && openVertical_1) {\n            lock = function () {\n                openHorizontal_1();\n                openVertical_1();\n            };\n        }\n        else {\n            // Release the locks because we don't use them\n            if (openHorizontal_1)\n                openHorizontal_1();\n            if (openVertical_1)\n                openVertical_1();\n        }\n    }\n    return lock;\n}\nfunction isDragActive() {\n    // Check the gesture lock - if we get it, it means no drag gesture is active\n    // and we can safely fire the tap gesture.\n    var openGestureLock = getGlobalLock(true);\n    if (!openGestureLock)\n        return true;\n    openGestureLock();\n    return false;\n}\n\nexport { createLock, getGlobalLock, isDragActive };\n","import { __read } from 'tslib';\nimport { mix } from 'popmotion';\nimport { isDraggable } from '../../render/utils/is-draggable.js';\n\n/**\n * Reset an axis to the provided origin box.\n *\n * This is a mutative operation.\n */\nfunction resetAxis(axis, originAxis) {\n    axis.min = originAxis.min;\n    axis.max = originAxis.max;\n}\n/**\n * Reset a box to the provided origin box.\n *\n * This is a mutative operation.\n */\nfunction resetBox(box, originBox) {\n    resetAxis(box.x, originBox.x);\n    resetAxis(box.y, originBox.y);\n}\n/**\n * Scales a point based on a factor and an originPoint\n */\nfunction scalePoint(point, scale, originPoint) {\n    var distanceFromOrigin = point - originPoint;\n    var scaled = scale * distanceFromOrigin;\n    return originPoint + scaled;\n}\n/**\n * Applies a translate/scale delta to a point\n */\nfunction applyPointDelta(point, translate, scale, originPoint, boxScale) {\n    if (boxScale !== undefined) {\n        point = scalePoint(point, boxScale, originPoint);\n    }\n    return scalePoint(point, scale, originPoint) + translate;\n}\n/**\n * Applies a translate/scale delta to an axis\n */\nfunction applyAxisDelta(axis, translate, scale, originPoint, boxScale) {\n    if (translate === void 0) { translate = 0; }\n    if (scale === void 0) { scale = 1; }\n    axis.min = applyPointDelta(axis.min, translate, scale, originPoint, boxScale);\n    axis.max = applyPointDelta(axis.max, translate, scale, originPoint, boxScale);\n}\n/**\n * Applies a translate/scale delta to a box\n */\nfunction applyBoxDelta(box, _a) {\n    var x = _a.x, y = _a.y;\n    applyAxisDelta(box.x, x.translate, x.scale, x.originPoint);\n    applyAxisDelta(box.y, y.translate, y.scale, y.originPoint);\n}\n/**\n * Apply a transform to an axis from the latest resolved motion values.\n * This function basically acts as a bridge between a flat motion value map\n * and applyAxisDelta\n */\nfunction applyAxisTransforms(final, axis, transforms, _a) {\n    var _b = __read(_a, 3), key = _b[0], scaleKey = _b[1], originKey = _b[2];\n    // Copy the current axis to the final axis before mutation\n    final.min = axis.min;\n    final.max = axis.max;\n    var axisOrigin = transforms[originKey] !== undefined ? transforms[originKey] : 0.5;\n    var originPoint = mix(axis.min, axis.max, axisOrigin);\n    // Apply the axis delta to the final axis\n    applyAxisDelta(final, transforms[key], transforms[scaleKey], originPoint, transforms.scale);\n}\n/**\n * The names of the motion values we want to apply as translation, scale and origin.\n */\nvar xKeys = [\"x\", \"scaleX\", \"originX\"];\nvar yKeys = [\"y\", \"scaleY\", \"originY\"];\n/**\n * Apply a transform to a box from the latest resolved motion values.\n */\nfunction applyBoxTransforms(finalBox, box, transforms) {\n    applyAxisTransforms(finalBox.x, box.x, transforms, xKeys);\n    applyAxisTransforms(finalBox.y, box.y, transforms, yKeys);\n}\n/**\n * Remove a delta from a point. This is essentially the steps of applyPointDelta in reverse\n */\nfunction removePointDelta(point, translate, scale, originPoint, boxScale) {\n    point -= translate;\n    point = scalePoint(point, 1 / scale, originPoint);\n    if (boxScale !== undefined) {\n        point = scalePoint(point, 1 / boxScale, originPoint);\n    }\n    return point;\n}\n/**\n * Remove a delta from an axis. This is essentially the steps of applyAxisDelta in reverse\n */\nfunction removeAxisDelta(axis, translate, scale, origin, boxScale) {\n    if (translate === void 0) { translate = 0; }\n    if (scale === void 0) { scale = 1; }\n    if (origin === void 0) { origin = 0.5; }\n    var originPoint = mix(axis.min, axis.max, origin) - translate;\n    axis.min = removePointDelta(axis.min, translate, scale, originPoint, boxScale);\n    axis.max = removePointDelta(axis.max, translate, scale, originPoint, boxScale);\n}\n/**\n * Remove a transforms from an axis. This is essentially the steps of applyAxisTransforms in reverse\n * and acts as a bridge between motion values and removeAxisDelta\n */\nfunction removeAxisTransforms(axis, transforms, _a) {\n    var _b = __read(_a, 3), key = _b[0], scaleKey = _b[1], originKey = _b[2];\n    removeAxisDelta(axis, transforms[key], transforms[scaleKey], transforms[originKey], transforms.scale);\n}\n/**\n * Remove a transforms from an box. This is essentially the steps of applyAxisBox in reverse\n * and acts as a bridge between motion values and removeAxisDelta\n */\nfunction removeBoxTransforms(box, transforms) {\n    removeAxisTransforms(box.x, transforms, xKeys);\n    removeAxisTransforms(box.y, transforms, yKeys);\n}\n/**\n * Apply a tree of deltas to a box. We do this to calculate the effect of all the transforms\n * in a tree upon our box before then calculating how to project it into our desired viewport-relative box\n *\n * This is the final nested loop within updateLayoutDelta for future refactoring\n */\nfunction applyTreeDeltas(box, treeScale, treePath) {\n    var treeLength = treePath.length;\n    if (!treeLength)\n        return;\n    // Reset the treeScale\n    treeScale.x = treeScale.y = 1;\n    var node;\n    var delta;\n    for (var i = 0; i < treeLength; i++) {\n        node = treePath[i];\n        delta = node.getLayoutState().delta;\n        // Incoporate each ancestor's scale into a culmulative treeScale for this component\n        treeScale.x *= delta.x.scale;\n        treeScale.y *= delta.y.scale;\n        // Apply each ancestor's calculated delta into this component's recorded layout box\n        applyBoxDelta(box, delta);\n        // If this is a draggable ancestor, also incorporate the node's transform to the layout box\n        if (isDraggable(node)) {\n            applyBoxTransforms(box, box, node.getLatestValues());\n        }\n    }\n}\n\nexport { applyAxisDelta, applyAxisTransforms, applyBoxDelta, applyBoxTransforms, applyPointDelta, applyTreeDeltas, removeAxisDelta, removeAxisTransforms, removeBoxTransforms, removePointDelta, resetAxis, resetBox, scalePoint };\n","import { __assign } from 'tslib';\nimport { clamp } from '../utils.js';\n\nvar number = {\n    test: function (v) { return typeof v === 'number'; },\n    parse: parseFloat,\n    transform: function (v) { return v; },\n};\nvar alpha = __assign(__assign({}, number), { transform: clamp(0, 1) });\nvar scale = __assign(__assign({}, number), { default: 1 });\n\nexport { alpha, number, scale };\n","var isBrowser = typeof window !== \"undefined\";\n\nexport { isBrowser };\n","import { __assign } from 'tslib';\nimport { mix } from './mix.js';\nimport { hex, rgba, hsla } from 'style-value-types';\nimport { invariant } from 'hey-listen';\n\nvar mixLinearColor = function (from, to, v) {\n    var fromExpo = from * from;\n    var toExpo = to * to;\n    return Math.sqrt(Math.max(0, v * (toExpo - fromExpo) + fromExpo));\n};\nvar colorTypes = [hex, rgba, hsla];\nvar getColorType = function (v) {\n    return colorTypes.find(function (type) { return type.test(v); });\n};\nvar notAnimatable = function (color) {\n    return \"'\" + color + \"' is not an animatable color. Use the equivalent color code instead.\";\n};\nvar mixColor = function (from, to) {\n    var fromColorType = getColorType(from);\n    var toColorType = getColorType(to);\n    invariant(!!fromColorType, notAnimatable(from));\n    invariant(!!toColorType, notAnimatable(to));\n    invariant(fromColorType.transform === toColorType.transform, \"Both colors must be hex/RGBA, OR both must be HSLA.\");\n    var fromColor = fromColorType.parse(from);\n    var toColor = toColorType.parse(to);\n    var blended = __assign({}, fromColor);\n    var mixFunc = fromColorType === hsla ? mix : mixLinearColor;\n    return function (v) {\n        for (var key in blended) {\n            if (key !== \"alpha\") {\n                blended[key] = mixFunc(fromColor[key], toColor[key], v);\n            }\n        }\n        blended.alpha = mix(fromColor.alpha, toColor.alpha, v);\n        return fromColorType.transform(blended);\n    };\n};\n\nexport { mixColor, mixLinearColor };\n","import { color } from '../color/index.js';\nimport { number } from '../numbers/index.js';\nimport { isString, floatRegex, colorRegex, sanitize } from '../utils.js';\n\nvar colorToken = '${c}';\nvar numberToken = '${n}';\nfunction test(v) {\n    var _a, _b, _c, _d;\n    return (isNaN(v) &&\n        isString(v) &&\n        ((_b = (_a = v.match(floatRegex)) === null || _a === void 0 ? void 0 : _a.length) !== null && _b !== void 0 ? _b : 0) + ((_d = (_c = v.match(colorRegex)) === null || _c === void 0 ? void 0 : _c.length) !== null && _d !== void 0 ? _d : 0) > 0);\n}\nfunction analyse(v) {\n    var values = [];\n    var numColors = 0;\n    var colors = v.match(colorRegex);\n    if (colors) {\n        numColors = colors.length;\n        v = v.replace(colorRegex, colorToken);\n        values.push.apply(values, colors.map(color.parse));\n    }\n    var numbers = v.match(floatRegex);\n    if (numbers) {\n        v = v.replace(floatRegex, numberToken);\n        values.push.apply(values, numbers.map(number.parse));\n    }\n    return { values: values, numColors: numColors, tokenised: v };\n}\nfunction parse(v) {\n    return analyse(v).values;\n}\nfunction createTransformer(v) {\n    var _a = analyse(v), values = _a.values, numColors = _a.numColors, tokenised = _a.tokenised;\n    var numValues = values.length;\n    return function (v) {\n        var output = tokenised;\n        for (var i = 0; i < numValues; i++) {\n            output = output.replace(i < numColors ? colorToken : numberToken, i < numColors ? color.transform(v[i]) : sanitize(v[i]));\n        }\n        return output;\n    };\n}\nvar convertNumbersToZero = function (v) {\n    return typeof v === 'number' ? 0 : v;\n};\nfunction getAnimatableNone(v) {\n    var parsed = parse(v);\n    var transformer = createTransformer(v);\n    return transformer(parsed.map(convertNumbersToZero));\n}\nvar complex = { test: test, parse: parse, createTransformer: createTransformer, getAnimatableNone: getAnimatableNone };\n\nexport { complex };\n","import { camelToDash } from '../../dom/utils/camel-to-dash.js';\nimport { renderHTML } from '../../html/utils/render.js';\nimport { camelCaseAttributes } from './camel-case-attrs.js';\n\nfunction renderSVG(element, renderState) {\n    renderHTML(element, renderState);\n    for (var key in renderState.attrs) {\n        element.setAttribute(!camelCaseAttributes.has(key) ? camelToDash(key) : key, renderState.attrs[key]);\n    }\n}\n\nexport { renderSVG };\n","/**\n * Returns true if the provided key is a CSS variable\n */\nfunction isCSSVariable(key) {\n    return key.startsWith(\"--\");\n}\n\nexport { isCSSVariable };\n","var isKeyframesTarget = function (v) {\n    return Array.isArray(v);\n};\n\nexport { isKeyframesTarget };\n","import { rgba } from './rgba.js';\nimport { isColorString } from './utils.js';\n\nfunction parseHex(v) {\n    var r = '';\n    var g = '';\n    var b = '';\n    var a = '';\n    if (v.length > 5) {\n        r = v.substr(1, 2);\n        g = v.substr(3, 2);\n        b = v.substr(5, 2);\n        a = v.substr(7, 2);\n    }\n    else {\n        r = v.substr(1, 1);\n        g = v.substr(2, 1);\n        b = v.substr(3, 1);\n        a = v.substr(4, 1);\n        r += r;\n        g += g;\n        b += b;\n        a += a;\n    }\n    return {\n        red: parseInt(r, 16),\n        green: parseInt(g, 16),\n        blue: parseInt(b, 16),\n        alpha: a ? parseInt(a, 16) / 255 : 1,\n    };\n}\nvar hex = {\n    test: isColorString('#'),\n    parse: parseHex,\n    transform: rgba.transform,\n};\n\nexport { hex };\n","import sync, { getFrameData } from 'framesync';\nimport { velocityPerSecond } from 'popmotion';\nimport { SubscriptionManager } from '../utils/subscription-manager.js';\n\nvar isFloat = function (value) {\n    return !isNaN(parseFloat(value));\n};\n/**\n * `MotionValue` is used to track the state and velocity of motion values.\n *\n * @public\n */\nvar MotionValue = /** @class */ (function () {\n    /**\n     * @param init - The initiating value\n     * @param config - Optional configuration options\n     *\n     * -  `transformer`: A function to transform incoming values with.\n     *\n     * @internal\n     */\n    function MotionValue(init) {\n        var _this = this;\n        /**\n         * Duration, in milliseconds, since last updating frame.\n         *\n         * @internal\n         */\n        this.timeDelta = 0;\n        /**\n         * Timestamp of the last time this `MotionValue` was updated.\n         *\n         * @internal\n         */\n        this.lastUpdated = 0;\n        /**\n         * Functions to notify when the `MotionValue` updates.\n         *\n         * @internal\n         */\n        this.updateSubscribers = new SubscriptionManager();\n        /**\n         * Functions to notify when the velocity updates.\n         *\n         * @internal\n         */\n        this.velocityUpdateSubscribers = new SubscriptionManager();\n        /**\n         * Functions to notify when the `MotionValue` updates and `render` is set to `true`.\n         *\n         * @internal\n         */\n        this.renderSubscribers = new SubscriptionManager();\n        /**\n         * Tracks whether this value can output a velocity. Currently this is only true\n         * if the value is numerical, but we might be able to widen the scope here and support\n         * other value types.\n         *\n         * @internal\n         */\n        this.canTrackVelocity = false;\n        this.updateAndNotify = function (v, render) {\n            if (render === void 0) { render = true; }\n            _this.prev = _this.current;\n            _this.current = v;\n            // Update timestamp\n            var _a = getFrameData(), delta = _a.delta, timestamp = _a.timestamp;\n            if (_this.lastUpdated !== timestamp) {\n                _this.timeDelta = delta;\n                _this.lastUpdated = timestamp;\n                sync.postRender(_this.scheduleVelocityCheck);\n            }\n            // Update update subscribers\n            if (_this.prev !== _this.current) {\n                _this.updateSubscribers.notify(_this.current);\n            }\n            // Update velocity subscribers\n            if (_this.velocityUpdateSubscribers.getSize()) {\n                _this.velocityUpdateSubscribers.notify(_this.getVelocity());\n            }\n            // Update render subscribers\n            if (render) {\n                _this.renderSubscribers.notify(_this.current);\n            }\n        };\n        /**\n         * Schedule a velocity check for the next frame.\n         *\n         * This is an instanced and bound function to prevent generating a new\n         * function once per frame.\n         *\n         * @internal\n         */\n        this.scheduleVelocityCheck = function () { return sync.postRender(_this.velocityCheck); };\n        /**\n         * Updates `prev` with `current` if the value hasn't been updated this frame.\n         * This ensures velocity calculations return `0`.\n         *\n         * This is an instanced and bound function to prevent generating a new\n         * function once per frame.\n         *\n         * @internal\n         */\n        this.velocityCheck = function (_a) {\n            var timestamp = _a.timestamp;\n            if (timestamp !== _this.lastUpdated) {\n                _this.prev = _this.current;\n                _this.velocityUpdateSubscribers.notify(_this.getVelocity());\n            }\n        };\n        this.hasAnimated = false;\n        this.prev = this.current = init;\n        this.canTrackVelocity = isFloat(this.current);\n    }\n    /**\n     * Adds a function that will be notified when the `MotionValue` is updated.\n     *\n     * It returns a function that, when called, will cancel the subscription.\n     *\n     * When calling `onChange` inside a React component, it should be wrapped with the\n     * `useEffect` hook. As it returns an unsubscribe function, this should be returned\n     * from the `useEffect` function to ensure you don't add duplicate subscribers..\n     *\n     * @library\n     *\n     * ```jsx\n     * function MyComponent() {\n     *   const x = useMotionValue(0)\n     *   const y = useMotionValue(0)\n     *   const opacity = useMotionValue(1)\n     *\n     *   useEffect(() => {\n     *     function updateOpacity() {\n     *       const maxXY = Math.max(x.get(), y.get())\n     *       const newOpacity = transform(maxXY, [0, 100], [1, 0])\n     *       opacity.set(newOpacity)\n     *     }\n     *\n     *     const unsubscribeX = x.onChange(updateOpacity)\n     *     const unsubscribeY = y.onChange(updateOpacity)\n     *\n     *     return () => {\n     *       unsubscribeX()\n     *       unsubscribeY()\n     *     }\n     *   }, [])\n     *\n     *   return <Frame x={x} />\n     * }\n     * ```\n     *\n     * @motion\n     *\n     * ```jsx\n     * export const MyComponent = () => {\n     *   const x = useMotionValue(0)\n     *   const y = useMotionValue(0)\n     *   const opacity = useMotionValue(1)\n     *\n     *   useEffect(() => {\n     *     function updateOpacity() {\n     *       const maxXY = Math.max(x.get(), y.get())\n     *       const newOpacity = transform(maxXY, [0, 100], [1, 0])\n     *       opacity.set(newOpacity)\n     *     }\n     *\n     *     const unsubscribeX = x.onChange(updateOpacity)\n     *     const unsubscribeY = y.onChange(updateOpacity)\n     *\n     *     return () => {\n     *       unsubscribeX()\n     *       unsubscribeY()\n     *     }\n     *   }, [])\n     *\n     *   return <motion.div style={{ x }} />\n     * }\n     * ```\n     *\n     * @internalremarks\n     *\n     * We could look into a `useOnChange` hook if the above lifecycle management proves confusing.\n     *\n     * ```jsx\n     * useOnChange(x, () => {})\n     * ```\n     *\n     * @param subscriber - A function that receives the latest value.\n     * @returns A function that, when called, will cancel this subscription.\n     *\n     * @public\n     */\n    MotionValue.prototype.onChange = function (subscription) {\n        return this.updateSubscribers.add(subscription);\n    };\n    MotionValue.prototype.clearListeners = function () {\n        this.updateSubscribers.clear();\n    };\n    /**\n     * Adds a function that will be notified when the `MotionValue` requests a render.\n     *\n     * @param subscriber - A function that's provided the latest value.\n     * @returns A function that, when called, will cancel this subscription.\n     *\n     * @internal\n     */\n    MotionValue.prototype.onRenderRequest = function (subscription) {\n        // Render immediately\n        subscription(this.get());\n        return this.renderSubscribers.add(subscription);\n    };\n    /**\n     * Attaches a passive effect to the `MotionValue`.\n     *\n     * @internal\n     */\n    MotionValue.prototype.attach = function (passiveEffect) {\n        this.passiveEffect = passiveEffect;\n    };\n    /**\n     * Sets the state of the `MotionValue`.\n     *\n     * @remarks\n     *\n     * ```jsx\n     * const x = useMotionValue(0)\n     * x.set(10)\n     * ```\n     *\n     * @param latest - Latest value to set.\n     * @param render - Whether to notify render subscribers. Defaults to `true`\n     *\n     * @public\n     */\n    MotionValue.prototype.set = function (v, render) {\n        if (render === void 0) { render = true; }\n        if (!render || !this.passiveEffect) {\n            this.updateAndNotify(v, render);\n        }\n        else {\n            this.passiveEffect(v, this.updateAndNotify);\n        }\n    };\n    /**\n     * Returns the latest state of `MotionValue`\n     *\n     * @returns - The latest state of `MotionValue`\n     *\n     * @public\n     */\n    MotionValue.prototype.get = function () {\n        return this.current;\n    };\n    /**\n     * @public\n     */\n    MotionValue.prototype.getPrevious = function () {\n        return this.prev;\n    };\n    /**\n     * Returns the latest velocity of `MotionValue`\n     *\n     * @returns - The latest velocity of `MotionValue`. Returns `0` if the state is non-numerical.\n     *\n     * @public\n     */\n    MotionValue.prototype.getVelocity = function () {\n        // This could be isFloat(this.prev) && isFloat(this.current), but that would be wasteful\n        return this.canTrackVelocity\n            ? // These casts could be avoided if parseFloat would be typed better\n                velocityPerSecond(parseFloat(this.current) -\n                    parseFloat(this.prev), this.timeDelta)\n            : 0;\n    };\n    /**\n     * Registers a new animation to control this `MotionValue`. Only one\n     * animation can drive a `MotionValue` at one time.\n     *\n     * ```jsx\n     * value.start()\n     * ```\n     *\n     * @param animation - A function that starts the provided animation\n     *\n     * @internal\n     */\n    MotionValue.prototype.start = function (animation) {\n        var _this = this;\n        this.stop();\n        return new Promise(function (resolve) {\n            _this.hasAnimated = true;\n            _this.stopAnimation = animation(resolve);\n        }).then(function () { return _this.clearAnimation(); });\n    };\n    /**\n     * Stop the currently active animation.\n     *\n     * @public\n     */\n    MotionValue.prototype.stop = function () {\n        if (this.stopAnimation)\n            this.stopAnimation();\n        this.clearAnimation();\n    };\n    /**\n     * Returns `true` if this value is currently animating.\n     *\n     * @public\n     */\n    MotionValue.prototype.isAnimating = function () {\n        return !!this.stopAnimation;\n    };\n    MotionValue.prototype.clearAnimation = function () {\n        this.stopAnimation = null;\n    };\n    /**\n     * Destroy and clean up subscribers to this `MotionValue`.\n     *\n     * The `MotionValue` hooks like `useMotionValue` and `useTransform` automatically\n     * handle the lifecycle of the returned `MotionValue`, so this method is only necessary if you've manually\n     * created a `MotionValue` via the `motionValue` function.\n     *\n     * @public\n     */\n    MotionValue.prototype.destroy = function () {\n        this.updateSubscribers.clear();\n        this.renderSubscribers.clear();\n        this.stop();\n    };\n    return MotionValue;\n}());\n/**\n * @internal\n */\nfunction motionValue(init) {\n    return new MotionValue(init);\n}\n\nexport { MotionValue, motionValue };\n","var isPoint = function (point) {\n    return point.hasOwnProperty('x') && point.hasOwnProperty('y');\n};\n\nexport { isPoint };\n","import { isPoint } from './is-point.js';\n\nvar isPoint3D = function (point) {\n    return isPoint(point) && point.hasOwnProperty('z');\n};\n\nexport { isPoint3D };\n","import { isPoint } from './is-point.js';\nimport { isPoint3D } from './is-point-3d.js';\nimport { isNum } from './inc.js';\n\nvar distance1D = function (a, b) { return Math.abs(a - b); };\nfunction distance(a, b) {\n    if (isNum(a) && isNum(b)) {\n        return distance1D(a, b);\n    }\n    else if (isPoint(a) && isPoint(b)) {\n        var xDelta = distance1D(a.x, b.x);\n        var yDelta = distance1D(a.y, b.y);\n        var zDelta = isPoint3D(a) && isPoint3D(b) ? distance1D(a.z, b.z) : 0;\n        return Math.sqrt(Math.pow(xDelta, 2) + Math.pow(yDelta, 2) + Math.pow(zDelta, 2));\n    }\n}\n\nexport { distance };\n","import { useRef } from 'react';\n\n/**\n * Creates a constant value over the lifecycle of a component.\n *\n * Even if `useMemo` is provided an empty array as its final argument, it doesn't offer\n * a guarantee that it won't re-run for performance reasons later on. By using `useConstant`\n * you can ensure that initialisers don't execute twice or more.\n */\nfunction useConstant(init) {\n    var ref = useRef(null);\n    if (ref.current === null) {\n        ref.current = init();\n    }\n    return ref.current;\n}\n\nexport { useConstant };\n","var mix = function (from, to, progress) {\n    return -progress * from + progress * to + from;\n};\n\nexport { mix };\n","var unresolvedJobs = new Set();\nfunction pushJob(stack, job, pointer) {\n    if (!stack[pointer])\n        stack[pointer] = [];\n    stack[pointer].push(job);\n}\nfunction batchLayout(callback) {\n    unresolvedJobs.add(callback);\n    return function () { return unresolvedJobs.delete(callback); };\n}\nfunction flushLayout() {\n    if (!unresolvedJobs.size)\n        return;\n    var pointer = 0;\n    var reads = [[]];\n    var writes = [];\n    var setRead = function (job) { return pushJob(reads, job, pointer); };\n    var setWrite = function (job) {\n        pushJob(writes, job, pointer);\n        pointer++;\n    };\n    /**\n     * Resolve jobs into their array stacks\n     */\n    unresolvedJobs.forEach(function (callback) {\n        callback(setRead, setWrite);\n        pointer = 0;\n    });\n    unresolvedJobs.clear();\n    /**\n     * Execute jobs\n     */\n    var numStacks = writes.length;\n    for (var i = 0; i <= numStacks; i++) {\n        reads[i] && reads[i].forEach(executeJob);\n        writes[i] && writes[i].forEach(executeJob);\n    }\n}\nvar executeJob = function (job) { return job(); };\n\nexport { batchLayout, flushLayout };\n","var clamp = function (min, max, v) {\n    return Math.min(Math.max(v, min), max);\n};\n\nexport { clamp };\n","var combineFunctions = function (a, b) { return function (v) { return b(a(v)); }; };\nvar pipe = function () {\n    var transformers = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        transformers[_i] = arguments[_i];\n    }\n    return transformers.reduce(combineFunctions);\n};\n\nexport { pipe };\n","var AnimationType;\n(function (AnimationType) {\n    AnimationType[\"Animate\"] = \"animate\";\n    AnimationType[\"Hover\"] = \"whileHover\";\n    AnimationType[\"Tap\"] = \"whileTap\";\n    AnimationType[\"Drag\"] = \"whileDrag\";\n    AnimationType[\"Focus\"] = \"whileFocus\";\n    AnimationType[\"Exit\"] = \"exit\";\n})(AnimationType || (AnimationType = {}));\n\nexport { AnimationType };\n","function isAnimationControls(v) {\n    return typeof v === \"object\" && typeof v.start === \"function\";\n}\n\nexport { isAnimationControls };\n","import sync from 'framesync';\nimport { copyAxisBox } from '../../../utils/geometry/index.js';\nimport { compareByDepth } from '../../utils/compare-by-depth.js';\n\nfunction isProjecting(visualElement) {\n    var isEnabled = visualElement.projection.isEnabled;\n    return isEnabled || visualElement.shouldResetTransform();\n}\nfunction collectProjectingAncestors(visualElement, ancestors) {\n    if (ancestors === void 0) { ancestors = []; }\n    var parent = visualElement.parent;\n    if (parent)\n        collectProjectingAncestors(parent, ancestors);\n    if (isProjecting(visualElement))\n        ancestors.push(visualElement);\n    return ancestors;\n}\nfunction collectProjectingChildren(visualElement) {\n    var children = [];\n    var addChild = function (child) {\n        if (isProjecting(child))\n            children.push(child);\n        child.children.forEach(addChild);\n    };\n    visualElement.children.forEach(addChild);\n    return children.sort(compareByDepth);\n}\n/**\n * Update the layoutState by measuring the DOM layout. This\n * should be called after resetting any layout-affecting transforms.\n */\nfunction updateLayoutMeasurement(visualElement) {\n    if (visualElement.shouldResetTransform())\n        return;\n    var layoutState = visualElement.getLayoutState();\n    visualElement.notifyBeforeLayoutMeasure(layoutState.layout);\n    layoutState.isHydrated = true;\n    layoutState.layout = visualElement.measureViewportBox();\n    layoutState.layoutCorrected = copyAxisBox(layoutState.layout);\n    visualElement.notifyLayoutMeasure(layoutState.layout, visualElement.prevViewportBox || layoutState.layout);\n    sync.update(function () { return visualElement.rebaseProjectionTarget(); });\n}\n/**\n * Record the viewport box as it was before an expected mutation/re-render\n */\nfunction snapshotViewportBox(visualElement) {\n    if (visualElement.shouldResetTransform())\n        return;\n    visualElement.prevViewportBox = visualElement.measureViewportBox(false);\n    /**\n     * Update targetBox to match the prevViewportBox. This is just to ensure\n     * that targetBox is affected by scroll in the same way as the measured box\n     */\n    visualElement.rebaseProjectionTarget(false, visualElement.prevViewportBox);\n}\n\nexport { collectProjectingAncestors, collectProjectingChildren, snapshotViewportBox, updateLayoutMeasurement };\n","var isMotionValue = function (value) {\n    return value !== null && typeof value === \"object\" && value.getVelocity;\n};\n\nexport { isMotionValue };\n","import { mix, distance, clamp, progress } from 'popmotion';\n\nvar clampProgress = function (v) { return clamp(0, 1, v); };\n/**\n * Returns true if the provided value is within maxDistance of the provided target\n */\nfunction isNear(value, target, maxDistance) {\n    if (target === void 0) { target = 0; }\n    if (maxDistance === void 0) { maxDistance = 0.01; }\n    return distance(value, target) < maxDistance;\n}\nfunction calcLength(axis) {\n    return axis.max - axis.min;\n}\n/**\n * Calculate a transform origin relative to the source axis, between 0-1, that results\n * in an asthetically pleasing scale/transform needed to project from source to target.\n */\nfunction calcOrigin(source, target) {\n    var origin = 0.5;\n    var sourceLength = calcLength(source);\n    var targetLength = calcLength(target);\n    if (targetLength > sourceLength) {\n        origin = progress(target.min, target.max - sourceLength, source.min);\n    }\n    else if (sourceLength > targetLength) {\n        origin = progress(source.min, source.max - targetLength, target.min);\n    }\n    return clampProgress(origin);\n}\n/**\n * Update the AxisDelta with a transform that projects source into target.\n *\n * The transform `origin` is optional. If not provided, it'll be automatically\n * calculated based on the relative positions of the two bounding boxes.\n */\nfunction updateAxisDelta(delta, source, target, origin) {\n    if (origin === void 0) { origin = 0.5; }\n    delta.origin = origin;\n    delta.originPoint = mix(source.min, source.max, delta.origin);\n    delta.scale = calcLength(target) / calcLength(source);\n    if (isNear(delta.scale, 1, 0.0001))\n        delta.scale = 1;\n    delta.translate =\n        mix(target.min, target.max, delta.origin) - delta.originPoint;\n    if (isNear(delta.translate))\n        delta.translate = 0;\n}\n/**\n * Update the BoxDelta with a transform that projects the source into the target.\n *\n * The transform `origin` is optional. If not provided, it'll be automatically\n * calculated based on the relative positions of the two bounding boxes.\n */\nfunction updateBoxDelta(delta, source, target, origin) {\n    updateAxisDelta(delta.x, source.x, target.x, defaultOrigin(origin.originX));\n    updateAxisDelta(delta.y, source.y, target.y, defaultOrigin(origin.originY));\n}\n/**\n * Currently this only accepts numerical origins, measured as 0-1, but could\n * accept pixel values by comparing to the target axis.\n */\nfunction defaultOrigin(origin) {\n    return typeof origin === \"number\" ? origin : 0.5;\n}\nfunction calcRelativeAxis(target, relative, parent) {\n    target.min = parent.min + relative.min;\n    target.max = target.min + calcLength(relative);\n}\nfunction calcRelativeBox(projection, parentProjection) {\n    calcRelativeAxis(projection.target.x, projection.relativeTarget.x, parentProjection.target.x);\n    calcRelativeAxis(projection.target.y, projection.relativeTarget.y, parentProjection.target.y);\n}\n\nexport { calcOrigin, calcRelativeAxis, calcRelativeBox, isNear, updateAxisDelta, updateBoxDelta };\n","import { isString } from '../utils.js';\nimport { hex } from './hex.js';\nimport { hsla } from './hsla.js';\nimport { rgba } from './rgba.js';\n\nvar color = {\n    test: function (v) { return rgba.test(v) || hex.test(v) || hsla.test(v); },\n    parse: function (v) {\n        if (rgba.test(v)) {\n            return rgba.parse(v);\n        }\n        else if (hsla.test(v)) {\n            return hsla.parse(v);\n        }\n        else {\n            return hex.parse(v);\n        }\n    },\n    transform: function (v) {\n        return isString(v)\n            ? v\n            : v.hasOwnProperty('red')\n                ? rgba.transform(v)\n                : hsla.transform(v);\n    },\n};\n\nexport { color };\n","/**\n * Converts seconds to milliseconds\n *\n * @param seconds - Time in seconds.\n * @return milliseconds - Converted time in milliseconds.\n */\nvar secondsToMilliseconds = function (seconds) { return seconds * 1000; };\n\nexport { secondsToMilliseconds };\n","function addUniqueItem(arr, item) {\n    arr.indexOf(item) === -1 && arr.push(item);\n}\nfunction removeItem(arr, item) {\n    var index = arr.indexOf(item);\n    index > -1 && arr.splice(index, 1);\n}\n\nexport { addUniqueItem, removeItem };\n","import { __assign } from 'tslib';\nimport { color, filter } from 'style-value-types';\nimport { numberValueTypes } from './number.js';\n\n/**\n * A map of default value types for common values\n */\nvar defaultValueTypes = __assign(__assign({}, numberValueTypes), { \n    // Color props\n    color: color, backgroundColor: color, outlineColor: color, fill: color, stroke: color, \n    // Border props\n    borderColor: color, borderTopColor: color, borderRightColor: color, borderBottomColor: color, borderLeftColor: color, filter: filter, WebkitFilter: filter });\n/**\n * Gets the default ValueType for the provided value key\n */\nvar getDefaultValueType = function (key) { return defaultValueTypes[key]; };\n\nexport { defaultValueTypes, getDefaultValueType };\n","import { isTouchEvent } from '../gestures/utils/event-type.js';\n\n/**\n * Filters out events not attached to the primary pointer (currently left mouse button)\n * @param eventHandler\n */\nfunction filterPrimaryPointer(eventHandler) {\n    return function (event) {\n        var isMouseEvent = event instanceof MouseEvent;\n        var isPrimaryPointer = !isMouseEvent ||\n            (isMouseEvent && event.button === 0);\n        if (isPrimaryPointer) {\n            eventHandler(event);\n        }\n    };\n}\nvar defaultPagePoint = { pageX: 0, pageY: 0 };\nfunction pointFromTouch(e, pointType) {\n    if (pointType === void 0) { pointType = \"page\"; }\n    var primaryTouch = e.touches[0] || e.changedTouches[0];\n    var point = primaryTouch || defaultPagePoint;\n    return {\n        x: point[pointType + \"X\"],\n        y: point[pointType + \"Y\"],\n    };\n}\nfunction pointFromMouse(point, pointType) {\n    if (pointType === void 0) { pointType = \"page\"; }\n    return {\n        x: point[pointType + \"X\"],\n        y: point[pointType + \"Y\"],\n    };\n}\nfunction extractEventInfo(event, pointType) {\n    if (pointType === void 0) { pointType = \"page\"; }\n    return {\n        point: isTouchEvent(event)\n            ? pointFromTouch(event, pointType)\n            : pointFromMouse(event, pointType),\n    };\n}\nfunction getViewportPointFromEvent(event) {\n    return extractEventInfo(event, \"client\");\n}\nvar wrapHandler = function (handler, shouldFilterPrimaryPointer) {\n    if (shouldFilterPrimaryPointer === void 0) { shouldFilterPrimaryPointer = false; }\n    var listener = function (event) {\n        return handler(event, extractEventInfo(event));\n    };\n    return shouldFilterPrimaryPointer\n        ? filterPrimaryPointer(listener)\n        : listener;\n};\n\nexport { extractEventInfo, getViewportPointFromEvent, wrapHandler };\n","// Call a handler once for each axis\nfunction eachAxis(handler) {\n    return [handler(\"x\"), handler(\"y\")];\n}\n\nexport { eachAxis };\n","var compareByDepth = function (a, b) {\n    return a.depth - b.depth;\n};\n\nexport { compareByDepth };\n","var zeroPoint = {\n    x: 0,\n    y: 0,\n    z: 0\n};\nvar isNum = function (v) { return typeof v === 'number'; };\n\nexport { isNum, zeroPoint };\n","var defaultTimestep = (1 / 60) * 1000;\nvar getCurrentTime = typeof performance !== \"undefined\"\n    ? function () { return performance.now(); }\n    : function () { return Date.now(); };\nvar onNextFrame = typeof window !== \"undefined\"\n    ? function (callback) {\n        return window.requestAnimationFrame(callback);\n    }\n    : function (callback) {\n        return setTimeout(function () { return callback(getCurrentTime()); }, defaultTimestep);\n    };\n\nexport { defaultTimestep, onNextFrame };\n","import { onNextFrame, defaultTimestep } from './on-next-frame.js';\nimport { createRenderStep } from './create-render-step.js';\n\nvar maxElapsed = 40;\nvar useDefaultElapsed = true;\nvar runNextFrame = false;\nvar isProcessing = false;\nvar frame = {\n    delta: 0,\n    timestamp: 0\n};\nvar stepsOrder = [\"read\", \"update\", \"preRender\", \"render\", \"postRender\"];\nvar steps = /*#__PURE__*/stepsOrder.reduce(function (acc, key) {\n    acc[key] = createRenderStep(function () {\n        return runNextFrame = true;\n    });\n    return acc;\n}, {});\nvar sync = /*#__PURE__*/stepsOrder.reduce(function (acc, key) {\n    var step = steps[key];\n    acc[key] = function (process, keepAlive, immediate) {\n        if (keepAlive === void 0) {\n            keepAlive = false;\n        }\n        if (immediate === void 0) {\n            immediate = false;\n        }\n        if (!runNextFrame) startLoop();\n        return step.schedule(process, keepAlive, immediate);\n    };\n    return acc;\n}, {});\nvar cancelSync = /*#__PURE__*/stepsOrder.reduce(function (acc, key) {\n    acc[key] = steps[key].cancel;\n    return acc;\n}, {});\nvar flushSync = /*#__PURE__*/stepsOrder.reduce(function (acc, key) {\n    acc[key] = function () {\n        return steps[key].process(frame);\n    };\n    return acc;\n}, {});\nvar processStep = function (stepId) {\n    return steps[stepId].process(frame);\n};\nvar processFrame = function (timestamp) {\n    runNextFrame = false;\n    frame.delta = useDefaultElapsed ? defaultTimestep : Math.max(Math.min(timestamp - frame.timestamp, maxElapsed), 1);\n    frame.timestamp = timestamp;\n    isProcessing = true;\n    stepsOrder.forEach(processStep);\n    isProcessing = false;\n    if (runNextFrame) {\n        useDefaultElapsed = false;\n        onNextFrame(processFrame);\n    }\n};\nvar startLoop = function () {\n    runNextFrame = true;\n    useDefaultElapsed = true;\n    if (!isProcessing) onNextFrame(processFrame);\n};\nvar getFrameData = function () {\n    return frame;\n};\n\nexport default sync;\nexport { cancelSync, flushSync, getFrameData };\n","function createRenderStep(runNextFrame) {\n    var toRun = [];\n    var toRunNextFrame = [];\n    var numToRun = 0;\n    var isProcessing = false;\n    var toKeepAlive = new WeakSet();\n    var step = {\n        schedule: function (callback, keepAlive, immediate) {\n            if (keepAlive === void 0) { keepAlive = false; }\n            if (immediate === void 0) { immediate = false; }\n            var addToCurrentFrame = immediate && isProcessing;\n            var buffer = addToCurrentFrame ? toRun : toRunNextFrame;\n            if (keepAlive)\n                toKeepAlive.add(callback);\n            if (buffer.indexOf(callback) === -1) {\n                buffer.push(callback);\n                if (addToCurrentFrame && isProcessing)\n                    numToRun = toRun.length;\n            }\n            return callback;\n        },\n        cancel: function (callback) {\n            var index = toRunNextFrame.indexOf(callback);\n            if (index !== -1)\n                toRunNextFrame.splice(index, 1);\n            toKeepAlive.delete(callback);\n        },\n        process: function (frameData) {\n            var _a;\n            isProcessing = true;\n            _a = [toRunNextFrame, toRun], toRun = _a[0], toRunNextFrame = _a[1];\n            toRunNextFrame.length = 0;\n            numToRun = toRun.length;\n            if (numToRun) {\n                for (var i = 0; i < numToRun; i++) {\n                    var callback = toRun[i];\n                    callback(frameData);\n                    if (toKeepAlive.has(callback)) {\n                        step.schedule(callback);\n                        runNextFrame();\n                    }\n                }\n            }\n            isProcessing = false;\n        },\n    };\n    return step;\n}\n\nexport { createRenderStep };\n","function isRefObject(ref) {\n    return (typeof ref === \"object\" &&\n        Object.prototype.hasOwnProperty.call(ref, \"current\"));\n}\n\nexport { isRefObject };\n","import { createContext } from 'react';\n\n/**\n * @public\n */\nvar PresenceContext = createContext(null);\n\nexport { PresenceContext };\n","import { __spreadArray, __read } from 'tslib';\nimport sync, { flushSync } from 'framesync';\nimport { collectProjectingAncestors, updateLayoutMeasurement } from '../../../render/dom/projection/utils.js';\nimport { batchLayout, flushLayout } from '../../../render/dom/utils/batch-layout.js';\nimport { compareByDepth } from '../../../render/utils/compare-by-depth.js';\nimport { Presence } from '../types.js';\n\n/**\n * Default handlers for batching VisualElements\n */\nvar defaultHandler = {\n    layoutReady: function (child) { return child.notifyLayoutReady(); },\n};\n/**\n * Create a batcher to process VisualElements\n */\nfunction createBatcher() {\n    var queue = new Set();\n    return {\n        add: function (child) { return queue.add(child); },\n        flush: function (_a) {\n            var _b = _a === void 0 ? defaultHandler : _a, layoutReady = _b.layoutReady, parent = _b.parent;\n            batchLayout(function (read, write) {\n                var order = Array.from(queue).sort(compareByDepth);\n                var ancestors = parent\n                    ? collectProjectingAncestors(parent)\n                    : [];\n                write(function () {\n                    var allElements = __spreadArray(__spreadArray([], __read(ancestors)), __read(order));\n                    allElements.forEach(function (element) { return element.resetTransform(); });\n                });\n                read(function () {\n                    order.forEach(updateLayoutMeasurement);\n                });\n                write(function () {\n                    ancestors.forEach(function (element) { return element.restoreTransform(); });\n                    order.forEach(layoutReady);\n                });\n                read(function () {\n                    /**\n                     * After all children have started animating, ensure any Entering components are set to Present.\n                     * If we add deferred animations (set up all animations and then start them in two loops) this\n                     * could be moved to the start loop. But it needs to happen after all the animations configs\n                     * are generated in AnimateSharedLayout as this relies on presence data\n                     */\n                    order.forEach(function (child) {\n                        if (child.isPresent)\n                            child.presence = Presence.Present;\n                    });\n                });\n                write(function () {\n                    /**\n                     * Starting these animations will have queued jobs on the frame loop. In some situations,\n                     * like when removing an element, these will be processed too late after the DOM is manipulated,\n                     * leaving a flash of incorrectly-projected content. By manually flushing these jobs\n                     * we ensure there's no flash.\n                     */\n                    flushSync.preRender();\n                    flushSync.render();\n                });\n                read(function () {\n                    /**\n                     * Schedule a callback at the end of the following frame to assign the latest projection\n                     * box to the prevViewportBox snapshot. Once global batching is in place this could be run\n                     * synchronously. But for now it ensures that if any nested `AnimateSharedLayout` top-level\n                     * child attempts to calculate its previous relative position against a prevViewportBox\n                     * it will be against its latest projection box instead, as the snapshot is useless beyond this\n                     * render.\n                     */\n                    sync.postRender(function () {\n                        return order.forEach(assignProjectionToSnapshot);\n                    });\n                    queue.clear();\n                });\n            });\n            // TODO: Need to find a layout-synchronous way of flushing this\n            flushLayout();\n        },\n    };\n}\nfunction assignProjectionToSnapshot(child) {\n    child.prevViewportBox = child.projection.target;\n}\n\nexport { createBatcher };\n","import { createContext } from 'react';\n\n/**\n * @public\n */\nvar MotionConfigContext = createContext({\n    transformPagePoint: function (p) { return p; },\n    isStatic: false,\n});\n\nexport { MotionConfigContext };\n","/**\n * @public\n */\nvar Presence;\n(function (Presence) {\n    Presence[Presence[\"Entering\"] = 0] = \"Entering\";\n    Presence[Presence[\"Present\"] = 1] = \"Present\";\n    Presence[Presence[\"Exiting\"] = 2] = \"Exiting\";\n})(Presence || (Presence = {}));\n/**\n * @public\n */\nvar VisibilityAction;\n(function (VisibilityAction) {\n    VisibilityAction[VisibilityAction[\"Hide\"] = 0] = \"Hide\";\n    VisibilityAction[VisibilityAction[\"Show\"] = 1] = \"Show\";\n})(VisibilityAction || (VisibilityAction = {}));\n\nexport { Presence, VisibilityAction };\n","function renderHTML(element, _a) {\n    var style = _a.style, vars = _a.vars;\n    // Directly assign style into the Element's style prop. In tests Object.assign is the\n    // fastest way to assign styles.\n    Object.assign(element.style, style);\n    // Loop over any CSS variables and assign those.\n    for (var key in vars) {\n        element.style.setProperty(key, vars[key]);\n    }\n}\n\nexport { renderHTML };\n","import { convertBoundingBoxToAxisBox, transformBoundingBox } from '../../../utils/geometry/index.js';\n\n/**\n * Measure and return the element bounding box.\n *\n * We convert the box into an AxisBox2D to make it easier to work with each axis\n * individually and programmatically.\n *\n * This function optionally accepts a transformPagePoint function which allows us to compensate\n * for, for instance, measuring the element within a scaled plane like a Framer devivce preview component.\n */\nfunction getBoundingBox(element, transformPagePoint) {\n    var box = element.getBoundingClientRect();\n    return convertBoundingBoxToAxisBox(transformBoundingBox(box, transformPagePoint));\n}\n\nexport { getBoundingBox };\n","/**\n * Decides if the supplied variable is an array of variant labels\n */\nfunction isVariantLabels(v) {\n    return Array.isArray(v);\n}\n/**\n * Decides if the supplied variable is variant label\n */\nfunction isVariantLabel(v) {\n    return typeof v === \"string\" || isVariantLabels(v);\n}\n/**\n * Creates an object containing the latest state of every MotionValue on a VisualElement\n */\nfunction getCurrent(visualElement) {\n    var current = {};\n    visualElement.forEachValue(function (value, key) { return (current[key] = value.get()); });\n    return current;\n}\n/**\n * Creates an object containing the latest velocity of every MotionValue on a VisualElement\n */\nfunction getVelocity(visualElement) {\n    var velocity = {};\n    visualElement.forEachValue(function (value, key) { return (velocity[key] = value.getVelocity()); });\n    return velocity;\n}\nfunction resolveVariantFromProps(props, definition, custom, currentValues, currentVelocity) {\n    var _a;\n    if (currentValues === void 0) { currentValues = {}; }\n    if (currentVelocity === void 0) { currentVelocity = {}; }\n    if (typeof definition === \"string\") {\n        definition = (_a = props.variants) === null || _a === void 0 ? void 0 : _a[definition];\n    }\n    return typeof definition === \"function\"\n        ? definition(custom !== null && custom !== void 0 ? custom : props.custom, currentValues, currentVelocity)\n        : definition;\n}\nfunction resolveVariant(visualElement, definition, custom) {\n    var props = visualElement.getProps();\n    return resolveVariantFromProps(props, definition, custom !== null && custom !== void 0 ? custom : props.custom, getCurrent(visualElement), getVelocity(visualElement));\n}\nfunction checkIfControllingVariants(props) {\n    var _a;\n    return (typeof ((_a = props.animate) === null || _a === void 0 ? void 0 : _a.start) === \"function\" ||\n        isVariantLabel(props.initial) ||\n        isVariantLabel(props.animate) ||\n        isVariantLabel(props.whileHover) ||\n        isVariantLabel(props.whileDrag) ||\n        isVariantLabel(props.whileTap) ||\n        isVariantLabel(props.whileFocus) ||\n        isVariantLabel(props.exit));\n}\nfunction checkIfVariantNode(props) {\n    return Boolean(checkIfControllingVariants(props) || props.variants);\n}\n\nexport { checkIfControllingVariants, checkIfVariantNode, isVariantLabel, isVariantLabels, resolveVariant, resolveVariantFromProps };\n","import { __assign } from 'tslib';\nimport { number } from 'style-value-types';\n\nvar int = __assign(__assign({}, number), { transform: Math.round });\n\nexport { int };\n","import { px, degrees, scale, alpha, progressPercentage } from 'style-value-types';\nimport { int } from './type-int.js';\n\nvar numberValueTypes = {\n    // Border props\n    borderWidth: px,\n    borderTopWidth: px,\n    borderRightWidth: px,\n    borderBottomWidth: px,\n    borderLeftWidth: px,\n    borderRadius: px,\n    radius: px,\n    borderTopLeftRadius: px,\n    borderTopRightRadius: px,\n    borderBottomRightRadius: px,\n    borderBottomLeftRadius: px,\n    // Positioning props\n    width: px,\n    maxWidth: px,\n    height: px,\n    maxHeight: px,\n    size: px,\n    top: px,\n    right: px,\n    bottom: px,\n    left: px,\n    // Spacing props\n    padding: px,\n    paddingTop: px,\n    paddingRight: px,\n    paddingBottom: px,\n    paddingLeft: px,\n    margin: px,\n    marginTop: px,\n    marginRight: px,\n    marginBottom: px,\n    marginLeft: px,\n    // Transform props\n    rotate: degrees,\n    rotateX: degrees,\n    rotateY: degrees,\n    rotateZ: degrees,\n    scale: scale,\n    scaleX: scale,\n    scaleY: scale,\n    scaleZ: scale,\n    skew: degrees,\n    skewX: degrees,\n    skewY: degrees,\n    distance: px,\n    translateX: px,\n    translateY: px,\n    translateZ: px,\n    x: px,\n    y: px,\n    z: px,\n    perspective: px,\n    transformPerspective: px,\n    opacity: alpha,\n    originX: progressPercentage,\n    originY: progressPercentage,\n    originZ: px,\n    // Misc\n    zIndex: int,\n    // SVG\n    fillOpacity: alpha,\n    strokeOpacity: alpha,\n    numOctaves: int,\n};\n\nexport { numberValueTypes };\n","import { useEffect } from 'react';\n\nfunction addDomEvent(target, eventName, handler, options) {\n    target.addEventListener(eventName, handler, options);\n    return function () { return target.removeEventListener(eventName, handler, options); };\n}\n/**\n * Attaches an event listener directly to the provided DOM element.\n *\n * Bypassing React's event system can be desirable, for instance when attaching non-passive\n * event handlers.\n *\n * ```jsx\n * const ref = useRef(null)\n *\n * useDomEvent(ref, 'wheel', onWheel, { passive: false })\n *\n * return <div ref={ref} />\n * ```\n *\n * @param ref - React.RefObject that's been provided to the element you want to bind the listener to.\n * @param eventName - Name of the event you want listen for.\n * @param handler - Function to fire when receiving the event.\n * @param options - Options to pass to `Event.addEventListener`.\n *\n * @public\n */\nfunction useDomEvent(ref, eventName, handler, options) {\n    useEffect(function () {\n        var element = ref.current;\n        if (handler && element) {\n            return addDomEvent(element, eventName, handler, options);\n        }\n    }, [ref, eventName, handler, options]);\n}\n\nexport { addDomEvent, useDomEvent };\n","import { useDomEvent, addDomEvent } from './use-dom-event.js';\nimport { wrapHandler } from './event-info.js';\nimport { supportsPointerEvents, supportsTouchEvents, supportsMouseEvents } from './utils.js';\n\nvar mouseEventNames = {\n    pointerdown: \"mousedown\",\n    pointermove: \"mousemove\",\n    pointerup: \"mouseup\",\n    pointercancel: \"mousecancel\",\n    pointerover: \"mouseover\",\n    pointerout: \"mouseout\",\n    pointerenter: \"mouseenter\",\n    pointerleave: \"mouseleave\",\n};\nvar touchEventNames = {\n    pointerdown: \"touchstart\",\n    pointermove: \"touchmove\",\n    pointerup: \"touchend\",\n    pointercancel: \"touchcancel\",\n};\nfunction getPointerEventName(name) {\n    if (supportsPointerEvents()) {\n        return name;\n    }\n    else if (supportsTouchEvents()) {\n        return touchEventNames[name];\n    }\n    else if (supportsMouseEvents()) {\n        return mouseEventNames[name];\n    }\n    return name;\n}\nfunction addPointerEvent(target, eventName, handler, options) {\n    return addDomEvent(target, getPointerEventName(eventName), wrapHandler(handler, eventName === \"pointerdown\"), options);\n}\nfunction usePointerEvent(ref, eventName, handler, options) {\n    return useDomEvent(ref, getPointerEventName(eventName), handler && wrapHandler(handler, eventName === \"pointerdown\"), options);\n}\n\nexport { addPointerEvent, usePointerEvent };\n","import { isBrowser } from '../utils/is-browser.js';\n\n// We check for event support via functions in case they've been mocked by a testing suite.\nvar supportsPointerEvents = function () {\n    return isBrowser && window.onpointerdown === null;\n};\nvar supportsTouchEvents = function () {\n    return isBrowser && window.ontouchstart === null;\n};\nvar supportsMouseEvents = function () {\n    return isBrowser && window.onmousedown === null;\n};\n\nexport { supportsMouseEvents, supportsPointerEvents, supportsTouchEvents };\n","import { isKeyframesTarget } from '../animation/utils/is-keyframes-target.js';\n\nvar isCustomValue = function (v) {\n    return Boolean(v && typeof v === \"object\" && v.mix && v.toValue);\n};\nvar resolveFinalValueInKeyframes = function (v) {\n    // TODO maybe throw if v.length - 1 is placeholder token?\n    return isKeyframesTarget(v) ? v[v.length - 1] || 0 : v;\n};\n\nexport { isCustomValue, resolveFinalValueInKeyframes };\n","function isMouseEvent(event) {\n    // PointerEvent inherits from MouseEvent so we can't use a straight instanceof check.\n    if (typeof PointerEvent !== \"undefined\" && event instanceof PointerEvent) {\n        return !!(event.pointerType === \"mouse\");\n    }\n    return event instanceof MouseEvent;\n}\nfunction isTouchEvent(event) {\n    var hasTouches = !!event.touches;\n    return hasTouches;\n}\n\nexport { isMouseEvent, isTouchEvent };\n","import { sortTransformProps } from './transform.js';\n\nvar translateAlias = {\n    x: \"translateX\",\n    y: \"translateY\",\n    z: \"translateZ\",\n    transformPerspective: \"perspective\",\n};\n/**\n * Build a CSS transform style from individual x/y/scale etc properties.\n *\n * This outputs with a default order of transforms/scales/rotations, this can be customised by\n * providing a transformTemplate function.\n */\nfunction buildTransform(_a, _b, transformIsDefault, transformTemplate) {\n    var transform = _a.transform, transformKeys = _a.transformKeys;\n    var _c = _b.enableHardwareAcceleration, enableHardwareAcceleration = _c === void 0 ? true : _c, _d = _b.allowTransformNone, allowTransformNone = _d === void 0 ? true : _d;\n    // The transform string we're going to build into.\n    var transformString = \"\";\n    // Transform keys into their default order - this will determine the output order.\n    transformKeys.sort(sortTransformProps);\n    // Track whether the defined transform has a defined z so we don't add a\n    // second to enable hardware acceleration\n    var transformHasZ = false;\n    // Loop over each transform and build them into transformString\n    var numTransformKeys = transformKeys.length;\n    for (var i = 0; i < numTransformKeys; i++) {\n        var key = transformKeys[i];\n        transformString += (translateAlias[key] || key) + \"(\" + transform[key] + \") \";\n        if (key === \"z\")\n            transformHasZ = true;\n    }\n    if (!transformHasZ && enableHardwareAcceleration) {\n        transformString += \"translateZ(0)\";\n    }\n    else {\n        transformString = transformString.trim();\n    }\n    // If we have a custom `transform` template, pass our transform values and\n    // generated transformString to that before returning\n    if (transformTemplate) {\n        transformString = transformTemplate(transform, transformIsDefault ? \"\" : transformString);\n    }\n    else if (allowTransformNone && transformIsDefault) {\n        transformString = \"none\";\n    }\n    return transformString;\n}\n/**\n * Build a transformOrigin style. Uses the same defaults as the browser for\n * undefined origins.\n */\nfunction buildTransformOrigin(_a) {\n    var _b = _a.originX, originX = _b === void 0 ? \"50%\" : _b, _c = _a.originY, originY = _c === void 0 ? \"50%\" : _c, _d = _a.originZ, originZ = _d === void 0 ? 0 : _d;\n    return originX + \" \" + originY + \" \" + originZ;\n}\n\nexport { buildTransform, buildTransformOrigin };\n","/**\n * Provided a value and a ValueType, returns the value as that value type.\n */\nvar getValueAsType = function (value, type) {\n    return type && typeof value === \"number\"\n        ? type.transform(value)\n        : value;\n};\n\nexport { getValueAsType };\n","import { valueScaleCorrection } from '../../dom/projection/scale-correction.js';\nimport { buildTransform, buildTransformOrigin } from './build-transform.js';\nimport { isCSSVariable } from '../../dom/utils/is-css-variable.js';\nimport { isTransformProp, isTransformOriginProp } from './transform.js';\nimport { getValueAsType } from '../../dom/value-types/get-as-type.js';\nimport { numberValueTypes } from '../../dom/value-types/number.js';\n\nfunction buildHTMLStyles(state, latestValues, projection, layoutState, options, transformTemplate, buildProjectionTransform, buildProjectionTransformOrigin) {\n    var _a;\n    var style = state.style, vars = state.vars, transform = state.transform, transformKeys = state.transformKeys, transformOrigin = state.transformOrigin;\n    // Empty the transformKeys array. As we're throwing out refs to its items\n    // this might not be as cheap as suspected. Maybe using the array as a buffer\n    // with a manual incrementation would be better.\n    transformKeys.length = 0;\n    // Track whether we encounter any transform or transformOrigin values.\n    var hasTransform = false;\n    var hasTransformOrigin = false;\n    // Does the calculated transform essentially equal \"none\"?\n    var transformIsNone = true;\n    /**\n     * Loop over all our latest animated values and decide whether to handle them\n     * as a style or CSS variable.\n     *\n     * Transforms and transform origins are kept seperately for further processing.\n     */\n    for (var key in latestValues) {\n        var value = latestValues[key];\n        /**\n         * If this is a CSS variable we don't do any further processing.\n         */\n        if (isCSSVariable(key)) {\n            vars[key] = value;\n            continue;\n        }\n        // Convert the value to its default value type, ie 0 -> \"0px\"\n        var valueType = numberValueTypes[key];\n        var valueAsType = getValueAsType(value, valueType);\n        if (isTransformProp(key)) {\n            // If this is a transform, flag to enable further transform processing\n            hasTransform = true;\n            transform[key] = valueAsType;\n            transformKeys.push(key);\n            // If we already know we have a non-default transform, early return\n            if (!transformIsNone)\n                continue;\n            // Otherwise check to see if this is a default transform\n            if (value !== ((_a = valueType.default) !== null && _a !== void 0 ? _a : 0))\n                transformIsNone = false;\n        }\n        else if (isTransformOriginProp(key)) {\n            transformOrigin[key] = valueAsType;\n            // If this is a transform origin, flag and enable further transform-origin processing\n            hasTransformOrigin = true;\n        }\n        else {\n            /**\n             * If layout projection is on, and we need to perform scale correction for this\n             * value type, perform it.\n             */\n            if ((projection === null || projection === void 0 ? void 0 : projection.isHydrated) &&\n                (layoutState === null || layoutState === void 0 ? void 0 : layoutState.isHydrated) &&\n                valueScaleCorrection[key]) {\n                var correctedValue = valueScaleCorrection[key].process(value, layoutState, projection);\n                /**\n                 * Scale-correctable values can define a number of other values to break\n                 * down into. For instance borderRadius needs applying to borderBottomLeftRadius etc\n                 */\n                var applyTo = valueScaleCorrection[key].applyTo;\n                if (applyTo) {\n                    var num = applyTo.length;\n                    for (var i = 0; i < num; i++) {\n                        style[applyTo[i]] = correctedValue;\n                    }\n                }\n                else {\n                    style[key] = correctedValue;\n                }\n            }\n            else {\n                style[key] = valueAsType;\n            }\n        }\n    }\n    if (layoutState &&\n        projection &&\n        buildProjectionTransform &&\n        buildProjectionTransformOrigin) {\n        style.transform = buildProjectionTransform(layoutState.deltaFinal, layoutState.treeScale, hasTransform ? transform : undefined);\n        if (transformTemplate) {\n            style.transform = transformTemplate(transform, style.transform);\n        }\n        style.transformOrigin = buildProjectionTransformOrigin(layoutState);\n    }\n    else {\n        if (hasTransform) {\n            style.transform = buildTransform(state, options, transformIsNone, transformTemplate);\n        }\n        if (hasTransformOrigin) {\n            style.transformOrigin = buildTransformOrigin(transformOrigin);\n        }\n    }\n}\n\nexport { buildHTMLStyles };\n","import { addUniqueItem, removeItem } from './array.js';\n\nvar SubscriptionManager = /** @class */ (function () {\n    function SubscriptionManager() {\n        this.subscriptions = [];\n    }\n    SubscriptionManager.prototype.add = function (handler) {\n        var _this = this;\n        addUniqueItem(this.subscriptions, handler);\n        return function () { return removeItem(_this.subscriptions, handler); };\n    };\n    SubscriptionManager.prototype.notify = function (a, b, c) {\n        var numSubscriptions = this.subscriptions.length;\n        if (!numSubscriptions)\n            return;\n        if (numSubscriptions === 1) {\n            /**\n             * If there's only a single handler we can just call it without invoking a loop.\n             */\n            this.subscriptions[0](a, b, c);\n        }\n        else {\n            for (var i = 0; i < numSubscriptions; i++) {\n                /**\n                 * Check whether the handler exists before firing as it's possible\n                 * the subscriptions were modified during this loop running.\n                 */\n                var handler = this.subscriptions[i];\n                handler && handler(a, b, c);\n            }\n        }\n    };\n    SubscriptionManager.prototype.getSize = function () {\n        return this.subscriptions.length;\n    };\n    SubscriptionManager.prototype.clear = function () {\n        this.subscriptions.length = 0;\n    };\n    return SubscriptionManager;\n}());\n\nexport { SubscriptionManager };\n","function velocityPerSecond(velocity, frameDuration) {\n    return frameDuration ? velocity * (1000 / frameDuration) : 0;\n}\n\nexport { velocityPerSecond };\n","var CAMEL_CASE_PATTERN = /([a-z])([A-Z])/g;\nvar REPLACE_TEMPLATE = \"$1-$2\";\n/**\n * Convert camelCase to dash-case properties.\n */\nvar camelToDash = function (str) {\n    return str.replace(CAMEL_CASE_PATTERN, REPLACE_TEMPLATE).toLowerCase();\n};\n\nexport { camelToDash };\n","import { __read } from 'tslib';\nimport { mix } from 'popmotion';\n\n/**\n * Apply constraints to a point. These constraints are both physical along an\n * axis, and an elastic factor that determines how much to constrain the point\n * by if it does lie outside the defined parameters.\n */\nfunction applyConstraints(point, _a, elastic) {\n    var min = _a.min, max = _a.max;\n    if (min !== undefined && point < min) {\n        // If we have a min point defined, and this is outside of that, constrain\n        point = elastic ? mix(min, point, elastic.min) : Math.max(point, min);\n    }\n    else if (max !== undefined && point > max) {\n        // If we have a max point defined, and this is outside of that, constrain\n        point = elastic ? mix(max, point, elastic.max) : Math.min(point, max);\n    }\n    return point;\n}\n/**\n * Calculates a min projection point based on a pointer, pointer progress\n * within the drag target, and constraints.\n *\n * For instance if an element was 100px width, we were dragging from 0.25\n * along this axis, the pointer is at 200px, and there were no constraints,\n * we would calculate a min projection point of 175px.\n */\nfunction calcConstrainedMinPoint(point, length, progress, constraints, elastic) {\n    // Calculate a min point for this axis and apply it to the current pointer\n    var min = point - length * progress;\n    return constraints ? applyConstraints(min, constraints, elastic) : min;\n}\n/**\n * Calculate constraints in terms of the viewport when defined relatively to the\n * measured axis. This is measured from the nearest edge, so a max constraint of 200\n * on an axis with a max value of 300 would return a constraint of 500 - axis length\n */\nfunction calcRelativeAxisConstraints(axis, min, max) {\n    return {\n        min: min !== undefined ? axis.min + min : undefined,\n        max: max !== undefined\n            ? axis.max + max - (axis.max - axis.min)\n            : undefined,\n    };\n}\n/**\n * Calculate constraints in terms of the viewport when\n * defined relatively to the measured bounding box.\n */\nfunction calcRelativeConstraints(layoutBox, _a) {\n    var top = _a.top, left = _a.left, bottom = _a.bottom, right = _a.right;\n    return {\n        x: calcRelativeAxisConstraints(layoutBox.x, left, right),\n        y: calcRelativeAxisConstraints(layoutBox.y, top, bottom),\n    };\n}\n/**\n * Calculate viewport constraints when defined as another viewport-relative axis\n */\nfunction calcViewportAxisConstraints(layoutAxis, constraintsAxis) {\n    var _a;\n    var min = constraintsAxis.min - layoutAxis.min;\n    var max = constraintsAxis.max - layoutAxis.max;\n    // If the constraints axis is actually smaller than the layout axis then we can\n    // flip the constraints\n    if (constraintsAxis.max - constraintsAxis.min <\n        layoutAxis.max - layoutAxis.min) {\n        _a = __read([max, min], 2), min = _a[0], max = _a[1];\n    }\n    return {\n        min: layoutAxis.min + min,\n        max: layoutAxis.min + max,\n    };\n}\n/**\n * Calculate viewport constraints when defined as another viewport-relative box\n */\nfunction calcViewportConstraints(layoutBox, constraintsBox) {\n    return {\n        x: calcViewportAxisConstraints(layoutBox.x, constraintsBox.x),\n        y: calcViewportAxisConstraints(layoutBox.y, constraintsBox.y),\n    };\n}\n/**\n * Calculate the an axis position based on two axes and a progress value.\n */\nfunction calcPositionFromProgress(axis, constraints, progress) {\n    var axisLength = axis.max - axis.min;\n    var min = mix(constraints.min, constraints.max - axisLength, progress);\n    return { min: min, max: min + axisLength };\n}\n/**\n * Rebase the calculated viewport constraints relative to the layout.min point.\n */\nfunction rebaseAxisConstraints(layout, constraints) {\n    var relativeConstraints = {};\n    if (constraints.min !== undefined) {\n        relativeConstraints.min = constraints.min - layout.min;\n    }\n    if (constraints.max !== undefined) {\n        relativeConstraints.max = constraints.max - layout.min;\n    }\n    return relativeConstraints;\n}\nvar defaultElastic = 0.35;\n/**\n * Accepts a dragElastic prop and returns resolved elastic values for each axis.\n */\nfunction resolveDragElastic(dragElastic) {\n    if (dragElastic === false) {\n        dragElastic = 0;\n    }\n    else if (dragElastic === true) {\n        dragElastic = defaultElastic;\n    }\n    return {\n        x: resolveAxisElastic(dragElastic, \"left\", \"right\"),\n        y: resolveAxisElastic(dragElastic, \"top\", \"bottom\"),\n    };\n}\nfunction resolveAxisElastic(dragElastic, minLabel, maxLabel) {\n    return {\n        min: resolvePointElastic(dragElastic, minLabel),\n        max: resolvePointElastic(dragElastic, maxLabel),\n    };\n}\nfunction resolvePointElastic(dragElastic, label) {\n    var _a;\n    return typeof dragElastic === \"number\"\n        ? dragElastic\n        : (_a = dragElastic[label]) !== null && _a !== void 0 ? _a : 0;\n}\n\nexport { applyConstraints, calcConstrainedMinPoint, calcPositionFromProgress, calcRelativeAxisConstraints, calcRelativeConstraints, calcViewportAxisConstraints, calcViewportConstraints, defaultElastic, rebaseAxisConstraints, resolveAxisElastic, resolveDragElastic, resolvePointElastic };\n","import { __rest, __assign, __spreadArray, __read } from 'tslib';\nimport { invariant } from 'hey-listen';\nimport { PanSession } from '../PanSession.js';\nimport { getGlobalLock } from './utils/lock.js';\nimport { isRefObject } from '../../utils/is-ref-object.js';\nimport { addPointerEvent } from '../../events/use-pointer-event.js';\nimport { addDomEvent } from '../../events/use-dom-event.js';\nimport { getViewportPointFromEvent } from '../../events/event-info.js';\nimport { axisBox, convertAxisBoxToBoundingBox, convertBoundingBoxToAxisBox } from '../../utils/geometry/index.js';\nimport { eachAxis } from '../../utils/each-axis.js';\nimport { calcRelativeConstraints, resolveDragElastic, rebaseAxisConstraints, calcViewportConstraints, applyConstraints, calcConstrainedMinPoint, calcPositionFromProgress, defaultElastic } from './utils/constraints.js';\nimport { getBoundingBox } from '../../render/dom/projection/measure.js';\nimport { calcOrigin } from '../../utils/geometry/delta-calc.js';\nimport { startAnimation } from '../../animation/utils/transitions.js';\nimport { AnimationType } from '../../render/utils/types.js';\nimport { collectProjectingAncestors, updateLayoutMeasurement, collectProjectingChildren } from '../../render/dom/projection/utils.js';\nimport { progress } from 'popmotion';\nimport { convertToRelativeProjection } from '../../render/dom/projection/convert-to-relative.js';\nimport { calcRelativeOffset } from '../../motion/features/layout/utils.js';\nimport { flushLayout, batchLayout } from '../../render/dom/utils/batch-layout.js';\nimport { flushSync } from 'framesync';\n\nvar elementDragControls = new WeakMap();\n/**\n *\n */\nvar lastPointerEvent;\nvar VisualElementDragControls = /** @class */ (function () {\n    function VisualElementDragControls(_a) {\n        var visualElement = _a.visualElement;\n        /**\n         * Track whether we're currently dragging.\n         *\n         * @internal\n         */\n        this.isDragging = false;\n        /**\n         * The current direction of drag, or `null` if both.\n         *\n         * @internal\n         */\n        this.currentDirection = null;\n        /**\n         * The permitted boundaries of travel, in pixels.\n         *\n         * @internal\n         */\n        this.constraints = false;\n        /**\n         * The per-axis resolved elastic values.\n         *\n         * @internal\n         */\n        this.elastic = axisBox();\n        /**\n         * A reference to the host component's latest props.\n         *\n         * @internal\n         */\n        this.props = {};\n        /**\n         * @internal\n         */\n        this.hasMutatedConstraints = false;\n        /**\n         * Track the initial position of the cursor relative to the dragging element\n         * when dragging starts as a value of 0-1 on each axis. We then use this to calculate\n         * an ideal bounding box for the VisualElement renderer to project into every frame.\n         *\n         * @internal\n         */\n        this.cursorProgress = {\n            x: 0.5,\n            y: 0.5,\n        };\n        // When updating _dragX, or _dragY instead of the VisualElement,\n        // persist their values between drag gestures.\n        this.originPoint = {};\n        // This is a reference to the global drag gesture lock, ensuring only one component\n        // can \"capture\" the drag of one or both axes.\n        // TODO: Look into moving this into pansession?\n        this.openGlobalLock = null;\n        /**\n         * @internal\n         */\n        this.panSession = null;\n        this.visualElement = visualElement;\n        this.visualElement.enableLayoutProjection();\n        elementDragControls.set(visualElement, this);\n    }\n    /**\n     * Instantiate a PanSession for the drag gesture\n     *\n     * @public\n     */\n    VisualElementDragControls.prototype.start = function (originEvent, _a) {\n        var _this = this;\n        var _b = _a === void 0 ? {} : _a, _c = _b.snapToCursor, snapToCursor = _c === void 0 ? false : _c, cursorProgress = _b.cursorProgress;\n        var onSessionStart = function (event) {\n            var _a;\n            // Stop any animations on both axis values immediately. This allows the user to throw and catch\n            // the component.\n            _this.stopMotion();\n            /**\n             * Save the initial point. We'll use this to calculate the pointer's position rather\n             * than the one we receive when the gesture actually starts. By then, the pointer will\n             * have already moved, and the perception will be of the pointer \"slipping\" across the element\n             */\n            var initialPoint = getViewportPointFromEvent(event).point;\n            (_a = _this.cancelLayout) === null || _a === void 0 ? void 0 : _a.call(_this);\n            _this.cancelLayout = batchLayout(function (read, write) {\n                var ancestors = collectProjectingAncestors(_this.visualElement);\n                var children = collectProjectingChildren(_this.visualElement);\n                var tree = __spreadArray(__spreadArray([], __read(ancestors)), __read(children));\n                var hasManuallySetCursorOrigin = false;\n                /**\n                 * Apply a simple lock to the projection target. This ensures no animations\n                 * can run on the projection box while this lock is active.\n                 */\n                _this.isLayoutDrag() && _this.visualElement.lockProjectionTarget();\n                write(function () {\n                    tree.forEach(function (element) { return element.resetTransform(); });\n                });\n                read(function () {\n                    updateLayoutMeasurement(_this.visualElement);\n                    children.forEach(updateLayoutMeasurement);\n                });\n                write(function () {\n                    tree.forEach(function (element) { return element.restoreTransform(); });\n                    if (snapToCursor) {\n                        hasManuallySetCursorOrigin = _this.snapToCursor(initialPoint);\n                    }\n                });\n                read(function () {\n                    var isRelativeDrag = Boolean(_this.getAxisMotionValue(\"x\") && !_this.isExternalDrag());\n                    if (!isRelativeDrag) {\n                        _this.visualElement.rebaseProjectionTarget(true, _this.visualElement.measureViewportBox(false));\n                    }\n                    _this.visualElement.scheduleUpdateLayoutProjection();\n                    /**\n                     * When dragging starts, we want to find where the cursor is relative to the bounding box\n                     * of the element. Every frame, we calculate a new bounding box using this relative position\n                     * and let the visualElement renderer figure out how to reproject the element into this bounding\n                     * box.\n                     *\n                     * By doing it this way, rather than applying an x/y transform directly to the element,\n                     * we can ensure the component always visually sticks to the cursor as we'd expect, even\n                     * if the DOM element itself changes layout as a result of React updates the user might\n                     * make based on the drag position.\n                     */\n                    var projection = _this.visualElement.projection;\n                    eachAxis(function (axis) {\n                        if (!hasManuallySetCursorOrigin) {\n                            var _a = projection.target[axis], min = _a.min, max = _a.max;\n                            _this.cursorProgress[axis] = cursorProgress\n                                ? cursorProgress[axis]\n                                : progress(min, max, initialPoint[axis]);\n                        }\n                        /**\n                         * If we have external drag MotionValues, record their origin point. On pointermove\n                         * we'll apply the pan gesture offset directly to this value.\n                         */\n                        var axisValue = _this.getAxisMotionValue(axis);\n                        if (axisValue) {\n                            _this.originPoint[axis] = axisValue.get();\n                        }\n                    });\n                });\n                write(function () {\n                    flushSync.update();\n                    flushSync.preRender();\n                    flushSync.render();\n                    flushSync.postRender();\n                });\n                read(function () { return _this.resolveDragConstraints(); });\n            });\n        };\n        var onStart = function (event, info) {\n            var _a, _b, _c;\n            // Attempt to grab the global drag gesture lock - maybe make this part of PanSession\n            var _d = _this.props, drag = _d.drag, dragPropagation = _d.dragPropagation;\n            if (drag && !dragPropagation) {\n                if (_this.openGlobalLock)\n                    _this.openGlobalLock();\n                _this.openGlobalLock = getGlobalLock(drag);\n                // If we don 't have the lock, don't start dragging\n                if (!_this.openGlobalLock)\n                    return;\n            }\n            flushLayout();\n            // Set current drag status\n            _this.isDragging = true;\n            _this.currentDirection = null;\n            // Fire onDragStart event\n            (_b = (_a = _this.props).onDragStart) === null || _b === void 0 ? void 0 : _b.call(_a, event, info);\n            (_c = _this.visualElement.animationState) === null || _c === void 0 ? void 0 : _c.setActive(AnimationType.Drag, true);\n        };\n        var onMove = function (event, info) {\n            var _a, _b, _c, _d;\n            var _e = _this.props, dragPropagation = _e.dragPropagation, dragDirectionLock = _e.dragDirectionLock;\n            // If we didn't successfully receive the gesture lock, early return.\n            if (!dragPropagation && !_this.openGlobalLock)\n                return;\n            var offset = info.offset;\n            // Attempt to detect drag direction if directionLock is true\n            if (dragDirectionLock && _this.currentDirection === null) {\n                _this.currentDirection = getCurrentDirection(offset);\n                // If we've successfully set a direction, notify listener\n                if (_this.currentDirection !== null) {\n                    (_b = (_a = _this.props).onDirectionLock) === null || _b === void 0 ? void 0 : _b.call(_a, _this.currentDirection);\n                }\n                return;\n            }\n            // Update each point with the latest position\n            _this.updateAxis(\"x\", info.point, offset);\n            _this.updateAxis(\"y\", info.point, offset);\n            // Fire onDrag event\n            (_d = (_c = _this.props).onDrag) === null || _d === void 0 ? void 0 : _d.call(_c, event, info);\n            // Update the last pointer event\n            lastPointerEvent = event;\n        };\n        var onSessionEnd = function (event, info) {\n            return _this.stop(event, info);\n        };\n        var transformPagePoint = this.props.transformPagePoint;\n        this.panSession = new PanSession(originEvent, {\n            onSessionStart: onSessionStart,\n            onStart: onStart,\n            onMove: onMove,\n            onSessionEnd: onSessionEnd,\n        }, { transformPagePoint: transformPagePoint });\n    };\n    VisualElementDragControls.prototype.resolveDragConstraints = function () {\n        var _this = this;\n        var _a = this.props, dragConstraints = _a.dragConstraints, dragElastic = _a.dragElastic;\n        var layout = this.visualElement.getLayoutState().layoutCorrected;\n        if (dragConstraints) {\n            this.constraints = isRefObject(dragConstraints)\n                ? this.resolveRefConstraints(layout, dragConstraints)\n                : calcRelativeConstraints(layout, dragConstraints);\n        }\n        else {\n            this.constraints = false;\n        }\n        this.elastic = resolveDragElastic(dragElastic);\n        /**\n         * If we're outputting to external MotionValues, we want to rebase the measured constraints\n         * from viewport-relative to component-relative.\n         */\n        if (this.constraints && !this.hasMutatedConstraints) {\n            eachAxis(function (axis) {\n                if (_this.getAxisMotionValue(axis)) {\n                    _this.constraints[axis] = rebaseAxisConstraints(layout[axis], _this.constraints[axis]);\n                }\n            });\n        }\n    };\n    VisualElementDragControls.prototype.resolveRefConstraints = function (layoutBox, constraints) {\n        var _a = this.props, onMeasureDragConstraints = _a.onMeasureDragConstraints, transformPagePoint = _a.transformPagePoint;\n        var constraintsElement = constraints.current;\n        invariant(constraintsElement !== null, \"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.\");\n        this.constraintsBox = getBoundingBox(constraintsElement, transformPagePoint);\n        var measuredConstraints = calcViewportConstraints(layoutBox, this.constraintsBox);\n        /**\n         * If there's an onMeasureDragConstraints listener we call it and\n         * if different constraints are returned, set constraints to that\n         */\n        if (onMeasureDragConstraints) {\n            var userConstraints = onMeasureDragConstraints(convertAxisBoxToBoundingBox(measuredConstraints));\n            this.hasMutatedConstraints = !!userConstraints;\n            if (userConstraints) {\n                measuredConstraints = convertBoundingBoxToAxisBox(userConstraints);\n            }\n        }\n        return measuredConstraints;\n    };\n    VisualElementDragControls.prototype.cancelDrag = function () {\n        var _a, _b;\n        this.visualElement.unlockProjectionTarget();\n        (_a = this.cancelLayout) === null || _a === void 0 ? void 0 : _a.call(this);\n        this.isDragging = false;\n        this.panSession && this.panSession.end();\n        this.panSession = null;\n        if (!this.props.dragPropagation && this.openGlobalLock) {\n            this.openGlobalLock();\n            this.openGlobalLock = null;\n        }\n        (_b = this.visualElement.animationState) === null || _b === void 0 ? void 0 : _b.setActive(AnimationType.Drag, false);\n    };\n    VisualElementDragControls.prototype.stop = function (event, info) {\n        var _a, _b, _c;\n        (_a = this.panSession) === null || _a === void 0 ? void 0 : _a.end();\n        this.panSession = null;\n        var isDragging = this.isDragging;\n        this.cancelDrag();\n        if (!isDragging)\n            return;\n        var velocity = info.velocity;\n        this.animateDragEnd(velocity);\n        (_c = (_b = this.props).onDragEnd) === null || _c === void 0 ? void 0 : _c.call(_b, event, info);\n    };\n    VisualElementDragControls.prototype.snapToCursor = function (point) {\n        var _this = this;\n        return eachAxis(function (axis) {\n            var drag = _this.props.drag;\n            // If we're not dragging this axis, do an early return.\n            if (!shouldDrag(axis, drag, _this.currentDirection))\n                return;\n            var axisValue = _this.getAxisMotionValue(axis);\n            if (axisValue) {\n                var box = _this.visualElement.getLayoutState().layout;\n                var length_1 = box[axis].max - box[axis].min;\n                var center = box[axis].min + length_1 / 2;\n                var offset = point[axis] - center;\n                _this.originPoint[axis] = point[axis];\n                axisValue.set(offset);\n            }\n            else {\n                _this.cursorProgress[axis] = 0.5;\n                return true;\n            }\n        }).includes(true);\n    };\n    /**\n     * Update the specified axis with the latest pointer information.\n     */\n    VisualElementDragControls.prototype.updateAxis = function (axis, point, offset) {\n        var drag = this.props.drag;\n        // If we're not dragging this axis, do an early return.\n        if (!shouldDrag(axis, drag, this.currentDirection))\n            return;\n        return this.getAxisMotionValue(axis)\n            ? this.updateAxisMotionValue(axis, offset)\n            : this.updateVisualElementAxis(axis, point);\n    };\n    VisualElementDragControls.prototype.updateAxisMotionValue = function (axis, offset) {\n        var axisValue = this.getAxisMotionValue(axis);\n        if (!offset || !axisValue)\n            return;\n        var nextValue = this.originPoint[axis] + offset[axis];\n        var update = this.constraints\n            ? applyConstraints(nextValue, this.constraints[axis], this.elastic[axis])\n            : nextValue;\n        axisValue.set(update);\n    };\n    VisualElementDragControls.prototype.updateVisualElementAxis = function (axis, point) {\n        var _a;\n        // Get the actual layout bounding box of the element\n        var axisLayout = this.visualElement.getLayoutState().layout[axis];\n        // Calculate its current length. In the future we might want to lerp this to animate\n        // between lengths if the layout changes as we change the DOM\n        var axisLength = axisLayout.max - axisLayout.min;\n        // Get the initial progress that the pointer sat on this axis on gesture start.\n        var axisProgress = this.cursorProgress[axis];\n        // Calculate a new min point based on the latest pointer position, constraints and elastic\n        var min = calcConstrainedMinPoint(point[axis], axisLength, axisProgress, (_a = this.constraints) === null || _a === void 0 ? void 0 : _a[axis], this.elastic[axis]);\n        // Update the axis viewport target with this new min and the length\n        this.visualElement.setProjectionTargetAxis(axis, min, min + axisLength);\n    };\n    VisualElementDragControls.prototype.setProps = function (_a) {\n        var _b = _a.drag, drag = _b === void 0 ? false : _b, _c = _a.dragDirectionLock, dragDirectionLock = _c === void 0 ? false : _c, _d = _a.dragPropagation, dragPropagation = _d === void 0 ? false : _d, _e = _a.dragConstraints, dragConstraints = _e === void 0 ? false : _e, _f = _a.dragElastic, dragElastic = _f === void 0 ? defaultElastic : _f, _g = _a.dragMomentum, dragMomentum = _g === void 0 ? true : _g, remainingProps = __rest(_a, [\"drag\", \"dragDirectionLock\", \"dragPropagation\", \"dragConstraints\", \"dragElastic\", \"dragMomentum\"]);\n        this.props = __assign({ drag: drag,\n            dragDirectionLock: dragDirectionLock,\n            dragPropagation: dragPropagation,\n            dragConstraints: dragConstraints,\n            dragElastic: dragElastic,\n            dragMomentum: dragMomentum }, remainingProps);\n    };\n    /**\n     * Drag works differently depending on which props are provided.\n     *\n     * - If _dragX and _dragY are provided, we output the gesture delta directly to those motion values.\n     * - If the component will perform layout animations, we output the gesture to the component's\n     *      visual bounding box\n     * - Otherwise, we apply the delta to the x/y motion values.\n     */\n    VisualElementDragControls.prototype.getAxisMotionValue = function (axis) {\n        var _a = this.props, layout = _a.layout, layoutId = _a.layoutId;\n        var dragKey = \"_drag\" + axis.toUpperCase();\n        if (this.props[dragKey]) {\n            return this.props[dragKey];\n        }\n        else if (!layout && layoutId === undefined) {\n            return this.visualElement.getValue(axis, 0);\n        }\n    };\n    VisualElementDragControls.prototype.isLayoutDrag = function () {\n        return !this.getAxisMotionValue(\"x\");\n    };\n    VisualElementDragControls.prototype.isExternalDrag = function () {\n        var _a = this.props, _dragX = _a._dragX, _dragY = _a._dragY;\n        return _dragX || _dragY;\n    };\n    VisualElementDragControls.prototype.animateDragEnd = function (velocity) {\n        var _this = this;\n        var _a = this.props, drag = _a.drag, dragMomentum = _a.dragMomentum, dragElastic = _a.dragElastic, dragTransition = _a.dragTransition;\n        /**\n         * Everything beyond the drag gesture should be performed with\n         * relative projection so children stay in sync with their parent element.\n         */\n        var isRelative = convertToRelativeProjection(this.visualElement, this.isLayoutDrag() && !this.isExternalDrag());\n        /**\n         * If we had previously resolved constraints relative to the viewport,\n         * we need to also convert those to a relative coordinate space for the animation\n         */\n        var constraints = this.constraints || {};\n        if (isRelative &&\n            Object.keys(constraints).length &&\n            this.isLayoutDrag()) {\n            var projectionParent = this.visualElement.getProjectionParent();\n            if (projectionParent) {\n                var relativeConstraints_1 = calcRelativeOffset(projectionParent.projection.targetFinal, constraints);\n                eachAxis(function (axis) {\n                    var _a = relativeConstraints_1[axis], min = _a.min, max = _a.max;\n                    constraints[axis] = {\n                        min: isNaN(min) ? undefined : min,\n                        max: isNaN(max) ? undefined : max,\n                    };\n                });\n            }\n        }\n        var momentumAnimations = eachAxis(function (axis) {\n            var _a;\n            if (!shouldDrag(axis, drag, _this.currentDirection)) {\n                return;\n            }\n            var transition = (_a = constraints === null || constraints === void 0 ? void 0 : constraints[axis]) !== null && _a !== void 0 ? _a : {};\n            /**\n             * Overdamp the boundary spring if `dragElastic` is disabled. There's still a frame\n             * of spring animations so we should look into adding a disable spring option to `inertia`.\n             * We could do something here where we affect the `bounceStiffness` and `bounceDamping`\n             * using the value of `dragElastic`.\n             */\n            var bounceStiffness = dragElastic ? 200 : 1000000;\n            var bounceDamping = dragElastic ? 40 : 10000000;\n            var inertia = __assign(__assign({ type: \"inertia\", velocity: dragMomentum ? velocity[axis] : 0, bounceStiffness: bounceStiffness,\n                bounceDamping: bounceDamping, timeConstant: 750, restDelta: 1, restSpeed: 10 }, dragTransition), transition);\n            // If we're not animating on an externally-provided `MotionValue` we can use the\n            // component's animation controls which will handle interactions with whileHover (etc),\n            // otherwise we just have to animate the `MotionValue` itself.\n            return _this.getAxisMotionValue(axis)\n                ? _this.startAxisValueAnimation(axis, inertia)\n                : _this.visualElement.startLayoutAnimation(axis, inertia, isRelative);\n        });\n        // Run all animations and then resolve the new drag constraints.\n        return Promise.all(momentumAnimations).then(function () {\n            var _a, _b;\n            (_b = (_a = _this.props).onDragTransitionEnd) === null || _b === void 0 ? void 0 : _b.call(_a);\n        });\n    };\n    VisualElementDragControls.prototype.stopMotion = function () {\n        var _this = this;\n        eachAxis(function (axis) {\n            var axisValue = _this.getAxisMotionValue(axis);\n            axisValue\n                ? axisValue.stop()\n                : _this.visualElement.stopLayoutAnimation();\n        });\n    };\n    VisualElementDragControls.prototype.startAxisValueAnimation = function (axis, transition) {\n        var axisValue = this.getAxisMotionValue(axis);\n        if (!axisValue)\n            return;\n        var currentValue = axisValue.get();\n        axisValue.set(currentValue);\n        axisValue.set(currentValue); // Set twice to hard-reset velocity\n        return startAnimation(axis, axisValue, 0, transition);\n    };\n    VisualElementDragControls.prototype.scalePoint = function () {\n        var _this = this;\n        var _a = this.props, drag = _a.drag, dragConstraints = _a.dragConstraints;\n        if (!isRefObject(dragConstraints) || !this.constraintsBox)\n            return;\n        // Stop any current animations as there can be some visual glitching if we resize mid animation\n        this.stopMotion();\n        // Record the relative progress of the targetBox relative to the constraintsBox\n        var boxProgress = { x: 0, y: 0 };\n        eachAxis(function (axis) {\n            boxProgress[axis] = calcOrigin(_this.visualElement.projection.target[axis], _this.constraintsBox[axis]);\n        });\n        /**\n         * For each axis, calculate the current progress of the layout axis within the constraints.\n         * Then, using the latest layout and constraints measurements, reposition the new layout axis\n         * proportionally within the constraints.\n         */\n        this.updateConstraints(function () {\n            eachAxis(function (axis) {\n                if (!shouldDrag(axis, drag, null))\n                    return;\n                // Calculate the position of the targetBox relative to the constraintsBox using the\n                // previously calculated progress\n                var _a = calcPositionFromProgress(_this.visualElement.projection.target[axis], _this.constraintsBox[axis], boxProgress[axis]), min = _a.min, max = _a.max;\n                _this.visualElement.setProjectionTargetAxis(axis, min, max);\n            });\n        });\n        /**\n         * If any other draggable components are queuing the same tasks synchronously\n         * this will wait until they've all been scheduled before flushing.\n         */\n        setTimeout(flushLayout, 1);\n    };\n    VisualElementDragControls.prototype.updateConstraints = function (onReady) {\n        var _this = this;\n        this.cancelLayout = batchLayout(function (read, write) {\n            var ancestors = collectProjectingAncestors(_this.visualElement);\n            write(function () {\n                return ancestors.forEach(function (element) { return element.resetTransform(); });\n            });\n            read(function () { return updateLayoutMeasurement(_this.visualElement); });\n            write(function () {\n                return ancestors.forEach(function (element) { return element.restoreTransform(); });\n            });\n            read(function () {\n                _this.resolveDragConstraints();\n            });\n            if (onReady)\n                write(onReady);\n        });\n    };\n    VisualElementDragControls.prototype.mount = function (visualElement) {\n        var _this = this;\n        var element = visualElement.getInstance();\n        /**\n         * Attach a pointerdown event listener on this DOM element to initiate drag tracking.\n         */\n        var stopPointerListener = addPointerEvent(element, \"pointerdown\", function (event) {\n            var _a = _this.props, drag = _a.drag, _b = _a.dragListener, dragListener = _b === void 0 ? true : _b;\n            drag && dragListener && _this.start(event);\n        });\n        /**\n         * Attach a window resize listener to scale the draggable target within its defined\n         * constraints as the window resizes.\n         */\n        var stopResizeListener = addDomEvent(window, \"resize\", function () {\n            _this.scalePoint();\n        });\n        /**\n         * Ensure drag constraints are resolved correctly relative to the dragging element\n         * whenever its layout changes.\n         */\n        var stopLayoutUpdateListener = visualElement.onLayoutUpdate(function () {\n            if (_this.isDragging) {\n                _this.resolveDragConstraints();\n            }\n        });\n        /**\n         * If the previous component with this same layoutId was dragging at the time\n         * it was unmounted, we want to continue the same gesture on this component.\n         */\n        var prevDragCursor = visualElement.prevDragCursor;\n        if (prevDragCursor) {\n            this.start(lastPointerEvent, { cursorProgress: prevDragCursor });\n        }\n        /**\n         * Return a function that will teardown the drag gesture\n         */\n        return function () {\n            stopPointerListener === null || stopPointerListener === void 0 ? void 0 : stopPointerListener();\n            stopResizeListener === null || stopResizeListener === void 0 ? void 0 : stopResizeListener();\n            stopLayoutUpdateListener === null || stopLayoutUpdateListener === void 0 ? void 0 : stopLayoutUpdateListener();\n            _this.cancelDrag();\n        };\n    };\n    return VisualElementDragControls;\n}());\nfunction shouldDrag(direction, drag, currentDirection) {\n    return ((drag === true || drag === direction) &&\n        (currentDirection === null || currentDirection === direction));\n}\n/**\n * Based on an x/y offset determine the current drag direction. If both axis' offsets are lower\n * than the provided threshold, return `null`.\n *\n * @param offset - The x/y offset from origin.\n * @param lockThreshold - (Optional) - the minimum absolute offset before we can determine a drag direction.\n */\nfunction getCurrentDirection(offset, lockThreshold) {\n    if (lockThreshold === void 0) { lockThreshold = 10; }\n    var direction = null;\n    if (Math.abs(offset.y) > lockThreshold) {\n        direction = \"y\";\n    }\n    else if (Math.abs(offset.x) > lockThreshold) {\n        direction = \"x\";\n    }\n    return direction;\n}\n\nexport { VisualElementDragControls, elementDragControls };\n","import { calcRelativeOffset } from '../../../motion/features/layout/utils.js';\nimport { eachAxis } from '../../../utils/each-axis.js';\nimport { removeBoxTransforms } from '../../../utils/geometry/delta-apply.js';\n\n/**\n * Returns a boolean stating whether or not we converted the projection\n * to relative projection.\n */\nfunction convertToRelativeProjection(visualElement, isLayoutDrag) {\n    if (isLayoutDrag === void 0) { isLayoutDrag = true; }\n    var projectionParent = visualElement.getProjectionParent();\n    if (!projectionParent)\n        return false;\n    var offset;\n    if (isLayoutDrag) {\n        offset = calcRelativeOffset(projectionParent.projection.target, visualElement.projection.target);\n        removeBoxTransforms(offset, projectionParent.getLatestValues());\n    }\n    else {\n        offset = calcRelativeOffset(projectionParent.getLayoutState().layout, visualElement.getLayoutState().layout);\n    }\n    eachAxis(function (axis) {\n        return visualElement.setProjectionTargetAxis(axis, offset[axis].min, offset[axis].max, true);\n    });\n    return true;\n}\n\nexport { convertToRelativeProjection };\n","import { __assign } from 'tslib';\nimport { complex } from './index.js';\nimport { floatRegex } from '../utils.js';\n\nvar maxDefaults = new Set(['brightness', 'contrast', 'saturate', 'opacity']);\nfunction applyDefaultFilter(v) {\n    var _a = v.slice(0, -1).split('('), name = _a[0], value = _a[1];\n    if (name === 'drop-shadow')\n        return v;\n    var number = (value.match(floatRegex) || [])[0];\n    if (!number)\n        return v;\n    var unit = value.replace(number, '');\n    var defaultValue = maxDefaults.has(name) ? 1 : 0;\n    if (number !== value)\n        defaultValue *= 100;\n    return name + '(' + defaultValue + unit + ')';\n}\nvar functionRegex = /([a-z-]*)\\(.*?\\)/g;\nvar filter = __assign(__assign({}, complex), { getAnimatableNone: function (v) {\n        var functions = v.match(functionRegex);\n        return functions ? functions.map(applyDefaultFilter).join(' ') : v;\n    } });\n\nexport { filter };\n","var progress = function (from, to, value) {\n    var toFromDifference = to - from;\n    return toFromDifference === 0 ? 1 : (value - from) / toFromDifference;\n};\n\nexport { progress };\n","import { __assign } from 'tslib';\nimport { isString } from '../utils.js';\n\nvar createUnitType = function (unit) { return ({\n    test: function (v) {\n        return isString(v) && v.endsWith(unit) && v.split(' ').length === 1;\n    },\n    parse: parseFloat,\n    transform: function (v) { return \"\" + v + unit; },\n}); };\nvar degrees = createUnitType('deg');\nvar percent = createUnitType('%');\nvar px = createUnitType('px');\nvar vh = createUnitType('vh');\nvar vw = createUnitType('vw');\nvar progressPercentage = __assign(__assign({}, percent), { parse: function (v) { return percent.parse(v) / 100; }, transform: function (v) { return percent.transform(v * 100); } });\n\nexport { degrees, percent, progressPercentage, px, vh, vw };\n","import { mix } from 'popmotion';\n\nfunction tweenAxis(target, prev, next, p) {\n    target.min = mix(prev.min, next.min, p);\n    target.max = mix(prev.max, next.max, p);\n}\nfunction calcRelativeOffsetAxis(parent, child) {\n    return {\n        min: child.min - parent.min,\n        max: child.max - parent.min,\n    };\n}\nfunction calcRelativeOffset(parent, child) {\n    return {\n        x: calcRelativeOffsetAxis(parent.x, child.x),\n        y: calcRelativeOffsetAxis(parent.y, child.y),\n    };\n}\nfunction checkIfParentHasChanged(prev, next) {\n    var prevId = prev.getLayoutId();\n    var nextId = next.getLayoutId();\n    return prevId !== nextId || (nextId === undefined && prev !== next);\n}\n\nexport { calcRelativeOffset, calcRelativeOffsetAxis, checkIfParentHasChanged, tweenAxis };\n","import { valueScaleCorrection } from '../../render/dom/projection/scale-correction.js';\nimport { isTransformProp, isTransformOriginProp } from '../../render/html/utils/transform.js';\n\nfunction isForcedMotionValue(key, _a) {\n    var layout = _a.layout, layoutId = _a.layoutId;\n    return (isTransformProp(key) ||\n        isTransformOriginProp(key) ||\n        ((layout || layoutId !== undefined) &&\n            (!!valueScaleCorrection[key] || key === \"opacity\")));\n}\n\nexport { isForcedMotionValue };\n","import { isString, singleColorRegex, floatRegex } from '../utils.js';\n\nvar isColorString = function (type, testProp) { return function (v) {\n    return Boolean((isString(v) && singleColorRegex.test(v) && v.startsWith(type)) ||\n        (testProp && Object.prototype.hasOwnProperty.call(v, testProp)));\n}; };\nvar splitColor = function (aName, bName, cName) { return function (v) {\n    var _a;\n    if (!isString(v))\n        return v;\n    var _b = v.match(floatRegex), a = _b[0], b = _b[1], c = _b[2], alpha = _b[3];\n    return _a = {},\n        _a[aName] = parseFloat(a),\n        _a[bName] = parseFloat(b),\n        _a[cName] = parseFloat(c),\n        _a.alpha = alpha !== undefined ? parseFloat(alpha) : 1,\n        _a;\n}; };\n\nexport { isColorString, splitColor };\n","var reverseEasing = function (easing) { return function (p) { return 1 - easing(1 - p); }; };\nvar mirrorEasing = function (easing) { return function (p) {\n    return p <= 0.5 ? easing(2 * p) / 2 : (2 - easing(2 * (1 - p))) / 2;\n}; };\nvar createExpoIn = function (power) { return function (p) { return Math.pow(p, power); }; };\nvar createBackIn = function (power) { return function (p) {\n    return p * p * ((power + 1) * p - power);\n}; };\nvar createAnticipate = function (power) {\n    var backEasing = createBackIn(power);\n    return function (p) {\n        return (p *= 2) < 1\n            ? 0.5 * backEasing(p)\n            : 0.5 * (2 - Math.pow(2, -10 * (p - 1)));\n    };\n};\n\nexport { createAnticipate, createBackIn, createExpoIn, mirrorEasing, reverseEasing };\n","import { createExpoIn, reverseEasing, mirrorEasing, createBackIn, createAnticipate } from './utils.js';\n\nvar DEFAULT_OVERSHOOT_STRENGTH = 1.525;\nvar BOUNCE_FIRST_THRESHOLD = 4.0 / 11.0;\nvar BOUNCE_SECOND_THRESHOLD = 8.0 / 11.0;\nvar BOUNCE_THIRD_THRESHOLD = 9.0 / 10.0;\nvar linear = function (p) { return p; };\nvar easeIn = createExpoIn(2);\nvar easeOut = reverseEasing(easeIn);\nvar easeInOut = mirrorEasing(easeIn);\nvar circIn = function (p) { return 1 - Math.sin(Math.acos(p)); };\nvar circOut = reverseEasing(circIn);\nvar circInOut = mirrorEasing(circOut);\nvar backIn = createBackIn(DEFAULT_OVERSHOOT_STRENGTH);\nvar backOut = reverseEasing(backIn);\nvar backInOut = mirrorEasing(backIn);\nvar anticipate = createAnticipate(DEFAULT_OVERSHOOT_STRENGTH);\nvar ca = 4356.0 / 361.0;\nvar cb = 35442.0 / 1805.0;\nvar cc = 16061.0 / 1805.0;\nvar bounceOut = function (p) {\n    if (p === 1 || p === 0)\n        return p;\n    var p2 = p * p;\n    return p < BOUNCE_FIRST_THRESHOLD\n        ? 7.5625 * p2\n        : p < BOUNCE_SECOND_THRESHOLD\n            ? 9.075 * p2 - 9.9 * p + 3.4\n            : p < BOUNCE_THIRD_THRESHOLD\n                ? ca * p2 - cb * p + cc\n                : 10.8 * p * p - 20.52 * p + 10.72;\n};\nvar bounceIn = reverseEasing(bounceOut);\nvar bounceInOut = function (p) {\n    return p < 0.5\n        ? 0.5 * (1.0 - bounceOut(1.0 - p * 2.0))\n        : 0.5 * bounceOut(p * 2.0 - 1.0) + 0.5;\n};\n\nexport { anticipate, backIn, backInOut, backOut, bounceIn, bounceInOut, bounceOut, circIn, circInOut, circOut, easeIn, easeInOut, easeOut, linear };\n","import { px } from 'style-value-types';\n\nfunction calcOrigin(origin, offset, size) {\n    return typeof origin === \"string\"\n        ? origin\n        : px.transform(offset + size * origin);\n}\n/**\n * The SVG transform origin defaults are different to CSS and is less intuitive,\n * so we use the measured dimensions of the SVG to reconcile these.\n */\nfunction calcSVGTransformOrigin(dimensions, originX, originY) {\n    var pxOriginX = calcOrigin(originX, dimensions.x, dimensions.width);\n    var pxOriginY = calcOrigin(originY, dimensions.y, dimensions.height);\n    return pxOriginX + \" \" + pxOriginY;\n}\n\nexport { calcSVGTransformOrigin };\n","import { px } from 'style-value-types';\n\n// Convert a progress 0-1 to a pixels value based on the provided length\nvar progressToPixels = function (progress, length) {\n    return px.transform(progress * length);\n};\nvar dashKeys = {\n    offset: \"stroke-dashoffset\",\n    array: \"stroke-dasharray\",\n};\nvar camelKeys = {\n    offset: \"strokeDashoffset\",\n    array: \"strokeDasharray\",\n};\n/**\n * Build SVG path properties. Uses the path's measured length to convert\n * our custom pathLength, pathSpacing and pathOffset into stroke-dashoffset\n * and stroke-dasharray attributes.\n *\n * This function is mutative to reduce per-frame GC.\n */\nfunction buildSVGPath(attrs, totalLength, length, spacing, offset, useDashCase) {\n    if (spacing === void 0) { spacing = 1; }\n    if (offset === void 0) { offset = 0; }\n    if (useDashCase === void 0) { useDashCase = true; }\n    // We use dash case when setting attributes directly to the DOM node and camel case\n    // when defining props on a React component.\n    var keys = useDashCase ? dashKeys : camelKeys;\n    // Build the dash offset\n    attrs[keys.offset] = progressToPixels(-offset, totalLength);\n    // Build the dash array\n    var pathLength = progressToPixels(length, totalLength);\n    var pathSpacing = progressToPixels(spacing, totalLength);\n    attrs[keys.array] = pathLength + \" \" + pathSpacing;\n}\n\nexport { buildSVGPath };\n","import { __rest } from 'tslib';\nimport { buildHTMLStyles } from '../../html/utils/build-styles.js';\nimport { calcSVGTransformOrigin } from './transform-origin.js';\nimport { buildSVGPath } from './path.js';\n\n/**\n * Build SVG visual attrbutes, like cx and style.transform\n */\nfunction buildSVGAttrs(state, _a, projection, layoutState, options, transformTemplate, buildProjectionTransform, buildProjectionTransformOrigin) {\n    var attrX = _a.attrX, attrY = _a.attrY, originX = _a.originX, originY = _a.originY, pathLength = _a.pathLength, _b = _a.pathSpacing, pathSpacing = _b === void 0 ? 1 : _b, _c = _a.pathOffset, pathOffset = _c === void 0 ? 0 : _c, \n    // This is object creation, which we try to avoid per-frame.\n    latest = __rest(_a, [\"attrX\", \"attrY\", \"originX\", \"originY\", \"pathLength\", \"pathSpacing\", \"pathOffset\"]);\n    buildHTMLStyles(state, latest, projection, layoutState, options, transformTemplate, buildProjectionTransform, buildProjectionTransformOrigin);\n    state.attrs = state.style;\n    state.style = {};\n    var attrs = state.attrs, style = state.style, dimensions = state.dimensions, totalPathLength = state.totalPathLength;\n    /**\n     * However, we apply transforms as CSS transforms. So if we detect a transform we take it from attrs\n     * and copy it into style.\n     */\n    if (attrs.transform) {\n        if (dimensions)\n            style.transform = attrs.transform;\n        delete attrs.transform;\n    }\n    // Parse transformOrigin\n    if (dimensions &&\n        (originX !== undefined || originY !== undefined || style.transform)) {\n        style.transformOrigin = calcSVGTransformOrigin(dimensions, originX !== undefined ? originX : 0.5, originY !== undefined ? originY : 0.5);\n    }\n    // Treat x/y not as shortcuts but as actual attributes\n    if (attrX !== undefined)\n        attrs.x = attrX;\n    if (attrY !== undefined)\n        attrs.y = attrY;\n    // Build SVG path if one has been measured\n    if (totalPathLength !== undefined && pathLength !== undefined) {\n        buildSVGPath(attrs, totalPathLength, pathLength, pathSpacing, pathOffset, false);\n    }\n}\n\nexport { buildSVGAttrs };\n"],"sourceRoot":""}